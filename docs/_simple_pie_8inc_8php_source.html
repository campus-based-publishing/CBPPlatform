<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>CBP Platform: SimplePie.inc.php Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">CBP Platform
   &#160;<span id="projectnumber">Version 1</span>
   </div>
   <div id="projectbrief">Campus-based Publishing Platform</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">SimplePie.inc.php</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php<span class="comment"></span>
<a name="l00002"></a>00002 <span class="comment">/**</span>
<a name="l00003"></a>00003 <span class="comment"> * SimplePie</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> * A PHP-Based RSS and Atom Feed Framework.</span>
<a name="l00006"></a>00006 <span class="comment"> * Takes the hard work out of managing a complete RSS/Atom solution.</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> * Copyright (c) 2004-2009, Ryan Parman and Geoffrey Sneddon</span>
<a name="l00009"></a>00009 <span class="comment"> * All rights reserved.</span>
<a name="l00010"></a>00010 <span class="comment"> *</span>
<a name="l00011"></a>00011 <span class="comment"> * Redistribution and use in source and binary forms, with or without modification, are</span>
<a name="l00012"></a>00012 <span class="comment"> * permitted provided that the following conditions are met:</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> *    * Redistributions of source code must retain the above copyright notice, this list of</span>
<a name="l00015"></a>00015 <span class="comment"> *      conditions and the following disclaimer.</span>
<a name="l00016"></a>00016 <span class="comment"> *</span>
<a name="l00017"></a>00017 <span class="comment"> *    * Redistributions in binary form must reproduce the above copyright notice, this list</span>
<a name="l00018"></a>00018 <span class="comment"> *      of conditions and the following disclaimer in the documentation and/or other materials</span>
<a name="l00019"></a>00019 <span class="comment"> *      provided with the distribution.</span>
<a name="l00020"></a>00020 <span class="comment"> *</span>
<a name="l00021"></a>00021 <span class="comment"> *    * Neither the name of the SimplePie Team nor the names of its contributors may be used</span>
<a name="l00022"></a>00022 <span class="comment"> *      to endorse or promote products derived from this software without specific prior</span>
<a name="l00023"></a>00023 <span class="comment"> *      written permission.</span>
<a name="l00024"></a>00024 <span class="comment"> *</span>
<a name="l00025"></a>00025 <span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS</span>
<a name="l00026"></a>00026 <span class="comment"> * OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY</span>
<a name="l00027"></a>00027 <span class="comment"> * AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDERS</span>
<a name="l00028"></a>00028 <span class="comment"> * AND CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR</span>
<a name="l00029"></a>00029 <span class="comment"> * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR</span>
<a name="l00030"></a>00030 <span class="comment"> * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span>
<a name="l00031"></a>00031 <span class="comment"> * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR</span>
<a name="l00032"></a>00032 <span class="comment"> * OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE</span>
<a name="l00033"></a>00033 <span class="comment"> * POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00034"></a>00034 <span class="comment"> *</span>
<a name="l00035"></a>00035 <span class="comment"> * @package SimplePie</span>
<a name="l00036"></a>00036 <span class="comment"> * @version 1.2</span>
<a name="l00037"></a>00037 <span class="comment"> * @copyright 2004-2009 Ryan Parman, Geoffrey Sneddon</span>
<a name="l00038"></a>00038 <span class="comment"> * @author Ryan Parman</span>
<a name="l00039"></a>00039 <span class="comment"> * @author Geoffrey Sneddon</span>
<a name="l00040"></a>00040 <span class="comment"> * @link http://simplepie.org/ SimplePie</span>
<a name="l00041"></a>00041 <span class="comment"> * @link http://simplepie.org/support/ Please submit all bug reports and feature requests to the SimplePie forums</span>
<a name="l00042"></a>00042 <span class="comment"> * @license http://www.opensource.org/licenses/bsd-license.php BSD License</span>
<a name="l00043"></a>00043 <span class="comment"> * @todo phpDoc comments</span>
<a name="l00044"></a>00044 <span class="comment"> */</span>
<a name="l00045"></a>00045 <span class="comment"></span>
<a name="l00046"></a>00046 <span class="comment">/**</span>
<a name="l00047"></a>00047 <span class="comment"> * SimplePie Name</span>
<a name="l00048"></a>00048 <span class="comment"> */</span>
<a name="l00049"></a>00049 define(<span class="stringliteral">&#39;SIMPLEPIE_NAME&#39;</span>, <span class="stringliteral">&#39;SimplePie&#39;</span>);
<a name="l00050"></a>00050 <span class="comment"></span>
<a name="l00051"></a>00051 <span class="comment">/**</span>
<a name="l00052"></a>00052 <span class="comment"> * SimplePie Version</span>
<a name="l00053"></a>00053 <span class="comment"> */</span>
<a name="l00054"></a>00054 define(<span class="stringliteral">&#39;SIMPLEPIE_VERSION&#39;</span>, <span class="stringliteral">&#39;1.2&#39;</span>);
<a name="l00055"></a>00055 <span class="comment"></span>
<a name="l00056"></a>00056 <span class="comment">/**</span>
<a name="l00057"></a>00057 <span class="comment"> * SimplePie Build</span>
<a name="l00058"></a>00058 <span class="comment"> */</span>
<a name="l00059"></a>00059 define(<span class="stringliteral">&#39;SIMPLEPIE_BUILD&#39;</span>, <span class="stringliteral">&#39;20090627192103&#39;</span>);
<a name="l00060"></a>00060 <span class="comment"></span>
<a name="l00061"></a>00061 <span class="comment">/**</span>
<a name="l00062"></a>00062 <span class="comment"> * SimplePie Website URL</span>
<a name="l00063"></a>00063 <span class="comment"> */</span>
<a name="l00064"></a>00064 define(<span class="stringliteral">&#39;SIMPLEPIE_URL&#39;</span>, <span class="stringliteral">&#39;http://simplepie.org&#39;</span>);
<a name="l00065"></a>00065 <span class="comment"></span>
<a name="l00066"></a>00066 <span class="comment">/**</span>
<a name="l00067"></a>00067 <span class="comment"> * SimplePie Useragent</span>
<a name="l00068"></a>00068 <span class="comment"> * @see SimplePie::set_useragent()</span>
<a name="l00069"></a>00069 <span class="comment"> */</span>
<a name="l00070"></a>00070 define(<span class="stringliteral">&#39;SIMPLEPIE_USERAGENT&#39;</span>, SIMPLEPIE_NAME . <span class="charliteral">&#39;/&#39;</span> . SIMPLEPIE_VERSION . <span class="stringliteral">&#39; (Feed Parser; &#39;</span> . SIMPLEPIE_URL . <span class="stringliteral">&#39;; Allow like Gecko) Build/&#39;</span> . SIMPLEPIE_BUILD);
<a name="l00071"></a>00071 <span class="comment"></span>
<a name="l00072"></a>00072 <span class="comment">/**</span>
<a name="l00073"></a>00073 <span class="comment"> * SimplePie Linkback</span>
<a name="l00074"></a>00074 <span class="comment"> */</span>
<a name="l00075"></a>00075 define(<span class="stringliteral">&#39;SIMPLEPIE_LINKBACK&#39;</span>, <span class="stringliteral">&#39;&lt;a href=&quot;&#39;</span> . SIMPLEPIE_URL . <span class="stringliteral">&#39;&quot; title=&quot;&#39;</span> . SIMPLEPIE_NAME . <span class="charliteral">&#39; &#39;</span> . SIMPLEPIE_VERSION . <span class="stringliteral">&#39;&quot;&gt;&#39;</span> . SIMPLEPIE_NAME . <span class="stringliteral">&#39;&lt;/a&gt;&#39;</span>);
<a name="l00076"></a>00076 <span class="comment"></span>
<a name="l00077"></a>00077 <span class="comment">/**</span>
<a name="l00078"></a>00078 <span class="comment"> * No Autodiscovery</span>
<a name="l00079"></a>00079 <span class="comment"> * @see SimplePie::set_autodiscovery_level()</span>
<a name="l00080"></a>00080 <span class="comment"> */</span>
<a name="l00081"></a>00081 define(<span class="stringliteral">&#39;SIMPLEPIE_LOCATOR_NONE&#39;</span>, 0);
<a name="l00082"></a>00082 <span class="comment"></span>
<a name="l00083"></a>00083 <span class="comment">/**</span>
<a name="l00084"></a>00084 <span class="comment"> * Feed Link Element Autodiscovery</span>
<a name="l00085"></a>00085 <span class="comment"> * @see SimplePie::set_autodiscovery_level()</span>
<a name="l00086"></a>00086 <span class="comment"> */</span>
<a name="l00087"></a>00087 define(<span class="stringliteral">&#39;SIMPLEPIE_LOCATOR_AUTODISCOVERY&#39;</span>, 1);
<a name="l00088"></a>00088 <span class="comment"></span>
<a name="l00089"></a>00089 <span class="comment">/**</span>
<a name="l00090"></a>00090 <span class="comment"> * Local Feed Extension Autodiscovery</span>
<a name="l00091"></a>00091 <span class="comment"> * @see SimplePie::set_autodiscovery_level()</span>
<a name="l00092"></a>00092 <span class="comment"> */</span>
<a name="l00093"></a>00093 define(<span class="stringliteral">&#39;SIMPLEPIE_LOCATOR_LOCAL_EXTENSION&#39;</span>, 2);
<a name="l00094"></a>00094 <span class="comment"></span>
<a name="l00095"></a>00095 <span class="comment">/**</span>
<a name="l00096"></a>00096 <span class="comment"> * Local Feed Body Autodiscovery</span>
<a name="l00097"></a>00097 <span class="comment"> * @see SimplePie::set_autodiscovery_level()</span>
<a name="l00098"></a>00098 <span class="comment"> */</span>
<a name="l00099"></a>00099 define(<span class="stringliteral">&#39;SIMPLEPIE_LOCATOR_LOCAL_BODY&#39;</span>, 4);
<a name="l00100"></a>00100 <span class="comment"></span>
<a name="l00101"></a>00101 <span class="comment">/**</span>
<a name="l00102"></a>00102 <span class="comment"> * Remote Feed Extension Autodiscovery</span>
<a name="l00103"></a>00103 <span class="comment"> * @see SimplePie::set_autodiscovery_level()</span>
<a name="l00104"></a>00104 <span class="comment"> */</span>
<a name="l00105"></a>00105 define(<span class="stringliteral">&#39;SIMPLEPIE_LOCATOR_REMOTE_EXTENSION&#39;</span>, 8);
<a name="l00106"></a>00106 <span class="comment"></span>
<a name="l00107"></a>00107 <span class="comment">/**</span>
<a name="l00108"></a>00108 <span class="comment"> * Remote Feed Body Autodiscovery</span>
<a name="l00109"></a>00109 <span class="comment"> * @see SimplePie::set_autodiscovery_level()</span>
<a name="l00110"></a>00110 <span class="comment"> */</span>
<a name="l00111"></a>00111 define(<span class="stringliteral">&#39;SIMPLEPIE_LOCATOR_REMOTE_BODY&#39;</span>, 16);
<a name="l00112"></a>00112 <span class="comment"></span>
<a name="l00113"></a>00113 <span class="comment">/**</span>
<a name="l00114"></a>00114 <span class="comment"> * All Feed Autodiscovery</span>
<a name="l00115"></a>00115 <span class="comment"> * @see SimplePie::set_autodiscovery_level()</span>
<a name="l00116"></a>00116 <span class="comment"> */</span>
<a name="l00117"></a>00117 define(<span class="stringliteral">&#39;SIMPLEPIE_LOCATOR_ALL&#39;</span>, 31);
<a name="l00118"></a>00118 <span class="comment"></span>
<a name="l00119"></a>00119 <span class="comment">/**</span>
<a name="l00120"></a>00120 <span class="comment"> * No known feed type</span>
<a name="l00121"></a>00121 <span class="comment"> */</span>
<a name="l00122"></a>00122 define(<span class="stringliteral">&#39;SIMPLEPIE_TYPE_NONE&#39;</span>, 0);
<a name="l00123"></a>00123 <span class="comment"></span>
<a name="l00124"></a>00124 <span class="comment">/**</span>
<a name="l00125"></a>00125 <span class="comment"> * RSS 0.90</span>
<a name="l00126"></a>00126 <span class="comment"> */</span>
<a name="l00127"></a>00127 define(<span class="stringliteral">&#39;SIMPLEPIE_TYPE_RSS_090&#39;</span>, 1);
<a name="l00128"></a>00128 <span class="comment"></span>
<a name="l00129"></a>00129 <span class="comment">/**</span>
<a name="l00130"></a>00130 <span class="comment"> * RSS 0.91 (Netscape)</span>
<a name="l00131"></a>00131 <span class="comment"> */</span>
<a name="l00132"></a>00132 define(<span class="stringliteral">&#39;SIMPLEPIE_TYPE_RSS_091_NETSCAPE&#39;</span>, 2);
<a name="l00133"></a>00133 <span class="comment"></span>
<a name="l00134"></a>00134 <span class="comment">/**</span>
<a name="l00135"></a>00135 <span class="comment"> * RSS 0.91 (Userland)</span>
<a name="l00136"></a>00136 <span class="comment"> */</span>
<a name="l00137"></a>00137 define(<span class="stringliteral">&#39;SIMPLEPIE_TYPE_RSS_091_USERLAND&#39;</span>, 4);
<a name="l00138"></a>00138 <span class="comment"></span>
<a name="l00139"></a>00139 <span class="comment">/**</span>
<a name="l00140"></a>00140 <span class="comment"> * RSS 0.91 (both Netscape and Userland)</span>
<a name="l00141"></a>00141 <span class="comment"> */</span>
<a name="l00142"></a>00142 define(<span class="stringliteral">&#39;SIMPLEPIE_TYPE_RSS_091&#39;</span>, 6);
<a name="l00143"></a>00143 <span class="comment"></span>
<a name="l00144"></a>00144 <span class="comment">/**</span>
<a name="l00145"></a>00145 <span class="comment"> * RSS 0.92</span>
<a name="l00146"></a>00146 <span class="comment"> */</span>
<a name="l00147"></a>00147 define(<span class="stringliteral">&#39;SIMPLEPIE_TYPE_RSS_092&#39;</span>, 8);
<a name="l00148"></a>00148 <span class="comment"></span>
<a name="l00149"></a>00149 <span class="comment">/**</span>
<a name="l00150"></a>00150 <span class="comment"> * RSS 0.93</span>
<a name="l00151"></a>00151 <span class="comment"> */</span>
<a name="l00152"></a>00152 define(<span class="stringliteral">&#39;SIMPLEPIE_TYPE_RSS_093&#39;</span>, 16);
<a name="l00153"></a>00153 <span class="comment"></span>
<a name="l00154"></a>00154 <span class="comment">/**</span>
<a name="l00155"></a>00155 <span class="comment"> * RSS 0.94</span>
<a name="l00156"></a>00156 <span class="comment"> */</span>
<a name="l00157"></a>00157 define(<span class="stringliteral">&#39;SIMPLEPIE_TYPE_RSS_094&#39;</span>, 32);
<a name="l00158"></a>00158 <span class="comment"></span>
<a name="l00159"></a>00159 <span class="comment">/**</span>
<a name="l00160"></a>00160 <span class="comment"> * RSS 1.0</span>
<a name="l00161"></a>00161 <span class="comment"> */</span>
<a name="l00162"></a>00162 define(<span class="stringliteral">&#39;SIMPLEPIE_TYPE_RSS_10&#39;</span>, 64);
<a name="l00163"></a>00163 <span class="comment"></span>
<a name="l00164"></a>00164 <span class="comment">/**</span>
<a name="l00165"></a>00165 <span class="comment"> * RSS 2.0</span>
<a name="l00166"></a>00166 <span class="comment"> */</span>
<a name="l00167"></a>00167 define(<span class="stringliteral">&#39;SIMPLEPIE_TYPE_RSS_20&#39;</span>, 128);
<a name="l00168"></a>00168 <span class="comment"></span>
<a name="l00169"></a>00169 <span class="comment">/**</span>
<a name="l00170"></a>00170 <span class="comment"> * RDF-based RSS</span>
<a name="l00171"></a>00171 <span class="comment"> */</span>
<a name="l00172"></a>00172 define(<span class="stringliteral">&#39;SIMPLEPIE_TYPE_RSS_RDF&#39;</span>, 65);
<a name="l00173"></a>00173 <span class="comment"></span>
<a name="l00174"></a>00174 <span class="comment">/**</span>
<a name="l00175"></a>00175 <span class="comment"> * Non-RDF-based RSS (truly intended as syndication format)</span>
<a name="l00176"></a>00176 <span class="comment"> */</span>
<a name="l00177"></a>00177 define(<span class="stringliteral">&#39;SIMPLEPIE_TYPE_RSS_SYNDICATION&#39;</span>, 190);
<a name="l00178"></a>00178 <span class="comment"></span>
<a name="l00179"></a>00179 <span class="comment">/**</span>
<a name="l00180"></a>00180 <span class="comment"> * All RSS</span>
<a name="l00181"></a>00181 <span class="comment"> */</span>
<a name="l00182"></a>00182 define(<span class="stringliteral">&#39;SIMPLEPIE_TYPE_RSS_ALL&#39;</span>, 255);
<a name="l00183"></a>00183 <span class="comment"></span>
<a name="l00184"></a>00184 <span class="comment">/**</span>
<a name="l00185"></a>00185 <span class="comment"> * Atom 0.3</span>
<a name="l00186"></a>00186 <span class="comment"> */</span>
<a name="l00187"></a>00187 define(<span class="stringliteral">&#39;SIMPLEPIE_TYPE_ATOM_03&#39;</span>, 256);
<a name="l00188"></a>00188 <span class="comment"></span>
<a name="l00189"></a>00189 <span class="comment">/**</span>
<a name="l00190"></a>00190 <span class="comment"> * Atom 1.0</span>
<a name="l00191"></a>00191 <span class="comment"> */</span>
<a name="l00192"></a>00192 define(<span class="stringliteral">&#39;SIMPLEPIE_TYPE_ATOM_10&#39;</span>, 512);
<a name="l00193"></a>00193 <span class="comment"></span>
<a name="l00194"></a>00194 <span class="comment">/**</span>
<a name="l00195"></a>00195 <span class="comment"> * All Atom</span>
<a name="l00196"></a>00196 <span class="comment"> */</span>
<a name="l00197"></a>00197 define(<span class="stringliteral">&#39;SIMPLEPIE_TYPE_ATOM_ALL&#39;</span>, 768);
<a name="l00198"></a>00198 <span class="comment"></span>
<a name="l00199"></a>00199 <span class="comment">/**</span>
<a name="l00200"></a>00200 <span class="comment"> * All feed types</span>
<a name="l00201"></a>00201 <span class="comment"> */</span>
<a name="l00202"></a>00202 define(<span class="stringliteral">&#39;SIMPLEPIE_TYPE_ALL&#39;</span>, 1023);
<a name="l00203"></a>00203 <span class="comment"></span>
<a name="l00204"></a>00204 <span class="comment">/**</span>
<a name="l00205"></a>00205 <span class="comment"> * No construct</span>
<a name="l00206"></a>00206 <span class="comment"> */</span>
<a name="l00207"></a>00207 define(<span class="stringliteral">&#39;SIMPLEPIE_CONSTRUCT_NONE&#39;</span>, 0);
<a name="l00208"></a>00208 <span class="comment"></span>
<a name="l00209"></a>00209 <span class="comment">/**</span>
<a name="l00210"></a>00210 <span class="comment"> * Text construct</span>
<a name="l00211"></a>00211 <span class="comment"> */</span>
<a name="l00212"></a>00212 define(<span class="stringliteral">&#39;SIMPLEPIE_CONSTRUCT_TEXT&#39;</span>, 1);
<a name="l00213"></a>00213 <span class="comment"></span>
<a name="l00214"></a>00214 <span class="comment">/**</span>
<a name="l00215"></a>00215 <span class="comment"> * HTML construct</span>
<a name="l00216"></a>00216 <span class="comment"> */</span>
<a name="l00217"></a>00217 define(<span class="stringliteral">&#39;SIMPLEPIE_CONSTRUCT_HTML&#39;</span>, 2);
<a name="l00218"></a>00218 <span class="comment"></span>
<a name="l00219"></a>00219 <span class="comment">/**</span>
<a name="l00220"></a>00220 <span class="comment"> * XHTML construct</span>
<a name="l00221"></a>00221 <span class="comment"> */</span>
<a name="l00222"></a>00222 define(<span class="stringliteral">&#39;SIMPLEPIE_CONSTRUCT_XHTML&#39;</span>, 4);
<a name="l00223"></a>00223 <span class="comment"></span>
<a name="l00224"></a>00224 <span class="comment">/**</span>
<a name="l00225"></a>00225 <span class="comment"> * base64-encoded construct</span>
<a name="l00226"></a>00226 <span class="comment"> */</span>
<a name="l00227"></a>00227 define(<span class="stringliteral">&#39;SIMPLEPIE_CONSTRUCT_BASE64&#39;</span>, 8);
<a name="l00228"></a>00228 <span class="comment"></span>
<a name="l00229"></a>00229 <span class="comment">/**</span>
<a name="l00230"></a>00230 <span class="comment"> * IRI construct</span>
<a name="l00231"></a>00231 <span class="comment"> */</span>
<a name="l00232"></a>00232 define(<span class="stringliteral">&#39;SIMPLEPIE_CONSTRUCT_IRI&#39;</span>, 16);
<a name="l00233"></a>00233 <span class="comment"></span>
<a name="l00234"></a>00234 <span class="comment">/**</span>
<a name="l00235"></a>00235 <span class="comment"> * A construct that might be HTML</span>
<a name="l00236"></a>00236 <span class="comment"> */</span>
<a name="l00237"></a>00237 define(<span class="stringliteral">&#39;SIMPLEPIE_CONSTRUCT_MAYBE_HTML&#39;</span>, 32);
<a name="l00238"></a>00238 <span class="comment"></span>
<a name="l00239"></a>00239 <span class="comment">/**</span>
<a name="l00240"></a>00240 <span class="comment"> * All constructs</span>
<a name="l00241"></a>00241 <span class="comment"> */</span>
<a name="l00242"></a>00242 define(<span class="stringliteral">&#39;SIMPLEPIE_CONSTRUCT_ALL&#39;</span>, 63);
<a name="l00243"></a>00243 <span class="comment"></span>
<a name="l00244"></a>00244 <span class="comment">/**</span>
<a name="l00245"></a>00245 <span class="comment"> * Don&#39;t change case</span>
<a name="l00246"></a>00246 <span class="comment"> */</span>
<a name="l00247"></a>00247 define(<span class="stringliteral">&#39;SIMPLEPIE_SAME_CASE&#39;</span>, 1);
<a name="l00248"></a>00248 <span class="comment"></span>
<a name="l00249"></a>00249 <span class="comment">/**</span>
<a name="l00250"></a>00250 <span class="comment"> * Change to lowercase</span>
<a name="l00251"></a>00251 <span class="comment"> */</span>
<a name="l00252"></a>00252 define(<span class="stringliteral">&#39;SIMPLEPIE_LOWERCASE&#39;</span>, 2);
<a name="l00253"></a>00253 <span class="comment"></span>
<a name="l00254"></a>00254 <span class="comment">/**</span>
<a name="l00255"></a>00255 <span class="comment"> * Change to uppercase</span>
<a name="l00256"></a>00256 <span class="comment"> */</span>
<a name="l00257"></a>00257 define(<span class="stringliteral">&#39;SIMPLEPIE_UPPERCASE&#39;</span>, 4);
<a name="l00258"></a>00258 <span class="comment"></span>
<a name="l00259"></a>00259 <span class="comment">/**</span>
<a name="l00260"></a>00260 <span class="comment"> * PCRE for HTML attributes</span>
<a name="l00261"></a>00261 <span class="comment"> */</span>
<a name="l00262"></a>00262 define(<span class="stringliteral">&#39;SIMPLEPIE_PCRE_HTML_ATTRIBUTE&#39;</span>, <span class="stringliteral">&#39;((?:[\x09\x0A\x0B\x0C\x0D\x20]+[^\x09\x0A\x0B\x0C\x0D\x20\x2F\x3E][^\x09\x0A\x0B\x0C\x0D\x20\x2F\x3D\x3E]*(?:[\x09\x0A\x0B\x0C\x0D\x20]*=[\x09\x0A\x0B\x0C\x0D\x20]*(?:&quot;(?:[^&quot;]*)&quot;|\&#39;(?:[^\&#39;]*)\&#39;|(?:[^\x09\x0A\x0B\x0C\x0D\x20\x22\x27\x3E][^\x09\x0A\x0B\x0C\x0D\x20\x3E]*)?))?)*)[\x09\x0A\x0B\x0C\x0D\x20]*&#39;</span>);
<a name="l00263"></a>00263 <span class="comment"></span>
<a name="l00264"></a>00264 <span class="comment">/**</span>
<a name="l00265"></a>00265 <span class="comment"> * PCRE for XML attributes</span>
<a name="l00266"></a>00266 <span class="comment"> */</span>
<a name="l00267"></a>00267 define(<span class="stringliteral">&#39;SIMPLEPIE_PCRE_XML_ATTRIBUTE&#39;</span>, <span class="stringliteral">&#39;((?:\s+(?:(?:[^\s:]+:)?[^\s:]+)\s*=\s*(?:&quot;(?:[^&quot;]*)&quot;|\&#39;(?:[^\&#39;]*)\&#39;))*)\s*&#39;</span>);
<a name="l00268"></a>00268 <span class="comment"></span>
<a name="l00269"></a>00269 <span class="comment">/**</span>
<a name="l00270"></a>00270 <span class="comment"> * XML Namespace</span>
<a name="l00271"></a>00271 <span class="comment"> */</span>
<a name="l00272"></a>00272 define(<span class="stringliteral">&#39;SIMPLEPIE_NAMESPACE_XML&#39;</span>, <span class="stringliteral">&#39;http://www.w3.org/XML/1998/namespace&#39;</span>);
<a name="l00273"></a>00273 <span class="comment"></span>
<a name="l00274"></a>00274 <span class="comment">/**</span>
<a name="l00275"></a>00275 <span class="comment"> * Atom 1.0 Namespace</span>
<a name="l00276"></a>00276 <span class="comment"> */</span>
<a name="l00277"></a>00277 define(<span class="stringliteral">&#39;SIMPLEPIE_NAMESPACE_ATOM_10&#39;</span>, <span class="stringliteral">&#39;http://www.w3.org/2005/Atom&#39;</span>);
<a name="l00278"></a>00278 <span class="comment"></span>
<a name="l00279"></a>00279 <span class="comment">/**</span>
<a name="l00280"></a>00280 <span class="comment"> * Atom 0.3 Namespace</span>
<a name="l00281"></a>00281 <span class="comment"> */</span>
<a name="l00282"></a>00282 define(<span class="stringliteral">&#39;SIMPLEPIE_NAMESPACE_ATOM_03&#39;</span>, <span class="stringliteral">&#39;http://purl.org/atom/ns#&#39;</span>);
<a name="l00283"></a>00283 <span class="comment"></span>
<a name="l00284"></a>00284 <span class="comment">/**</span>
<a name="l00285"></a>00285 <span class="comment"> * RDF Namespace</span>
<a name="l00286"></a>00286 <span class="comment"> */</span>
<a name="l00287"></a>00287 define(<span class="stringliteral">&#39;SIMPLEPIE_NAMESPACE_RDF&#39;</span>, <span class="stringliteral">&#39;http://www.w3.org/1999/02/22-rdf-syntax-ns#&#39;</span>);
<a name="l00288"></a>00288 <span class="comment"></span>
<a name="l00289"></a>00289 <span class="comment">/**</span>
<a name="l00290"></a>00290 <span class="comment"> * RSS 0.90 Namespace</span>
<a name="l00291"></a>00291 <span class="comment"> */</span>
<a name="l00292"></a>00292 define(<span class="stringliteral">&#39;SIMPLEPIE_NAMESPACE_RSS_090&#39;</span>, <span class="stringliteral">&#39;http://my.netscape.com/rdf/simple/0.9/&#39;</span>);
<a name="l00293"></a>00293 <span class="comment"></span>
<a name="l00294"></a>00294 <span class="comment">/**</span>
<a name="l00295"></a>00295 <span class="comment"> * RSS 1.0 Namespace</span>
<a name="l00296"></a>00296 <span class="comment"> */</span>
<a name="l00297"></a>00297 define(<span class="stringliteral">&#39;SIMPLEPIE_NAMESPACE_RSS_10&#39;</span>, <span class="stringliteral">&#39;http://purl.org/rss/1.0/&#39;</span>);
<a name="l00298"></a>00298 <span class="comment"></span>
<a name="l00299"></a>00299 <span class="comment">/**</span>
<a name="l00300"></a>00300 <span class="comment"> * RSS 1.0 Content Module Namespace</span>
<a name="l00301"></a>00301 <span class="comment"> */</span>
<a name="l00302"></a>00302 define(<span class="stringliteral">&#39;SIMPLEPIE_NAMESPACE_RSS_10_MODULES_CONTENT&#39;</span>, <span class="stringliteral">&#39;http://purl.org/rss/1.0/modules/content/&#39;</span>);
<a name="l00303"></a>00303 <span class="comment"></span>
<a name="l00304"></a>00304 <span class="comment">/**</span>
<a name="l00305"></a>00305 <span class="comment"> * RSS 2.0 Namespace</span>
<a name="l00306"></a>00306 <span class="comment"> * (Stupid, I know, but I&#39;m certain it will confuse people less with support.)</span>
<a name="l00307"></a>00307 <span class="comment"> */</span>
<a name="l00308"></a>00308 define(<span class="stringliteral">&#39;SIMPLEPIE_NAMESPACE_RSS_20&#39;</span>, <span class="stringliteral">&#39;&#39;</span>);
<a name="l00309"></a>00309 <span class="comment"></span>
<a name="l00310"></a>00310 <span class="comment">/**</span>
<a name="l00311"></a>00311 <span class="comment"> * DC 1.0 Namespace</span>
<a name="l00312"></a>00312 <span class="comment"> */</span>
<a name="l00313"></a>00313 define(<span class="stringliteral">&#39;SIMPLEPIE_NAMESPACE_DC_10&#39;</span>, <span class="stringliteral">&#39;http://purl.org/dc/elements/1.0/&#39;</span>);
<a name="l00314"></a>00314 <span class="comment"></span>
<a name="l00315"></a>00315 <span class="comment">/**</span>
<a name="l00316"></a>00316 <span class="comment"> * DC 1.1 Namespace</span>
<a name="l00317"></a>00317 <span class="comment"> */</span>
<a name="l00318"></a>00318 define(<span class="stringliteral">&#39;SIMPLEPIE_NAMESPACE_DC_11&#39;</span>, <span class="stringliteral">&#39;http://purl.org/dc/elements/1.1/&#39;</span>);
<a name="l00319"></a>00319 <span class="comment"></span>
<a name="l00320"></a>00320 <span class="comment">/**</span>
<a name="l00321"></a>00321 <span class="comment"> * W3C Basic Geo (WGS84 lat/long) Vocabulary Namespace</span>
<a name="l00322"></a>00322 <span class="comment"> */</span>
<a name="l00323"></a>00323 define(<span class="stringliteral">&#39;SIMPLEPIE_NAMESPACE_W3C_BASIC_GEO&#39;</span>, <span class="stringliteral">&#39;http://www.w3.org/2003/01/geo/wgs84_pos#&#39;</span>);
<a name="l00324"></a>00324 <span class="comment"></span>
<a name="l00325"></a>00325 <span class="comment">/**</span>
<a name="l00326"></a>00326 <span class="comment"> * GeoRSS Namespace</span>
<a name="l00327"></a>00327 <span class="comment"> */</span>
<a name="l00328"></a>00328 define(<span class="stringliteral">&#39;SIMPLEPIE_NAMESPACE_GEORSS&#39;</span>, <span class="stringliteral">&#39;http://www.georss.org/georss&#39;</span>);
<a name="l00329"></a>00329 <span class="comment"></span>
<a name="l00330"></a>00330 <span class="comment">/**</span>
<a name="l00331"></a>00331 <span class="comment"> * Media RSS Namespace</span>
<a name="l00332"></a>00332 <span class="comment"> */</span>
<a name="l00333"></a>00333 define(<span class="stringliteral">&#39;SIMPLEPIE_NAMESPACE_MEDIARSS&#39;</span>, <span class="stringliteral">&#39;http://search.yahoo.com/mrss/&#39;</span>);
<a name="l00334"></a>00334 <span class="comment"></span>
<a name="l00335"></a>00335 <span class="comment">/**</span>
<a name="l00336"></a>00336 <span class="comment"> * Wrong Media RSS Namespace</span>
<a name="l00337"></a>00337 <span class="comment"> */</span>
<a name="l00338"></a>00338 define(<span class="stringliteral">&#39;SIMPLEPIE_NAMESPACE_MEDIARSS_WRONG&#39;</span>, <span class="stringliteral">&#39;http://search.yahoo.com/mrss&#39;</span>);
<a name="l00339"></a>00339 <span class="comment"></span>
<a name="l00340"></a>00340 <span class="comment">/**</span>
<a name="l00341"></a>00341 <span class="comment"> * iTunes RSS Namespace</span>
<a name="l00342"></a>00342 <span class="comment"> */</span>
<a name="l00343"></a>00343 define(<span class="stringliteral">&#39;SIMPLEPIE_NAMESPACE_ITUNES&#39;</span>, <span class="stringliteral">&#39;http://www.itunes.com/dtds/podcast-1.0.dtd&#39;</span>);
<a name="l00344"></a>00344 <span class="comment"></span>
<a name="l00345"></a>00345 <span class="comment">/**</span>
<a name="l00346"></a>00346 <span class="comment"> * XHTML Namespace</span>
<a name="l00347"></a>00347 <span class="comment"> */</span>
<a name="l00348"></a>00348 define(<span class="stringliteral">&#39;SIMPLEPIE_NAMESPACE_XHTML&#39;</span>, <span class="stringliteral">&#39;http://www.w3.org/1999/xhtml&#39;</span>);
<a name="l00349"></a>00349 <span class="comment"></span>
<a name="l00350"></a>00350 <span class="comment">/**</span>
<a name="l00351"></a>00351 <span class="comment"> * IANA Link Relations Registry</span>
<a name="l00352"></a>00352 <span class="comment"> */</span>
<a name="l00353"></a>00353 define(<span class="stringliteral">&#39;SIMPLEPIE_IANA_LINK_RELATIONS_REGISTRY&#39;</span>, <span class="stringliteral">&#39;http://www.iana.org/assignments/relation/&#39;</span>);
<a name="l00354"></a>00354 <span class="comment"></span>
<a name="l00355"></a>00355 <span class="comment">/**</span>
<a name="l00356"></a>00356 <span class="comment"> * Whether we&#39;re running on PHP5</span>
<a name="l00357"></a>00357 <span class="comment"> */</span>
<a name="l00358"></a>00358 define(<span class="stringliteral">&#39;SIMPLEPIE_PHP5&#39;</span>, version_compare(PHP_VERSION, <span class="stringliteral">&#39;5.0.0&#39;</span>, <span class="stringliteral">&#39;&gt;=&#39;</span>));
<a name="l00359"></a>00359 <span class="comment"></span>
<a name="l00360"></a>00360 <span class="comment">/**</span>
<a name="l00361"></a>00361 <span class="comment"> * No file source</span>
<a name="l00362"></a>00362 <span class="comment"> */</span>
<a name="l00363"></a>00363 define(<span class="stringliteral">&#39;SIMPLEPIE_FILE_SOURCE_NONE&#39;</span>, 0);
<a name="l00364"></a>00364 <span class="comment"></span>
<a name="l00365"></a>00365 <span class="comment">/**</span>
<a name="l00366"></a>00366 <span class="comment"> * Remote file source</span>
<a name="l00367"></a>00367 <span class="comment"> */</span>
<a name="l00368"></a>00368 define(<span class="stringliteral">&#39;SIMPLEPIE_FILE_SOURCE_REMOTE&#39;</span>, 1);
<a name="l00369"></a>00369 <span class="comment"></span>
<a name="l00370"></a>00370 <span class="comment">/**</span>
<a name="l00371"></a>00371 <span class="comment"> * Local file source</span>
<a name="l00372"></a>00372 <span class="comment"> */</span>
<a name="l00373"></a>00373 define(<span class="stringliteral">&#39;SIMPLEPIE_FILE_SOURCE_LOCAL&#39;</span>, 2);
<a name="l00374"></a>00374 <span class="comment"></span>
<a name="l00375"></a>00375 <span class="comment">/**</span>
<a name="l00376"></a>00376 <span class="comment"> * fsockopen() file source</span>
<a name="l00377"></a>00377 <span class="comment"> */</span>
<a name="l00378"></a>00378 define(<span class="stringliteral">&#39;SIMPLEPIE_FILE_SOURCE_FSOCKOPEN&#39;</span>, 4);
<a name="l00379"></a>00379 <span class="comment"></span>
<a name="l00380"></a>00380 <span class="comment">/**</span>
<a name="l00381"></a>00381 <span class="comment"> * cURL file source</span>
<a name="l00382"></a>00382 <span class="comment"> */</span>
<a name="l00383"></a>00383 define(<span class="stringliteral">&#39;SIMPLEPIE_FILE_SOURCE_CURL&#39;</span>, 8);
<a name="l00384"></a>00384 <span class="comment"></span>
<a name="l00385"></a>00385 <span class="comment">/**</span>
<a name="l00386"></a>00386 <span class="comment"> * file_get_contents() file source</span>
<a name="l00387"></a>00387 <span class="comment"> */</span>
<a name="l00388"></a>00388 define(<span class="stringliteral">&#39;SIMPLEPIE_FILE_SOURCE_FILE_GET_CONTENTS&#39;</span>, 16);
<a name="l00389"></a>00389 <span class="comment"></span>
<a name="l00390"></a>00390 <span class="comment">/**</span>
<a name="l00391"></a>00391 <span class="comment"> * SimplePie</span>
<a name="l00392"></a>00392 <span class="comment"> *</span>
<a name="l00393"></a>00393 <span class="comment"> * @package SimplePie</span>
<a name="l00394"></a>00394 <span class="comment"> */</span>
<a name="l00395"></a><a class="code" href="class_simple_pie.html">00395</a> <span class="keyword">class </span><a class="code" href="class_simple_pie.html">SimplePie</a>
<a name="l00396"></a>00396 {<span class="comment"></span>
<a name="l00397"></a>00397 <span class="comment">   /**</span>
<a name="l00398"></a>00398 <span class="comment">    * @var array Raw data</span>
<a name="l00399"></a>00399 <span class="comment">    * @access private</span>
<a name="l00400"></a>00400 <span class="comment">    */</span>
<a name="l00401"></a>00401    var $data = array();
<a name="l00402"></a>00402 <span class="comment"></span>
<a name="l00403"></a>00403 <span class="comment">   /**</span>
<a name="l00404"></a>00404 <span class="comment">    * @var mixed Error string</span>
<a name="l00405"></a>00405 <span class="comment">    * @access private</span>
<a name="l00406"></a>00406 <span class="comment">    */</span>
<a name="l00407"></a>00407    var $error;
<a name="l00408"></a>00408 <span class="comment"></span>
<a name="l00409"></a>00409 <span class="comment">   /**</span>
<a name="l00410"></a>00410 <span class="comment">    * @var object Instance of SimplePie_Sanitize (or other class)</span>
<a name="l00411"></a>00411 <span class="comment">    * @see SimplePie::set_sanitize_class()</span>
<a name="l00412"></a>00412 <span class="comment">    * @access private</span>
<a name="l00413"></a>00413 <span class="comment">    */</span>
<a name="l00414"></a>00414    var $sanitize;
<a name="l00415"></a>00415 <span class="comment"></span>
<a name="l00416"></a>00416 <span class="comment">   /**</span>
<a name="l00417"></a>00417 <span class="comment">    * @var string SimplePie Useragent</span>
<a name="l00418"></a>00418 <span class="comment">    * @see SimplePie::set_useragent()</span>
<a name="l00419"></a>00419 <span class="comment">    * @access private</span>
<a name="l00420"></a>00420 <span class="comment">    */</span>
<a name="l00421"></a>00421    var $useragent = SIMPLEPIE_USERAGENT;
<a name="l00422"></a>00422 <span class="comment"></span>
<a name="l00423"></a>00423 <span class="comment">   /**</span>
<a name="l00424"></a>00424 <span class="comment">    * @var string Feed URL</span>
<a name="l00425"></a>00425 <span class="comment">    * @see SimplePie::set_feed_url()</span>
<a name="l00426"></a>00426 <span class="comment">    * @access private</span>
<a name="l00427"></a>00427 <span class="comment">    */</span>
<a name="l00428"></a>00428    var $feed_url;
<a name="l00429"></a>00429 <span class="comment"></span>
<a name="l00430"></a>00430 <span class="comment">   /**</span>
<a name="l00431"></a>00431 <span class="comment">    * @var object Instance of SimplePie_File to use as a feed</span>
<a name="l00432"></a>00432 <span class="comment">    * @see SimplePie::set_file()</span>
<a name="l00433"></a>00433 <span class="comment">    * @access private</span>
<a name="l00434"></a>00434 <span class="comment">    */</span>
<a name="l00435"></a>00435    var $file;
<a name="l00436"></a>00436 <span class="comment"></span>
<a name="l00437"></a>00437 <span class="comment">   /**</span>
<a name="l00438"></a>00438 <span class="comment">    * @var string Raw feed data</span>
<a name="l00439"></a>00439 <span class="comment">    * @see SimplePie::set_raw_data()</span>
<a name="l00440"></a>00440 <span class="comment">    * @access private</span>
<a name="l00441"></a>00441 <span class="comment">    */</span>
<a name="l00442"></a>00442    var $raw_data;
<a name="l00443"></a>00443 <span class="comment"></span>
<a name="l00444"></a>00444 <span class="comment">   /**</span>
<a name="l00445"></a>00445 <span class="comment">    * @var int Timeout for fetching remote files</span>
<a name="l00446"></a>00446 <span class="comment">    * @see SimplePie::set_timeout()</span>
<a name="l00447"></a>00447 <span class="comment">    * @access private</span>
<a name="l00448"></a>00448 <span class="comment">    */</span>
<a name="l00449"></a>00449    var $timeout = 10;
<a name="l00450"></a>00450 <span class="comment"></span>
<a name="l00451"></a>00451 <span class="comment">   /**</span>
<a name="l00452"></a>00452 <span class="comment">    * @var bool Forces fsockopen() to be used for remote files instead</span>
<a name="l00453"></a>00453 <span class="comment">    * of cURL, even if a new enough version is installed</span>
<a name="l00454"></a>00454 <span class="comment">    * @see SimplePie::force_fsockopen()</span>
<a name="l00455"></a>00455 <span class="comment">    * @access private</span>
<a name="l00456"></a>00456 <span class="comment">    */</span>
<a name="l00457"></a>00457    var $force_fsockopen = <span class="keyword">false</span>;
<a name="l00458"></a>00458 <span class="comment"></span>
<a name="l00459"></a>00459 <span class="comment">   /**</span>
<a name="l00460"></a>00460 <span class="comment">    * @var bool Force the given data/URL to be treated as a feed no matter what</span>
<a name="l00461"></a>00461 <span class="comment">    * it appears like</span>
<a name="l00462"></a>00462 <span class="comment">    * @see SimplePie::force_feed()</span>
<a name="l00463"></a>00463 <span class="comment">    * @access private</span>
<a name="l00464"></a>00464 <span class="comment">    */</span>
<a name="l00465"></a>00465    var $force_feed = <span class="keyword">false</span>;
<a name="l00466"></a>00466 <span class="comment"></span>
<a name="l00467"></a>00467 <span class="comment">   /**</span>
<a name="l00468"></a>00468 <span class="comment">    * @var bool Enable/Disable XML dump</span>
<a name="l00469"></a>00469 <span class="comment">    * @see SimplePie::enable_xml_dump()</span>
<a name="l00470"></a>00470 <span class="comment">    * @access private</span>
<a name="l00471"></a>00471 <span class="comment">    */</span>
<a name="l00472"></a>00472    var $xml_dump = <span class="keyword">false</span>;
<a name="l00473"></a>00473 <span class="comment"></span>
<a name="l00474"></a>00474 <span class="comment">   /**</span>
<a name="l00475"></a>00475 <span class="comment">    * @var bool Enable/Disable Caching</span>
<a name="l00476"></a>00476 <span class="comment">    * @see SimplePie::enable_cache()</span>
<a name="l00477"></a>00477 <span class="comment">    * @access private</span>
<a name="l00478"></a>00478 <span class="comment">    */</span>
<a name="l00479"></a>00479    var $cache = <span class="keyword">true</span>;
<a name="l00480"></a>00480 <span class="comment"></span>
<a name="l00481"></a>00481 <span class="comment">   /**</span>
<a name="l00482"></a>00482 <span class="comment">    * @var int Cache duration (in seconds)</span>
<a name="l00483"></a>00483 <span class="comment">    * @see SimplePie::set_cache_duration()</span>
<a name="l00484"></a>00484 <span class="comment">    * @access private</span>
<a name="l00485"></a>00485 <span class="comment">    */</span>
<a name="l00486"></a>00486    var $cache_duration = 3600;
<a name="l00487"></a>00487 <span class="comment"></span>
<a name="l00488"></a>00488 <span class="comment">   /**</span>
<a name="l00489"></a>00489 <span class="comment">    * @var int Auto-discovery cache duration (in seconds)</span>
<a name="l00490"></a>00490 <span class="comment">    * @see SimplePie::set_autodiscovery_cache_duration()</span>
<a name="l00491"></a>00491 <span class="comment">    * @access private</span>
<a name="l00492"></a>00492 <span class="comment">    */</span>
<a name="l00493"></a>00493    var $autodiscovery_cache_duration = 604800; <span class="comment">// 7 Days.</span>
<a name="l00494"></a>00494 <span class="comment"></span>
<a name="l00495"></a>00495 <span class="comment">   /**</span>
<a name="l00496"></a>00496 <span class="comment">    * @var string Cache location (relative to executing script)</span>
<a name="l00497"></a>00497 <span class="comment">    * @see SimplePie::set_cache_location()</span>
<a name="l00498"></a>00498 <span class="comment">    * @access private</span>
<a name="l00499"></a>00499 <span class="comment">    */</span>
<a name="l00500"></a>00500    var $cache_location = <span class="stringliteral">&#39;./cache&#39;</span>;
<a name="l00501"></a>00501 <span class="comment"></span>
<a name="l00502"></a>00502 <span class="comment">   /**</span>
<a name="l00503"></a>00503 <span class="comment">    * @var string Function that creates the cache filename</span>
<a name="l00504"></a>00504 <span class="comment">    * @see SimplePie::set_cache_name_function()</span>
<a name="l00505"></a>00505 <span class="comment">    * @access private</span>
<a name="l00506"></a>00506 <span class="comment">    */</span>
<a name="l00507"></a>00507    var $cache_name_function = <span class="stringliteral">&#39;md5&#39;</span>;
<a name="l00508"></a>00508 <span class="comment"></span>
<a name="l00509"></a>00509 <span class="comment">   /**</span>
<a name="l00510"></a>00510 <span class="comment">    * @var bool Reorder feed by date descending</span>
<a name="l00511"></a>00511 <span class="comment">    * @see SimplePie::enable_order_by_date()</span>
<a name="l00512"></a>00512 <span class="comment">    * @access private</span>
<a name="l00513"></a>00513 <span class="comment">    */</span>
<a name="l00514"></a>00514    var $order_by_date = <span class="keyword">true</span>;
<a name="l00515"></a>00515 <span class="comment"></span>
<a name="l00516"></a>00516 <span class="comment">   /**</span>
<a name="l00517"></a>00517 <span class="comment">    * @var mixed Force input encoding to be set to the follow value</span>
<a name="l00518"></a>00518 <span class="comment">    * (false, or anything type-cast to false, disables this feature)</span>
<a name="l00519"></a>00519 <span class="comment">    * @see SimplePie::set_input_encoding()</span>
<a name="l00520"></a>00520 <span class="comment">    * @access private</span>
<a name="l00521"></a>00521 <span class="comment">    */</span>
<a name="l00522"></a>00522    var $input_encoding = <span class="keyword">false</span>;
<a name="l00523"></a>00523 <span class="comment"></span>
<a name="l00524"></a>00524 <span class="comment">   /**</span>
<a name="l00525"></a>00525 <span class="comment">    * @var int Feed Autodiscovery Level</span>
<a name="l00526"></a>00526 <span class="comment">    * @see SimplePie::set_autodiscovery_level()</span>
<a name="l00527"></a>00527 <span class="comment">    * @access private</span>
<a name="l00528"></a>00528 <span class="comment">    */</span>
<a name="l00529"></a>00529    var $autodiscovery = SIMPLEPIE_LOCATOR_ALL;
<a name="l00530"></a>00530 <span class="comment"></span>
<a name="l00531"></a>00531 <span class="comment">   /**</span>
<a name="l00532"></a>00532 <span class="comment">    * @var string Class used for caching feeds</span>
<a name="l00533"></a>00533 <span class="comment">    * @see SimplePie::set_cache_class()</span>
<a name="l00534"></a>00534 <span class="comment">    * @access private</span>
<a name="l00535"></a>00535 <span class="comment">    */</span>
<a name="l00536"></a>00536    var $cache_class = <span class="stringliteral">&#39;SimplePie_Cache&#39;</span>;
<a name="l00537"></a>00537 <span class="comment"></span>
<a name="l00538"></a>00538 <span class="comment">   /**</span>
<a name="l00539"></a>00539 <span class="comment">    * @var string Class used for locating feeds</span>
<a name="l00540"></a>00540 <span class="comment">    * @see SimplePie::set_locator_class()</span>
<a name="l00541"></a>00541 <span class="comment">    * @access private</span>
<a name="l00542"></a>00542 <span class="comment">    */</span>
<a name="l00543"></a>00543    var $locator_class = <span class="stringliteral">&#39;SimplePie_Locator&#39;</span>;
<a name="l00544"></a>00544 <span class="comment"></span>
<a name="l00545"></a>00545 <span class="comment">   /**</span>
<a name="l00546"></a>00546 <span class="comment">    * @var string Class used for parsing feeds</span>
<a name="l00547"></a>00547 <span class="comment">    * @see SimplePie::set_parser_class()</span>
<a name="l00548"></a>00548 <span class="comment">    * @access private</span>
<a name="l00549"></a>00549 <span class="comment">    */</span>
<a name="l00550"></a>00550    var $parser_class = <span class="stringliteral">&#39;SimplePie_Parser&#39;</span>;
<a name="l00551"></a>00551 <span class="comment"></span>
<a name="l00552"></a>00552 <span class="comment">   /**</span>
<a name="l00553"></a>00553 <span class="comment">    * @var string Class used for fetching feeds</span>
<a name="l00554"></a>00554 <span class="comment">    * @see SimplePie::set_file_class()</span>
<a name="l00555"></a>00555 <span class="comment">    * @access private</span>
<a name="l00556"></a>00556 <span class="comment">    */</span>
<a name="l00557"></a>00557    var $file_class = <span class="stringliteral">&#39;SimplePie_File&#39;</span>;
<a name="l00558"></a>00558 <span class="comment"></span>
<a name="l00559"></a>00559 <span class="comment">   /**</span>
<a name="l00560"></a>00560 <span class="comment">    * @var string Class used for items</span>
<a name="l00561"></a>00561 <span class="comment">    * @see SimplePie::set_item_class()</span>
<a name="l00562"></a>00562 <span class="comment">    * @access private</span>
<a name="l00563"></a>00563 <span class="comment">    */</span>
<a name="l00564"></a>00564    var $item_class = <span class="stringliteral">&#39;SimplePie_Item&#39;</span>;
<a name="l00565"></a>00565 <span class="comment"></span>
<a name="l00566"></a>00566 <span class="comment">   /**</span>
<a name="l00567"></a>00567 <span class="comment">    * @var string Class used for authors</span>
<a name="l00568"></a>00568 <span class="comment">    * @see SimplePie::set_author_class()</span>
<a name="l00569"></a>00569 <span class="comment">    * @access private</span>
<a name="l00570"></a>00570 <span class="comment">    */</span>
<a name="l00571"></a>00571    var $author_class = <span class="stringliteral">&#39;SimplePie_Author&#39;</span>;
<a name="l00572"></a>00572 <span class="comment"></span>
<a name="l00573"></a>00573 <span class="comment">   /**</span>
<a name="l00574"></a>00574 <span class="comment">    * @var string Class used for categories</span>
<a name="l00575"></a>00575 <span class="comment">    * @see SimplePie::set_category_class()</span>
<a name="l00576"></a>00576 <span class="comment">    * @access private</span>
<a name="l00577"></a>00577 <span class="comment">    */</span>
<a name="l00578"></a>00578    var $category_class = <span class="stringliteral">&#39;SimplePie_Category&#39;</span>;
<a name="l00579"></a>00579 <span class="comment"></span>
<a name="l00580"></a>00580 <span class="comment">   /**</span>
<a name="l00581"></a>00581 <span class="comment">    * @var string Class used for enclosures</span>
<a name="l00582"></a>00582 <span class="comment">    * @see SimplePie::set_enclosures_class()</span>
<a name="l00583"></a>00583 <span class="comment">    * @access private</span>
<a name="l00584"></a>00584 <span class="comment">    */</span>
<a name="l00585"></a>00585    var $enclosure_class = <span class="stringliteral">&#39;SimplePie_Enclosure&#39;</span>;
<a name="l00586"></a>00586 <span class="comment"></span>
<a name="l00587"></a>00587 <span class="comment">   /**</span>
<a name="l00588"></a>00588 <span class="comment">    * @var string Class used for Media RSS &lt;media:text&gt; captions</span>
<a name="l00589"></a>00589 <span class="comment">    * @see SimplePie::set_caption_class()</span>
<a name="l00590"></a>00590 <span class="comment">    * @access private</span>
<a name="l00591"></a>00591 <span class="comment">    */</span>
<a name="l00592"></a>00592    var $caption_class = <span class="stringliteral">&#39;SimplePie_Caption&#39;</span>;
<a name="l00593"></a>00593 <span class="comment"></span>
<a name="l00594"></a>00594 <span class="comment">   /**</span>
<a name="l00595"></a>00595 <span class="comment">    * @var string Class used for Media RSS &lt;media:copyright&gt;</span>
<a name="l00596"></a>00596 <span class="comment">    * @see SimplePie::set_copyright_class()</span>
<a name="l00597"></a>00597 <span class="comment">    * @access private</span>
<a name="l00598"></a>00598 <span class="comment">    */</span>
<a name="l00599"></a>00599    var $copyright_class = <span class="stringliteral">&#39;SimplePie_Copyright&#39;</span>;
<a name="l00600"></a>00600 <span class="comment"></span>
<a name="l00601"></a>00601 <span class="comment">   /**</span>
<a name="l00602"></a>00602 <span class="comment">    * @var string Class used for Media RSS &lt;media:credit&gt;</span>
<a name="l00603"></a>00603 <span class="comment">    * @see SimplePie::set_credit_class()</span>
<a name="l00604"></a>00604 <span class="comment">    * @access private</span>
<a name="l00605"></a>00605 <span class="comment">    */</span>
<a name="l00606"></a>00606    var $credit_class = <span class="stringliteral">&#39;SimplePie_Credit&#39;</span>;
<a name="l00607"></a>00607 <span class="comment"></span>
<a name="l00608"></a>00608 <span class="comment">   /**</span>
<a name="l00609"></a>00609 <span class="comment">    * @var string Class used for Media RSS &lt;media:rating&gt;</span>
<a name="l00610"></a>00610 <span class="comment">    * @see SimplePie::set_rating_class()</span>
<a name="l00611"></a>00611 <span class="comment">    * @access private</span>
<a name="l00612"></a>00612 <span class="comment">    */</span>
<a name="l00613"></a>00613    var $rating_class = <span class="stringliteral">&#39;SimplePie_Rating&#39;</span>;
<a name="l00614"></a>00614 <span class="comment"></span>
<a name="l00615"></a>00615 <span class="comment">   /**</span>
<a name="l00616"></a>00616 <span class="comment">    * @var string Class used for Media RSS &lt;media:restriction&gt;</span>
<a name="l00617"></a>00617 <span class="comment">    * @see SimplePie::set_restriction_class()</span>
<a name="l00618"></a>00618 <span class="comment">    * @access private</span>
<a name="l00619"></a>00619 <span class="comment">    */</span>
<a name="l00620"></a>00620    var $restriction_class = <span class="stringliteral">&#39;SimplePie_Restriction&#39;</span>;
<a name="l00621"></a>00621 <span class="comment"></span>
<a name="l00622"></a>00622 <span class="comment">   /**</span>
<a name="l00623"></a>00623 <span class="comment">    * @var string Class used for content-type sniffing</span>
<a name="l00624"></a>00624 <span class="comment">    * @see SimplePie::set_content_type_sniffer_class()</span>
<a name="l00625"></a>00625 <span class="comment">    * @access private</span>
<a name="l00626"></a>00626 <span class="comment">    */</span>
<a name="l00627"></a>00627    var $content_type_sniffer_class = <span class="stringliteral">&#39;SimplePie_Content_Type_Sniffer&#39;</span>;
<a name="l00628"></a>00628 <span class="comment"></span>
<a name="l00629"></a>00629 <span class="comment">   /**</span>
<a name="l00630"></a>00630 <span class="comment">    * @var string Class used for item sources.</span>
<a name="l00631"></a>00631 <span class="comment">    * @see SimplePie::set_source_class()</span>
<a name="l00632"></a>00632 <span class="comment">    * @access private</span>
<a name="l00633"></a>00633 <span class="comment">    */</span>
<a name="l00634"></a>00634    var $source_class = <span class="stringliteral">&#39;SimplePie_Source&#39;</span>;
<a name="l00635"></a>00635 <span class="comment"></span>
<a name="l00636"></a>00636 <span class="comment">   /**</span>
<a name="l00637"></a>00637 <span class="comment">    * @var mixed Set javascript query string parameter (false, or</span>
<a name="l00638"></a>00638 <span class="comment">    * anything type-cast to false, disables this feature)</span>
<a name="l00639"></a>00639 <span class="comment">    * @see SimplePie::set_javascript()</span>
<a name="l00640"></a>00640 <span class="comment">    * @access private</span>
<a name="l00641"></a>00641 <span class="comment">    */</span>
<a name="l00642"></a>00642    var $javascript = <span class="stringliteral">&#39;js&#39;</span>;
<a name="l00643"></a>00643 <span class="comment"></span>
<a name="l00644"></a>00644 <span class="comment">   /**</span>
<a name="l00645"></a>00645 <span class="comment">    * @var int Maximum number of feeds to check with autodiscovery</span>
<a name="l00646"></a>00646 <span class="comment">    * @see SimplePie::set_max_checked_feeds()</span>
<a name="l00647"></a>00647 <span class="comment">    * @access private</span>
<a name="l00648"></a>00648 <span class="comment">    */</span>
<a name="l00649"></a>00649    var $max_checked_feeds = 10;
<a name="l00650"></a>00650 <span class="comment"></span>
<a name="l00651"></a>00651 <span class="comment">   /**</span>
<a name="l00652"></a>00652 <span class="comment">    * @var array All the feeds found during the autodiscovery process</span>
<a name="l00653"></a>00653 <span class="comment">    * @see SimplePie::get_all_discovered_feeds()</span>
<a name="l00654"></a>00654 <span class="comment">    * @access private</span>
<a name="l00655"></a>00655 <span class="comment">    */</span>
<a name="l00656"></a>00656    var $all_discovered_feeds = array();
<a name="l00657"></a>00657 <span class="comment"></span>
<a name="l00658"></a>00658 <span class="comment">   /**</span>
<a name="l00659"></a>00659 <span class="comment">    * @var string Web-accessible path to the handler_favicon.php file.</span>
<a name="l00660"></a>00660 <span class="comment">    * @see SimplePie::set_favicon_handler()</span>
<a name="l00661"></a>00661 <span class="comment">    * @access private</span>
<a name="l00662"></a>00662 <span class="comment">    */</span>
<a name="l00663"></a>00663    var $favicon_handler = <span class="stringliteral">&#39;&#39;</span>;
<a name="l00664"></a>00664 <span class="comment"></span>
<a name="l00665"></a>00665 <span class="comment">   /**</span>
<a name="l00666"></a>00666 <span class="comment">    * @var string Web-accessible path to the handler_image.php file.</span>
<a name="l00667"></a>00667 <span class="comment">    * @see SimplePie::set_image_handler()</span>
<a name="l00668"></a>00668 <span class="comment">    * @access private</span>
<a name="l00669"></a>00669 <span class="comment">    */</span>
<a name="l00670"></a>00670    var $image_handler = <span class="stringliteral">&#39;&#39;</span>;
<a name="l00671"></a>00671 <span class="comment"></span>
<a name="l00672"></a>00672 <span class="comment">   /**</span>
<a name="l00673"></a>00673 <span class="comment">    * @var array Stores the URLs when multiple feeds are being initialized.</span>
<a name="l00674"></a>00674 <span class="comment">    * @see SimplePie::set_feed_url()</span>
<a name="l00675"></a>00675 <span class="comment">    * @access private</span>
<a name="l00676"></a>00676 <span class="comment">    */</span>
<a name="l00677"></a>00677    var $multifeed_url = array();
<a name="l00678"></a>00678 <span class="comment"></span>
<a name="l00679"></a>00679 <span class="comment">   /**</span>
<a name="l00680"></a>00680 <span class="comment">    * @var array Stores SimplePie objects when multiple feeds initialized.</span>
<a name="l00681"></a>00681 <span class="comment">    * @access private</span>
<a name="l00682"></a>00682 <span class="comment">    */</span>
<a name="l00683"></a>00683    var $multifeed_objects = array();
<a name="l00684"></a>00684 <span class="comment"></span>
<a name="l00685"></a>00685 <span class="comment">   /**</span>
<a name="l00686"></a>00686 <span class="comment">    * @var array Stores the get_object_vars() array for use with multifeeds.</span>
<a name="l00687"></a>00687 <span class="comment">    * @see SimplePie::set_feed_url()</span>
<a name="l00688"></a>00688 <span class="comment">    * @access private</span>
<a name="l00689"></a>00689 <span class="comment">    */</span>
<a name="l00690"></a>00690    var $config_settings = null;
<a name="l00691"></a>00691 <span class="comment"></span>
<a name="l00692"></a>00692 <span class="comment">   /**</span>
<a name="l00693"></a>00693 <span class="comment">    * @var integer Stores the number of items to return per-feed with multifeeds.</span>
<a name="l00694"></a>00694 <span class="comment">    * @see SimplePie::set_item_limit()</span>
<a name="l00695"></a>00695 <span class="comment">    * @access private</span>
<a name="l00696"></a>00696 <span class="comment">    */</span>
<a name="l00697"></a>00697    var $item_limit = 0;
<a name="l00698"></a>00698 <span class="comment"></span>
<a name="l00699"></a>00699 <span class="comment">   /**</span>
<a name="l00700"></a>00700 <span class="comment">    * @var array Stores the default attributes to be stripped by strip_attributes().</span>
<a name="l00701"></a>00701 <span class="comment">    * @see SimplePie::strip_attributes()</span>
<a name="l00702"></a>00702 <span class="comment">    * @access private</span>
<a name="l00703"></a>00703 <span class="comment">    */</span>
<a name="l00704"></a>00704    var $strip_attributes = array(<span class="stringliteral">&#39;bgsound&#39;</span>, <span class="stringliteral">&#39;class&#39;</span>, <span class="stringliteral">&#39;expr&#39;</span>, <span class="stringliteral">&#39;id&#39;</span>, <span class="stringliteral">&#39;style&#39;</span>, <span class="stringliteral">&#39;onclick&#39;</span>, <span class="stringliteral">&#39;onerror&#39;</span>, <span class="stringliteral">&#39;onfinish&#39;</span>, <span class="stringliteral">&#39;onmouseover&#39;</span>, <span class="stringliteral">&#39;onmouseout&#39;</span>, <span class="stringliteral">&#39;onfocus&#39;</span>, <span class="stringliteral">&#39;onblur&#39;</span>, <span class="stringliteral">&#39;lowsrc&#39;</span>, <span class="stringliteral">&#39;dynsrc&#39;</span>);
<a name="l00705"></a>00705 <span class="comment"></span>
<a name="l00706"></a>00706 <span class="comment">   /**</span>
<a name="l00707"></a>00707 <span class="comment">    * @var array Stores the default tags to be stripped by strip_htmltags().</span>
<a name="l00708"></a>00708 <span class="comment">    * @see SimplePie::strip_htmltags()</span>
<a name="l00709"></a>00709 <span class="comment">    * @access private</span>
<a name="l00710"></a>00710 <span class="comment">    */</span>
<a name="l00711"></a>00711    var $strip_htmltags = array(<span class="stringliteral">&#39;base&#39;</span>, <span class="stringliteral">&#39;blink&#39;</span>, <span class="stringliteral">&#39;body&#39;</span>, <span class="stringliteral">&#39;doctype&#39;</span>, <span class="stringliteral">&#39;embed&#39;</span>, <span class="stringliteral">&#39;font&#39;</span>, <span class="stringliteral">&#39;form&#39;</span>, <span class="stringliteral">&#39;frame&#39;</span>, <span class="stringliteral">&#39;frameset&#39;</span>, <span class="stringliteral">&#39;html&#39;</span>, <span class="stringliteral">&#39;iframe&#39;</span>, <span class="stringliteral">&#39;input&#39;</span>, <span class="stringliteral">&#39;marquee&#39;</span>, <span class="stringliteral">&#39;meta&#39;</span>, <span class="stringliteral">&#39;noscript&#39;</span>, <span class="stringliteral">&#39;object&#39;</span>, <span class="stringliteral">&#39;param&#39;</span>, <span class="stringliteral">&#39;script&#39;</span>, <span class="stringliteral">&#39;style&#39;</span>);
<a name="l00712"></a>00712 <span class="comment"></span>
<a name="l00713"></a>00713 <span class="comment">   /**</span>
<a name="l00714"></a>00714 <span class="comment">    * The SimplePie class contains feed level data and options</span>
<a name="l00715"></a>00715 <span class="comment">    *</span>
<a name="l00716"></a>00716 <span class="comment">    * There are two ways that you can create a new SimplePie object. The first</span>
<a name="l00717"></a>00717 <span class="comment">    * is by passing a feed URL as a parameter to the SimplePie constructor</span>
<a name="l00718"></a>00718 <span class="comment">    * (as well as optionally setting the cache location and cache expiry). This</span>
<a name="l00719"></a>00719 <span class="comment">    * will initialise the whole feed with all of the default settings, and you</span>
<a name="l00720"></a>00720 <span class="comment">    * can begin accessing methods and properties immediately.</span>
<a name="l00721"></a>00721 <span class="comment">    *</span>
<a name="l00722"></a>00722 <span class="comment">    * The second way is to create the SimplePie object with no parameters</span>
<a name="l00723"></a>00723 <span class="comment">    * at all. This will enable you to set configuration options. After setting</span>
<a name="l00724"></a>00724 <span class="comment">    * them, you must initialise the feed using $feed-&gt;init(). At that point the</span>
<a name="l00725"></a>00725 <span class="comment">    * object&#39;s methods and properties will be available to you. This format is</span>
<a name="l00726"></a>00726 <span class="comment">    * what is used throughout this documentation.</span>
<a name="l00727"></a>00727 <span class="comment">    *</span>
<a name="l00728"></a>00728 <span class="comment">    * @access public</span>
<a name="l00729"></a>00729 <span class="comment">    * @since 1.0 Preview Release</span>
<a name="l00730"></a>00730 <span class="comment">    * @param string $feed_url This is the URL you want to parse.</span>
<a name="l00731"></a>00731 <span class="comment">    * @param string $cache_location This is where you want the cache to be stored.</span>
<a name="l00732"></a>00732 <span class="comment">    * @param int $cache_duration This is the number of seconds that you want to store the cache file for.</span>
<a name="l00733"></a>00733 <span class="comment">    */</span>
<a name="l00734"></a><a class="code" href="class_simple_pie.html#a7e1c57826f4bd9b42273b757322d4546">00734</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#a7e1c57826f4bd9b42273b757322d4546">SimplePie</a>($feed_url = null, $cache_location = null, $cache_duration = null)
<a name="l00735"></a>00735    {
<a name="l00736"></a>00736       <span class="comment">// Other objects, instances created here so we can set options on them</span>
<a name="l00737"></a>00737       $this-&gt;sanitize =&amp; <span class="keyword">new</span> <a class="code" href="class_simple_pie___sanitize.html">SimplePie_Sanitize</a>;
<a name="l00738"></a>00738 
<a name="l00739"></a>00739       <span class="comment">// Set options if they&#39;re passed to the constructor</span>
<a name="l00740"></a>00740       <span class="keywordflow">if</span> ($cache_location !== null)
<a name="l00741"></a>00741       {
<a name="l00742"></a>00742          $this-&gt;<a class="code" href="class_simple_pie.html#a9d4a1169292edd7487a15c7001ca3868">set_cache_location</a>($cache_location);
<a name="l00743"></a>00743       }
<a name="l00744"></a>00744 
<a name="l00745"></a>00745       <span class="keywordflow">if</span> ($cache_duration !== null)
<a name="l00746"></a>00746       {
<a name="l00747"></a>00747          $this-&gt;<a class="code" href="class_simple_pie.html#aeac022842de9bbb2dd47be737b8a0e4f">set_cache_duration</a>($cache_duration);
<a name="l00748"></a>00748       }
<a name="l00749"></a>00749 
<a name="l00750"></a>00750       <span class="comment">// Only init the script if we&#39;re passed a feed URL</span>
<a name="l00751"></a>00751       <span class="keywordflow">if</span> ($feed_url !== null)
<a name="l00752"></a>00752       {
<a name="l00753"></a>00753          $this-&gt;<a class="code" href="class_simple_pie.html#adf01d8a1433c8afea0afbebadd7e56e0">set_feed_url</a>($feed_url);
<a name="l00754"></a>00754          $this-&gt;init();
<a name="l00755"></a>00755       }
<a name="l00756"></a>00756    }
<a name="l00757"></a>00757 <span class="comment"></span>
<a name="l00758"></a>00758 <span class="comment">   /**</span>
<a name="l00759"></a>00759 <span class="comment">    * Used for converting object to a string</span>
<a name="l00760"></a>00760 <span class="comment">    */</span>
<a name="l00761"></a><a class="code" href="class_simple_pie.html#a7516ca30af0db3cdbf9a7739b48ce91d">00761</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#a7516ca30af0db3cdbf9a7739b48ce91d">__toString</a>()
<a name="l00762"></a>00762    {
<a name="l00763"></a>00763       <span class="keywordflow">return</span> md5(serialize($this-&gt;data));
<a name="l00764"></a>00764    }
<a name="l00765"></a>00765 <span class="comment"></span>
<a name="l00766"></a>00766 <span class="comment">   /**</span>
<a name="l00767"></a>00767 <span class="comment">    * Remove items that link back to this before destroying this object</span>
<a name="l00768"></a>00768 <span class="comment">    */</span>
<a name="l00769"></a><a class="code" href="class_simple_pie.html#a421831a265621325e1fdd19aace0c758">00769</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#a421831a265621325e1fdd19aace0c758">__destruct</a>()
<a name="l00770"></a>00770    {
<a name="l00771"></a>00771       <span class="keywordflow">if</span> ((version_compare(PHP_VERSION, <span class="stringliteral">&#39;5.3&#39;</span>, <span class="charliteral">&#39;&lt;&#39;</span>) || !gc_enabled()) &amp;&amp; !ini_get(<span class="stringliteral">&#39;zend.ze1_compatibility_mode&#39;</span>))
<a name="l00772"></a>00772       {
<a name="l00773"></a>00773          <span class="keywordflow">if</span> (!empty($this-&gt;data[<span class="stringliteral">&#39;items&#39;</span>]))
<a name="l00774"></a>00774          {
<a name="l00775"></a>00775             <span class="keywordflow">foreach</span> ($this-&gt;data[<span class="stringliteral">&#39;items&#39;</span>] as $item)
<a name="l00776"></a>00776             {
<a name="l00777"></a>00777                $item-&gt;__destruct();
<a name="l00778"></a>00778             }
<a name="l00779"></a>00779             unset($item, $this-&gt;data[<span class="stringliteral">&#39;items&#39;</span>]);
<a name="l00780"></a>00780          }
<a name="l00781"></a>00781          <span class="keywordflow">if</span> (!empty($this-&gt;data[<span class="stringliteral">&#39;ordered_items&#39;</span>]))
<a name="l00782"></a>00782          {
<a name="l00783"></a>00783             <span class="keywordflow">foreach</span> ($this-&gt;data[<span class="stringliteral">&#39;ordered_items&#39;</span>] as $item)
<a name="l00784"></a>00784             {
<a name="l00785"></a>00785                $item-&gt;__destruct();
<a name="l00786"></a>00786             }
<a name="l00787"></a>00787             unset($item, $this-&gt;data[<span class="stringliteral">&#39;ordered_items&#39;</span>]);
<a name="l00788"></a>00788          }
<a name="l00789"></a>00789       }
<a name="l00790"></a>00790    }
<a name="l00791"></a>00791 <span class="comment"></span>
<a name="l00792"></a>00792 <span class="comment">   /**</span>
<a name="l00793"></a>00793 <span class="comment">    * Force the given data/URL to be treated as a feed no matter what it</span>
<a name="l00794"></a>00794 <span class="comment">    * appears like</span>
<a name="l00795"></a>00795 <span class="comment">    *</span>
<a name="l00796"></a>00796 <span class="comment">    * @access public</span>
<a name="l00797"></a>00797 <span class="comment">    * @since 1.1</span>
<a name="l00798"></a>00798 <span class="comment">    * @param bool $enable Force the given data/URL to be treated as a feed</span>
<a name="l00799"></a>00799 <span class="comment">    */</span>
<a name="l00800"></a><a class="code" href="class_simple_pie.html#ae44505dc9d86573a27594b5facce79e6">00800</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#ae44505dc9d86573a27594b5facce79e6">force_feed</a>($enable = <span class="keyword">false</span>)
<a name="l00801"></a>00801    {
<a name="l00802"></a>00802       $this-&gt;<a class="code" href="class_simple_pie.html#ae44505dc9d86573a27594b5facce79e6">force_feed</a> = (bool) $enable;
<a name="l00803"></a>00803    }
<a name="l00804"></a>00804 <span class="comment"></span>
<a name="l00805"></a>00805 <span class="comment">   /**</span>
<a name="l00806"></a>00806 <span class="comment">    * This is the URL of the feed you want to parse.</span>
<a name="l00807"></a>00807 <span class="comment">    *</span>
<a name="l00808"></a>00808 <span class="comment">    * This allows you to enter the URL of the feed you want to parse, or the</span>
<a name="l00809"></a>00809 <span class="comment">    * website you want to try to use auto-discovery on. This takes priority</span>
<a name="l00810"></a>00810 <span class="comment">    * over any set raw data.</span>
<a name="l00811"></a>00811 <span class="comment">    *</span>
<a name="l00812"></a>00812 <span class="comment">    * You can set multiple feeds to mash together by passing an array instead</span>
<a name="l00813"></a>00813 <span class="comment">    * of a string for the $url. Remember that with each additional feed comes</span>
<a name="l00814"></a>00814 <span class="comment">    * additional processing and resources.</span>
<a name="l00815"></a>00815 <span class="comment">    *</span>
<a name="l00816"></a>00816 <span class="comment">    * @access public</span>
<a name="l00817"></a>00817 <span class="comment">    * @since 1.0 Preview Release</span>
<a name="l00818"></a>00818 <span class="comment">    * @param mixed $url This is the URL (or array of URLs) that you want to parse.</span>
<a name="l00819"></a>00819 <span class="comment">    * @see SimplePie::set_raw_data()</span>
<a name="l00820"></a>00820 <span class="comment">    */</span>
<a name="l00821"></a><a class="code" href="class_simple_pie.html#adf01d8a1433c8afea0afbebadd7e56e0">00821</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#adf01d8a1433c8afea0afbebadd7e56e0">set_feed_url</a>($url)
<a name="l00822"></a>00822    {
<a name="l00823"></a>00823       <span class="keywordflow">if</span> (is_array($url))
<a name="l00824"></a>00824       {
<a name="l00825"></a>00825          $this-&gt;multifeed_url = array();
<a name="l00826"></a>00826          <span class="keywordflow">foreach</span> ($url as $value)
<a name="l00827"></a>00827          {
<a name="l00828"></a>00828             $this-&gt;multifeed_url[] = SimplePie_Misc::fix_protocol($value, 1);
<a name="l00829"></a>00829          }
<a name="l00830"></a>00830       }
<a name="l00831"></a>00831       <span class="keywordflow">else</span>
<a name="l00832"></a>00832       {
<a name="l00833"></a>00833          $this-&gt;feed_url = SimplePie_Misc::fix_protocol($url, 1);
<a name="l00834"></a>00834       }
<a name="l00835"></a>00835    }
<a name="l00836"></a>00836 <span class="comment"></span>
<a name="l00837"></a>00837 <span class="comment">   /**</span>
<a name="l00838"></a>00838 <span class="comment">    * Provides an instance of SimplePie_File to use as a feed</span>
<a name="l00839"></a>00839 <span class="comment">    *</span>
<a name="l00840"></a>00840 <span class="comment">    * @access public</span>
<a name="l00841"></a>00841 <span class="comment">    * @param object &amp;$file Instance of SimplePie_File (or subclass)</span>
<a name="l00842"></a>00842 <span class="comment">    * @return bool True on success, false on failure</span>
<a name="l00843"></a>00843 <span class="comment">    */</span>
<a name="l00844"></a><a class="code" href="class_simple_pie.html#a588c5d71929435a9656aeefefa909b3d">00844</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#a588c5d71929435a9656aeefefa909b3d">set_file</a>(&amp;$file)
<a name="l00845"></a>00845    {
<a name="l00846"></a>00846       <span class="keywordflow">if</span> (is_a($file, <span class="stringliteral">&#39;SimplePie_File&#39;</span>))
<a name="l00847"></a>00847       {
<a name="l00848"></a>00848          $this-&gt;feed_url = $file-&gt;url;
<a name="l00849"></a>00849          $this-&gt;file =&amp; $file;
<a name="l00850"></a>00850          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00851"></a>00851       }
<a name="l00852"></a>00852       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00853"></a>00853    }
<a name="l00854"></a>00854 <span class="comment"></span>
<a name="l00855"></a>00855 <span class="comment">   /**</span>
<a name="l00856"></a>00856 <span class="comment">    * Allows you to use a string of RSS/Atom data instead of a remote feed.</span>
<a name="l00857"></a>00857 <span class="comment">    *</span>
<a name="l00858"></a>00858 <span class="comment">    * If you have a feed available as a string in PHP, you can tell SimplePie</span>
<a name="l00859"></a>00859 <span class="comment">    * to parse that data string instead of a remote feed. Any set feed URL</span>
<a name="l00860"></a>00860 <span class="comment">    * takes precedence.</span>
<a name="l00861"></a>00861 <span class="comment">    *</span>
<a name="l00862"></a>00862 <span class="comment">    * @access public</span>
<a name="l00863"></a>00863 <span class="comment">    * @since 1.0 Beta 3</span>
<a name="l00864"></a>00864 <span class="comment">    * @param string $data RSS or Atom data as a string.</span>
<a name="l00865"></a>00865 <span class="comment">    * @see SimplePie::set_feed_url()</span>
<a name="l00866"></a>00866 <span class="comment">    */</span>
<a name="l00867"></a><a class="code" href="class_simple_pie.html#abb16cbba3361730775e459ec97284227">00867</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#abb16cbba3361730775e459ec97284227">set_raw_data</a>($data)
<a name="l00868"></a>00868    {
<a name="l00869"></a>00869       $this-&gt;raw_data = $data;
<a name="l00870"></a>00870    }
<a name="l00871"></a>00871 <span class="comment"></span>
<a name="l00872"></a>00872 <span class="comment">   /**</span>
<a name="l00873"></a>00873 <span class="comment">    * Allows you to override the default timeout for fetching remote feeds.</span>
<a name="l00874"></a>00874 <span class="comment">    *</span>
<a name="l00875"></a>00875 <span class="comment">    * This allows you to change the maximum time the feed&#39;s server to respond</span>
<a name="l00876"></a>00876 <span class="comment">    * and send the feed back.</span>
<a name="l00877"></a>00877 <span class="comment">    *</span>
<a name="l00878"></a>00878 <span class="comment">    * @access public</span>
<a name="l00879"></a>00879 <span class="comment">    * @since 1.0 Beta 3</span>
<a name="l00880"></a>00880 <span class="comment">    * @param int $timeout The maximum number of seconds to spend waiting to retrieve a feed.</span>
<a name="l00881"></a>00881 <span class="comment">    */</span>
<a name="l00882"></a><a class="code" href="class_simple_pie.html#aed9c8ede24f0a7f9de8bff6f41d38f59">00882</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#aed9c8ede24f0a7f9de8bff6f41d38f59">set_timeout</a>($timeout = 10)
<a name="l00883"></a>00883    {
<a name="l00884"></a>00884       $this-&gt;timeout = (int) $timeout;
<a name="l00885"></a>00885    }
<a name="l00886"></a>00886 <span class="comment"></span>
<a name="l00887"></a>00887 <span class="comment">   /**</span>
<a name="l00888"></a>00888 <span class="comment">    * Forces SimplePie to use fsockopen() instead of the preferred cURL</span>
<a name="l00889"></a>00889 <span class="comment">    * functions.</span>
<a name="l00890"></a>00890 <span class="comment">    *</span>
<a name="l00891"></a>00891 <span class="comment">    * @access public</span>
<a name="l00892"></a>00892 <span class="comment">    * @since 1.0 Beta 3</span>
<a name="l00893"></a>00893 <span class="comment">    * @param bool $enable Force fsockopen() to be used</span>
<a name="l00894"></a>00894 <span class="comment">    */</span>
<a name="l00895"></a><a class="code" href="class_simple_pie.html#acaaac24562f1d663e4db077f9551d3d7">00895</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#acaaac24562f1d663e4db077f9551d3d7">force_fsockopen</a>($enable = <span class="keyword">false</span>)
<a name="l00896"></a>00896    {
<a name="l00897"></a>00897       $this-&gt;<a class="code" href="class_simple_pie.html#acaaac24562f1d663e4db077f9551d3d7">force_fsockopen</a> = (bool) $enable;
<a name="l00898"></a>00898    }
<a name="l00899"></a>00899 <span class="comment"></span>
<a name="l00900"></a>00900 <span class="comment">   /**</span>
<a name="l00901"></a>00901 <span class="comment">    * Outputs the raw XML content of the feed, after it has gone through</span>
<a name="l00902"></a>00902 <span class="comment">    * SimplePie&#39;s filters.</span>
<a name="l00903"></a>00903 <span class="comment">    *</span>
<a name="l00904"></a>00904 <span class="comment">    * Used only for debugging, this function will output the XML content as</span>
<a name="l00905"></a>00905 <span class="comment">    * text/xml. When SimplePie reads in a feed, it does a bit of cleaning up</span>
<a name="l00906"></a>00906 <span class="comment">    * before trying to parse it. Many parts of the feed are re-written in</span>
<a name="l00907"></a>00907 <span class="comment">    * memory, and in the end, you have a parsable feed. XML dump shows you the</span>
<a name="l00908"></a>00908 <span class="comment">    * actual XML that SimplePie tries to parse, which may or may not be very</span>
<a name="l00909"></a>00909 <span class="comment">    * different from the original feed.</span>
<a name="l00910"></a>00910 <span class="comment">    *</span>
<a name="l00911"></a>00911 <span class="comment">    * @access public</span>
<a name="l00912"></a>00912 <span class="comment">    * @since 1.0 Preview Release</span>
<a name="l00913"></a>00913 <span class="comment">    * @param bool $enable Enable XML dump</span>
<a name="l00914"></a>00914 <span class="comment">    */</span>
<a name="l00915"></a><a class="code" href="class_simple_pie.html#a8cbe2df699db11e052f58ff4cc36c973">00915</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#a8cbe2df699db11e052f58ff4cc36c973">enable_xml_dump</a>($enable = <span class="keyword">false</span>)
<a name="l00916"></a>00916    {
<a name="l00917"></a>00917       $this-&gt;xml_dump = (bool) $enable;
<a name="l00918"></a>00918    }
<a name="l00919"></a>00919 <span class="comment"></span>
<a name="l00920"></a>00920 <span class="comment">   /**</span>
<a name="l00921"></a>00921 <span class="comment">    * Enables/disables caching in SimplePie.</span>
<a name="l00922"></a>00922 <span class="comment">    *</span>
<a name="l00923"></a>00923 <span class="comment">    * This option allows you to disable caching all-together in SimplePie.</span>
<a name="l00924"></a>00924 <span class="comment">    * However, disabling the cache can lead to longer load times.</span>
<a name="l00925"></a>00925 <span class="comment">    *</span>
<a name="l00926"></a>00926 <span class="comment">    * @access public</span>
<a name="l00927"></a>00927 <span class="comment">    * @since 1.0 Preview Release</span>
<a name="l00928"></a>00928 <span class="comment">    * @param bool $enable Enable caching</span>
<a name="l00929"></a>00929 <span class="comment">    */</span>
<a name="l00930"></a><a class="code" href="class_simple_pie.html#aa56a3966ee054677a30c1eab4faeb701">00930</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#aa56a3966ee054677a30c1eab4faeb701">enable_cache</a>($enable = <span class="keyword">true</span>)
<a name="l00931"></a>00931    {
<a name="l00932"></a>00932       $this-&gt;cache = (bool) $enable;
<a name="l00933"></a>00933    }
<a name="l00934"></a>00934 <span class="comment"></span>
<a name="l00935"></a>00935 <span class="comment">   /**</span>
<a name="l00936"></a>00936 <span class="comment">    * Set the length of time (in seconds) that the contents of a feed</span>
<a name="l00937"></a>00937 <span class="comment">    * will be cached.</span>
<a name="l00938"></a>00938 <span class="comment">    *</span>
<a name="l00939"></a>00939 <span class="comment">    * @access public</span>
<a name="l00940"></a>00940 <span class="comment">    * @param int $seconds The feed content cache duration.</span>
<a name="l00941"></a>00941 <span class="comment">    */</span>
<a name="l00942"></a><a class="code" href="class_simple_pie.html#aeac022842de9bbb2dd47be737b8a0e4f">00942</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#aeac022842de9bbb2dd47be737b8a0e4f">set_cache_duration</a>($seconds = 3600)
<a name="l00943"></a>00943    {
<a name="l00944"></a>00944       $this-&gt;cache_duration = (int) $seconds;
<a name="l00945"></a>00945    }
<a name="l00946"></a>00946 <span class="comment"></span>
<a name="l00947"></a>00947 <span class="comment">   /**</span>
<a name="l00948"></a>00948 <span class="comment">    * Set the length of time (in seconds) that the autodiscovered feed</span>
<a name="l00949"></a>00949 <span class="comment">    * URL will be cached.</span>
<a name="l00950"></a>00950 <span class="comment">    *</span>
<a name="l00951"></a>00951 <span class="comment">    * @access public</span>
<a name="l00952"></a>00952 <span class="comment">    * @param int $seconds The autodiscovered feed URL cache duration.</span>
<a name="l00953"></a>00953 <span class="comment">    */</span>
<a name="l00954"></a><a class="code" href="class_simple_pie.html#a0f15c0fdb7a7d09c00fbb22a87a0a4d0">00954</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#a0f15c0fdb7a7d09c00fbb22a87a0a4d0">set_autodiscovery_cache_duration</a>($seconds = 604800)
<a name="l00955"></a>00955    {
<a name="l00956"></a>00956       $this-&gt;autodiscovery_cache_duration = (int) $seconds;
<a name="l00957"></a>00957    }
<a name="l00958"></a>00958 <span class="comment"></span>
<a name="l00959"></a>00959 <span class="comment">   /**</span>
<a name="l00960"></a>00960 <span class="comment">    * Set the file system location where the cached files should be stored.</span>
<a name="l00961"></a>00961 <span class="comment">    *</span>
<a name="l00962"></a>00962 <span class="comment">    * @access public</span>
<a name="l00963"></a>00963 <span class="comment">    * @param string $location The file system location.</span>
<a name="l00964"></a>00964 <span class="comment">    */</span>
<a name="l00965"></a><a class="code" href="class_simple_pie.html#a9d4a1169292edd7487a15c7001ca3868">00965</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#a9d4a1169292edd7487a15c7001ca3868">set_cache_location</a>($location = <span class="stringliteral">&#39;./cache&#39;</span>)
<a name="l00966"></a>00966    {
<a name="l00967"></a>00967       $this-&gt;cache_location = (string) $location;
<a name="l00968"></a>00968    }
<a name="l00969"></a>00969 <span class="comment"></span>
<a name="l00970"></a>00970 <span class="comment">   /**</span>
<a name="l00971"></a>00971 <span class="comment">    * Determines whether feed items should be sorted into reverse chronological order.</span>
<a name="l00972"></a>00972 <span class="comment">    *</span>
<a name="l00973"></a>00973 <span class="comment">    * @access public</span>
<a name="l00974"></a>00974 <span class="comment">    * @param bool $enable Sort as reverse chronological order.</span>
<a name="l00975"></a>00975 <span class="comment">    */</span>
<a name="l00976"></a><a class="code" href="class_simple_pie.html#a6ee35474cdb704d43762d47a1ae7a984">00976</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#a6ee35474cdb704d43762d47a1ae7a984">enable_order_by_date</a>($enable = <span class="keyword">true</span>)
<a name="l00977"></a>00977    {
<a name="l00978"></a>00978       $this-&gt;order_by_date = (bool) $enable;
<a name="l00979"></a>00979    }
<a name="l00980"></a>00980 <span class="comment"></span>
<a name="l00981"></a>00981 <span class="comment">   /**</span>
<a name="l00982"></a>00982 <span class="comment">    * Allows you to override the character encoding reported by the feed.</span>
<a name="l00983"></a>00983 <span class="comment">    *</span>
<a name="l00984"></a>00984 <span class="comment">    * @access public</span>
<a name="l00985"></a>00985 <span class="comment">    * @param string $encoding Character encoding.</span>
<a name="l00986"></a>00986 <span class="comment">    */</span>
<a name="l00987"></a><a class="code" href="class_simple_pie.html#a11aa7df92468dfe082567514c9c4fece">00987</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#a11aa7df92468dfe082567514c9c4fece">set_input_encoding</a>($encoding = <span class="keyword">false</span>)
<a name="l00988"></a>00988    {
<a name="l00989"></a>00989       <span class="keywordflow">if</span> ($encoding)
<a name="l00990"></a>00990       {
<a name="l00991"></a>00991          $this-&gt;input_encoding = (string) $encoding;
<a name="l00992"></a>00992       }
<a name="l00993"></a>00993       <span class="keywordflow">else</span>
<a name="l00994"></a>00994       {
<a name="l00995"></a>00995          $this-&gt;input_encoding = <span class="keyword">false</span>;
<a name="l00996"></a>00996       }
<a name="l00997"></a>00997    }
<a name="l00998"></a>00998 <span class="comment"></span>
<a name="l00999"></a>00999 <span class="comment">   /**</span>
<a name="l01000"></a>01000 <span class="comment">    * Set how much feed autodiscovery to do</span>
<a name="l01001"></a>01001 <span class="comment">    *</span>
<a name="l01002"></a>01002 <span class="comment">    * @access public</span>
<a name="l01003"></a>01003 <span class="comment">    * @see SIMPLEPIE_LOCATOR_NONE</span>
<a name="l01004"></a>01004 <span class="comment">    * @see SIMPLEPIE_LOCATOR_AUTODISCOVERY</span>
<a name="l01005"></a>01005 <span class="comment">    * @see SIMPLEPIE_LOCATOR_LOCAL_EXTENSION</span>
<a name="l01006"></a>01006 <span class="comment">    * @see SIMPLEPIE_LOCATOR_LOCAL_BODY</span>
<a name="l01007"></a>01007 <span class="comment">    * @see SIMPLEPIE_LOCATOR_REMOTE_EXTENSION</span>
<a name="l01008"></a>01008 <span class="comment">    * @see SIMPLEPIE_LOCATOR_REMOTE_BODY</span>
<a name="l01009"></a>01009 <span class="comment">    * @see SIMPLEPIE_LOCATOR_ALL</span>
<a name="l01010"></a>01010 <span class="comment">    * @param int $level Feed Autodiscovery Level (level can be a</span>
<a name="l01011"></a>01011 <span class="comment">    * combination of the above constants, see bitwise OR operator)</span>
<a name="l01012"></a>01012 <span class="comment">    */</span>
<a name="l01013"></a><a class="code" href="class_simple_pie.html#aaebd2186401f1e47dcb36a8054a220eb">01013</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#aaebd2186401f1e47dcb36a8054a220eb">set_autodiscovery_level</a>($level = SIMPLEPIE_LOCATOR_ALL)
<a name="l01014"></a>01014    {
<a name="l01015"></a>01015       $this-&gt;autodiscovery = (int) $level;
<a name="l01016"></a>01016    }
<a name="l01017"></a>01017 <span class="comment"></span>
<a name="l01018"></a>01018 <span class="comment">   /**</span>
<a name="l01019"></a>01019 <span class="comment">    * Allows you to change which class SimplePie uses for caching.</span>
<a name="l01020"></a>01020 <span class="comment">    * Useful when you are overloading or extending SimplePie&#39;s default classes.</span>
<a name="l01021"></a>01021 <span class="comment">    *</span>
<a name="l01022"></a>01022 <span class="comment">    * @access public</span>
<a name="l01023"></a>01023 <span class="comment">    * @param string $class Name of custom class.</span>
<a name="l01024"></a>01024 <span class="comment">    * @link http://php.net/manual/en/keyword.extends.php PHP4 extends documentation</span>
<a name="l01025"></a>01025 <span class="comment">    * @link http://php.net/manual/en/language.oop5.basic.php#language.oop5.basic.extends PHP5 extends documentation</span>
<a name="l01026"></a>01026 <span class="comment">    */</span>
<a name="l01027"></a><a class="code" href="class_simple_pie.html#a79a586c6663d73a0cf404e3394387e02">01027</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#a79a586c6663d73a0cf404e3394387e02">set_cache_class</a>($class = <span class="stringliteral">&#39;SimplePie_Cache&#39;</span>)
<a name="l01028"></a>01028    {
<a name="l01029"></a>01029       <span class="keywordflow">if</span> (SimplePie_Misc::is_subclass_of($class, <span class="stringliteral">&#39;SimplePie_Cache&#39;</span>))
<a name="l01030"></a>01030       {
<a name="l01031"></a>01031          $this-&gt;cache_class = $class;
<a name="l01032"></a>01032          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01033"></a>01033       }
<a name="l01034"></a>01034       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01035"></a>01035    }
<a name="l01036"></a>01036 <span class="comment"></span>
<a name="l01037"></a>01037 <span class="comment">   /**</span>
<a name="l01038"></a>01038 <span class="comment">    * Allows you to change which class SimplePie uses for auto-discovery.</span>
<a name="l01039"></a>01039 <span class="comment">    * Useful when you are overloading or extending SimplePie&#39;s default classes.</span>
<a name="l01040"></a>01040 <span class="comment">    *</span>
<a name="l01041"></a>01041 <span class="comment">    * @access public</span>
<a name="l01042"></a>01042 <span class="comment">    * @param string $class Name of custom class.</span>
<a name="l01043"></a>01043 <span class="comment">    * @link http://php.net/manual/en/keyword.extends.php PHP4 extends documentation</span>
<a name="l01044"></a>01044 <span class="comment">    * @link http://php.net/manual/en/language.oop5.basic.php#language.oop5.basic.extends PHP5 extends documentation</span>
<a name="l01045"></a>01045 <span class="comment">    */</span>
<a name="l01046"></a><a class="code" href="class_simple_pie.html#a8d473fa12f2b9d8e210587b6835fdb63">01046</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#a8d473fa12f2b9d8e210587b6835fdb63">set_locator_class</a>($class = <span class="stringliteral">&#39;SimplePie_Locator&#39;</span>)
<a name="l01047"></a>01047    {
<a name="l01048"></a>01048       <span class="keywordflow">if</span> (SimplePie_Misc::is_subclass_of($class, <span class="stringliteral">&#39;SimplePie_Locator&#39;</span>))
<a name="l01049"></a>01049       {
<a name="l01050"></a>01050          $this-&gt;locator_class = $class;
<a name="l01051"></a>01051          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01052"></a>01052       }
<a name="l01053"></a>01053       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01054"></a>01054    }
<a name="l01055"></a>01055 <span class="comment"></span>
<a name="l01056"></a>01056 <span class="comment">   /**</span>
<a name="l01057"></a>01057 <span class="comment">    * Allows you to change which class SimplePie uses for XML parsing.</span>
<a name="l01058"></a>01058 <span class="comment">    * Useful when you are overloading or extending SimplePie&#39;s default classes.</span>
<a name="l01059"></a>01059 <span class="comment">    *</span>
<a name="l01060"></a>01060 <span class="comment">    * @access public</span>
<a name="l01061"></a>01061 <span class="comment">    * @param string $class Name of custom class.</span>
<a name="l01062"></a>01062 <span class="comment">    * @link http://php.net/manual/en/keyword.extends.php PHP4 extends documentation</span>
<a name="l01063"></a>01063 <span class="comment">    * @link http://php.net/manual/en/language.oop5.basic.php#language.oop5.basic.extends PHP5 extends documentation</span>
<a name="l01064"></a>01064 <span class="comment">    */</span>
<a name="l01065"></a><a class="code" href="class_simple_pie.html#ad6e844440ebe39e8beb9b890f88606fa">01065</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#ad6e844440ebe39e8beb9b890f88606fa">set_parser_class</a>($class = <span class="stringliteral">&#39;SimplePie_Parser&#39;</span>)
<a name="l01066"></a>01066    {
<a name="l01067"></a>01067       <span class="keywordflow">if</span> (SimplePie_Misc::is_subclass_of($class, <span class="stringliteral">&#39;SimplePie_Parser&#39;</span>))
<a name="l01068"></a>01068       {
<a name="l01069"></a>01069          $this-&gt;parser_class = $class;
<a name="l01070"></a>01070          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01071"></a>01071       }
<a name="l01072"></a>01072       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01073"></a>01073    }
<a name="l01074"></a>01074 <span class="comment"></span>
<a name="l01075"></a>01075 <span class="comment">   /**</span>
<a name="l01076"></a>01076 <span class="comment">    * Allows you to change which class SimplePie uses for remote file fetching.</span>
<a name="l01077"></a>01077 <span class="comment">    * Useful when you are overloading or extending SimplePie&#39;s default classes.</span>
<a name="l01078"></a>01078 <span class="comment">    *</span>
<a name="l01079"></a>01079 <span class="comment">    * @access public</span>
<a name="l01080"></a>01080 <span class="comment">    * @param string $class Name of custom class.</span>
<a name="l01081"></a>01081 <span class="comment">    * @link http://php.net/manual/en/keyword.extends.php PHP4 extends documentation</span>
<a name="l01082"></a>01082 <span class="comment">    * @link http://php.net/manual/en/language.oop5.basic.php#language.oop5.basic.extends PHP5 extends documentation</span>
<a name="l01083"></a>01083 <span class="comment">    */</span>
<a name="l01084"></a><a class="code" href="class_simple_pie.html#aab849736420798d2ddfbc431f73cc3ae">01084</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#aab849736420798d2ddfbc431f73cc3ae">set_file_class</a>($class = <span class="stringliteral">&#39;SimplePie_File&#39;</span>)
<a name="l01085"></a>01085    {
<a name="l01086"></a>01086       <span class="keywordflow">if</span> (SimplePie_Misc::is_subclass_of($class, <span class="stringliteral">&#39;SimplePie_File&#39;</span>))
<a name="l01087"></a>01087       {
<a name="l01088"></a>01088          $this-&gt;file_class = $class;
<a name="l01089"></a>01089          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01090"></a>01090       }
<a name="l01091"></a>01091       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01092"></a>01092    }
<a name="l01093"></a>01093 <span class="comment"></span>
<a name="l01094"></a>01094 <span class="comment">   /**</span>
<a name="l01095"></a>01095 <span class="comment">    * Allows you to change which class SimplePie uses for data sanitization.</span>
<a name="l01096"></a>01096 <span class="comment">    * Useful when you are overloading or extending SimplePie&#39;s default classes.</span>
<a name="l01097"></a>01097 <span class="comment">    *</span>
<a name="l01098"></a>01098 <span class="comment">    * @access public</span>
<a name="l01099"></a>01099 <span class="comment">    * @param string $class Name of custom class.</span>
<a name="l01100"></a>01100 <span class="comment">    * @link http://php.net/manual/en/keyword.extends.php PHP4 extends documentation</span>
<a name="l01101"></a>01101 <span class="comment">    * @link http://php.net/manual/en/language.oop5.basic.php#language.oop5.basic.extends PHP5 extends documentation</span>
<a name="l01102"></a>01102 <span class="comment">    */</span>
<a name="l01103"></a><a class="code" href="class_simple_pie.html#a401e0673fd1841826114621bf22cbdef">01103</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#a401e0673fd1841826114621bf22cbdef">set_sanitize_class</a>($class = <span class="stringliteral">&#39;SimplePie_Sanitize&#39;</span>)
<a name="l01104"></a>01104    {
<a name="l01105"></a>01105       <span class="keywordflow">if</span> (SimplePie_Misc::is_subclass_of($class, <span class="stringliteral">&#39;SimplePie_Sanitize&#39;</span>))
<a name="l01106"></a>01106       {
<a name="l01107"></a>01107          $this-&gt;sanitize =&amp; <span class="keyword">new</span> $class;
<a name="l01108"></a>01108          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01109"></a>01109       }
<a name="l01110"></a>01110       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01111"></a>01111    }
<a name="l01112"></a>01112 <span class="comment"></span>
<a name="l01113"></a>01113 <span class="comment">   /**</span>
<a name="l01114"></a>01114 <span class="comment">    * Allows you to change which class SimplePie uses for handling feed items.</span>
<a name="l01115"></a>01115 <span class="comment">    * Useful when you are overloading or extending SimplePie&#39;s default classes.</span>
<a name="l01116"></a>01116 <span class="comment">    *</span>
<a name="l01117"></a>01117 <span class="comment">    * @access public</span>
<a name="l01118"></a>01118 <span class="comment">    * @param string $class Name of custom class.</span>
<a name="l01119"></a>01119 <span class="comment">    * @link http://php.net/manual/en/keyword.extends.php PHP4 extends documentation</span>
<a name="l01120"></a>01120 <span class="comment">    * @link http://php.net/manual/en/language.oop5.basic.php#language.oop5.basic.extends PHP5 extends documentation</span>
<a name="l01121"></a>01121 <span class="comment">    */</span>
<a name="l01122"></a><a class="code" href="class_simple_pie.html#ac3aa8c022dadc83e20e0c35e0aea6e1e">01122</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#ac3aa8c022dadc83e20e0c35e0aea6e1e">set_item_class</a>($class = <span class="stringliteral">&#39;SimplePie_Item&#39;</span>)
<a name="l01123"></a>01123    {
<a name="l01124"></a>01124       <span class="keywordflow">if</span> (SimplePie_Misc::is_subclass_of($class, <span class="stringliteral">&#39;SimplePie_Item&#39;</span>))
<a name="l01125"></a>01125       {
<a name="l01126"></a>01126          $this-&gt;item_class = $class;
<a name="l01127"></a>01127          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01128"></a>01128       }
<a name="l01129"></a>01129       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01130"></a>01130    }
<a name="l01131"></a>01131 <span class="comment"></span>
<a name="l01132"></a>01132 <span class="comment">   /**</span>
<a name="l01133"></a>01133 <span class="comment">    * Allows you to change which class SimplePie uses for handling author data.</span>
<a name="l01134"></a>01134 <span class="comment">    * Useful when you are overloading or extending SimplePie&#39;s default classes.</span>
<a name="l01135"></a>01135 <span class="comment">    *</span>
<a name="l01136"></a>01136 <span class="comment">    * @access public</span>
<a name="l01137"></a>01137 <span class="comment">    * @param string $class Name of custom class.</span>
<a name="l01138"></a>01138 <span class="comment">    * @link http://php.net/manual/en/keyword.extends.php PHP4 extends documentation</span>
<a name="l01139"></a>01139 <span class="comment">    * @link http://php.net/manual/en/language.oop5.basic.php#language.oop5.basic.extends PHP5 extends documentation</span>
<a name="l01140"></a>01140 <span class="comment">    */</span>
<a name="l01141"></a><a class="code" href="class_simple_pie.html#a03b5ece21b9fdf903a1ca843fd2751d3">01141</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#a03b5ece21b9fdf903a1ca843fd2751d3">set_author_class</a>($class = <span class="stringliteral">&#39;SimplePie_Author&#39;</span>)
<a name="l01142"></a>01142    {
<a name="l01143"></a>01143       <span class="keywordflow">if</span> (SimplePie_Misc::is_subclass_of($class, <span class="stringliteral">&#39;SimplePie_Author&#39;</span>))
<a name="l01144"></a>01144       {
<a name="l01145"></a>01145          $this-&gt;author_class = $class;
<a name="l01146"></a>01146          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01147"></a>01147       }
<a name="l01148"></a>01148       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01149"></a>01149    }
<a name="l01150"></a>01150 <span class="comment"></span>
<a name="l01151"></a>01151 <span class="comment">   /**</span>
<a name="l01152"></a>01152 <span class="comment">    * Allows you to change which class SimplePie uses for handling category data.</span>
<a name="l01153"></a>01153 <span class="comment">    * Useful when you are overloading or extending SimplePie&#39;s default classes.</span>
<a name="l01154"></a>01154 <span class="comment">    *</span>
<a name="l01155"></a>01155 <span class="comment">    * @access public</span>
<a name="l01156"></a>01156 <span class="comment">    * @param string $class Name of custom class.</span>
<a name="l01157"></a>01157 <span class="comment">    * @link http://php.net/manual/en/keyword.extends.php PHP4 extends documentation</span>
<a name="l01158"></a>01158 <span class="comment">    * @link http://php.net/manual/en/language.oop5.basic.php#language.oop5.basic.extends PHP5 extends documentation</span>
<a name="l01159"></a>01159 <span class="comment">    */</span>
<a name="l01160"></a><a class="code" href="class_simple_pie.html#acaa003a7ea04366fe26639e2d7796eab">01160</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#acaa003a7ea04366fe26639e2d7796eab">set_category_class</a>($class = <span class="stringliteral">&#39;SimplePie_Category&#39;</span>)
<a name="l01161"></a>01161    {
<a name="l01162"></a>01162       <span class="keywordflow">if</span> (SimplePie_Misc::is_subclass_of($class, <span class="stringliteral">&#39;SimplePie_Category&#39;</span>))
<a name="l01163"></a>01163       {
<a name="l01164"></a>01164          $this-&gt;category_class = $class;
<a name="l01165"></a>01165          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01166"></a>01166       }
<a name="l01167"></a>01167       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01168"></a>01168    }
<a name="l01169"></a>01169 <span class="comment"></span>
<a name="l01170"></a>01170 <span class="comment">   /**</span>
<a name="l01171"></a>01171 <span class="comment">    * Allows you to change which class SimplePie uses for feed enclosures.</span>
<a name="l01172"></a>01172 <span class="comment">    * Useful when you are overloading or extending SimplePie&#39;s default classes.</span>
<a name="l01173"></a>01173 <span class="comment">    *</span>
<a name="l01174"></a>01174 <span class="comment">    * @access public</span>
<a name="l01175"></a>01175 <span class="comment">    * @param string $class Name of custom class.</span>
<a name="l01176"></a>01176 <span class="comment">    * @link http://php.net/manual/en/keyword.extends.php PHP4 extends documentation</span>
<a name="l01177"></a>01177 <span class="comment">    * @link http://php.net/manual/en/language.oop5.basic.php#language.oop5.basic.extends PHP5 extends documentation</span>
<a name="l01178"></a>01178 <span class="comment">    */</span>
<a name="l01179"></a><a class="code" href="class_simple_pie.html#a2d4b8917824a52710fb226d6a76ec280">01179</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#a2d4b8917824a52710fb226d6a76ec280">set_enclosure_class</a>($class = <span class="stringliteral">&#39;SimplePie_Enclosure&#39;</span>)
<a name="l01180"></a>01180    {
<a name="l01181"></a>01181       <span class="keywordflow">if</span> (SimplePie_Misc::is_subclass_of($class, <span class="stringliteral">&#39;SimplePie_Enclosure&#39;</span>))
<a name="l01182"></a>01182       {
<a name="l01183"></a>01183          $this-&gt;enclosure_class = $class;
<a name="l01184"></a>01184          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01185"></a>01185       }
<a name="l01186"></a>01186       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01187"></a>01187    }
<a name="l01188"></a>01188 <span class="comment"></span>
<a name="l01189"></a>01189 <span class="comment">   /**</span>
<a name="l01190"></a>01190 <span class="comment">    * Allows you to change which class SimplePie uses for &lt;media:text&gt; captions</span>
<a name="l01191"></a>01191 <span class="comment">    * Useful when you are overloading or extending SimplePie&#39;s default classes.</span>
<a name="l01192"></a>01192 <span class="comment">    *</span>
<a name="l01193"></a>01193 <span class="comment">    * @access public</span>
<a name="l01194"></a>01194 <span class="comment">    * @param string $class Name of custom class.</span>
<a name="l01195"></a>01195 <span class="comment">    * @link http://php.net/manual/en/keyword.extends.php PHP4 extends documentation</span>
<a name="l01196"></a>01196 <span class="comment">    * @link http://php.net/manual/en/language.oop5.basic.php#language.oop5.basic.extends PHP5 extends documentation</span>
<a name="l01197"></a>01197 <span class="comment">    */</span>
<a name="l01198"></a><a class="code" href="class_simple_pie.html#a6066cf660976a7d6f86ce29c9f2d5584">01198</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#a6066cf660976a7d6f86ce29c9f2d5584">set_caption_class</a>($class = <span class="stringliteral">&#39;SimplePie_Caption&#39;</span>)
<a name="l01199"></a>01199    {
<a name="l01200"></a>01200       <span class="keywordflow">if</span> (SimplePie_Misc::is_subclass_of($class, <span class="stringliteral">&#39;SimplePie_Caption&#39;</span>))
<a name="l01201"></a>01201       {
<a name="l01202"></a>01202          $this-&gt;caption_class = $class;
<a name="l01203"></a>01203          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01204"></a>01204       }
<a name="l01205"></a>01205       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01206"></a>01206    }
<a name="l01207"></a>01207 <span class="comment"></span>
<a name="l01208"></a>01208 <span class="comment">   /**</span>
<a name="l01209"></a>01209 <span class="comment">    * Allows you to change which class SimplePie uses for &lt;media:copyright&gt;</span>
<a name="l01210"></a>01210 <span class="comment">    * Useful when you are overloading or extending SimplePie&#39;s default classes.</span>
<a name="l01211"></a>01211 <span class="comment">    *</span>
<a name="l01212"></a>01212 <span class="comment">    * @access public</span>
<a name="l01213"></a>01213 <span class="comment">    * @param string $class Name of custom class.</span>
<a name="l01214"></a>01214 <span class="comment">    * @link http://php.net/manual/en/keyword.extends.php PHP4 extends documentation</span>
<a name="l01215"></a>01215 <span class="comment">    * @link http://php.net/manual/en/language.oop5.basic.php#language.oop5.basic.extends PHP5 extends documentation</span>
<a name="l01216"></a>01216 <span class="comment">    */</span>
<a name="l01217"></a><a class="code" href="class_simple_pie.html#a445f8418927220f268ca35701a8e2f31">01217</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#a445f8418927220f268ca35701a8e2f31">set_copyright_class</a>($class = <span class="stringliteral">&#39;SimplePie_Copyright&#39;</span>)
<a name="l01218"></a>01218    {
<a name="l01219"></a>01219       <span class="keywordflow">if</span> (SimplePie_Misc::is_subclass_of($class, <span class="stringliteral">&#39;SimplePie_Copyright&#39;</span>))
<a name="l01220"></a>01220       {
<a name="l01221"></a>01221          $this-&gt;copyright_class = $class;
<a name="l01222"></a>01222          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01223"></a>01223       }
<a name="l01224"></a>01224       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01225"></a>01225    }
<a name="l01226"></a>01226 <span class="comment"></span>
<a name="l01227"></a>01227 <span class="comment">   /**</span>
<a name="l01228"></a>01228 <span class="comment">    * Allows you to change which class SimplePie uses for &lt;media:credit&gt;</span>
<a name="l01229"></a>01229 <span class="comment">    * Useful when you are overloading or extending SimplePie&#39;s default classes.</span>
<a name="l01230"></a>01230 <span class="comment">    *</span>
<a name="l01231"></a>01231 <span class="comment">    * @access public</span>
<a name="l01232"></a>01232 <span class="comment">    * @param string $class Name of custom class.</span>
<a name="l01233"></a>01233 <span class="comment">    * @link http://php.net/manual/en/keyword.extends.php PHP4 extends documentation</span>
<a name="l01234"></a>01234 <span class="comment">    * @link http://php.net/manual/en/language.oop5.basic.php#language.oop5.basic.extends PHP5 extends documentation</span>
<a name="l01235"></a>01235 <span class="comment">    */</span>
<a name="l01236"></a><a class="code" href="class_simple_pie.html#aa705671d1f35eaa346a85a4a8ad4f8e1">01236</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#aa705671d1f35eaa346a85a4a8ad4f8e1">set_credit_class</a>($class = <span class="stringliteral">&#39;SimplePie_Credit&#39;</span>)
<a name="l01237"></a>01237    {
<a name="l01238"></a>01238       <span class="keywordflow">if</span> (SimplePie_Misc::is_subclass_of($class, <span class="stringliteral">&#39;SimplePie_Credit&#39;</span>))
<a name="l01239"></a>01239       {
<a name="l01240"></a>01240          $this-&gt;credit_class = $class;
<a name="l01241"></a>01241          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01242"></a>01242       }
<a name="l01243"></a>01243       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01244"></a>01244    }
<a name="l01245"></a>01245 <span class="comment"></span>
<a name="l01246"></a>01246 <span class="comment">   /**</span>
<a name="l01247"></a>01247 <span class="comment">    * Allows you to change which class SimplePie uses for &lt;media:rating&gt;</span>
<a name="l01248"></a>01248 <span class="comment">    * Useful when you are overloading or extending SimplePie&#39;s default classes.</span>
<a name="l01249"></a>01249 <span class="comment">    *</span>
<a name="l01250"></a>01250 <span class="comment">    * @access public</span>
<a name="l01251"></a>01251 <span class="comment">    * @param string $class Name of custom class.</span>
<a name="l01252"></a>01252 <span class="comment">    * @link http://php.net/manual/en/keyword.extends.php PHP4 extends documentation</span>
<a name="l01253"></a>01253 <span class="comment">    * @link http://php.net/manual/en/language.oop5.basic.php#language.oop5.basic.extends PHP5 extends documentation</span>
<a name="l01254"></a>01254 <span class="comment">    */</span>
<a name="l01255"></a><a class="code" href="class_simple_pie.html#ae822800416f4345572367c8ec892a48b">01255</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#ae822800416f4345572367c8ec892a48b">set_rating_class</a>($class = <span class="stringliteral">&#39;SimplePie_Rating&#39;</span>)
<a name="l01256"></a>01256    {
<a name="l01257"></a>01257       <span class="keywordflow">if</span> (SimplePie_Misc::is_subclass_of($class, <span class="stringliteral">&#39;SimplePie_Rating&#39;</span>))
<a name="l01258"></a>01258       {
<a name="l01259"></a>01259          $this-&gt;rating_class = $class;
<a name="l01260"></a>01260          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01261"></a>01261       }
<a name="l01262"></a>01262       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01263"></a>01263    }
<a name="l01264"></a>01264 <span class="comment"></span>
<a name="l01265"></a>01265 <span class="comment">   /**</span>
<a name="l01266"></a>01266 <span class="comment">    * Allows you to change which class SimplePie uses for &lt;media:restriction&gt;</span>
<a name="l01267"></a>01267 <span class="comment">    * Useful when you are overloading or extending SimplePie&#39;s default classes.</span>
<a name="l01268"></a>01268 <span class="comment">    *</span>
<a name="l01269"></a>01269 <span class="comment">    * @access public</span>
<a name="l01270"></a>01270 <span class="comment">    * @param string $class Name of custom class.</span>
<a name="l01271"></a>01271 <span class="comment">    * @link http://php.net/manual/en/keyword.extends.php PHP4 extends documentation</span>
<a name="l01272"></a>01272 <span class="comment">    * @link http://php.net/manual/en/language.oop5.basic.php#language.oop5.basic.extends PHP5 extends documentation</span>
<a name="l01273"></a>01273 <span class="comment">    */</span>
<a name="l01274"></a><a class="code" href="class_simple_pie.html#adcc0e1950ae3e891c0086bf9d3b6ba7b">01274</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#adcc0e1950ae3e891c0086bf9d3b6ba7b">set_restriction_class</a>($class = <span class="stringliteral">&#39;SimplePie_Restriction&#39;</span>)
<a name="l01275"></a>01275    {
<a name="l01276"></a>01276       <span class="keywordflow">if</span> (SimplePie_Misc::is_subclass_of($class, <span class="stringliteral">&#39;SimplePie_Restriction&#39;</span>))
<a name="l01277"></a>01277       {
<a name="l01278"></a>01278          $this-&gt;restriction_class = $class;
<a name="l01279"></a>01279          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01280"></a>01280       }
<a name="l01281"></a>01281       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01282"></a>01282    }
<a name="l01283"></a>01283 <span class="comment"></span>
<a name="l01284"></a>01284 <span class="comment">   /**</span>
<a name="l01285"></a>01285 <span class="comment">    * Allows you to change which class SimplePie uses for content-type sniffing.</span>
<a name="l01286"></a>01286 <span class="comment">    * Useful when you are overloading or extending SimplePie&#39;s default classes.</span>
<a name="l01287"></a>01287 <span class="comment">    *</span>
<a name="l01288"></a>01288 <span class="comment">    * @access public</span>
<a name="l01289"></a>01289 <span class="comment">    * @param string $class Name of custom class.</span>
<a name="l01290"></a>01290 <span class="comment">    * @link http://php.net/manual/en/keyword.extends.php PHP4 extends documentation</span>
<a name="l01291"></a>01291 <span class="comment">    * @link http://php.net/manual/en/language.oop5.basic.php#language.oop5.basic.extends PHP5 extends documentation</span>
<a name="l01292"></a>01292 <span class="comment">    */</span>
<a name="l01293"></a><a class="code" href="class_simple_pie.html#a74fe40e5861a5ab6809bb0c4cf3ea608">01293</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#a74fe40e5861a5ab6809bb0c4cf3ea608">set_content_type_sniffer_class</a>($class = <span class="stringliteral">&#39;SimplePie_Content_Type_Sniffer&#39;</span>)
<a name="l01294"></a>01294    {
<a name="l01295"></a>01295       <span class="keywordflow">if</span> (SimplePie_Misc::is_subclass_of($class, <span class="stringliteral">&#39;SimplePie_Content_Type_Sniffer&#39;</span>))
<a name="l01296"></a>01296       {
<a name="l01297"></a>01297          $this-&gt;content_type_sniffer_class = $class;
<a name="l01298"></a>01298          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01299"></a>01299       }
<a name="l01300"></a>01300       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01301"></a>01301    }
<a name="l01302"></a>01302 <span class="comment"></span>
<a name="l01303"></a>01303 <span class="comment">   /**</span>
<a name="l01304"></a>01304 <span class="comment">    * Allows you to change which class SimplePie uses item sources.</span>
<a name="l01305"></a>01305 <span class="comment">    * Useful when you are overloading or extending SimplePie&#39;s default classes.</span>
<a name="l01306"></a>01306 <span class="comment">    *</span>
<a name="l01307"></a>01307 <span class="comment">    * @access public</span>
<a name="l01308"></a>01308 <span class="comment">    * @param string $class Name of custom class.</span>
<a name="l01309"></a>01309 <span class="comment">    * @link http://php.net/manual/en/keyword.extends.php PHP4 extends documentation</span>
<a name="l01310"></a>01310 <span class="comment">    * @link http://php.net/manual/en/language.oop5.basic.php#language.oop5.basic.extends PHP5 extends documentation</span>
<a name="l01311"></a>01311 <span class="comment">    */</span>
<a name="l01312"></a><a class="code" href="class_simple_pie.html#aa8bd1473fb01fd6a56adf7d9af32b546">01312</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#aa8bd1473fb01fd6a56adf7d9af32b546">set_source_class</a>($class = <span class="stringliteral">&#39;SimplePie_Source&#39;</span>)
<a name="l01313"></a>01313    {
<a name="l01314"></a>01314       <span class="keywordflow">if</span> (SimplePie_Misc::is_subclass_of($class, <span class="stringliteral">&#39;SimplePie_Source&#39;</span>))
<a name="l01315"></a>01315       {
<a name="l01316"></a>01316          $this-&gt;source_class = $class;
<a name="l01317"></a>01317          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01318"></a>01318       }
<a name="l01319"></a>01319       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01320"></a>01320    }
<a name="l01321"></a>01321 <span class="comment"></span>
<a name="l01322"></a>01322 <span class="comment">   /**</span>
<a name="l01323"></a>01323 <span class="comment">    * Allows you to override the default user agent string.</span>
<a name="l01324"></a>01324 <span class="comment">    *</span>
<a name="l01325"></a>01325 <span class="comment">    * @access public</span>
<a name="l01326"></a>01326 <span class="comment">    * @param string $ua New user agent string.</span>
<a name="l01327"></a>01327 <span class="comment">    */</span>
<a name="l01328"></a><a class="code" href="class_simple_pie.html#afb956d3371f26305ddb3da30cb270cd4">01328</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#afb956d3371f26305ddb3da30cb270cd4">set_useragent</a>($ua = SIMPLEPIE_USERAGENT)
<a name="l01329"></a>01329    {
<a name="l01330"></a>01330       $this-&gt;useragent = (string) $ua;
<a name="l01331"></a>01331    }
<a name="l01332"></a>01332 <span class="comment"></span>
<a name="l01333"></a>01333 <span class="comment">   /**</span>
<a name="l01334"></a>01334 <span class="comment">    * Set callback function to create cache filename with</span>
<a name="l01335"></a>01335 <span class="comment">    *</span>
<a name="l01336"></a>01336 <span class="comment">    * @access public</span>
<a name="l01337"></a>01337 <span class="comment">    * @param mixed $function Callback function</span>
<a name="l01338"></a>01338 <span class="comment">    */</span>
<a name="l01339"></a><a class="code" href="class_simple_pie.html#ad163450a03421b4eb54b9ca237a0df0f">01339</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#ad163450a03421b4eb54b9ca237a0df0f">set_cache_name_function</a>($function = <span class="stringliteral">&#39;md5&#39;</span>)
<a name="l01340"></a>01340    {
<a name="l01341"></a>01341       <span class="keywordflow">if</span> (is_callable($function))
<a name="l01342"></a>01342       {
<a name="l01343"></a>01343          $this-&gt;cache_name_function = $function;
<a name="l01344"></a>01344       }
<a name="l01345"></a>01345    }
<a name="l01346"></a>01346 <span class="comment"></span>
<a name="l01347"></a>01347 <span class="comment">   /**</span>
<a name="l01348"></a>01348 <span class="comment">    * Set javascript query string parameter</span>
<a name="l01349"></a>01349 <span class="comment">    *</span>
<a name="l01350"></a>01350 <span class="comment">    * @access public</span>
<a name="l01351"></a>01351 <span class="comment">    * @param mixed $get Javascript query string parameter</span>
<a name="l01352"></a>01352 <span class="comment">    */</span>
<a name="l01353"></a><a class="code" href="class_simple_pie.html#a65324ddeac73015c92a7b41498f200a1">01353</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#a65324ddeac73015c92a7b41498f200a1">set_javascript</a>($get = <span class="stringliteral">&#39;js&#39;</span>)
<a name="l01354"></a>01354    {
<a name="l01355"></a>01355       <span class="keywordflow">if</span> ($get)
<a name="l01356"></a>01356       {
<a name="l01357"></a>01357          $this-&gt;javascript = (string) $get;
<a name="l01358"></a>01358       }
<a name="l01359"></a>01359       <span class="keywordflow">else</span>
<a name="l01360"></a>01360       {
<a name="l01361"></a>01361          $this-&gt;javascript = <span class="keyword">false</span>;
<a name="l01362"></a>01362       }
<a name="l01363"></a>01363    }
<a name="l01364"></a>01364 <span class="comment"></span>
<a name="l01365"></a>01365 <span class="comment">   /**</span>
<a name="l01366"></a>01366 <span class="comment">    * Set options to make SP as fast as possible.  Forgoes a</span>
<a name="l01367"></a>01367 <span class="comment">    * substantial amount of data sanitization in favor of speed.</span>
<a name="l01368"></a>01368 <span class="comment">    *</span>
<a name="l01369"></a>01369 <span class="comment">    * @access public</span>
<a name="l01370"></a>01370 <span class="comment">    * @param bool $set Whether to set them or not</span>
<a name="l01371"></a>01371 <span class="comment">    */</span>
<a name="l01372"></a><a class="code" href="class_simple_pie.html#aa7f2d11755c20e017c56ce88de11cd8a">01372</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#aa7f2d11755c20e017c56ce88de11cd8a">set_stupidly_fast</a>($set = <span class="keyword">false</span>)
<a name="l01373"></a>01373    {
<a name="l01374"></a>01374       <span class="keywordflow">if</span> ($set)
<a name="l01375"></a>01375       {
<a name="l01376"></a>01376          $this-&gt;<a class="code" href="class_simple_pie.html#a6ee35474cdb704d43762d47a1ae7a984">enable_order_by_date</a>(<span class="keyword">false</span>);
<a name="l01377"></a>01377          $this-&gt;remove_div(<span class="keyword">false</span>);
<a name="l01378"></a>01378          $this-&gt;strip_comments(<span class="keyword">false</span>);
<a name="l01379"></a>01379          $this-&gt;<a class="code" href="class_simple_pie.html#a9b86eec68c41a6b290ca136773998605">strip_htmltags</a>(<span class="keyword">false</span>);
<a name="l01380"></a>01380          $this-&gt;<a class="code" href="class_simple_pie.html#ab0b064cf743bb7d7ee2c467493848db4">strip_attributes</a>(<span class="keyword">false</span>);
<a name="l01381"></a>01381          $this-&gt;<a class="code" href="class_simple_pie.html#a3a38e3cf1b378fcb4ef7a6ad6411889b">set_image_handler</a>(<span class="keyword">false</span>);
<a name="l01382"></a>01382       }
<a name="l01383"></a>01383    }
<a name="l01384"></a>01384 <span class="comment"></span>
<a name="l01385"></a>01385 <span class="comment">   /**</span>
<a name="l01386"></a>01386 <span class="comment">    * Set maximum number of feeds to check with autodiscovery</span>
<a name="l01387"></a>01387 <span class="comment">    *</span>
<a name="l01388"></a>01388 <span class="comment">    * @access public</span>
<a name="l01389"></a>01389 <span class="comment">    * @param int $max Maximum number of feeds to check</span>
<a name="l01390"></a>01390 <span class="comment">    */</span>
<a name="l01391"></a><a class="code" href="class_simple_pie.html#ad06a60cac843e5b6486e1409fe5972ed">01391</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#ad06a60cac843e5b6486e1409fe5972ed">set_max_checked_feeds</a>($max = 10)
<a name="l01392"></a>01392    {
<a name="l01393"></a>01393       $this-&gt;max_checked_feeds = (int) $max;
<a name="l01394"></a>01394    }
<a name="l01395"></a>01395 
<a name="l01396"></a>01396    <span class="keyword">function</span> remove_div($enable = <span class="keyword">true</span>)
<a name="l01397"></a>01397    {
<a name="l01398"></a>01398       $this-&gt;sanitize-&gt;remove_div($enable);
<a name="l01399"></a>01399    }
<a name="l01400"></a>01400 
<a name="l01401"></a><a class="code" href="class_simple_pie.html#a9b86eec68c41a6b290ca136773998605">01401</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#a9b86eec68c41a6b290ca136773998605">strip_htmltags</a>($tags = <span class="stringliteral">&#39;&#39;</span>, $encode = null)
<a name="l01402"></a>01402    {
<a name="l01403"></a>01403       <span class="keywordflow">if</span> ($tags === <span class="stringliteral">&#39;&#39;</span>)
<a name="l01404"></a>01404       {
<a name="l01405"></a>01405          $tags = $this-&gt;<a class="code" href="class_simple_pie.html#a9b86eec68c41a6b290ca136773998605">strip_htmltags</a>;
<a name="l01406"></a>01406       }
<a name="l01407"></a>01407       $this-&gt;sanitize-&gt;strip_htmltags($tags);
<a name="l01408"></a>01408       <span class="keywordflow">if</span> ($encode !== null)
<a name="l01409"></a>01409       {
<a name="l01410"></a>01410          $this-&gt;sanitize-&gt;encode_instead_of_strip($tags);
<a name="l01411"></a>01411       }
<a name="l01412"></a>01412    }
<a name="l01413"></a>01413 
<a name="l01414"></a>01414    <span class="keyword">function</span> encode_instead_of_strip($enable = <span class="keyword">true</span>)
<a name="l01415"></a>01415    {
<a name="l01416"></a>01416       $this-&gt;sanitize-&gt;encode_instead_of_strip($enable);
<a name="l01417"></a>01417    }
<a name="l01418"></a>01418 
<a name="l01419"></a><a class="code" href="class_simple_pie.html#ab0b064cf743bb7d7ee2c467493848db4">01419</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#ab0b064cf743bb7d7ee2c467493848db4">strip_attributes</a>($attribs = <span class="stringliteral">&#39;&#39;</span>)
<a name="l01420"></a>01420    {
<a name="l01421"></a>01421       <span class="keywordflow">if</span> ($attribs === <span class="stringliteral">&#39;&#39;</span>)
<a name="l01422"></a>01422       {
<a name="l01423"></a>01423          $attribs = $this-&gt;<a class="code" href="class_simple_pie.html#ab0b064cf743bb7d7ee2c467493848db4">strip_attributes</a>;
<a name="l01424"></a>01424       }
<a name="l01425"></a>01425       $this-&gt;sanitize-&gt;strip_attributes($attribs);
<a name="l01426"></a>01426    }
<a name="l01427"></a>01427 
<a name="l01428"></a>01428    <span class="keyword">function</span> set_output_encoding($encoding = <span class="stringliteral">&#39;UTF-8&#39;</span>)
<a name="l01429"></a>01429    {
<a name="l01430"></a>01430       $this-&gt;sanitize-&gt;set_output_encoding($encoding);
<a name="l01431"></a>01431    }
<a name="l01432"></a>01432 
<a name="l01433"></a>01433    <span class="keyword">function</span> strip_comments($strip = <span class="keyword">false</span>)
<a name="l01434"></a>01434    {
<a name="l01435"></a>01435       $this-&gt;sanitize-&gt;strip_comments($strip);
<a name="l01436"></a>01436    }
<a name="l01437"></a>01437 <span class="comment"></span>
<a name="l01438"></a>01438 <span class="comment">   /**</span>
<a name="l01439"></a>01439 <span class="comment">    * Set element/attribute key/value pairs of HTML attributes</span>
<a name="l01440"></a>01440 <span class="comment">    * containing URLs that need to be resolved relative to the feed</span>
<a name="l01441"></a>01441 <span class="comment">    *</span>
<a name="l01442"></a>01442 <span class="comment">    * @access public</span>
<a name="l01443"></a>01443 <span class="comment">    * @since 1.0</span>
<a name="l01444"></a>01444 <span class="comment">    * @param array $element_attribute Element/attribute key/value pairs</span>
<a name="l01445"></a>01445 <span class="comment">    */</span>
<a name="l01446"></a><a class="code" href="class_simple_pie.html#a158b4566bc5d3251c9edb082a032f45b">01446</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#a158b4566bc5d3251c9edb082a032f45b">set_url_replacements</a>($element_attribute = array(<span class="charliteral">&#39;a&#39;</span> =&gt; <span class="stringliteral">&#39;href&#39;</span>, <span class="stringliteral">&#39;area&#39;</span> =&gt; <span class="stringliteral">&#39;href&#39;</span>, <span class="stringliteral">&#39;blockquote&#39;</span> =&gt; <span class="stringliteral">&#39;cite&#39;</span>, <span class="stringliteral">&#39;del&#39;</span> =&gt; <span class="stringliteral">&#39;cite&#39;</span>, <span class="stringliteral">&#39;form&#39;</span> =&gt; <span class="stringliteral">&#39;action&#39;</span>, <span class="stringliteral">&#39;img&#39;</span> =&gt; array(<span class="stringliteral">&#39;longdesc&#39;</span>, <span class="stringliteral">&#39;src&#39;</span>), <span class="stringliteral">&#39;input&#39;</span> =&gt; <span class="stringliteral">&#39;src&#39;</span>, <span class="stringliteral">&#39;ins&#39;</span> =&gt; <span class="stringliteral">&#39;cite&#39;</span>, <span class="charliteral">&#39;q&#39;</span> =&gt; <span class="stringliteral">&#39;cite&#39;</span>))
<a name="l01447"></a>01447    {
<a name="l01448"></a>01448       $this-&gt;sanitize-&gt;set_url_replacements($element_attribute);
<a name="l01449"></a>01449    }
<a name="l01450"></a>01450 <span class="comment"></span>
<a name="l01451"></a>01451 <span class="comment">   /**</span>
<a name="l01452"></a>01452 <span class="comment">    * Set the handler to enable the display of cached favicons.</span>
<a name="l01453"></a>01453 <span class="comment">    *</span>
<a name="l01454"></a>01454 <span class="comment">    * @access public</span>
<a name="l01455"></a>01455 <span class="comment">    * @param str $page Web-accessible path to the handler_favicon.php file.</span>
<a name="l01456"></a>01456 <span class="comment">    * @param str $qs The query string that the value should be passed to.</span>
<a name="l01457"></a>01457 <span class="comment">    */</span>
<a name="l01458"></a><a class="code" href="class_simple_pie.html#ac3c14d8544b030b88e15b1a8622b08f1">01458</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#ac3c14d8544b030b88e15b1a8622b08f1">set_favicon_handler</a>($page = <span class="keyword">false</span>, $qs = <span class="charliteral">&#39;i&#39;</span>)
<a name="l01459"></a>01459    {
<a name="l01460"></a>01460       <span class="keywordflow">if</span> ($page !== <span class="keyword">false</span>)
<a name="l01461"></a>01461       {
<a name="l01462"></a>01462          $this-&gt;favicon_handler = $page . <span class="charliteral">&#39;?&#39;</span> . $qs . <span class="charliteral">&#39;=&#39;</span>;
<a name="l01463"></a>01463       }
<a name="l01464"></a>01464       <span class="keywordflow">else</span>
<a name="l01465"></a>01465       {
<a name="l01466"></a>01466          $this-&gt;favicon_handler = <span class="stringliteral">&#39;&#39;</span>;
<a name="l01467"></a>01467       }
<a name="l01468"></a>01468    }
<a name="l01469"></a>01469 <span class="comment"></span>
<a name="l01470"></a>01470 <span class="comment">   /**</span>
<a name="l01471"></a>01471 <span class="comment">    * Set the handler to enable the display of cached images.</span>
<a name="l01472"></a>01472 <span class="comment">    *</span>
<a name="l01473"></a>01473 <span class="comment">    * @access public</span>
<a name="l01474"></a>01474 <span class="comment">    * @param str $page Web-accessible path to the handler_image.php file.</span>
<a name="l01475"></a>01475 <span class="comment">    * @param str $qs The query string that the value should be passed to.</span>
<a name="l01476"></a>01476 <span class="comment">    */</span>
<a name="l01477"></a><a class="code" href="class_simple_pie.html#a3a38e3cf1b378fcb4ef7a6ad6411889b">01477</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#a3a38e3cf1b378fcb4ef7a6ad6411889b">set_image_handler</a>($page = <span class="keyword">false</span>, $qs = <span class="charliteral">&#39;i&#39;</span>)
<a name="l01478"></a>01478    {
<a name="l01479"></a>01479       <span class="keywordflow">if</span> ($page !== <span class="keyword">false</span>)
<a name="l01480"></a>01480       {
<a name="l01481"></a>01481          $this-&gt;sanitize-&gt;set_image_handler($page . <span class="charliteral">&#39;?&#39;</span> . $qs . <span class="charliteral">&#39;=&#39;</span>);
<a name="l01482"></a>01482       }
<a name="l01483"></a>01483       <span class="keywordflow">else</span>
<a name="l01484"></a>01484       {
<a name="l01485"></a>01485          $this-&gt;image_handler = <span class="stringliteral">&#39;&#39;</span>;
<a name="l01486"></a>01486       }
<a name="l01487"></a>01487    }
<a name="l01488"></a>01488 <span class="comment"></span>
<a name="l01489"></a>01489 <span class="comment">   /**</span>
<a name="l01490"></a>01490 <span class="comment">    * Set the limit for items returned per-feed with multifeeds.</span>
<a name="l01491"></a>01491 <span class="comment">    *</span>
<a name="l01492"></a>01492 <span class="comment">    * @access public</span>
<a name="l01493"></a>01493 <span class="comment">    * @param integer $limit The maximum number of items to return.</span>
<a name="l01494"></a>01494 <span class="comment">    */</span>
<a name="l01495"></a><a class="code" href="class_simple_pie.html#a1aacd0b338e9ef3da50a9dc6892399bf">01495</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#a1aacd0b338e9ef3da50a9dc6892399bf">set_item_limit</a>($limit = 0)
<a name="l01496"></a>01496    {
<a name="l01497"></a>01497       $this-&gt;item_limit = (int) $limit;
<a name="l01498"></a>01498    }
<a name="l01499"></a>01499 
<a name="l01500"></a>01500    <span class="keyword">function</span> init()
<a name="l01501"></a>01501    {
<a name="l01502"></a>01502       <span class="comment">// Check absolute bare minimum requirements.</span>
<a name="l01503"></a>01503       <span class="keywordflow">if</span> ((function_exists(<span class="stringliteral">&#39;version_compare&#39;</span>) &amp;&amp; version_compare(PHP_VERSION, <span class="stringliteral">&#39;4.3.0&#39;</span>, <span class="charliteral">&#39;&lt;&#39;</span>)) || !extension_loaded(<span class="stringliteral">&#39;xml&#39;</span>) || !extension_loaded(<span class="stringliteral">&#39;pcre&#39;</span>))
<a name="l01504"></a>01504       {
<a name="l01505"></a>01505          <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01506"></a>01506       }
<a name="l01507"></a>01507       <span class="comment">// Then check the xml extension is sane (i.e., libxml 2.7.x issue on PHP &lt; 5.2.9 and libxml 2.7.0 to 2.7.2 on any version) if we don&#39;t have xmlreader.</span>
<a name="l01508"></a>01508       elseif (!extension_loaded(<span class="stringliteral">&#39;xmlreader&#39;</span>))
<a name="l01509"></a>01509       {
<a name="l01510"></a>01510          <span class="keyword">static</span> $xml_is_sane = null;
<a name="l01511"></a>01511          <span class="keywordflow">if</span> ($xml_is_sane === null)
<a name="l01512"></a>01512          {
<a name="l01513"></a>01513             $parser_check = xml_parser_create();
<a name="l01514"></a>01514             xml_parse_into_struct($parser_check, <span class="stringliteral">&#39;&lt;foo&gt;&amp;amp;&lt;/foo&gt;&#39;</span>, $values);
<a name="l01515"></a>01515             xml_parser_free($parser_check);
<a name="l01516"></a>01516             $xml_is_sane = isset($values[0][<span class="stringliteral">&#39;value&#39;</span>]);
<a name="l01517"></a>01517          }
<a name="l01518"></a>01518          <span class="keywordflow">if</span> (!$xml_is_sane)
<a name="l01519"></a>01519          {
<a name="l01520"></a>01520             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01521"></a>01521          }
<a name="l01522"></a>01522       }
<a name="l01523"></a>01523 
<a name="l01524"></a>01524       <span class="keywordflow">if</span> (isset($_GET[$this-&gt;javascript]))
<a name="l01525"></a>01525       {
<a name="l01526"></a>01526          SimplePie_Misc::output_javascript();
<a name="l01527"></a>01527          exit;
<a name="l01528"></a>01528       }
<a name="l01529"></a>01529 
<a name="l01530"></a>01530       <span class="comment">// Pass whatever was set with config options over to the sanitizer.</span>
<a name="l01531"></a>01531       $this-&gt;sanitize-&gt;pass_cache_data($this-&gt;cache, $this-&gt;cache_location, $this-&gt;cache_name_function, $this-&gt;cache_class);
<a name="l01532"></a>01532       $this-&gt;sanitize-&gt;pass_file_data($this-&gt;file_class, $this-&gt;timeout, $this-&gt;useragent, $this-&gt;<a class="code" href="class_simple_pie.html#acaaac24562f1d663e4db077f9551d3d7">force_fsockopen</a>);
<a name="l01533"></a>01533 
<a name="l01534"></a>01534       <span class="keywordflow">if</span> ($this-&gt;feed_url !== null || $this-&gt;raw_data !== null)
<a name="l01535"></a>01535       {
<a name="l01536"></a>01536          $this-&gt;data = array();
<a name="l01537"></a>01537          $this-&gt;multifeed_objects = array();
<a name="l01538"></a>01538          $cache = <span class="keyword">false</span>;
<a name="l01539"></a>01539 
<a name="l01540"></a>01540          <span class="keywordflow">if</span> ($this-&gt;feed_url !== null)
<a name="l01541"></a>01541          {
<a name="l01542"></a>01542             $parsed_feed_url = SimplePie_Misc::parse_url($this-&gt;feed_url);
<a name="l01543"></a>01543             <span class="comment">// Decide whether to enable caching</span>
<a name="l01544"></a>01544             <span class="keywordflow">if</span> ($this-&gt;cache &amp;&amp; $parsed_feed_url[<span class="stringliteral">&#39;scheme&#39;</span>] !== <span class="stringliteral">&#39;&#39;</span>)
<a name="l01545"></a>01545             {
<a name="l01546"></a>01546                $cache = call_user_func(array($this-&gt;cache_class, <span class="stringliteral">&#39;create&#39;</span>), $this-&gt;cache_location, call_user_func($this-&gt;cache_name_function, $this-&gt;feed_url), <span class="stringliteral">&#39;spc&#39;</span>);
<a name="l01547"></a>01547             }
<a name="l01548"></a>01548             <span class="comment">// If it&#39;s enabled and we don&#39;t want an XML dump, use the cache</span>
<a name="l01549"></a>01549             <span class="keywordflow">if</span> ($cache &amp;&amp; !$this-&gt;xml_dump)
<a name="l01550"></a>01550             {
<a name="l01551"></a>01551                <span class="comment">// Load the Cache</span>
<a name="l01552"></a>01552                $this-&gt;data = $cache-&gt;load();
<a name="l01553"></a>01553                <span class="keywordflow">if</span> (!empty($this-&gt;data))
<a name="l01554"></a>01554                {
<a name="l01555"></a>01555                   <span class="comment">// If the cache is for an outdated build of SimplePie</span>
<a name="l01556"></a>01556                   <span class="keywordflow">if</span> (!isset($this-&gt;data[<span class="stringliteral">&#39;build&#39;</span>]) || $this-&gt;data[<span class="stringliteral">&#39;build&#39;</span>] !== SIMPLEPIE_BUILD)
<a name="l01557"></a>01557                   {
<a name="l01558"></a>01558                      $cache-&gt;unlink();
<a name="l01559"></a>01559                      $this-&gt;data = array();
<a name="l01560"></a>01560                   }
<a name="l01561"></a>01561                   <span class="comment">// If we&#39;ve hit a collision just rerun it with caching disabled</span>
<a name="l01562"></a>01562                   elseif (isset($this-&gt;data[<span class="stringliteral">&#39;url&#39;</span>]) &amp;&amp; $this-&gt;data[<span class="stringliteral">&#39;url&#39;</span>] !== $this-&gt;feed_url)
<a name="l01563"></a>01563                   {
<a name="l01564"></a>01564                      $cache = <span class="keyword">false</span>;
<a name="l01565"></a>01565                      $this-&gt;data = array();
<a name="l01566"></a>01566                   }
<a name="l01567"></a>01567                   <span class="comment">// If we&#39;ve got a non feed_url stored (if the page isn&#39;t actually a feed, or is a redirect) use that URL.</span>
<a name="l01568"></a>01568                   elseif (isset($this-&gt;data[<span class="stringliteral">&#39;feed_url&#39;</span>]))
<a name="l01569"></a>01569                   {
<a name="l01570"></a>01570                      <span class="comment">// If the autodiscovery cache is still valid use it.</span>
<a name="l01571"></a>01571                      <span class="keywordflow">if</span> ($cache-&gt;mtime() + $this-&gt;autodiscovery_cache_duration &gt; time())
<a name="l01572"></a>01572                      {
<a name="l01573"></a>01573                         <span class="comment">// Do not need to do feed autodiscovery yet.</span>
<a name="l01574"></a>01574                         <span class="keywordflow">if</span> ($this-&gt;data[<span class="stringliteral">&#39;feed_url&#39;</span>] === $this-&gt;data[<span class="stringliteral">&#39;url&#39;</span>])
<a name="l01575"></a>01575                         {
<a name="l01576"></a>01576                            $cache-&gt;unlink();
<a name="l01577"></a>01577                            $this-&gt;data = array();
<a name="l01578"></a>01578                         }
<a name="l01579"></a>01579                         <span class="keywordflow">else</span>
<a name="l01580"></a>01580                         {
<a name="l01581"></a>01581                            $this-&gt;<a class="code" href="class_simple_pie.html#adf01d8a1433c8afea0afbebadd7e56e0">set_feed_url</a>($this-&gt;data[<span class="stringliteral">&#39;feed_url&#39;</span>]);
<a name="l01582"></a>01582                            <span class="keywordflow">return</span> $this-&gt;init();
<a name="l01583"></a>01583                         }
<a name="l01584"></a>01584                      }
<a name="l01585"></a>01585                   }
<a name="l01586"></a>01586                   <span class="comment">// Check if the cache has been updated</span>
<a name="l01587"></a>01587                   elseif ($cache-&gt;mtime() + $this-&gt;cache_duration &lt; time())
<a name="l01588"></a>01588                   {
<a name="l01589"></a>01589                      <span class="comment">// If we have last-modified and/or etag set</span>
<a name="l01590"></a>01590                      <span class="keywordflow">if</span> (isset($this-&gt;data[<span class="stringliteral">&#39;headers&#39;</span>][<span class="stringliteral">&#39;last-modified&#39;</span>]) || isset($this-&gt;data[<span class="stringliteral">&#39;headers&#39;</span>][<span class="stringliteral">&#39;etag&#39;</span>]))
<a name="l01591"></a>01591                      {
<a name="l01592"></a>01592                         $headers = array();
<a name="l01593"></a>01593                         <span class="keywordflow">if</span> (isset($this-&gt;data[<span class="stringliteral">&#39;headers&#39;</span>][<span class="stringliteral">&#39;last-modified&#39;</span>]))
<a name="l01594"></a>01594                         {
<a name="l01595"></a>01595                            $headers[<span class="stringliteral">&#39;if-modified-since&#39;</span>] = $this-&gt;data[<span class="stringliteral">&#39;headers&#39;</span>][<span class="stringliteral">&#39;last-modified&#39;</span>];
<a name="l01596"></a>01596                         }
<a name="l01597"></a>01597                         <span class="keywordflow">if</span> (isset($this-&gt;data[<span class="stringliteral">&#39;headers&#39;</span>][<span class="stringliteral">&#39;etag&#39;</span>]))
<a name="l01598"></a>01598                         {
<a name="l01599"></a>01599                            $headers[<span class="stringliteral">&#39;if-none-match&#39;</span>] = <span class="charliteral">&#39;&quot;&#39;</span> . $this-&gt;data[<span class="stringliteral">&#39;headers&#39;</span>][<span class="stringliteral">&#39;etag&#39;</span>] . <span class="charliteral">&#39;&quot;&#39;</span>;
<a name="l01600"></a>01600                         }
<a name="l01601"></a>01601                         $file =&amp; <span class="keyword">new</span> $this-&gt;file_class($this-&gt;feed_url, $this-&gt;timeout/10, 5, $headers, $this-&gt;useragent, $this-&gt;<a class="code" href="class_simple_pie.html#acaaac24562f1d663e4db077f9551d3d7">force_fsockopen</a>);
<a name="l01602"></a>01602                         <span class="keywordflow">if</span> ($file-&gt;success)
<a name="l01603"></a>01603                         {
<a name="l01604"></a>01604                            <span class="keywordflow">if</span> ($file-&gt;status_code === 304)
<a name="l01605"></a>01605                            {
<a name="l01606"></a>01606                               $cache-&gt;touch();
<a name="l01607"></a>01607                               <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01608"></a>01608                            }
<a name="l01609"></a>01609                            <span class="keywordflow">else</span>
<a name="l01610"></a>01610                            {
<a name="l01611"></a>01611                               $headers = $file-&gt;headers;
<a name="l01612"></a>01612                            }
<a name="l01613"></a>01613                         }
<a name="l01614"></a>01614                         <span class="keywordflow">else</span>
<a name="l01615"></a>01615                         {
<a name="l01616"></a>01616                            unset($file);
<a name="l01617"></a>01617                         }
<a name="l01618"></a>01618                      }
<a name="l01619"></a>01619                   }
<a name="l01620"></a>01620                   <span class="comment">// If the cache is still valid, just return true</span>
<a name="l01621"></a>01621                   <span class="keywordflow">else</span>
<a name="l01622"></a>01622                   {
<a name="l01623"></a>01623                      <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01624"></a>01624                   }
<a name="l01625"></a>01625                }
<a name="l01626"></a>01626                <span class="comment">// If the cache is empty, delete it</span>
<a name="l01627"></a>01627                <span class="keywordflow">else</span>
<a name="l01628"></a>01628                {
<a name="l01629"></a>01629                   $cache-&gt;unlink();
<a name="l01630"></a>01630                   $this-&gt;data = array();
<a name="l01631"></a>01631                }
<a name="l01632"></a>01632             }
<a name="l01633"></a>01633             <span class="comment">// If we don&#39;t already have the file (it&#39;ll only exist if we&#39;ve opened it to check if the cache has been modified), open it.</span>
<a name="l01634"></a>01634             <span class="keywordflow">if</span> (!isset($file))
<a name="l01635"></a>01635             {
<a name="l01636"></a>01636                <span class="keywordflow">if</span> (is_a($this-&gt;file, <span class="stringliteral">&#39;SimplePie_File&#39;</span>) &amp;&amp; $this-&gt;file-&gt;url === $this-&gt;feed_url)
<a name="l01637"></a>01637                {
<a name="l01638"></a>01638                   $file =&amp; $this-&gt;file;
<a name="l01639"></a>01639                }
<a name="l01640"></a>01640                <span class="keywordflow">else</span>
<a name="l01641"></a>01641                {
<a name="l01642"></a>01642                   $file =&amp; <span class="keyword">new</span> $this-&gt;file_class($this-&gt;feed_url, $this-&gt;timeout, 5, null, $this-&gt;useragent, $this-&gt;<a class="code" href="class_simple_pie.html#acaaac24562f1d663e4db077f9551d3d7">force_fsockopen</a>);
<a name="l01643"></a>01643                }
<a name="l01644"></a>01644             }
<a name="l01645"></a>01645             <span class="comment">// If the file connection has an error, set SimplePie::error to that and quit</span>
<a name="l01646"></a>01646             <span class="keywordflow">if</span> (!$file-&gt;success &amp;&amp; !($file-&gt;method &amp; SIMPLEPIE_FILE_SOURCE_REMOTE === 0 || ($file-&gt;status_code === 200 || $file-&gt;status_code &gt; 206 &amp;&amp; $file-&gt;status_code &lt; 300)))
<a name="l01647"></a>01647             {
<a name="l01648"></a>01648                $this-&gt;<a class="code" href="class_simple_pie.html#a43b8d30b879d4f09ceb059b02af2bc02">error</a> = $file-&gt;error;
<a name="l01649"></a>01649                <span class="keywordflow">if</span> (!empty($this-&gt;data))
<a name="l01650"></a>01650                {
<a name="l01651"></a>01651                   <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01652"></a>01652                }
<a name="l01653"></a>01653                <span class="keywordflow">else</span>
<a name="l01654"></a>01654                {
<a name="l01655"></a>01655                   <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01656"></a>01656                }
<a name="l01657"></a>01657             }
<a name="l01658"></a>01658 
<a name="l01659"></a>01659             <span class="keywordflow">if</span> (!$this-&gt;<a class="code" href="class_simple_pie.html#ae44505dc9d86573a27594b5facce79e6">force_feed</a>)
<a name="l01660"></a>01660             {
<a name="l01661"></a>01661                <span class="comment">// Check if the supplied URL is a feed, if it isn&#39;t, look for it.</span>
<a name="l01662"></a>01662                $locate =&amp; <span class="keyword">new</span> $this-&gt;locator_class($file, $this-&gt;timeout, $this-&gt;useragent, $this-&gt;file_class, $this-&gt;max_checked_feeds, $this-&gt;content_type_sniffer_class);
<a name="l01663"></a>01663                <span class="keywordflow">if</span> (!$locate-&gt;is_feed($file))
<a name="l01664"></a>01664                {
<a name="l01665"></a>01665                   <span class="comment">// We need to unset this so that if SimplePie::set_file() has been called that object is untouched</span>
<a name="l01666"></a>01666                   unset($file);
<a name="l01667"></a>01667                   <span class="keywordflow">if</span> ($file = $locate-&gt;find($this-&gt;autodiscovery, $this-&gt;all_discovered_feeds))
<a name="l01668"></a>01668                   {
<a name="l01669"></a>01669                      <span class="keywordflow">if</span> ($cache)
<a name="l01670"></a>01670                      {
<a name="l01671"></a>01671                         $this-&gt;data = array(<span class="stringliteral">&#39;url&#39;</span> =&gt; $this-&gt;feed_url, <span class="stringliteral">&#39;feed_url&#39;</span> =&gt; $file-&gt;url, <span class="stringliteral">&#39;build&#39;</span> =&gt; SIMPLEPIE_BUILD);
<a name="l01672"></a>01672                         <span class="keywordflow">if</span> (!$cache-&gt;save($this))
<a name="l01673"></a>01673                         {
<a name="l01674"></a>01674                            trigger_error(<span class="stringliteral">&quot;$this-&gt;cache_location is not writeable&quot;</span>, E_USER_WARNING);
<a name="l01675"></a>01675                         }
<a name="l01676"></a>01676                         $cache = call_user_func(array($this-&gt;cache_class, <span class="stringliteral">&#39;create&#39;</span>), $this-&gt;cache_location, call_user_func($this-&gt;cache_name_function, $file-&gt;url), <span class="stringliteral">&#39;spc&#39;</span>);
<a name="l01677"></a>01677                      }
<a name="l01678"></a>01678                      $this-&gt;feed_url = $file-&gt;url;
<a name="l01679"></a>01679                   }
<a name="l01680"></a>01680                   <span class="keywordflow">else</span>
<a name="l01681"></a>01681                   {
<a name="l01682"></a>01682                      $this-&gt;<a class="code" href="class_simple_pie.html#a43b8d30b879d4f09ceb059b02af2bc02">error</a> = <span class="stringliteral">&quot;A feed could not be found at $this-&gt;feed_url&quot;</span>;
<a name="l01683"></a>01683                      <a class="code" href="class_simple_pie.html#a43b8d30b879d4f09ceb059b02af2bc02">SimplePie_Misc::error</a>($this-&gt;<a class="code" href="class_simple_pie.html#a43b8d30b879d4f09ceb059b02af2bc02">error</a>, E_USER_NOTICE, __FILE__, __LINE__);
<a name="l01684"></a>01684                      <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01685"></a>01685                   }
<a name="l01686"></a>01686                }
<a name="l01687"></a>01687                $locate = null;
<a name="l01688"></a>01688             }
<a name="l01689"></a>01689 
<a name="l01690"></a>01690             $headers = $file-&gt;headers;
<a name="l01691"></a>01691             $data = $file-&gt;body;
<a name="l01692"></a>01692             $sniffer =&amp; <span class="keyword">new</span> $this-&gt;content_type_sniffer_class($file);
<a name="l01693"></a>01693             $sniffed = $sniffer-&gt;get_type();
<a name="l01694"></a>01694          }
<a name="l01695"></a>01695          <span class="keywordflow">else</span>
<a name="l01696"></a>01696          {
<a name="l01697"></a>01697             $data = $this-&gt;raw_data;
<a name="l01698"></a>01698          }
<a name="l01699"></a>01699 
<a name="l01700"></a>01700          <span class="comment">// Set up array of possible encodings</span>
<a name="l01701"></a>01701          $encodings = array();
<a name="l01702"></a>01702 
<a name="l01703"></a>01703          <span class="comment">// First check to see if input has been overridden.</span>
<a name="l01704"></a>01704          <span class="keywordflow">if</span> ($this-&gt;input_encoding !== <span class="keyword">false</span>)
<a name="l01705"></a>01705          {
<a name="l01706"></a>01706             $encodings[] = $this-&gt;input_encoding;
<a name="l01707"></a>01707          }
<a name="l01708"></a>01708 
<a name="l01709"></a>01709          $application_types = array(<span class="stringliteral">&#39;application/xml&#39;</span>, <span class="stringliteral">&#39;application/xml-dtd&#39;</span>, <span class="stringliteral">&#39;application/xml-external-parsed-entity&#39;</span>);
<a name="l01710"></a>01710          $text_types = array(<span class="stringliteral">&#39;text/xml&#39;</span>, <span class="stringliteral">&#39;text/xml-external-parsed-entity&#39;</span>);
<a name="l01711"></a>01711 
<a name="l01712"></a>01712          <span class="comment">// RFC 3023 (only applies to sniffed content)</span>
<a name="l01713"></a>01713          <span class="keywordflow">if</span> (isset($sniffed))
<a name="l01714"></a>01714          {
<a name="l01715"></a>01715             <span class="keywordflow">if</span> (in_array($sniffed, $application_types) || substr($sniffed, 0, 12) === <span class="stringliteral">&#39;application/&#39;</span> &amp;&amp; substr($sniffed, -4) === <span class="stringliteral">&#39;+xml&#39;</span>)
<a name="l01716"></a>01716             {
<a name="l01717"></a>01717                <span class="keywordflow">if</span> (isset($headers[<span class="stringliteral">&#39;content-type&#39;</span>]) &amp;&amp; preg_match(<span class="stringliteral">&#39;/;\x20?charset=([^;]*)/i&#39;</span>, $headers[<span class="stringliteral">&#39;content-type&#39;</span>], $charset))
<a name="l01718"></a>01718                {
<a name="l01719"></a>01719                   $encodings[] = strtoupper($charset[1]);
<a name="l01720"></a>01720                }
<a name="l01721"></a>01721                $encodings = array_merge($encodings, <a class="code" href="class_simple_pie___misc.html#a94433500e38862793bfda81fdb3c6751">SimplePie_Misc::xml_encoding</a>($data));
<a name="l01722"></a>01722                $encodings[] = <span class="stringliteral">&#39;UTF-8&#39;</span>;
<a name="l01723"></a>01723             }
<a name="l01724"></a>01724             elseif (in_array($sniffed, $text_types) || substr($sniffed, 0, 5) === <span class="stringliteral">&#39;text/&#39;</span> &amp;&amp; substr($sniffed, -4) === <span class="stringliteral">&#39;+xml&#39;</span>)
<a name="l01725"></a>01725             {
<a name="l01726"></a>01726                <span class="keywordflow">if</span> (isset($headers[<span class="stringliteral">&#39;content-type&#39;</span>]) &amp;&amp; preg_match(<span class="stringliteral">&#39;/;\x20?charset=([^;]*)/i&#39;</span>, $headers[<span class="stringliteral">&#39;content-type&#39;</span>], $charset))
<a name="l01727"></a>01727                {
<a name="l01728"></a>01728                   $encodings[] = $charset[1];
<a name="l01729"></a>01729                }
<a name="l01730"></a>01730                $encodings[] = <span class="stringliteral">&#39;US-ASCII&#39;</span>;
<a name="l01731"></a>01731             }
<a name="l01732"></a>01732             <span class="comment">// Text MIME-type default</span>
<a name="l01733"></a>01733             elseif (substr($sniffed, 0, 5) === <span class="stringliteral">&#39;text/&#39;</span>)
<a name="l01734"></a>01734             {
<a name="l01735"></a>01735                $encodings[] = <span class="stringliteral">&#39;US-ASCII&#39;</span>;
<a name="l01736"></a>01736             }
<a name="l01737"></a>01737          }
<a name="l01738"></a>01738 
<a name="l01739"></a>01739          <span class="comment">// Fallback to XML 1.0 Appendix F.1/UTF-8/ISO-8859-1</span>
<a name="l01740"></a>01740          $encodings = array_merge($encodings, <a class="code" href="class_simple_pie___misc.html#a94433500e38862793bfda81fdb3c6751">SimplePie_Misc::xml_encoding</a>($data));
<a name="l01741"></a>01741          $encodings[] = <span class="stringliteral">&#39;UTF-8&#39;</span>;
<a name="l01742"></a>01742          $encodings[] = <span class="stringliteral">&#39;ISO-8859-1&#39;</span>;
<a name="l01743"></a>01743 
<a name="l01744"></a>01744          <span class="comment">// There&#39;s no point in trying an encoding twice</span>
<a name="l01745"></a>01745          $encodings = array_unique($encodings);
<a name="l01746"></a>01746 
<a name="l01747"></a>01747          <span class="comment">// If we want the XML, just output that with the most likely encoding and quit</span>
<a name="l01748"></a>01748          <span class="keywordflow">if</span> ($this-&gt;xml_dump)
<a name="l01749"></a>01749          {
<a name="l01750"></a>01750             header(<span class="stringliteral">&#39;Content-type: text/xml; charset=&#39;</span> . $encodings[0]);
<a name="l01751"></a>01751             echo $data;
<a name="l01752"></a>01752             exit;
<a name="l01753"></a>01753          }
<a name="l01754"></a>01754 
<a name="l01755"></a>01755          <span class="comment">// Loop through each possible encoding, till we return something, or run out of possibilities</span>
<a name="l01756"></a>01756          <span class="keywordflow">foreach</span> ($encodings as $encoding)
<a name="l01757"></a>01757          {
<a name="l01758"></a>01758             <span class="comment">// Change the encoding to UTF-8 (as we always use UTF-8 internally)</span>
<a name="l01759"></a>01759             <span class="keywordflow">if</span> ($utf8_data = SimplePie_Misc::change_encoding($data, $encoding, <span class="stringliteral">&#39;UTF-8&#39;</span>))
<a name="l01760"></a>01760             {
<a name="l01761"></a>01761                <span class="comment">// Create new parser</span>
<a name="l01762"></a>01762                $parser =&amp; <span class="keyword">new</span> $this-&gt;parser_class();
<a name="l01763"></a>01763 
<a name="l01764"></a>01764                <span class="comment">// If it&#39;s parsed fine</span>
<a name="l01765"></a>01765                <span class="keywordflow">if</span> ($parser-&gt;parse($utf8_data, <span class="stringliteral">&#39;UTF-8&#39;</span>))
<a name="l01766"></a>01766                {
<a name="l01767"></a>01767                   $this-&gt;data = $parser-&gt;get_data();
<a name="l01768"></a>01768                   <span class="keywordflow">if</span> ($this-&gt;get_type() &amp; ~SIMPLEPIE_TYPE_NONE)
<a name="l01769"></a>01769                   {
<a name="l01770"></a>01770                      <span class="keywordflow">if</span> (isset($headers))
<a name="l01771"></a>01771                      {
<a name="l01772"></a>01772                         $this-&gt;data[<span class="stringliteral">&#39;headers&#39;</span>] = $headers;
<a name="l01773"></a>01773                      }
<a name="l01774"></a>01774                      $this-&gt;data[<span class="stringliteral">&#39;build&#39;</span>] = SIMPLEPIE_BUILD;
<a name="l01775"></a>01775 
<a name="l01776"></a>01776                      <span class="comment">// Cache the file if caching is enabled</span>
<a name="l01777"></a>01777                      <span class="keywordflow">if</span> ($cache &amp;&amp; !$cache-&gt;save($this))
<a name="l01778"></a>01778                      {
<a name="l01779"></a>01779                         trigger_error(<span class="stringliteral">&quot;$cache-&gt;name is not writeable&quot;</span>, E_USER_WARNING);
<a name="l01780"></a>01780                      }
<a name="l01781"></a>01781                      <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01782"></a>01782                   }
<a name="l01783"></a>01783                   <span class="keywordflow">else</span>
<a name="l01784"></a>01784                   {
<a name="l01785"></a>01785                      $this-&gt;<a class="code" href="class_simple_pie.html#a43b8d30b879d4f09ceb059b02af2bc02">error</a> = <span class="stringliteral">&quot;A feed could not be found at $this-&gt;feed_url&quot;</span>;
<a name="l01786"></a>01786                      <a class="code" href="class_simple_pie.html#a43b8d30b879d4f09ceb059b02af2bc02">SimplePie_Misc::error</a>($this-&gt;<a class="code" href="class_simple_pie.html#a43b8d30b879d4f09ceb059b02af2bc02">error</a>, E_USER_NOTICE, __FILE__, __LINE__);
<a name="l01787"></a>01787                      <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01788"></a>01788                   }
<a name="l01789"></a>01789                }
<a name="l01790"></a>01790             }
<a name="l01791"></a>01791          }
<a name="l01792"></a>01792          <span class="keywordflow">if</span>(isset($parser))
<a name="l01793"></a>01793          {
<a name="l01794"></a>01794             <span class="comment">// We have an error, just set SimplePie_Misc::error to it and quit</span>
<a name="l01795"></a>01795             $this-&gt;<a class="code" href="class_simple_pie.html#a43b8d30b879d4f09ceb059b02af2bc02">error</a> = sprintf(<span class="stringliteral">&#39;XML error: %s at line %d, column %d&#39;</span>, $parser-&gt;get_error_string(), $parser-&gt;get_current_line(), $parser-&gt;get_current_column());
<a name="l01796"></a>01796          }
<a name="l01797"></a>01797          <span class="keywordflow">else</span>
<a name="l01798"></a>01798          {
<a name="l01799"></a>01799             $this-&gt;<a class="code" href="class_simple_pie.html#a43b8d30b879d4f09ceb059b02af2bc02">error</a> = <span class="stringliteral">&#39;The data could not be converted to UTF-8&#39;</span>;
<a name="l01800"></a>01800          }
<a name="l01801"></a>01801          <a class="code" href="class_simple_pie.html#a43b8d30b879d4f09ceb059b02af2bc02">SimplePie_Misc::error</a>($this-&gt;<a class="code" href="class_simple_pie.html#a43b8d30b879d4f09ceb059b02af2bc02">error</a>, E_USER_NOTICE, __FILE__, __LINE__);
<a name="l01802"></a>01802          <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01803"></a>01803       }
<a name="l01804"></a>01804       elseif (!empty($this-&gt;multifeed_url))
<a name="l01805"></a>01805       {
<a name="l01806"></a>01806          $i = 0;
<a name="l01807"></a>01807          $success = 0;
<a name="l01808"></a>01808          $this-&gt;multifeed_objects = array();
<a name="l01809"></a>01809          <span class="keywordflow">foreach</span> ($this-&gt;multifeed_url as $url)
<a name="l01810"></a>01810          {
<a name="l01811"></a>01811             <span class="keywordflow">if</span> (SIMPLEPIE_PHP5)
<a name="l01812"></a>01812             {
<a name="l01813"></a>01813                <span class="comment">// This keyword needs to defy coding standards for PHP4 compatibility</span>
<a name="l01814"></a>01814                $this-&gt;multifeed_objects[$i] = clone($this);
<a name="l01815"></a>01815             }
<a name="l01816"></a>01816             <span class="keywordflow">else</span>
<a name="l01817"></a>01817             {
<a name="l01818"></a>01818                $this-&gt;multifeed_objects[$i] = $this;
<a name="l01819"></a>01819             }
<a name="l01820"></a>01820             $this-&gt;multifeed_objects[$i]-&gt;set_feed_url($url);
<a name="l01821"></a>01821             $success |= $this-&gt;multifeed_objects[$i]-&gt;init();
<a name="l01822"></a>01822             $i++;
<a name="l01823"></a>01823          }
<a name="l01824"></a>01824          <span class="keywordflow">return</span> (<span class="keywordtype">bool</span>) $success;
<a name="l01825"></a>01825       }
<a name="l01826"></a>01826       <span class="keywordflow">else</span>
<a name="l01827"></a>01827       {
<a name="l01828"></a>01828          <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01829"></a>01829       }
<a name="l01830"></a>01830    }
<a name="l01831"></a>01831 <span class="comment"></span>
<a name="l01832"></a>01832 <span class="comment">   /**</span>
<a name="l01833"></a>01833 <span class="comment">    * Return the error message for the occured error</span>
<a name="l01834"></a>01834 <span class="comment">    *</span>
<a name="l01835"></a>01835 <span class="comment">    * @access public</span>
<a name="l01836"></a>01836 <span class="comment">    * @return string Error message</span>
<a name="l01837"></a>01837 <span class="comment">    */</span>
<a name="l01838"></a><a class="code" href="class_simple_pie.html#a43b8d30b879d4f09ceb059b02af2bc02">01838</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#a43b8d30b879d4f09ceb059b02af2bc02">error</a>()
<a name="l01839"></a>01839    {
<a name="l01840"></a>01840       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie.html#a43b8d30b879d4f09ceb059b02af2bc02">error</a>;
<a name="l01841"></a>01841    }
<a name="l01842"></a>01842 
<a name="l01843"></a>01843    <span class="keyword">function</span> get_encoding()
<a name="l01844"></a>01844    {
<a name="l01845"></a>01845       <span class="keywordflow">return</span> $this-&gt;sanitize-&gt;output_encoding;
<a name="l01846"></a>01846    }
<a name="l01847"></a>01847 
<a name="l01848"></a>01848    <span class="keyword">function</span> handle_content_type($mime = <span class="stringliteral">&#39;text/html&#39;</span>)
<a name="l01849"></a>01849    {
<a name="l01850"></a>01850       <span class="keywordflow">if</span> (!headers_sent())
<a name="l01851"></a>01851       {
<a name="l01852"></a>01852          $header = <span class="stringliteral">&quot;Content-type: $mime;&quot;</span>;
<a name="l01853"></a>01853          <span class="keywordflow">if</span> ($this-&gt;get_encoding())
<a name="l01854"></a>01854          {
<a name="l01855"></a>01855             $header .= <span class="stringliteral">&#39; charset=&#39;</span> . $this-&gt;get_encoding();
<a name="l01856"></a>01856          }
<a name="l01857"></a>01857          <span class="keywordflow">else</span>
<a name="l01858"></a>01858          {
<a name="l01859"></a>01859             $header .= <span class="stringliteral">&#39; charset=UTF-8&#39;</span>;
<a name="l01860"></a>01860          }
<a name="l01861"></a>01861          header($header);
<a name="l01862"></a>01862       }
<a name="l01863"></a>01863    }
<a name="l01864"></a>01864 
<a name="l01865"></a>01865    <span class="keyword">function</span> get_type()
<a name="l01866"></a>01866    {
<a name="l01867"></a>01867       <span class="keywordflow">if</span> (!isset($this-&gt;data[<span class="stringliteral">&#39;type&#39;</span>]))
<a name="l01868"></a>01868       {
<a name="l01869"></a>01869          $this-&gt;data[<span class="stringliteral">&#39;type&#39;</span>] = SIMPLEPIE_TYPE_ALL;
<a name="l01870"></a>01870          <span class="keywordflow">if</span> (isset($this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;feed&#39;</span>]))
<a name="l01871"></a>01871          {
<a name="l01872"></a>01872             $this-&gt;data[<span class="stringliteral">&#39;type&#39;</span>] &amp;= SIMPLEPIE_TYPE_ATOM_10;
<a name="l01873"></a>01873          }
<a name="l01874"></a>01874          elseif (isset($this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;feed&#39;</span>]))
<a name="l01875"></a>01875          {
<a name="l01876"></a>01876             $this-&gt;data[<span class="stringliteral">&#39;type&#39;</span>] &amp;= SIMPLEPIE_TYPE_ATOM_03;
<a name="l01877"></a>01877          }
<a name="l01878"></a>01878          elseif (isset($this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RDF][<span class="stringliteral">&#39;RDF&#39;</span>]))
<a name="l01879"></a>01879          {
<a name="l01880"></a>01880             <span class="keywordflow">if</span> (isset($this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RDF][<span class="stringliteral">&#39;RDF&#39;</span>][0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RSS_10][<span class="stringliteral">&#39;channel&#39;</span>])
<a name="l01881"></a>01881             || isset($this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RDF][<span class="stringliteral">&#39;RDF&#39;</span>][0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RSS_10][<span class="stringliteral">&#39;image&#39;</span>])
<a name="l01882"></a>01882             || isset($this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RDF][<span class="stringliteral">&#39;RDF&#39;</span>][0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RSS_10][<span class="stringliteral">&#39;item&#39;</span>])
<a name="l01883"></a>01883             || isset($this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RDF][<span class="stringliteral">&#39;RDF&#39;</span>][0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RSS_10][<span class="stringliteral">&#39;textinput&#39;</span>]))
<a name="l01884"></a>01884             {
<a name="l01885"></a>01885                $this-&gt;data[<span class="stringliteral">&#39;type&#39;</span>] &amp;= SIMPLEPIE_TYPE_RSS_10;
<a name="l01886"></a>01886             }
<a name="l01887"></a>01887             <span class="keywordflow">if</span> (isset($this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RDF][<span class="stringliteral">&#39;RDF&#39;</span>][0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RSS_090][<span class="stringliteral">&#39;channel&#39;</span>])
<a name="l01888"></a>01888             || isset($this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RDF][<span class="stringliteral">&#39;RDF&#39;</span>][0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RSS_090][<span class="stringliteral">&#39;image&#39;</span>])
<a name="l01889"></a>01889             || isset($this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RDF][<span class="stringliteral">&#39;RDF&#39;</span>][0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RSS_090][<span class="stringliteral">&#39;item&#39;</span>])
<a name="l01890"></a>01890             || isset($this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RDF][<span class="stringliteral">&#39;RDF&#39;</span>][0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RSS_090][<span class="stringliteral">&#39;textinput&#39;</span>]))
<a name="l01891"></a>01891             {
<a name="l01892"></a>01892                $this-&gt;data[<span class="stringliteral">&#39;type&#39;</span>] &amp;= SIMPLEPIE_TYPE_RSS_090;
<a name="l01893"></a>01893             }
<a name="l01894"></a>01894          }
<a name="l01895"></a>01895          elseif (isset($this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RSS_20][<span class="stringliteral">&#39;rss&#39;</span>]))
<a name="l01896"></a>01896          {
<a name="l01897"></a>01897             $this-&gt;data[<span class="stringliteral">&#39;type&#39;</span>] &amp;= SIMPLEPIE_TYPE_RSS_ALL;
<a name="l01898"></a>01898             <span class="keywordflow">if</span> (isset($this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RSS_20][<span class="stringliteral">&#39;rss&#39;</span>][0][<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;version&#39;</span>]))
<a name="l01899"></a>01899             {
<a name="l01900"></a>01900                <span class="keywordflow">switch</span> (trim($this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RSS_20][<span class="stringliteral">&#39;rss&#39;</span>][0][<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;version&#39;</span>]))
<a name="l01901"></a>01901                {
<a name="l01902"></a>01902                   <span class="keywordflow">case</span> <span class="stringliteral">&#39;0.91&#39;</span>:
<a name="l01903"></a>01903                      $this-&gt;data[<span class="stringliteral">&#39;type&#39;</span>] &amp;= SIMPLEPIE_TYPE_RSS_091;
<a name="l01904"></a>01904                      <span class="keywordflow">if</span> (isset($this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RSS_20][<span class="stringliteral">&#39;rss&#39;</span>][0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RSS_20][<span class="stringliteral">&#39;skiphours&#39;</span>][<span class="stringliteral">&#39;hour&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l01905"></a>01905                      {
<a name="l01906"></a>01906                         <span class="keywordflow">switch</span> (trim($this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RSS_20][<span class="stringliteral">&#39;rss&#39;</span>][0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RSS_20][<span class="stringliteral">&#39;skiphours&#39;</span>][<span class="stringliteral">&#39;hour&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l01907"></a>01907                         {
<a name="l01908"></a>01908                            <span class="keywordflow">case</span> <span class="charliteral">&#39;0&#39;</span>:
<a name="l01909"></a>01909                               $this-&gt;data[<span class="stringliteral">&#39;type&#39;</span>] &amp;= SIMPLEPIE_TYPE_RSS_091_NETSCAPE;
<a name="l01910"></a>01910                               <span class="keywordflow">break</span>;
<a name="l01911"></a>01911 
<a name="l01912"></a>01912                            <span class="keywordflow">case</span> <span class="stringliteral">&#39;24&#39;</span>:
<a name="l01913"></a>01913                               $this-&gt;data[<span class="stringliteral">&#39;type&#39;</span>] &amp;= SIMPLEPIE_TYPE_RSS_091_USERLAND;
<a name="l01914"></a>01914                               <span class="keywordflow">break</span>;
<a name="l01915"></a>01915                         }
<a name="l01916"></a>01916                      }
<a name="l01917"></a>01917                      <span class="keywordflow">break</span>;
<a name="l01918"></a>01918 
<a name="l01919"></a>01919                   <span class="keywordflow">case</span> <span class="stringliteral">&#39;0.92&#39;</span>:
<a name="l01920"></a>01920                      $this-&gt;data[<span class="stringliteral">&#39;type&#39;</span>] &amp;= SIMPLEPIE_TYPE_RSS_092;
<a name="l01921"></a>01921                      <span class="keywordflow">break</span>;
<a name="l01922"></a>01922 
<a name="l01923"></a>01923                   <span class="keywordflow">case</span> <span class="stringliteral">&#39;0.93&#39;</span>:
<a name="l01924"></a>01924                      $this-&gt;data[<span class="stringliteral">&#39;type&#39;</span>] &amp;= SIMPLEPIE_TYPE_RSS_093;
<a name="l01925"></a>01925                      <span class="keywordflow">break</span>;
<a name="l01926"></a>01926 
<a name="l01927"></a>01927                   <span class="keywordflow">case</span> <span class="stringliteral">&#39;0.94&#39;</span>:
<a name="l01928"></a>01928                      $this-&gt;data[<span class="stringliteral">&#39;type&#39;</span>] &amp;= SIMPLEPIE_TYPE_RSS_094;
<a name="l01929"></a>01929                      <span class="keywordflow">break</span>;
<a name="l01930"></a>01930 
<a name="l01931"></a>01931                   <span class="keywordflow">case</span> <span class="stringliteral">&#39;2.0&#39;</span>:
<a name="l01932"></a>01932                      $this-&gt;data[<span class="stringliteral">&#39;type&#39;</span>] &amp;= SIMPLEPIE_TYPE_RSS_20;
<a name="l01933"></a>01933                      <span class="keywordflow">break</span>;
<a name="l01934"></a>01934                }
<a name="l01935"></a>01935             }
<a name="l01936"></a>01936          }
<a name="l01937"></a>01937          <span class="keywordflow">else</span>
<a name="l01938"></a>01938          {
<a name="l01939"></a>01939             $this-&gt;data[<span class="stringliteral">&#39;type&#39;</span>] = SIMPLEPIE_TYPE_NONE;
<a name="l01940"></a>01940          }
<a name="l01941"></a>01941       }
<a name="l01942"></a>01942       <span class="keywordflow">return</span> $this-&gt;data[<span class="stringliteral">&#39;type&#39;</span>];
<a name="l01943"></a>01943    }
<a name="l01944"></a>01944 <span class="comment"></span>
<a name="l01945"></a>01945 <span class="comment">   /**</span>
<a name="l01946"></a>01946 <span class="comment">    * Returns the URL for the favicon of the feed&#39;s website.</span>
<a name="l01947"></a>01947 <span class="comment">    *</span>
<a name="l01948"></a>01948 <span class="comment">    * @todo Cache atom:icon</span>
<a name="l01949"></a>01949 <span class="comment">    * @access public</span>
<a name="l01950"></a>01950 <span class="comment">    * @since 1.0</span>
<a name="l01951"></a>01951 <span class="comment">    */</span>
<a name="l01952"></a><a class="code" href="class_simple_pie.html#a8fad0bea08499c9d212b492a43165f5c">01952</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#a8fad0bea08499c9d212b492a43165f5c">get_favicon</a>()
<a name="l01953"></a>01953    {
<a name="l01954"></a>01954       <span class="keywordflow">if</span> ($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;icon&#39;</span>))
<a name="l01955"></a>01955       {
<a name="l01956"></a>01956          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($return[0]));
<a name="l01957"></a>01957       }
<a name="l01958"></a>01958       elseif (($url = $this-&gt;get_link()) !== null &amp;&amp; preg_match(<span class="stringliteral">&#39;/^http(s)?:\/\//i&#39;</span>, $url))
<a name="l01959"></a>01959       {
<a name="l01960"></a>01960          $favicon = SimplePie_Misc::absolutize_url(<span class="stringliteral">&#39;/favicon.ico&#39;</span>, $url);
<a name="l01961"></a>01961 
<a name="l01962"></a>01962          <span class="keywordflow">if</span> ($this-&gt;cache &amp;&amp; $this-&gt;favicon_handler)
<a name="l01963"></a>01963          {
<a name="l01964"></a>01964             $favicon_filename = call_user_func($this-&gt;cache_name_function, $favicon);
<a name="l01965"></a>01965             $cache = call_user_func(array($this-&gt;cache_class, <span class="stringliteral">&#39;create&#39;</span>), $this-&gt;cache_location, $favicon_filename, <span class="stringliteral">&#39;spi&#39;</span>);
<a name="l01966"></a>01966 
<a name="l01967"></a>01967             <span class="keywordflow">if</span> ($cache-&gt;load())
<a name="l01968"></a>01968             {
<a name="l01969"></a>01969                <span class="keywordflow">return</span> $this-&gt;sanitize($this-&gt;favicon_handler . $favicon_filename, SIMPLEPIE_CONSTRUCT_IRI);
<a name="l01970"></a>01970             }
<a name="l01971"></a>01971             <span class="keywordflow">else</span>
<a name="l01972"></a>01972             {
<a name="l01973"></a>01973                $file =&amp; <span class="keyword">new</span> $this-&gt;file_class($favicon, $this-&gt;timeout / 10, 5, array(<span class="stringliteral">&#39;X-FORWARDED-FOR&#39;</span> =&gt; $_SERVER[<span class="stringliteral">&#39;REMOTE_ADDR&#39;</span>]), $this-&gt;useragent, $this-&gt;<a class="code" href="class_simple_pie.html#acaaac24562f1d663e4db077f9551d3d7">force_fsockopen</a>);
<a name="l01974"></a>01974 
<a name="l01975"></a>01975                <span class="keywordflow">if</span> ($file-&gt;success &amp;&amp; ($file-&gt;method &amp; SIMPLEPIE_FILE_SOURCE_REMOTE === 0 || ($file-&gt;status_code === 200 || $file-&gt;status_code &gt; 206 &amp;&amp; $file-&gt;status_code &lt; 300)) &amp;&amp; strlen($file-&gt;body) &gt; 0)
<a name="l01976"></a>01976                {
<a name="l01977"></a>01977                   $sniffer =&amp; <span class="keyword">new</span> $this-&gt;content_type_sniffer_class($file);
<a name="l01978"></a>01978                   <span class="keywordflow">if</span> (substr($sniffer-&gt;get_type(), 0, 6) === <span class="stringliteral">&#39;image/&#39;</span>)
<a name="l01979"></a>01979                   {
<a name="l01980"></a>01980                      <span class="keywordflow">if</span> ($cache-&gt;save(array(<span class="stringliteral">&#39;headers&#39;</span> =&gt; $file-&gt;headers, <span class="stringliteral">&#39;body&#39;</span> =&gt; $file-&gt;body)))
<a name="l01981"></a>01981                      {
<a name="l01982"></a>01982                         <span class="keywordflow">return</span> $this-&gt;sanitize($this-&gt;favicon_handler . $favicon_filename, SIMPLEPIE_CONSTRUCT_IRI);
<a name="l01983"></a>01983                      }
<a name="l01984"></a>01984                      <span class="keywordflow">else</span>
<a name="l01985"></a>01985                      {
<a name="l01986"></a>01986                         trigger_error(<span class="stringliteral">&quot;$cache-&gt;name is not writeable&quot;</span>, E_USER_WARNING);
<a name="l01987"></a>01987                         <span class="keywordflow">return</span> $this-&gt;sanitize($favicon, SIMPLEPIE_CONSTRUCT_IRI);
<a name="l01988"></a>01988                      }
<a name="l01989"></a>01989                   }
<a name="l01990"></a>01990                   <span class="comment">// not an image</span>
<a name="l01991"></a>01991                   <span class="keywordflow">else</span>
<a name="l01992"></a>01992                   {
<a name="l01993"></a>01993                      <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01994"></a>01994                   }
<a name="l01995"></a>01995                }
<a name="l01996"></a>01996             }
<a name="l01997"></a>01997          }
<a name="l01998"></a>01998          <span class="keywordflow">else</span>
<a name="l01999"></a>01999          {
<a name="l02000"></a>02000             <span class="keywordflow">return</span> $this-&gt;sanitize($favicon, SIMPLEPIE_CONSTRUCT_IRI);
<a name="l02001"></a>02001          }
<a name="l02002"></a>02002       }
<a name="l02003"></a>02003       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02004"></a>02004    }
<a name="l02005"></a>02005 <span class="comment"></span>
<a name="l02006"></a>02006 <span class="comment">   /**</span>
<a name="l02007"></a>02007 <span class="comment">    * @todo If we have a perm redirect we should return the new URL</span>
<a name="l02008"></a>02008 <span class="comment">    * @todo When we make the above change, let&#39;s support &lt;itunes:new-feed-url&gt; as well</span>
<a name="l02009"></a>02009 <span class="comment">    * @todo Also, |atom:link|@rel=self</span>
<a name="l02010"></a>02010 <span class="comment">    */</span>
<a name="l02011"></a><a class="code" href="class_simple_pie.html#a3b965616e4b4facd528112e9438e1be9">02011</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#a3b965616e4b4facd528112e9438e1be9">subscribe_url</a>()
<a name="l02012"></a>02012    {
<a name="l02013"></a>02013       <span class="keywordflow">if</span> ($this-&gt;feed_url !== null)
<a name="l02014"></a>02014       {
<a name="l02015"></a>02015          <span class="keywordflow">return</span> $this-&gt;sanitize($this-&gt;feed_url, SIMPLEPIE_CONSTRUCT_IRI);
<a name="l02016"></a>02016       }
<a name="l02017"></a>02017       <span class="keywordflow">else</span>
<a name="l02018"></a>02018       {
<a name="l02019"></a>02019          <span class="keywordflow">return</span> null;
<a name="l02020"></a>02020       }
<a name="l02021"></a>02021    }
<a name="l02022"></a>02022 
<a name="l02023"></a>02023    <span class="keyword">function</span> subscribe_feed()
<a name="l02024"></a>02024    {
<a name="l02025"></a>02025       <span class="keywordflow">if</span> ($this-&gt;feed_url !== null)
<a name="l02026"></a>02026       {
<a name="l02027"></a>02027          <span class="keywordflow">return</span> $this-&gt;sanitize(SimplePie_Misc::fix_protocol($this-&gt;feed_url, 2), SIMPLEPIE_CONSTRUCT_IRI);
<a name="l02028"></a>02028       }
<a name="l02029"></a>02029       <span class="keywordflow">else</span>
<a name="l02030"></a>02030       {
<a name="l02031"></a>02031          <span class="keywordflow">return</span> null;
<a name="l02032"></a>02032       }
<a name="l02033"></a>02033    }
<a name="l02034"></a>02034 
<a name="l02035"></a>02035    <span class="keyword">function</span> subscribe_outlook()
<a name="l02036"></a>02036    {
<a name="l02037"></a>02037       <span class="keywordflow">if</span> ($this-&gt;feed_url !== null)
<a name="l02038"></a>02038       {
<a name="l02039"></a>02039          <span class="keywordflow">return</span> $this-&gt;sanitize(<span class="stringliteral">&#39;outlook&#39;</span> . SimplePie_Misc::fix_protocol($this-&gt;feed_url, 2), SIMPLEPIE_CONSTRUCT_IRI);
<a name="l02040"></a>02040       }
<a name="l02041"></a>02041       <span class="keywordflow">else</span>
<a name="l02042"></a>02042       {
<a name="l02043"></a>02043          <span class="keywordflow">return</span> null;
<a name="l02044"></a>02044       }
<a name="l02045"></a>02045    }
<a name="l02046"></a>02046 
<a name="l02047"></a>02047    <span class="keyword">function</span> subscribe_podcast()
<a name="l02048"></a>02048    {
<a name="l02049"></a>02049       <span class="keywordflow">if</span> ($this-&gt;feed_url !== null)
<a name="l02050"></a>02050       {
<a name="l02051"></a>02051          <span class="keywordflow">return</span> $this-&gt;sanitize(SimplePie_Misc::fix_protocol($this-&gt;feed_url, 3), SIMPLEPIE_CONSTRUCT_IRI);
<a name="l02052"></a>02052       }
<a name="l02053"></a>02053       <span class="keywordflow">else</span>
<a name="l02054"></a>02054       {
<a name="l02055"></a>02055          <span class="keywordflow">return</span> null;
<a name="l02056"></a>02056       }
<a name="l02057"></a>02057    }
<a name="l02058"></a>02058 
<a name="l02059"></a>02059    <span class="keyword">function</span> subscribe_itunes()
<a name="l02060"></a>02060    {
<a name="l02061"></a>02061       <span class="keywordflow">if</span> ($this-&gt;feed_url !== null)
<a name="l02062"></a>02062       {
<a name="l02063"></a>02063          <span class="keywordflow">return</span> $this-&gt;sanitize(SimplePie_Misc::fix_protocol($this-&gt;feed_url, 4), SIMPLEPIE_CONSTRUCT_IRI);
<a name="l02064"></a>02064       }
<a name="l02065"></a>02065       <span class="keywordflow">else</span>
<a name="l02066"></a>02066       {
<a name="l02067"></a>02067          <span class="keywordflow">return</span> null;
<a name="l02068"></a>02068       }
<a name="l02069"></a>02069    }
<a name="l02070"></a>02070 <span class="comment"></span>
<a name="l02071"></a>02071 <span class="comment">   /**</span>
<a name="l02072"></a>02072 <span class="comment">    * Creates the subscribe_* methods&#39; return data</span>
<a name="l02073"></a>02073 <span class="comment">    *</span>
<a name="l02074"></a>02074 <span class="comment">    * @access private</span>
<a name="l02075"></a>02075 <span class="comment">    * @param string $feed_url String to prefix to the feed URL</span>
<a name="l02076"></a>02076 <span class="comment">    * @param string $site_url String to prefix to the site URL (and</span>
<a name="l02077"></a>02077 <span class="comment">    * suffix to the feed URL)</span>
<a name="l02078"></a>02078 <span class="comment">    * @return mixed URL if feed exists, false otherwise</span>
<a name="l02079"></a>02079 <span class="comment">    */</span>
<a name="l02080"></a><a class="code" href="class_simple_pie.html#a64e5cf1c4eecf86ed5868abbbcaadd83">02080</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#a64e5cf1c4eecf86ed5868abbbcaadd83">subscribe_service</a>($feed_url, $site_url = null)
<a name="l02081"></a>02081    {
<a name="l02082"></a>02082       <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="class_simple_pie.html#a3b965616e4b4facd528112e9438e1be9">subscribe_url</a>())
<a name="l02083"></a>02083       {
<a name="l02084"></a>02084          $return = $feed_url . rawurlencode($this-&gt;feed_url);
<a name="l02085"></a>02085          <span class="keywordflow">if</span> ($site_url !== null &amp;&amp; $this-&gt;get_link() !== null)
<a name="l02086"></a>02086          {
<a name="l02087"></a>02087             $return .= $site_url . rawurlencode($this-&gt;get_link());
<a name="l02088"></a>02088          }
<a name="l02089"></a>02089          <span class="keywordflow">return</span> $this-&gt;sanitize($return, SIMPLEPIE_CONSTRUCT_IRI);
<a name="l02090"></a>02090       }
<a name="l02091"></a>02091       <span class="keywordflow">else</span>
<a name="l02092"></a>02092       {
<a name="l02093"></a>02093          <span class="keywordflow">return</span> null;
<a name="l02094"></a>02094       }
<a name="l02095"></a>02095    }
<a name="l02096"></a>02096 
<a name="l02097"></a>02097    <span class="keyword">function</span> subscribe_aol()
<a name="l02098"></a>02098    {
<a name="l02099"></a>02099       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie.html#a64e5cf1c4eecf86ed5868abbbcaadd83">subscribe_service</a>(<span class="stringliteral">&#39;http://feeds.my.aol.com/add.jsp?url=&#39;</span>);
<a name="l02100"></a>02100    }
<a name="l02101"></a>02101 
<a name="l02102"></a>02102    <span class="keyword">function</span> subscribe_bloglines()
<a name="l02103"></a>02103    {
<a name="l02104"></a>02104       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie.html#a64e5cf1c4eecf86ed5868abbbcaadd83">subscribe_service</a>(<span class="stringliteral">&#39;http://www.bloglines.com/sub/&#39;</span>);
<a name="l02105"></a>02105    }
<a name="l02106"></a>02106 
<a name="l02107"></a>02107    <span class="keyword">function</span> subscribe_eskobo()
<a name="l02108"></a>02108    {
<a name="l02109"></a>02109       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie.html#a64e5cf1c4eecf86ed5868abbbcaadd83">subscribe_service</a>(<span class="stringliteral">&#39;http://www.eskobo.com/?AddToMyPage=&#39;</span>);
<a name="l02110"></a>02110    }
<a name="l02111"></a>02111 
<a name="l02112"></a>02112    <span class="keyword">function</span> subscribe_feedfeeds()
<a name="l02113"></a>02113    {
<a name="l02114"></a>02114       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie.html#a64e5cf1c4eecf86ed5868abbbcaadd83">subscribe_service</a>(<span class="stringliteral">&#39;http://www.feedfeeds.com/add?feed=&#39;</span>);
<a name="l02115"></a>02115    }
<a name="l02116"></a>02116 
<a name="l02117"></a>02117    <span class="keyword">function</span> subscribe_feedster()
<a name="l02118"></a>02118    {
<a name="l02119"></a>02119       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie.html#a64e5cf1c4eecf86ed5868abbbcaadd83">subscribe_service</a>(<span class="stringliteral">&#39;http://www.feedster.com/myfeedster.php?action=addrss&amp;confirm=no&amp;rssurl=&#39;</span>);
<a name="l02120"></a>02120    }
<a name="l02121"></a>02121 
<a name="l02122"></a>02122    <span class="keyword">function</span> subscribe_google()
<a name="l02123"></a>02123    {
<a name="l02124"></a>02124       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie.html#a64e5cf1c4eecf86ed5868abbbcaadd83">subscribe_service</a>(<span class="stringliteral">&#39;http://fusion.google.com/add?feedurl=&#39;</span>);
<a name="l02125"></a>02125    }
<a name="l02126"></a>02126 
<a name="l02127"></a>02127    <span class="keyword">function</span> subscribe_gritwire()
<a name="l02128"></a>02128    {
<a name="l02129"></a>02129       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie.html#a64e5cf1c4eecf86ed5868abbbcaadd83">subscribe_service</a>(<span class="stringliteral">&#39;http://my.gritwire.com/feeds/addExternalFeed.aspx?FeedUrl=&#39;</span>);
<a name="l02130"></a>02130    }
<a name="l02131"></a>02131 
<a name="l02132"></a>02132    <span class="keyword">function</span> subscribe_msn()
<a name="l02133"></a>02133    {
<a name="l02134"></a>02134       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie.html#a64e5cf1c4eecf86ed5868abbbcaadd83">subscribe_service</a>(<span class="stringliteral">&#39;http://my.msn.com/addtomymsn.armx?id=rss&amp;ut=&#39;</span>, <span class="stringliteral">&#39;&amp;ru=&#39;</span>);
<a name="l02135"></a>02135    }
<a name="l02136"></a>02136 
<a name="l02137"></a>02137    <span class="keyword">function</span> subscribe_netvibes()
<a name="l02138"></a>02138    {
<a name="l02139"></a>02139       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie.html#a64e5cf1c4eecf86ed5868abbbcaadd83">subscribe_service</a>(<span class="stringliteral">&#39;http://www.netvibes.com/subscribe.php?url=&#39;</span>);
<a name="l02140"></a>02140    }
<a name="l02141"></a>02141 
<a name="l02142"></a>02142    <span class="keyword">function</span> subscribe_newsburst()
<a name="l02143"></a>02143    {
<a name="l02144"></a>02144       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie.html#a64e5cf1c4eecf86ed5868abbbcaadd83">subscribe_service</a>(<span class="stringliteral">&#39;http://www.newsburst.com/Source/?add=&#39;</span>);
<a name="l02145"></a>02145    }
<a name="l02146"></a>02146 
<a name="l02147"></a>02147    <span class="keyword">function</span> subscribe_newsgator()
<a name="l02148"></a>02148    {
<a name="l02149"></a>02149       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie.html#a64e5cf1c4eecf86ed5868abbbcaadd83">subscribe_service</a>(<span class="stringliteral">&#39;http://www.newsgator.com/ngs/subscriber/subext.aspx?url=&#39;</span>);
<a name="l02150"></a>02150    }
<a name="l02151"></a>02151 
<a name="l02152"></a>02152    <span class="keyword">function</span> subscribe_odeo()
<a name="l02153"></a>02153    {
<a name="l02154"></a>02154       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie.html#a64e5cf1c4eecf86ed5868abbbcaadd83">subscribe_service</a>(<span class="stringliteral">&#39;http://www.odeo.com/listen/subscribe?feed=&#39;</span>);
<a name="l02155"></a>02155    }
<a name="l02156"></a>02156 
<a name="l02157"></a>02157    <span class="keyword">function</span> subscribe_podnova()
<a name="l02158"></a>02158    {
<a name="l02159"></a>02159       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie.html#a64e5cf1c4eecf86ed5868abbbcaadd83">subscribe_service</a>(<span class="stringliteral">&#39;http://www.podnova.com/index_your_podcasts.srf?action=add&amp;url=&#39;</span>);
<a name="l02160"></a>02160    }
<a name="l02161"></a>02161 
<a name="l02162"></a>02162    <span class="keyword">function</span> subscribe_rojo()
<a name="l02163"></a>02163    {
<a name="l02164"></a>02164       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie.html#a64e5cf1c4eecf86ed5868abbbcaadd83">subscribe_service</a>(<span class="stringliteral">&#39;http://www.rojo.com/add-subscription?resource=&#39;</span>);
<a name="l02165"></a>02165    }
<a name="l02166"></a>02166 
<a name="l02167"></a>02167    <span class="keyword">function</span> subscribe_yahoo()
<a name="l02168"></a>02168    {
<a name="l02169"></a>02169       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie.html#a64e5cf1c4eecf86ed5868abbbcaadd83">subscribe_service</a>(<span class="stringliteral">&#39;http://add.my.yahoo.com/rss?url=&#39;</span>);
<a name="l02170"></a>02170    }
<a name="l02171"></a>02171 
<a name="l02172"></a>02172    <span class="keyword">function</span> get_feed_tags($namespace, $tag)
<a name="l02173"></a>02173    {
<a name="l02174"></a>02174       $type = $this-&gt;get_type();
<a name="l02175"></a>02175       <span class="keywordflow">if</span> ($type &amp; SIMPLEPIE_TYPE_ATOM_10)
<a name="l02176"></a>02176       {
<a name="l02177"></a>02177          <span class="keywordflow">if</span> (isset($this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;feed&#39;</span>][0][<span class="stringliteral">&#39;child&#39;</span>][$namespace][$tag]))
<a name="l02178"></a>02178          {
<a name="l02179"></a>02179             <span class="keywordflow">return</span> $this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;feed&#39;</span>][0][<span class="stringliteral">&#39;child&#39;</span>][$namespace][$tag];
<a name="l02180"></a>02180          }
<a name="l02181"></a>02181       }
<a name="l02182"></a>02182       <span class="keywordflow">if</span> ($type &amp; SIMPLEPIE_TYPE_ATOM_03)
<a name="l02183"></a>02183       {
<a name="l02184"></a>02184          <span class="keywordflow">if</span> (isset($this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;feed&#39;</span>][0][<span class="stringliteral">&#39;child&#39;</span>][$namespace][$tag]))
<a name="l02185"></a>02185          {
<a name="l02186"></a>02186             <span class="keywordflow">return</span> $this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;feed&#39;</span>][0][<span class="stringliteral">&#39;child&#39;</span>][$namespace][$tag];
<a name="l02187"></a>02187          }
<a name="l02188"></a>02188       }
<a name="l02189"></a>02189       <span class="keywordflow">if</span> ($type &amp; SIMPLEPIE_TYPE_RSS_RDF)
<a name="l02190"></a>02190       {
<a name="l02191"></a>02191          <span class="keywordflow">if</span> (isset($this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RDF][<span class="stringliteral">&#39;RDF&#39;</span>][0][<span class="stringliteral">&#39;child&#39;</span>][$namespace][$tag]))
<a name="l02192"></a>02192          {
<a name="l02193"></a>02193             <span class="keywordflow">return</span> $this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RDF][<span class="stringliteral">&#39;RDF&#39;</span>][0][<span class="stringliteral">&#39;child&#39;</span>][$namespace][$tag];
<a name="l02194"></a>02194          }
<a name="l02195"></a>02195       }
<a name="l02196"></a>02196       <span class="keywordflow">if</span> ($type &amp; SIMPLEPIE_TYPE_RSS_SYNDICATION)
<a name="l02197"></a>02197       {
<a name="l02198"></a>02198          <span class="keywordflow">if</span> (isset($this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RSS_20][<span class="stringliteral">&#39;rss&#39;</span>][0][<span class="stringliteral">&#39;child&#39;</span>][$namespace][$tag]))
<a name="l02199"></a>02199          {
<a name="l02200"></a>02200             <span class="keywordflow">return</span> $this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RSS_20][<span class="stringliteral">&#39;rss&#39;</span>][0][<span class="stringliteral">&#39;child&#39;</span>][$namespace][$tag];
<a name="l02201"></a>02201          }
<a name="l02202"></a>02202       }
<a name="l02203"></a>02203       <span class="keywordflow">return</span> null;
<a name="l02204"></a>02204    }
<a name="l02205"></a>02205 
<a name="l02206"></a>02206    <span class="keyword">function</span> get_channel_tags($namespace, $tag)
<a name="l02207"></a>02207    {
<a name="l02208"></a>02208       $type = $this-&gt;get_type();
<a name="l02209"></a>02209       <span class="keywordflow">if</span> ($type &amp; SIMPLEPIE_TYPE_ATOM_ALL)
<a name="l02210"></a>02210       {
<a name="l02211"></a>02211          <span class="keywordflow">if</span> ($return = $this-&gt;get_feed_tags($namespace, $tag))
<a name="l02212"></a>02212          {
<a name="l02213"></a>02213             <span class="keywordflow">return</span> $return;
<a name="l02214"></a>02214          }
<a name="l02215"></a>02215       }
<a name="l02216"></a>02216       <span class="keywordflow">if</span> ($type &amp; SIMPLEPIE_TYPE_RSS_10)
<a name="l02217"></a>02217       {
<a name="l02218"></a>02218          <span class="keywordflow">if</span> ($channel = $this-&gt;get_feed_tags(SIMPLEPIE_NAMESPACE_RSS_10, <span class="stringliteral">&#39;channel&#39;</span>))
<a name="l02219"></a>02219          {
<a name="l02220"></a>02220             <span class="keywordflow">if</span> (isset($channel[0][<span class="stringliteral">&#39;child&#39;</span>][$namespace][$tag]))
<a name="l02221"></a>02221             {
<a name="l02222"></a>02222                <span class="keywordflow">return</span> $channel[0][<span class="stringliteral">&#39;child&#39;</span>][$namespace][$tag];
<a name="l02223"></a>02223             }
<a name="l02224"></a>02224          }
<a name="l02225"></a>02225       }
<a name="l02226"></a>02226       <span class="keywordflow">if</span> ($type &amp; SIMPLEPIE_TYPE_RSS_090)
<a name="l02227"></a>02227       {
<a name="l02228"></a>02228          <span class="keywordflow">if</span> ($channel = $this-&gt;get_feed_tags(SIMPLEPIE_NAMESPACE_RSS_090, <span class="stringliteral">&#39;channel&#39;</span>))
<a name="l02229"></a>02229          {
<a name="l02230"></a>02230             <span class="keywordflow">if</span> (isset($channel[0][<span class="stringliteral">&#39;child&#39;</span>][$namespace][$tag]))
<a name="l02231"></a>02231             {
<a name="l02232"></a>02232                <span class="keywordflow">return</span> $channel[0][<span class="stringliteral">&#39;child&#39;</span>][$namespace][$tag];
<a name="l02233"></a>02233             }
<a name="l02234"></a>02234          }
<a name="l02235"></a>02235       }
<a name="l02236"></a>02236       <span class="keywordflow">if</span> ($type &amp; SIMPLEPIE_TYPE_RSS_SYNDICATION)
<a name="l02237"></a>02237       {
<a name="l02238"></a>02238          <span class="keywordflow">if</span> ($channel = $this-&gt;get_feed_tags(SIMPLEPIE_NAMESPACE_RSS_20, <span class="stringliteral">&#39;channel&#39;</span>))
<a name="l02239"></a>02239          {
<a name="l02240"></a>02240             <span class="keywordflow">if</span> (isset($channel[0][<span class="stringliteral">&#39;child&#39;</span>][$namespace][$tag]))
<a name="l02241"></a>02241             {
<a name="l02242"></a>02242                <span class="keywordflow">return</span> $channel[0][<span class="stringliteral">&#39;child&#39;</span>][$namespace][$tag];
<a name="l02243"></a>02243             }
<a name="l02244"></a>02244          }
<a name="l02245"></a>02245       }
<a name="l02246"></a>02246       <span class="keywordflow">return</span> null;
<a name="l02247"></a>02247    }
<a name="l02248"></a>02248 
<a name="l02249"></a>02249    <span class="keyword">function</span> get_image_tags($namespace, $tag)
<a name="l02250"></a>02250    {
<a name="l02251"></a>02251       $type = $this-&gt;get_type();
<a name="l02252"></a>02252       <span class="keywordflow">if</span> ($type &amp; SIMPLEPIE_TYPE_RSS_10)
<a name="l02253"></a>02253       {
<a name="l02254"></a>02254          <span class="keywordflow">if</span> ($image = $this-&gt;get_feed_tags(SIMPLEPIE_NAMESPACE_RSS_10, <span class="stringliteral">&#39;image&#39;</span>))
<a name="l02255"></a>02255          {
<a name="l02256"></a>02256             <span class="keywordflow">if</span> (isset($image[0][<span class="stringliteral">&#39;child&#39;</span>][$namespace][$tag]))
<a name="l02257"></a>02257             {
<a name="l02258"></a>02258                <span class="keywordflow">return</span> $image[0][<span class="stringliteral">&#39;child&#39;</span>][$namespace][$tag];
<a name="l02259"></a>02259             }
<a name="l02260"></a>02260          }
<a name="l02261"></a>02261       }
<a name="l02262"></a>02262       <span class="keywordflow">if</span> ($type &amp; SIMPLEPIE_TYPE_RSS_090)
<a name="l02263"></a>02263       {
<a name="l02264"></a>02264          <span class="keywordflow">if</span> ($image = $this-&gt;get_feed_tags(SIMPLEPIE_NAMESPACE_RSS_090, <span class="stringliteral">&#39;image&#39;</span>))
<a name="l02265"></a>02265          {
<a name="l02266"></a>02266             <span class="keywordflow">if</span> (isset($image[0][<span class="stringliteral">&#39;child&#39;</span>][$namespace][$tag]))
<a name="l02267"></a>02267             {
<a name="l02268"></a>02268                <span class="keywordflow">return</span> $image[0][<span class="stringliteral">&#39;child&#39;</span>][$namespace][$tag];
<a name="l02269"></a>02269             }
<a name="l02270"></a>02270          }
<a name="l02271"></a>02271       }
<a name="l02272"></a>02272       <span class="keywordflow">if</span> ($type &amp; SIMPLEPIE_TYPE_RSS_SYNDICATION)
<a name="l02273"></a>02273       {
<a name="l02274"></a>02274          <span class="keywordflow">if</span> ($image = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_RSS_20, <span class="stringliteral">&#39;image&#39;</span>))
<a name="l02275"></a>02275          {
<a name="l02276"></a>02276             <span class="keywordflow">if</span> (isset($image[0][<span class="stringliteral">&#39;child&#39;</span>][$namespace][$tag]))
<a name="l02277"></a>02277             {
<a name="l02278"></a>02278                <span class="keywordflow">return</span> $image[0][<span class="stringliteral">&#39;child&#39;</span>][$namespace][$tag];
<a name="l02279"></a>02279             }
<a name="l02280"></a>02280          }
<a name="l02281"></a>02281       }
<a name="l02282"></a>02282       <span class="keywordflow">return</span> null;
<a name="l02283"></a>02283    }
<a name="l02284"></a>02284 
<a name="l02285"></a>02285    <span class="keyword">function</span> get_base($element = array())
<a name="l02286"></a>02286    {
<a name="l02287"></a>02287       <span class="keywordflow">if</span> (!($this-&gt;get_type() &amp; SIMPLEPIE_TYPE_RSS_SYNDICATION) &amp;&amp; !empty($element[<span class="stringliteral">&#39;xml_base_explicit&#39;</span>]) &amp;&amp; isset($element[<span class="stringliteral">&#39;xml_base&#39;</span>]))
<a name="l02288"></a>02288       {
<a name="l02289"></a>02289          <span class="keywordflow">return</span> $element[<span class="stringliteral">&#39;xml_base&#39;</span>];
<a name="l02290"></a>02290       }
<a name="l02291"></a>02291       elseif ($this-&gt;get_link() !== null)
<a name="l02292"></a>02292       {
<a name="l02293"></a>02293          <span class="keywordflow">return</span> $this-&gt;get_link();
<a name="l02294"></a>02294       }
<a name="l02295"></a>02295       <span class="keywordflow">else</span>
<a name="l02296"></a>02296       {
<a name="l02297"></a>02297          <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie.html#a3b965616e4b4facd528112e9438e1be9">subscribe_url</a>();
<a name="l02298"></a>02298       }
<a name="l02299"></a>02299    }
<a name="l02300"></a>02300 
<a name="l02301"></a>02301    <span class="keyword">function</span> sanitize($data, $type, $base = <span class="stringliteral">&#39;&#39;</span>)
<a name="l02302"></a>02302    {
<a name="l02303"></a>02303       <span class="keywordflow">return</span> $this-&gt;sanitize-&gt;sanitize($data, $type, $base);
<a name="l02304"></a>02304    }
<a name="l02305"></a>02305 
<a name="l02306"></a>02306    <span class="keyword">function</span> get_title()
<a name="l02307"></a>02307    {
<a name="l02308"></a>02308       <span class="keywordflow">if</span> ($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;title&#39;</span>))
<a name="l02309"></a>02309       {
<a name="l02310"></a>02310          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SimplePie_Misc::atom_10_construct_type($return[0][<span class="stringliteral">&#39;attribs&#39;</span>]), $this-&gt;get_base($return[0]));
<a name="l02311"></a>02311       }
<a name="l02312"></a>02312       elseif ($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_ATOM_03, <span class="stringliteral">&#39;title&#39;</span>))
<a name="l02313"></a>02313       {
<a name="l02314"></a>02314          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SimplePie_Misc::atom_03_construct_type($return[0][<span class="stringliteral">&#39;attribs&#39;</span>]), $this-&gt;get_base($return[0]));
<a name="l02315"></a>02315       }
<a name="l02316"></a>02316       elseif ($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_RSS_10, <span class="stringliteral">&#39;title&#39;</span>))
<a name="l02317"></a>02317       {
<a name="l02318"></a>02318          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_MAYBE_HTML, $this-&gt;get_base($return[0]));
<a name="l02319"></a>02319       }
<a name="l02320"></a>02320       elseif ($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_RSS_090, <span class="stringliteral">&#39;title&#39;</span>))
<a name="l02321"></a>02321       {
<a name="l02322"></a>02322          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_MAYBE_HTML, $this-&gt;get_base($return[0]));
<a name="l02323"></a>02323       }
<a name="l02324"></a>02324       elseif ($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_RSS_20, <span class="stringliteral">&#39;title&#39;</span>))
<a name="l02325"></a>02325       {
<a name="l02326"></a>02326          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_MAYBE_HTML, $this-&gt;get_base($return[0]));
<a name="l02327"></a>02327       }
<a name="l02328"></a>02328       elseif ($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_DC_11, <span class="stringliteral">&#39;title&#39;</span>))
<a name="l02329"></a>02329       {
<a name="l02330"></a>02330          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02331"></a>02331       }
<a name="l02332"></a>02332       elseif ($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_DC_10, <span class="stringliteral">&#39;title&#39;</span>))
<a name="l02333"></a>02333       {
<a name="l02334"></a>02334          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02335"></a>02335       }
<a name="l02336"></a>02336       <span class="keywordflow">else</span>
<a name="l02337"></a>02337       {
<a name="l02338"></a>02338          <span class="keywordflow">return</span> null;
<a name="l02339"></a>02339       }
<a name="l02340"></a>02340    }
<a name="l02341"></a>02341 
<a name="l02342"></a>02342    <span class="keyword">function</span> get_category($key = 0)
<a name="l02343"></a>02343    {
<a name="l02344"></a>02344       $categories = $this-&gt;get_categories();
<a name="l02345"></a>02345       <span class="keywordflow">if</span> (isset($categories[$key]))
<a name="l02346"></a>02346       {
<a name="l02347"></a>02347          <span class="keywordflow">return</span> $categories[$key];
<a name="l02348"></a>02348       }
<a name="l02349"></a>02349       <span class="keywordflow">else</span>
<a name="l02350"></a>02350       {
<a name="l02351"></a>02351          <span class="keywordflow">return</span> null;
<a name="l02352"></a>02352       }
<a name="l02353"></a>02353    }
<a name="l02354"></a>02354 
<a name="l02355"></a>02355    <span class="keyword">function</span> get_categories()
<a name="l02356"></a>02356    {
<a name="l02357"></a>02357       $categories = array();
<a name="l02358"></a>02358 
<a name="l02359"></a>02359       <span class="keywordflow">foreach</span> ((array) $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;category&#39;</span>) as $category)
<a name="l02360"></a>02360       {
<a name="l02361"></a>02361          $term = null;
<a name="l02362"></a>02362          $scheme = null;
<a name="l02363"></a>02363          $label = null;
<a name="l02364"></a>02364          <span class="keywordflow">if</span> (isset($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;term&#39;</span>]))
<a name="l02365"></a>02365          {
<a name="l02366"></a>02366             $term = $this-&gt;sanitize($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;term&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02367"></a>02367          }
<a name="l02368"></a>02368          <span class="keywordflow">if</span> (isset($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>]))
<a name="l02369"></a>02369          {
<a name="l02370"></a>02370             $scheme = $this-&gt;sanitize($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02371"></a>02371          }
<a name="l02372"></a>02372          <span class="keywordflow">if</span> (isset($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;label&#39;</span>]))
<a name="l02373"></a>02373          {
<a name="l02374"></a>02374             $label = $this-&gt;sanitize($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;label&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02375"></a>02375          }
<a name="l02376"></a>02376          $categories[] =&amp; <span class="keyword">new</span> $this-&gt;category_class($term, $scheme, $label);
<a name="l02377"></a>02377       }
<a name="l02378"></a>02378       <span class="keywordflow">foreach</span> ((array) $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_RSS_20, <span class="stringliteral">&#39;category&#39;</span>) as $category)
<a name="l02379"></a>02379       {
<a name="l02380"></a>02380          <span class="comment">// This is really the label, but keep this as the term also for BC.</span>
<a name="l02381"></a>02381          <span class="comment">// Label will also work on retrieving because that falls back to term.</span>
<a name="l02382"></a>02382          $term = $this-&gt;sanitize($category[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02383"></a>02383          <span class="keywordflow">if</span> (isset($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;domain&#39;</span>]))
<a name="l02384"></a>02384          {
<a name="l02385"></a>02385             $scheme = $this-&gt;sanitize($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;domain&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02386"></a>02386          }
<a name="l02387"></a>02387          <span class="keywordflow">else</span>
<a name="l02388"></a>02388          {
<a name="l02389"></a>02389             $scheme = null;
<a name="l02390"></a>02390          }
<a name="l02391"></a>02391          $categories[] =&amp; <span class="keyword">new</span> $this-&gt;category_class($term, $scheme, null);
<a name="l02392"></a>02392       }
<a name="l02393"></a>02393       <span class="keywordflow">foreach</span> ((array) $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_DC_11, <span class="stringliteral">&#39;subject&#39;</span>) as $category)
<a name="l02394"></a>02394       {
<a name="l02395"></a>02395          $categories[] =&amp; <span class="keyword">new</span> $this-&gt;category_class($this-&gt;sanitize($category[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT), null, null);
<a name="l02396"></a>02396       }
<a name="l02397"></a>02397       <span class="keywordflow">foreach</span> ((array) $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_DC_10, <span class="stringliteral">&#39;subject&#39;</span>) as $category)
<a name="l02398"></a>02398       {
<a name="l02399"></a>02399          $categories[] =&amp; <span class="keyword">new</span> $this-&gt;category_class($this-&gt;sanitize($category[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT), null, null);
<a name="l02400"></a>02400       }
<a name="l02401"></a>02401 
<a name="l02402"></a>02402       <span class="keywordflow">if</span> (!empty($categories))
<a name="l02403"></a>02403       {
<a name="l02404"></a>02404          <span class="keywordflow">return</span> SimplePie_Misc::array_unique($categories);
<a name="l02405"></a>02405       }
<a name="l02406"></a>02406       <span class="keywordflow">else</span>
<a name="l02407"></a>02407       {
<a name="l02408"></a>02408          <span class="keywordflow">return</span> null;
<a name="l02409"></a>02409       }
<a name="l02410"></a>02410    }
<a name="l02411"></a>02411 
<a name="l02412"></a>02412    <span class="keyword">function</span> get_author($key = 0)
<a name="l02413"></a>02413    {
<a name="l02414"></a>02414       $authors = $this-&gt;get_authors();
<a name="l02415"></a>02415       <span class="keywordflow">if</span> (isset($authors[$key]))
<a name="l02416"></a>02416       {
<a name="l02417"></a>02417          <span class="keywordflow">return</span> $authors[$key];
<a name="l02418"></a>02418       }
<a name="l02419"></a>02419       <span class="keywordflow">else</span>
<a name="l02420"></a>02420       {
<a name="l02421"></a>02421          <span class="keywordflow">return</span> null;
<a name="l02422"></a>02422       }
<a name="l02423"></a>02423    }
<a name="l02424"></a>02424 
<a name="l02425"></a>02425    <span class="keyword">function</span> get_authors()
<a name="l02426"></a>02426    {
<a name="l02427"></a>02427       $authors = array();
<a name="l02428"></a>02428       <span class="keywordflow">foreach</span> ((array) $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;author&#39;</span>) as $author)
<a name="l02429"></a>02429       {
<a name="l02430"></a>02430          $name = null;
<a name="l02431"></a>02431          $uri = null;
<a name="l02432"></a>02432          $email = null;
<a name="l02433"></a>02433          <span class="keywordflow">if</span> (isset($author[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;name&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l02434"></a>02434          {
<a name="l02435"></a>02435             $name = $this-&gt;sanitize($author[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;name&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02436"></a>02436          }
<a name="l02437"></a>02437          <span class="keywordflow">if</span> (isset($author[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;uri&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l02438"></a>02438          {
<a name="l02439"></a>02439             $uri = $this-&gt;sanitize($author[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;uri&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($author[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;uri&#39;</span>][0]));
<a name="l02440"></a>02440          }
<a name="l02441"></a>02441          <span class="keywordflow">if</span> (isset($author[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;email&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l02442"></a>02442          {
<a name="l02443"></a>02443             $email = $this-&gt;sanitize($author[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;email&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02444"></a>02444          }
<a name="l02445"></a>02445          <span class="keywordflow">if</span> ($name !== null || $email !== null || $uri !== null)
<a name="l02446"></a>02446          {
<a name="l02447"></a>02447             $authors[] =&amp; <span class="keyword">new</span> $this-&gt;author_class($name, $uri, $email);
<a name="l02448"></a>02448          }
<a name="l02449"></a>02449       }
<a name="l02450"></a>02450       <span class="keywordflow">if</span> ($author = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_ATOM_03, <span class="stringliteral">&#39;author&#39;</span>))
<a name="l02451"></a>02451       {
<a name="l02452"></a>02452          $name = null;
<a name="l02453"></a>02453          $url = null;
<a name="l02454"></a>02454          $email = null;
<a name="l02455"></a>02455          <span class="keywordflow">if</span> (isset($author[0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;name&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l02456"></a>02456          {
<a name="l02457"></a>02457             $name = $this-&gt;sanitize($author[0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;name&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02458"></a>02458          }
<a name="l02459"></a>02459          <span class="keywordflow">if</span> (isset($author[0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;url&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l02460"></a>02460          {
<a name="l02461"></a>02461             $url = $this-&gt;sanitize($author[0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;url&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($author[0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;url&#39;</span>][0]));
<a name="l02462"></a>02462          }
<a name="l02463"></a>02463          <span class="keywordflow">if</span> (isset($author[0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;email&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l02464"></a>02464          {
<a name="l02465"></a>02465             $email = $this-&gt;sanitize($author[0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;email&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02466"></a>02466          }
<a name="l02467"></a>02467          <span class="keywordflow">if</span> ($name !== null || $email !== null || $url !== null)
<a name="l02468"></a>02468          {
<a name="l02469"></a>02469             $authors[] =&amp; <span class="keyword">new</span> $this-&gt;author_class($name, $url, $email);
<a name="l02470"></a>02470          }
<a name="l02471"></a>02471       }
<a name="l02472"></a>02472       <span class="keywordflow">foreach</span> ((array) $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_DC_11, <span class="stringliteral">&#39;creator&#39;</span>) as $author)
<a name="l02473"></a>02473       {
<a name="l02474"></a>02474          $authors[] =&amp; <span class="keyword">new</span> $this-&gt;author_class($this-&gt;sanitize($author[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT), null, null);
<a name="l02475"></a>02475       }
<a name="l02476"></a>02476       <span class="keywordflow">foreach</span> ((array) $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_DC_10, <span class="stringliteral">&#39;creator&#39;</span>) as $author)
<a name="l02477"></a>02477       {
<a name="l02478"></a>02478          $authors[] =&amp; <span class="keyword">new</span> $this-&gt;author_class($this-&gt;sanitize($author[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT), null, null);
<a name="l02479"></a>02479       }
<a name="l02480"></a>02480       <span class="keywordflow">foreach</span> ((array) $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_ITUNES, <span class="stringliteral">&#39;author&#39;</span>) as $author)
<a name="l02481"></a>02481       {
<a name="l02482"></a>02482          $authors[] =&amp; <span class="keyword">new</span> $this-&gt;author_class($this-&gt;sanitize($author[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT), null, null);
<a name="l02483"></a>02483       }
<a name="l02484"></a>02484 
<a name="l02485"></a>02485       <span class="keywordflow">if</span> (!empty($authors))
<a name="l02486"></a>02486       {
<a name="l02487"></a>02487          <span class="keywordflow">return</span> SimplePie_Misc::array_unique($authors);
<a name="l02488"></a>02488       }
<a name="l02489"></a>02489       <span class="keywordflow">else</span>
<a name="l02490"></a>02490       {
<a name="l02491"></a>02491          <span class="keywordflow">return</span> null;
<a name="l02492"></a>02492       }
<a name="l02493"></a>02493    }
<a name="l02494"></a>02494 
<a name="l02495"></a>02495    <span class="keyword">function</span> get_contributor($key = 0)
<a name="l02496"></a>02496    {
<a name="l02497"></a>02497       $contributors = $this-&gt;get_contributors();
<a name="l02498"></a>02498       <span class="keywordflow">if</span> (isset($contributors[$key]))
<a name="l02499"></a>02499       {
<a name="l02500"></a>02500          <span class="keywordflow">return</span> $contributors[$key];
<a name="l02501"></a>02501       }
<a name="l02502"></a>02502       <span class="keywordflow">else</span>
<a name="l02503"></a>02503       {
<a name="l02504"></a>02504          <span class="keywordflow">return</span> null;
<a name="l02505"></a>02505       }
<a name="l02506"></a>02506    }
<a name="l02507"></a>02507 
<a name="l02508"></a>02508    <span class="keyword">function</span> get_contributors()
<a name="l02509"></a>02509    {
<a name="l02510"></a>02510       $contributors = array();
<a name="l02511"></a>02511       <span class="keywordflow">foreach</span> ((array) $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;contributor&#39;</span>) as $contributor)
<a name="l02512"></a>02512       {
<a name="l02513"></a>02513          $name = null;
<a name="l02514"></a>02514          $uri = null;
<a name="l02515"></a>02515          $email = null;
<a name="l02516"></a>02516          <span class="keywordflow">if</span> (isset($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;name&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l02517"></a>02517          {
<a name="l02518"></a>02518             $name = $this-&gt;sanitize($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;name&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02519"></a>02519          }
<a name="l02520"></a>02520          <span class="keywordflow">if</span> (isset($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;uri&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l02521"></a>02521          {
<a name="l02522"></a>02522             $uri = $this-&gt;sanitize($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;uri&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;uri&#39;</span>][0]));
<a name="l02523"></a>02523          }
<a name="l02524"></a>02524          <span class="keywordflow">if</span> (isset($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;email&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l02525"></a>02525          {
<a name="l02526"></a>02526             $email = $this-&gt;sanitize($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;email&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02527"></a>02527          }
<a name="l02528"></a>02528          <span class="keywordflow">if</span> ($name !== null || $email !== null || $uri !== null)
<a name="l02529"></a>02529          {
<a name="l02530"></a>02530             $contributors[] =&amp; <span class="keyword">new</span> $this-&gt;author_class($name, $uri, $email);
<a name="l02531"></a>02531          }
<a name="l02532"></a>02532       }
<a name="l02533"></a>02533       <span class="keywordflow">foreach</span> ((array) $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_ATOM_03, <span class="stringliteral">&#39;contributor&#39;</span>) as $contributor)
<a name="l02534"></a>02534       {
<a name="l02535"></a>02535          $name = null;
<a name="l02536"></a>02536          $url = null;
<a name="l02537"></a>02537          $email = null;
<a name="l02538"></a>02538          <span class="keywordflow">if</span> (isset($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;name&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l02539"></a>02539          {
<a name="l02540"></a>02540             $name = $this-&gt;sanitize($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;name&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02541"></a>02541          }
<a name="l02542"></a>02542          <span class="keywordflow">if</span> (isset($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;url&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l02543"></a>02543          {
<a name="l02544"></a>02544             $url = $this-&gt;sanitize($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;url&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;url&#39;</span>][0]));
<a name="l02545"></a>02545          }
<a name="l02546"></a>02546          <span class="keywordflow">if</span> (isset($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;email&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l02547"></a>02547          {
<a name="l02548"></a>02548             $email = $this-&gt;sanitize($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;email&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02549"></a>02549          }
<a name="l02550"></a>02550          <span class="keywordflow">if</span> ($name !== null || $email !== null || $url !== null)
<a name="l02551"></a>02551          {
<a name="l02552"></a>02552             $contributors[] =&amp; <span class="keyword">new</span> $this-&gt;author_class($name, $url, $email);
<a name="l02553"></a>02553          }
<a name="l02554"></a>02554       }
<a name="l02555"></a>02555 
<a name="l02556"></a>02556       <span class="keywordflow">if</span> (!empty($contributors))
<a name="l02557"></a>02557       {
<a name="l02558"></a>02558          <span class="keywordflow">return</span> SimplePie_Misc::array_unique($contributors);
<a name="l02559"></a>02559       }
<a name="l02560"></a>02560       <span class="keywordflow">else</span>
<a name="l02561"></a>02561       {
<a name="l02562"></a>02562          <span class="keywordflow">return</span> null;
<a name="l02563"></a>02563       }
<a name="l02564"></a>02564    }
<a name="l02565"></a>02565 
<a name="l02566"></a>02566    <span class="keyword">function</span> get_link($key = 0, $rel = <span class="stringliteral">&#39;alternate&#39;</span>)
<a name="l02567"></a>02567    {
<a name="l02568"></a>02568       $links = $this-&gt;get_links($rel);
<a name="l02569"></a>02569       <span class="keywordflow">if</span> (isset($links[$key]))
<a name="l02570"></a>02570       {
<a name="l02571"></a>02571          <span class="keywordflow">return</span> $links[$key];
<a name="l02572"></a>02572       }
<a name="l02573"></a>02573       <span class="keywordflow">else</span>
<a name="l02574"></a>02574       {
<a name="l02575"></a>02575          <span class="keywordflow">return</span> null;
<a name="l02576"></a>02576       }
<a name="l02577"></a>02577    }
<a name="l02578"></a>02578 <span class="comment"></span>
<a name="l02579"></a>02579 <span class="comment">   /**</span>
<a name="l02580"></a>02580 <span class="comment">    * Added for parity between the parent-level and the item/entry-level.</span>
<a name="l02581"></a>02581 <span class="comment">    */</span>
<a name="l02582"></a><a class="code" href="class_simple_pie.html#aa89f08250c57fe9a64d5a07b9c9cc93c">02582</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie.html#aa89f08250c57fe9a64d5a07b9c9cc93c">get_permalink</a>()
<a name="l02583"></a>02583    {
<a name="l02584"></a>02584       <span class="keywordflow">return</span> $this-&gt;get_link(0);
<a name="l02585"></a>02585    }
<a name="l02586"></a>02586 
<a name="l02587"></a>02587    <span class="keyword">function</span> get_links($rel = <span class="stringliteral">&#39;alternate&#39;</span>)
<a name="l02588"></a>02588    {
<a name="l02589"></a>02589       <span class="keywordflow">if</span> (!isset($this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>]))
<a name="l02590"></a>02590       {
<a name="l02591"></a>02591          $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>] = array();
<a name="l02592"></a>02592          <span class="keywordflow">if</span> ($links = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;link&#39;</span>))
<a name="l02593"></a>02593          {
<a name="l02594"></a>02594             <span class="keywordflow">foreach</span> ($links as $link)
<a name="l02595"></a>02595             {
<a name="l02596"></a>02596                <span class="keywordflow">if</span> (isset($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;href&#39;</span>]))
<a name="l02597"></a>02597                {
<a name="l02598"></a>02598                   $link_rel = (isset($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;rel&#39;</span>])) ? $link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;rel&#39;</span>] : <span class="stringliteral">&#39;alternate&#39;</span>;
<a name="l02599"></a>02599                   $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][$link_rel][] = $this-&gt;sanitize($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;href&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($link));
<a name="l02600"></a>02600                }
<a name="l02601"></a>02601             }
<a name="l02602"></a>02602          }
<a name="l02603"></a>02603          <span class="keywordflow">if</span> ($links = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_ATOM_03, <span class="stringliteral">&#39;link&#39;</span>))
<a name="l02604"></a>02604          {
<a name="l02605"></a>02605             <span class="keywordflow">foreach</span> ($links as $link)
<a name="l02606"></a>02606             {
<a name="l02607"></a>02607                <span class="keywordflow">if</span> (isset($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;href&#39;</span>]))
<a name="l02608"></a>02608                {
<a name="l02609"></a>02609                   $link_rel = (isset($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;rel&#39;</span>])) ? $link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;rel&#39;</span>] : <span class="stringliteral">&#39;alternate&#39;</span>;
<a name="l02610"></a>02610                   $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][$link_rel][] = $this-&gt;sanitize($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;href&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($link));
<a name="l02611"></a>02611 
<a name="l02612"></a>02612                }
<a name="l02613"></a>02613             }
<a name="l02614"></a>02614          }
<a name="l02615"></a>02615          <span class="keywordflow">if</span> ($links = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_RSS_10, <span class="stringliteral">&#39;link&#39;</span>))
<a name="l02616"></a>02616          {
<a name="l02617"></a>02617             $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][<span class="stringliteral">&#39;alternate&#39;</span>][] = $this-&gt;sanitize($links[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($links[0]));
<a name="l02618"></a>02618          }
<a name="l02619"></a>02619          <span class="keywordflow">if</span> ($links = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_RSS_090, <span class="stringliteral">&#39;link&#39;</span>))
<a name="l02620"></a>02620          {
<a name="l02621"></a>02621             $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][<span class="stringliteral">&#39;alternate&#39;</span>][] = $this-&gt;sanitize($links[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($links[0]));
<a name="l02622"></a>02622          }
<a name="l02623"></a>02623          <span class="keywordflow">if</span> ($links = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_RSS_20, <span class="stringliteral">&#39;link&#39;</span>))
<a name="l02624"></a>02624          {
<a name="l02625"></a>02625             $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][<span class="stringliteral">&#39;alternate&#39;</span>][] = $this-&gt;sanitize($links[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($links[0]));
<a name="l02626"></a>02626          }
<a name="l02627"></a>02627 
<a name="l02628"></a>02628          $keys = array_keys($this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>]);
<a name="l02629"></a>02629          <span class="keywordflow">foreach</span> ($keys as $key)
<a name="l02630"></a>02630          {
<a name="l02631"></a>02631             <span class="keywordflow">if</span> (SimplePie_Misc::is_isegment_nz_nc($key))
<a name="l02632"></a>02632             {
<a name="l02633"></a>02633                <span class="keywordflow">if</span> (isset($this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][SIMPLEPIE_IANA_LINK_RELATIONS_REGISTRY . $key]))
<a name="l02634"></a>02634                {
<a name="l02635"></a>02635                   $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][SIMPLEPIE_IANA_LINK_RELATIONS_REGISTRY . $key] = array_merge($this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][$key], $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][SIMPLEPIE_IANA_LINK_RELATIONS_REGISTRY . $key]);
<a name="l02636"></a>02636                   $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][$key] =&amp; $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][SIMPLEPIE_IANA_LINK_RELATIONS_REGISTRY . $key];
<a name="l02637"></a>02637                }
<a name="l02638"></a>02638                <span class="keywordflow">else</span>
<a name="l02639"></a>02639                {
<a name="l02640"></a>02640                   $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][SIMPLEPIE_IANA_LINK_RELATIONS_REGISTRY . $key] =&amp; $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][$key];
<a name="l02641"></a>02641                }
<a name="l02642"></a>02642             }
<a name="l02643"></a>02643             elseif (substr($key, 0, 41) === SIMPLEPIE_IANA_LINK_RELATIONS_REGISTRY)
<a name="l02644"></a>02644             {
<a name="l02645"></a>02645                $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][substr($key, 41)] =&amp; $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][$key];
<a name="l02646"></a>02646             }
<a name="l02647"></a>02647             $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][$key] = array_unique($this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][$key]);
<a name="l02648"></a>02648          }
<a name="l02649"></a>02649       }
<a name="l02650"></a>02650 
<a name="l02651"></a>02651       <span class="keywordflow">if</span> (isset($this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][$rel]))
<a name="l02652"></a>02652       {
<a name="l02653"></a>02653          <span class="keywordflow">return</span> $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][$rel];
<a name="l02654"></a>02654       }
<a name="l02655"></a>02655       <span class="keywordflow">else</span>
<a name="l02656"></a>02656       {
<a name="l02657"></a>02657          <span class="keywordflow">return</span> null;
<a name="l02658"></a>02658       }
<a name="l02659"></a>02659    }
<a name="l02660"></a>02660 
<a name="l02661"></a>02661    <span class="keyword">function</span> get_all_discovered_feeds()
<a name="l02662"></a>02662    {
<a name="l02663"></a>02663       <span class="keywordflow">return</span> $this-&gt;all_discovered_feeds;
<a name="l02664"></a>02664    }
<a name="l02665"></a>02665 
<a name="l02666"></a>02666    <span class="keyword">function</span> get_description()
<a name="l02667"></a>02667    {
<a name="l02668"></a>02668       <span class="keywordflow">if</span> ($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;subtitle&#39;</span>))
<a name="l02669"></a>02669       {
<a name="l02670"></a>02670          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SimplePie_Misc::atom_10_construct_type($return[0][<span class="stringliteral">&#39;attribs&#39;</span>]), $this-&gt;get_base($return[0]));
<a name="l02671"></a>02671       }
<a name="l02672"></a>02672       elseif ($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_ATOM_03, <span class="stringliteral">&#39;tagline&#39;</span>))
<a name="l02673"></a>02673       {
<a name="l02674"></a>02674          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SimplePie_Misc::atom_03_construct_type($return[0][<span class="stringliteral">&#39;attribs&#39;</span>]), $this-&gt;get_base($return[0]));
<a name="l02675"></a>02675       }
<a name="l02676"></a>02676       elseif ($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_RSS_10, <span class="stringliteral">&#39;description&#39;</span>))
<a name="l02677"></a>02677       {
<a name="l02678"></a>02678          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_MAYBE_HTML, $this-&gt;get_base($return[0]));
<a name="l02679"></a>02679       }
<a name="l02680"></a>02680       elseif ($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_RSS_090, <span class="stringliteral">&#39;description&#39;</span>))
<a name="l02681"></a>02681       {
<a name="l02682"></a>02682          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_MAYBE_HTML, $this-&gt;get_base($return[0]));
<a name="l02683"></a>02683       }
<a name="l02684"></a>02684       elseif ($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_RSS_20, <span class="stringliteral">&#39;description&#39;</span>))
<a name="l02685"></a>02685       {
<a name="l02686"></a>02686          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_HTML, $this-&gt;get_base($return[0]));
<a name="l02687"></a>02687       }
<a name="l02688"></a>02688       elseif ($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_DC_11, <span class="stringliteral">&#39;description&#39;</span>))
<a name="l02689"></a>02689       {
<a name="l02690"></a>02690          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02691"></a>02691       }
<a name="l02692"></a>02692       elseif ($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_DC_10, <span class="stringliteral">&#39;description&#39;</span>))
<a name="l02693"></a>02693       {
<a name="l02694"></a>02694          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02695"></a>02695       }
<a name="l02696"></a>02696       elseif ($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_ITUNES, <span class="stringliteral">&#39;summary&#39;</span>))
<a name="l02697"></a>02697       {
<a name="l02698"></a>02698          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_HTML, $this-&gt;get_base($return[0]));
<a name="l02699"></a>02699       }
<a name="l02700"></a>02700       elseif ($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_ITUNES, <span class="stringliteral">&#39;subtitle&#39;</span>))
<a name="l02701"></a>02701       {
<a name="l02702"></a>02702          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_HTML, $this-&gt;get_base($return[0]));
<a name="l02703"></a>02703       }
<a name="l02704"></a>02704       <span class="keywordflow">else</span>
<a name="l02705"></a>02705       {
<a name="l02706"></a>02706          <span class="keywordflow">return</span> null;
<a name="l02707"></a>02707       }
<a name="l02708"></a>02708    }
<a name="l02709"></a>02709 
<a name="l02710"></a>02710    <span class="keyword">function</span> get_copyright()
<a name="l02711"></a>02711    {
<a name="l02712"></a>02712       <span class="keywordflow">if</span> ($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;rights&#39;</span>))
<a name="l02713"></a>02713       {
<a name="l02714"></a>02714          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SimplePie_Misc::atom_10_construct_type($return[0][<span class="stringliteral">&#39;attribs&#39;</span>]), $this-&gt;get_base($return[0]));
<a name="l02715"></a>02715       }
<a name="l02716"></a>02716       elseif ($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_ATOM_03, <span class="stringliteral">&#39;copyright&#39;</span>))
<a name="l02717"></a>02717       {
<a name="l02718"></a>02718          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SimplePie_Misc::atom_03_construct_type($return[0][<span class="stringliteral">&#39;attribs&#39;</span>]), $this-&gt;get_base($return[0]));
<a name="l02719"></a>02719       }
<a name="l02720"></a>02720       elseif ($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_RSS_20, <span class="stringliteral">&#39;copyright&#39;</span>))
<a name="l02721"></a>02721       {
<a name="l02722"></a>02722          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02723"></a>02723       }
<a name="l02724"></a>02724       elseif ($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_DC_11, <span class="stringliteral">&#39;rights&#39;</span>))
<a name="l02725"></a>02725       {
<a name="l02726"></a>02726          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02727"></a>02727       }
<a name="l02728"></a>02728       elseif ($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_DC_10, <span class="stringliteral">&#39;rights&#39;</span>))
<a name="l02729"></a>02729       {
<a name="l02730"></a>02730          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02731"></a>02731       }
<a name="l02732"></a>02732       <span class="keywordflow">else</span>
<a name="l02733"></a>02733       {
<a name="l02734"></a>02734          <span class="keywordflow">return</span> null;
<a name="l02735"></a>02735       }
<a name="l02736"></a>02736    }
<a name="l02737"></a>02737 
<a name="l02738"></a>02738    <span class="keyword">function</span> get_language()
<a name="l02739"></a>02739    {
<a name="l02740"></a>02740       <span class="keywordflow">if</span> ($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_RSS_20, <span class="stringliteral">&#39;language&#39;</span>))
<a name="l02741"></a>02741       {
<a name="l02742"></a>02742          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02743"></a>02743       }
<a name="l02744"></a>02744       elseif ($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_DC_11, <span class="stringliteral">&#39;language&#39;</span>))
<a name="l02745"></a>02745       {
<a name="l02746"></a>02746          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02747"></a>02747       }
<a name="l02748"></a>02748       elseif ($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_DC_10, <span class="stringliteral">&#39;language&#39;</span>))
<a name="l02749"></a>02749       {
<a name="l02750"></a>02750          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02751"></a>02751       }
<a name="l02752"></a>02752       elseif (isset($this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;feed&#39;</span>][0][<span class="stringliteral">&#39;xml_lang&#39;</span>]))
<a name="l02753"></a>02753       {
<a name="l02754"></a>02754          <span class="keywordflow">return</span> $this-&gt;sanitize($this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;feed&#39;</span>][0][<span class="stringliteral">&#39;xml_lang&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02755"></a>02755       }
<a name="l02756"></a>02756       elseif (isset($this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;feed&#39;</span>][0][<span class="stringliteral">&#39;xml_lang&#39;</span>]))
<a name="l02757"></a>02757       {
<a name="l02758"></a>02758          <span class="keywordflow">return</span> $this-&gt;sanitize($this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;feed&#39;</span>][0][<span class="stringliteral">&#39;xml_lang&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02759"></a>02759       }
<a name="l02760"></a>02760       elseif (isset($this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RDF][<span class="stringliteral">&#39;RDF&#39;</span>][0][<span class="stringliteral">&#39;xml_lang&#39;</span>]))
<a name="l02761"></a>02761       {
<a name="l02762"></a>02762          <span class="keywordflow">return</span> $this-&gt;sanitize($this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RDF][<span class="stringliteral">&#39;RDF&#39;</span>][0][<span class="stringliteral">&#39;xml_lang&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02763"></a>02763       }
<a name="l02764"></a>02764       elseif (isset($this-&gt;data[<span class="stringliteral">&#39;headers&#39;</span>][<span class="stringliteral">&#39;content-language&#39;</span>]))
<a name="l02765"></a>02765       {
<a name="l02766"></a>02766          <span class="keywordflow">return</span> $this-&gt;sanitize($this-&gt;data[<span class="stringliteral">&#39;headers&#39;</span>][<span class="stringliteral">&#39;content-language&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02767"></a>02767       }
<a name="l02768"></a>02768       <span class="keywordflow">else</span>
<a name="l02769"></a>02769       {
<a name="l02770"></a>02770          <span class="keywordflow">return</span> null;
<a name="l02771"></a>02771       }
<a name="l02772"></a>02772    }
<a name="l02773"></a>02773 
<a name="l02774"></a>02774    <span class="keyword">function</span> get_latitude()
<a name="l02775"></a>02775    {
<a name="l02776"></a>02776       <span class="keywordflow">if</span> ($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_W3C_BASIC_GEO, <span class="stringliteral">&#39;lat&#39;</span>))
<a name="l02777"></a>02777       {
<a name="l02778"></a>02778          <span class="keywordflow">return</span> (<span class="keywordtype">float</span>) $return[0][<span class="stringliteral">&#39;data&#39;</span>];
<a name="l02779"></a>02779       }
<a name="l02780"></a>02780       elseif (($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_GEORSS, <span class="stringliteral">&#39;point&#39;</span>)) &amp;&amp; preg_match(<span class="stringliteral">&#39;/^((?:-)?[0-9]+(?:\.[0-9]+)) ((?:-)?[0-9]+(?:\.[0-9]+))$/&#39;</span>, $return[0][<span class="stringliteral">&#39;data&#39;</span>], $match))
<a name="l02781"></a>02781       {
<a name="l02782"></a>02782          <span class="keywordflow">return</span> (<span class="keywordtype">float</span>) $match[1];
<a name="l02783"></a>02783       }
<a name="l02784"></a>02784       <span class="keywordflow">else</span>
<a name="l02785"></a>02785       {
<a name="l02786"></a>02786          <span class="keywordflow">return</span> null;
<a name="l02787"></a>02787       }
<a name="l02788"></a>02788    }
<a name="l02789"></a>02789 
<a name="l02790"></a>02790    <span class="keyword">function</span> get_longitude()
<a name="l02791"></a>02791    {
<a name="l02792"></a>02792       <span class="keywordflow">if</span> ($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_W3C_BASIC_GEO, <span class="stringliteral">&#39;long&#39;</span>))
<a name="l02793"></a>02793       {
<a name="l02794"></a>02794          <span class="keywordflow">return</span> (<span class="keywordtype">float</span>) $return[0][<span class="stringliteral">&#39;data&#39;</span>];
<a name="l02795"></a>02795       }
<a name="l02796"></a>02796       elseif ($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_W3C_BASIC_GEO, <span class="stringliteral">&#39;lon&#39;</span>))
<a name="l02797"></a>02797       {
<a name="l02798"></a>02798          <span class="keywordflow">return</span> (<span class="keywordtype">float</span>) $return[0][<span class="stringliteral">&#39;data&#39;</span>];
<a name="l02799"></a>02799       }
<a name="l02800"></a>02800       elseif (($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_GEORSS, <span class="stringliteral">&#39;point&#39;</span>)) &amp;&amp; preg_match(<span class="stringliteral">&#39;/^((?:-)?[0-9]+(?:\.[0-9]+)) ((?:-)?[0-9]+(?:\.[0-9]+))$/&#39;</span>, $return[0][<span class="stringliteral">&#39;data&#39;</span>], $match))
<a name="l02801"></a>02801       {
<a name="l02802"></a>02802          <span class="keywordflow">return</span> (<span class="keywordtype">float</span>) $match[2];
<a name="l02803"></a>02803       }
<a name="l02804"></a>02804       <span class="keywordflow">else</span>
<a name="l02805"></a>02805       {
<a name="l02806"></a>02806          <span class="keywordflow">return</span> null;
<a name="l02807"></a>02807       }
<a name="l02808"></a>02808    }
<a name="l02809"></a>02809 
<a name="l02810"></a>02810    <span class="keyword">function</span> get_image_title()
<a name="l02811"></a>02811    {
<a name="l02812"></a>02812       <span class="keywordflow">if</span> ($return = $this-&gt;get_image_tags(SIMPLEPIE_NAMESPACE_RSS_10, <span class="stringliteral">&#39;title&#39;</span>))
<a name="l02813"></a>02813       {
<a name="l02814"></a>02814          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02815"></a>02815       }
<a name="l02816"></a>02816       elseif ($return = $this-&gt;get_image_tags(SIMPLEPIE_NAMESPACE_RSS_090, <span class="stringliteral">&#39;title&#39;</span>))
<a name="l02817"></a>02817       {
<a name="l02818"></a>02818          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02819"></a>02819       }
<a name="l02820"></a>02820       elseif ($return = $this-&gt;get_image_tags(SIMPLEPIE_NAMESPACE_RSS_20, <span class="stringliteral">&#39;title&#39;</span>))
<a name="l02821"></a>02821       {
<a name="l02822"></a>02822          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02823"></a>02823       }
<a name="l02824"></a>02824       elseif ($return = $this-&gt;get_image_tags(SIMPLEPIE_NAMESPACE_DC_11, <span class="stringliteral">&#39;title&#39;</span>))
<a name="l02825"></a>02825       {
<a name="l02826"></a>02826          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02827"></a>02827       }
<a name="l02828"></a>02828       elseif ($return = $this-&gt;get_image_tags(SIMPLEPIE_NAMESPACE_DC_10, <span class="stringliteral">&#39;title&#39;</span>))
<a name="l02829"></a>02829       {
<a name="l02830"></a>02830          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l02831"></a>02831       }
<a name="l02832"></a>02832       <span class="keywordflow">else</span>
<a name="l02833"></a>02833       {
<a name="l02834"></a>02834          <span class="keywordflow">return</span> null;
<a name="l02835"></a>02835       }
<a name="l02836"></a>02836    }
<a name="l02837"></a>02837 
<a name="l02838"></a>02838    <span class="keyword">function</span> get_image_url()
<a name="l02839"></a>02839    {
<a name="l02840"></a>02840       <span class="keywordflow">if</span> ($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_ITUNES, <span class="stringliteral">&#39;image&#39;</span>))
<a name="l02841"></a>02841       {
<a name="l02842"></a>02842          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;href&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI);
<a name="l02843"></a>02843       }
<a name="l02844"></a>02844       elseif ($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;logo&#39;</span>))
<a name="l02845"></a>02845       {
<a name="l02846"></a>02846          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($return[0]));
<a name="l02847"></a>02847       }
<a name="l02848"></a>02848       elseif ($return = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;icon&#39;</span>))
<a name="l02849"></a>02849       {
<a name="l02850"></a>02850          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($return[0]));
<a name="l02851"></a>02851       }
<a name="l02852"></a>02852       elseif ($return = $this-&gt;get_image_tags(SIMPLEPIE_NAMESPACE_RSS_10, <span class="stringliteral">&#39;url&#39;</span>))
<a name="l02853"></a>02853       {
<a name="l02854"></a>02854          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($return[0]));
<a name="l02855"></a>02855       }
<a name="l02856"></a>02856       elseif ($return = $this-&gt;get_image_tags(SIMPLEPIE_NAMESPACE_RSS_090, <span class="stringliteral">&#39;url&#39;</span>))
<a name="l02857"></a>02857       {
<a name="l02858"></a>02858          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($return[0]));
<a name="l02859"></a>02859       }
<a name="l02860"></a>02860       elseif ($return = $this-&gt;get_image_tags(SIMPLEPIE_NAMESPACE_RSS_20, <span class="stringliteral">&#39;url&#39;</span>))
<a name="l02861"></a>02861       {
<a name="l02862"></a>02862          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($return[0]));
<a name="l02863"></a>02863       }
<a name="l02864"></a>02864       <span class="keywordflow">else</span>
<a name="l02865"></a>02865       {
<a name="l02866"></a>02866          <span class="keywordflow">return</span> null;
<a name="l02867"></a>02867       }
<a name="l02868"></a>02868    }
<a name="l02869"></a>02869 
<a name="l02870"></a>02870    <span class="keyword">function</span> get_image_link()
<a name="l02871"></a>02871    {
<a name="l02872"></a>02872       <span class="keywordflow">if</span> ($return = $this-&gt;get_image_tags(SIMPLEPIE_NAMESPACE_RSS_10, <span class="stringliteral">&#39;link&#39;</span>))
<a name="l02873"></a>02873       {
<a name="l02874"></a>02874          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($return[0]));
<a name="l02875"></a>02875       }
<a name="l02876"></a>02876       elseif ($return = $this-&gt;get_image_tags(SIMPLEPIE_NAMESPACE_RSS_090, <span class="stringliteral">&#39;link&#39;</span>))
<a name="l02877"></a>02877       {
<a name="l02878"></a>02878          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($return[0]));
<a name="l02879"></a>02879       }
<a name="l02880"></a>02880       elseif ($return = $this-&gt;get_image_tags(SIMPLEPIE_NAMESPACE_RSS_20, <span class="stringliteral">&#39;link&#39;</span>))
<a name="l02881"></a>02881       {
<a name="l02882"></a>02882          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($return[0]));
<a name="l02883"></a>02883       }
<a name="l02884"></a>02884       <span class="keywordflow">else</span>
<a name="l02885"></a>02885       {
<a name="l02886"></a>02886          <span class="keywordflow">return</span> null;
<a name="l02887"></a>02887       }
<a name="l02888"></a>02888    }
<a name="l02889"></a>02889 
<a name="l02890"></a>02890    <span class="keyword">function</span> get_image_width()
<a name="l02891"></a>02891    {
<a name="l02892"></a>02892       <span class="keywordflow">if</span> ($return = $this-&gt;get_image_tags(SIMPLEPIE_NAMESPACE_RSS_20, <span class="stringliteral">&#39;width&#39;</span>))
<a name="l02893"></a>02893       {
<a name="l02894"></a>02894          <span class="keywordflow">return</span> round($return[0][<span class="stringliteral">&#39;data&#39;</span>]);
<a name="l02895"></a>02895       }
<a name="l02896"></a>02896       elseif ($this-&gt;get_type() &amp; SIMPLEPIE_TYPE_RSS_SYNDICATION &amp;&amp; $this-&gt;get_image_tags(SIMPLEPIE_NAMESPACE_RSS_20, <span class="stringliteral">&#39;url&#39;</span>))
<a name="l02897"></a>02897       {
<a name="l02898"></a>02898          <span class="keywordflow">return</span> 88.0;
<a name="l02899"></a>02899       }
<a name="l02900"></a>02900       <span class="keywordflow">else</span>
<a name="l02901"></a>02901       {
<a name="l02902"></a>02902          <span class="keywordflow">return</span> null;
<a name="l02903"></a>02903       }
<a name="l02904"></a>02904    }
<a name="l02905"></a>02905 
<a name="l02906"></a>02906    <span class="keyword">function</span> get_image_height()
<a name="l02907"></a>02907    {
<a name="l02908"></a>02908       <span class="keywordflow">if</span> ($return = $this-&gt;get_image_tags(SIMPLEPIE_NAMESPACE_RSS_20, <span class="stringliteral">&#39;height&#39;</span>))
<a name="l02909"></a>02909       {
<a name="l02910"></a>02910          <span class="keywordflow">return</span> round($return[0][<span class="stringliteral">&#39;data&#39;</span>]);
<a name="l02911"></a>02911       }
<a name="l02912"></a>02912       elseif ($this-&gt;get_type() &amp; SIMPLEPIE_TYPE_RSS_SYNDICATION &amp;&amp; $this-&gt;get_image_tags(SIMPLEPIE_NAMESPACE_RSS_20, <span class="stringliteral">&#39;url&#39;</span>))
<a name="l02913"></a>02913       {
<a name="l02914"></a>02914          <span class="keywordflow">return</span> 31.0;
<a name="l02915"></a>02915       }
<a name="l02916"></a>02916       <span class="keywordflow">else</span>
<a name="l02917"></a>02917       {
<a name="l02918"></a>02918          <span class="keywordflow">return</span> null;
<a name="l02919"></a>02919       }
<a name="l02920"></a>02920    }
<a name="l02921"></a>02921 
<a name="l02922"></a>02922    <span class="keyword">function</span> get_item_quantity($max = 0)
<a name="l02923"></a>02923    {
<a name="l02924"></a>02924       $max = (int) $max;
<a name="l02925"></a>02925       $qty = count($this-&gt;get_items());
<a name="l02926"></a>02926       <span class="keywordflow">if</span> ($max === 0)
<a name="l02927"></a>02927       {
<a name="l02928"></a>02928          <span class="keywordflow">return</span> $qty;
<a name="l02929"></a>02929       }
<a name="l02930"></a>02930       <span class="keywordflow">else</span>
<a name="l02931"></a>02931       {
<a name="l02932"></a>02932          <span class="keywordflow">return</span> ($qty &gt; $max) ? $max : $qty;
<a name="l02933"></a>02933       }
<a name="l02934"></a>02934    }
<a name="l02935"></a>02935 
<a name="l02936"></a>02936    <span class="keyword">function</span> get_item($key = 0)
<a name="l02937"></a>02937    {
<a name="l02938"></a>02938       $items = $this-&gt;get_items();
<a name="l02939"></a>02939       <span class="keywordflow">if</span> (isset($items[$key]))
<a name="l02940"></a>02940       {
<a name="l02941"></a>02941          <span class="keywordflow">return</span> $items[$key];
<a name="l02942"></a>02942       }
<a name="l02943"></a>02943       <span class="keywordflow">else</span>
<a name="l02944"></a>02944       {
<a name="l02945"></a>02945          <span class="keywordflow">return</span> null;
<a name="l02946"></a>02946       }
<a name="l02947"></a>02947    }
<a name="l02948"></a>02948 
<a name="l02949"></a>02949    <span class="keyword">function</span> get_items($start = 0, $end = 0)
<a name="l02950"></a>02950    {
<a name="l02951"></a>02951       <span class="keywordflow">if</span> (!isset($this-&gt;data[<span class="stringliteral">&#39;items&#39;</span>]))
<a name="l02952"></a>02952       {
<a name="l02953"></a>02953          <span class="keywordflow">if</span> (!empty($this-&gt;multifeed_objects))
<a name="l02954"></a>02954          {
<a name="l02955"></a>02955             $this-&gt;data[<span class="stringliteral">&#39;items&#39;</span>] = SimplePie::merge_items($this-&gt;multifeed_objects, $start, $end, $this-&gt;item_limit);
<a name="l02956"></a>02956          }
<a name="l02957"></a>02957          <span class="keywordflow">else</span>
<a name="l02958"></a>02958          {
<a name="l02959"></a>02959             $this-&gt;data[<span class="stringliteral">&#39;items&#39;</span>] = array();
<a name="l02960"></a>02960             <span class="keywordflow">if</span> ($items = $this-&gt;get_feed_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;entry&#39;</span>))
<a name="l02961"></a>02961             {
<a name="l02962"></a>02962                $keys = array_keys($items);
<a name="l02963"></a>02963                <span class="keywordflow">foreach</span> ($keys as $key)
<a name="l02964"></a>02964                {
<a name="l02965"></a>02965                   $this-&gt;data[<span class="stringliteral">&#39;items&#39;</span>][] =&amp; <span class="keyword">new</span> $this-&gt;item_class($this, $items[$key]);
<a name="l02966"></a>02966                }
<a name="l02967"></a>02967             }
<a name="l02968"></a>02968             <span class="keywordflow">if</span> ($items = $this-&gt;get_feed_tags(SIMPLEPIE_NAMESPACE_ATOM_03, <span class="stringliteral">&#39;entry&#39;</span>))
<a name="l02969"></a>02969             {
<a name="l02970"></a>02970                $keys = array_keys($items);
<a name="l02971"></a>02971                <span class="keywordflow">foreach</span> ($keys as $key)
<a name="l02972"></a>02972                {
<a name="l02973"></a>02973                   $this-&gt;data[<span class="stringliteral">&#39;items&#39;</span>][] =&amp; <span class="keyword">new</span> $this-&gt;item_class($this, $items[$key]);
<a name="l02974"></a>02974                }
<a name="l02975"></a>02975             }
<a name="l02976"></a>02976             <span class="keywordflow">if</span> ($items = $this-&gt;get_feed_tags(SIMPLEPIE_NAMESPACE_RSS_10, <span class="stringliteral">&#39;item&#39;</span>))
<a name="l02977"></a>02977             {
<a name="l02978"></a>02978                $keys = array_keys($items);
<a name="l02979"></a>02979                <span class="keywordflow">foreach</span> ($keys as $key)
<a name="l02980"></a>02980                {
<a name="l02981"></a>02981                   $this-&gt;data[<span class="stringliteral">&#39;items&#39;</span>][] =&amp; <span class="keyword">new</span> $this-&gt;item_class($this, $items[$key]);
<a name="l02982"></a>02982                }
<a name="l02983"></a>02983             }
<a name="l02984"></a>02984             <span class="keywordflow">if</span> ($items = $this-&gt;get_feed_tags(SIMPLEPIE_NAMESPACE_RSS_090, <span class="stringliteral">&#39;item&#39;</span>))
<a name="l02985"></a>02985             {
<a name="l02986"></a>02986                $keys = array_keys($items);
<a name="l02987"></a>02987                <span class="keywordflow">foreach</span> ($keys as $key)
<a name="l02988"></a>02988                {
<a name="l02989"></a>02989                   $this-&gt;data[<span class="stringliteral">&#39;items&#39;</span>][] =&amp; <span class="keyword">new</span> $this-&gt;item_class($this, $items[$key]);
<a name="l02990"></a>02990                }
<a name="l02991"></a>02991             }
<a name="l02992"></a>02992             <span class="keywordflow">if</span> ($items = $this-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_RSS_20, <span class="stringliteral">&#39;item&#39;</span>))
<a name="l02993"></a>02993             {
<a name="l02994"></a>02994                $keys = array_keys($items);
<a name="l02995"></a>02995                <span class="keywordflow">foreach</span> ($keys as $key)
<a name="l02996"></a>02996                {
<a name="l02997"></a>02997                   $this-&gt;data[<span class="stringliteral">&#39;items&#39;</span>][] =&amp; <span class="keyword">new</span> $this-&gt;item_class($this, $items[$key]);
<a name="l02998"></a>02998                }
<a name="l02999"></a>02999             }
<a name="l03000"></a>03000          }
<a name="l03001"></a>03001       }
<a name="l03002"></a>03002 
<a name="l03003"></a>03003       <span class="keywordflow">if</span> (!empty($this-&gt;data[<span class="stringliteral">&#39;items&#39;</span>]))
<a name="l03004"></a>03004       {
<a name="l03005"></a>03005          <span class="comment">// If we want to order it by date, check if all items have a date, and then sort it</span>
<a name="l03006"></a>03006          <span class="keywordflow">if</span> ($this-&gt;order_by_date &amp;&amp; empty($this-&gt;multifeed_objects))
<a name="l03007"></a>03007          {
<a name="l03008"></a>03008             <span class="keywordflow">if</span> (!isset($this-&gt;data[<span class="stringliteral">&#39;ordered_items&#39;</span>]))
<a name="l03009"></a>03009             {
<a name="l03010"></a>03010                $do_sort = <span class="keyword">true</span>;
<a name="l03011"></a>03011                <span class="keywordflow">foreach</span> ($this-&gt;data[<span class="stringliteral">&#39;items&#39;</span>] as $item)
<a name="l03012"></a>03012                {
<a name="l03013"></a>03013                   <span class="keywordflow">if</span> (!$item-&gt;get_date(<span class="charliteral">&#39;U&#39;</span>))
<a name="l03014"></a>03014                   {
<a name="l03015"></a>03015                      $do_sort = <span class="keyword">false</span>;
<a name="l03016"></a>03016                      <span class="keywordflow">break</span>;
<a name="l03017"></a>03017                   }
<a name="l03018"></a>03018                }
<a name="l03019"></a>03019                $item = null;
<a name="l03020"></a>03020                $this-&gt;data[<span class="stringliteral">&#39;ordered_items&#39;</span>] = $this-&gt;data[<span class="stringliteral">&#39;items&#39;</span>];
<a name="l03021"></a>03021                <span class="keywordflow">if</span> ($do_sort)
<a name="l03022"></a>03022                {
<a name="l03023"></a>03023                   usort($this-&gt;data[<span class="stringliteral">&#39;ordered_items&#39;</span>], array(&amp;$this, <span class="stringliteral">&#39;sort_items&#39;</span>));
<a name="l03024"></a>03024                }
<a name="l03025"></a>03025             }
<a name="l03026"></a>03026             $items = $this-&gt;data[<span class="stringliteral">&#39;ordered_items&#39;</span>];
<a name="l03027"></a>03027          }
<a name="l03028"></a>03028          <span class="keywordflow">else</span>
<a name="l03029"></a>03029          {
<a name="l03030"></a>03030             $items = $this-&gt;data[<span class="stringliteral">&#39;items&#39;</span>];
<a name="l03031"></a>03031          }
<a name="l03032"></a>03032 
<a name="l03033"></a>03033          <span class="comment">// Slice the data as desired</span>
<a name="l03034"></a>03034          <span class="keywordflow">if</span> ($end === 0)
<a name="l03035"></a>03035          {
<a name="l03036"></a>03036             <span class="keywordflow">return</span> array_slice($items, $start);
<a name="l03037"></a>03037          }
<a name="l03038"></a>03038          <span class="keywordflow">else</span>
<a name="l03039"></a>03039          {
<a name="l03040"></a>03040             <span class="keywordflow">return</span> array_slice($items, $start, $end);
<a name="l03041"></a>03041          }
<a name="l03042"></a>03042       }
<a name="l03043"></a>03043       <span class="keywordflow">else</span>
<a name="l03044"></a>03044       {
<a name="l03045"></a>03045          <span class="keywordflow">return</span> array();
<a name="l03046"></a>03046       }
<a name="l03047"></a>03047    }
<a name="l03048"></a>03048 <span class="comment"></span>
<a name="l03049"></a>03049 <span class="comment">   /**</span>
<a name="l03050"></a>03050 <span class="comment">    * @static</span>
<a name="l03051"></a>03051 <span class="comment">    */</span>
<a name="l03052"></a>03052    <span class="keyword">function</span> sort_items($a, $b)
<a name="l03053"></a>03053    {
<a name="l03054"></a>03054       <span class="keywordflow">return</span> $a-&gt;get_date(<span class="charliteral">&#39;U&#39;</span>) &lt;= $b-&gt;get_date(<span class="charliteral">&#39;U&#39;</span>);
<a name="l03055"></a>03055    }
<a name="l03056"></a>03056 <span class="comment"></span>
<a name="l03057"></a>03057 <span class="comment">   /**</span>
<a name="l03058"></a>03058 <span class="comment">    * @static</span>
<a name="l03059"></a>03059 <span class="comment">    */</span>
<a name="l03060"></a>03060    <span class="keyword">function</span> merge_items($urls, $start = 0, $end = 0, $limit = 0)
<a name="l03061"></a>03061    {
<a name="l03062"></a>03062       <span class="keywordflow">if</span> (is_array($urls) &amp;&amp; <span class="keyword">sizeof</span>($urls) &gt; 0)
<a name="l03063"></a>03063       {
<a name="l03064"></a>03064          $items = array();
<a name="l03065"></a>03065          <span class="keywordflow">foreach</span> ($urls as $arg)
<a name="l03066"></a>03066          {
<a name="l03067"></a>03067             <span class="keywordflow">if</span> (is_a($arg, <span class="stringliteral">&#39;SimplePie&#39;</span>))
<a name="l03068"></a>03068             {
<a name="l03069"></a>03069                $items = array_merge($items, $arg-&gt;get_items(0, $limit));
<a name="l03070"></a>03070             }
<a name="l03071"></a>03071             <span class="keywordflow">else</span>
<a name="l03072"></a>03072             {
<a name="l03073"></a>03073                trigger_error(<span class="stringliteral">&#39;Arguments must be SimplePie objects&#39;</span>, E_USER_WARNING);
<a name="l03074"></a>03074             }
<a name="l03075"></a>03075          }
<a name="l03076"></a>03076 
<a name="l03077"></a>03077          $do_sort = <span class="keyword">true</span>;
<a name="l03078"></a>03078          <span class="keywordflow">foreach</span> ($items as $item)
<a name="l03079"></a>03079          {
<a name="l03080"></a>03080             <span class="keywordflow">if</span> (!$item-&gt;get_date(<span class="charliteral">&#39;U&#39;</span>))
<a name="l03081"></a>03081             {
<a name="l03082"></a>03082                $do_sort = <span class="keyword">false</span>;
<a name="l03083"></a>03083                <span class="keywordflow">break</span>;
<a name="l03084"></a>03084             }
<a name="l03085"></a>03085          }
<a name="l03086"></a>03086          $item = null;
<a name="l03087"></a>03087          <span class="keywordflow">if</span> ($do_sort)
<a name="l03088"></a>03088          {
<a name="l03089"></a>03089             usort($items, array(<span class="stringliteral">&#39;SimplePie&#39;</span>, <span class="stringliteral">&#39;sort_items&#39;</span>));
<a name="l03090"></a>03090          }
<a name="l03091"></a>03091 
<a name="l03092"></a>03092          <span class="keywordflow">if</span> ($end === 0)
<a name="l03093"></a>03093          {
<a name="l03094"></a>03094             <span class="keywordflow">return</span> array_slice($items, $start);
<a name="l03095"></a>03095          }
<a name="l03096"></a>03096          <span class="keywordflow">else</span>
<a name="l03097"></a>03097          {
<a name="l03098"></a>03098             <span class="keywordflow">return</span> array_slice($items, $start, $end);
<a name="l03099"></a>03099          }
<a name="l03100"></a>03100       }
<a name="l03101"></a>03101       <span class="keywordflow">else</span>
<a name="l03102"></a>03102       {
<a name="l03103"></a>03103          trigger_error(<span class="stringliteral">&#39;Cannot merge zero SimplePie objects&#39;</span>, E_USER_WARNING);
<a name="l03104"></a>03104          <span class="keywordflow">return</span> array();
<a name="l03105"></a>03105       }
<a name="l03106"></a>03106    }
<a name="l03107"></a>03107 }
<a name="l03108"></a>03108 
<a name="l03109"></a><a class="code" href="class_simple_pie___item.html">03109</a> <span class="keyword">class </span><a class="code" href="class_simple_pie___item.html">SimplePie_Item</a>
<a name="l03110"></a>03110 {
<a name="l03111"></a>03111    var $feed;
<a name="l03112"></a>03112    var $data = array();
<a name="l03113"></a>03113 
<a name="l03114"></a>03114    <span class="keyword">function</span> <a class="code" href="class_simple_pie___item.html">SimplePie_Item</a>($feed, $data)
<a name="l03115"></a>03115    {
<a name="l03116"></a>03116       $this-&gt;feed = $feed;
<a name="l03117"></a>03117       $this-&gt;data = $data;
<a name="l03118"></a>03118    }
<a name="l03119"></a>03119 
<a name="l03120"></a>03120    <span class="keyword">function</span> __toString()
<a name="l03121"></a>03121    {
<a name="l03122"></a>03122       <span class="keywordflow">return</span> md5(serialize($this-&gt;data));
<a name="l03123"></a>03123    }
<a name="l03124"></a>03124 <span class="comment"></span>
<a name="l03125"></a>03125 <span class="comment">   /**</span>
<a name="l03126"></a>03126 <span class="comment">    * Remove items that link back to this before destroying this object</span>
<a name="l03127"></a>03127 <span class="comment">    */</span>
<a name="l03128"></a><a class="code" href="class_simple_pie___item.html#a421831a265621325e1fdd19aace0c758">03128</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie___item.html#a421831a265621325e1fdd19aace0c758">__destruct</a>()
<a name="l03129"></a>03129    {
<a name="l03130"></a>03130       <span class="keywordflow">if</span> ((version_compare(PHP_VERSION, <span class="stringliteral">&#39;5.3&#39;</span>, <span class="charliteral">&#39;&lt;&#39;</span>) || !gc_enabled()) &amp;&amp; !ini_get(<span class="stringliteral">&#39;zend.ze1_compatibility_mode&#39;</span>))
<a name="l03131"></a>03131       {
<a name="l03132"></a>03132          unset($this-&gt;feed);
<a name="l03133"></a>03133       }
<a name="l03134"></a>03134    }
<a name="l03135"></a>03135 
<a name="l03136"></a>03136    <span class="keyword">function</span> get_item_tags($namespace, $tag)
<a name="l03137"></a>03137    {
<a name="l03138"></a>03138       <span class="keywordflow">if</span> (isset($this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][$namespace][$tag]))
<a name="l03139"></a>03139       {
<a name="l03140"></a>03140          <span class="keywordflow">return</span> $this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][$namespace][$tag];
<a name="l03141"></a>03141       }
<a name="l03142"></a>03142       <span class="keywordflow">else</span>
<a name="l03143"></a>03143       {
<a name="l03144"></a>03144          <span class="keywordflow">return</span> null;
<a name="l03145"></a>03145       }
<a name="l03146"></a>03146    }
<a name="l03147"></a>03147 
<a name="l03148"></a>03148    <span class="keyword">function</span> get_base($element = array())
<a name="l03149"></a>03149    {
<a name="l03150"></a>03150       <span class="keywordflow">return</span> $this-&gt;feed-&gt;get_base($element);
<a name="l03151"></a>03151    }
<a name="l03152"></a>03152 
<a name="l03153"></a>03153    <span class="keyword">function</span> sanitize($data, $type, $base = <span class="stringliteral">&#39;&#39;</span>)
<a name="l03154"></a>03154    {
<a name="l03155"></a>03155       <span class="keywordflow">return</span> $this-&gt;feed-&gt;sanitize($data, $type, $base);
<a name="l03156"></a>03156    }
<a name="l03157"></a>03157 
<a name="l03158"></a>03158    <span class="keyword">function</span> get_feed()
<a name="l03159"></a>03159    {
<a name="l03160"></a>03160       <span class="keywordflow">return</span> $this-&gt;feed;
<a name="l03161"></a>03161    }
<a name="l03162"></a>03162 
<a name="l03163"></a>03163    <span class="keyword">function</span> get_id($hash = <span class="keyword">false</span>)
<a name="l03164"></a>03164    {
<a name="l03165"></a>03165       <span class="keywordflow">if</span> (!$hash)
<a name="l03166"></a>03166       {
<a name="l03167"></a>03167          <span class="keywordflow">if</span> ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;id&#39;</span>))
<a name="l03168"></a>03168          {
<a name="l03169"></a>03169             <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03170"></a>03170          }
<a name="l03171"></a>03171          elseif ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_ATOM_03, <span class="stringliteral">&#39;id&#39;</span>))
<a name="l03172"></a>03172          {
<a name="l03173"></a>03173             <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03174"></a>03174          }
<a name="l03175"></a>03175          elseif ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_RSS_20, <span class="stringliteral">&#39;guid&#39;</span>))
<a name="l03176"></a>03176          {
<a name="l03177"></a>03177             <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03178"></a>03178          }
<a name="l03179"></a>03179          elseif ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_DC_11, <span class="stringliteral">&#39;identifier&#39;</span>))
<a name="l03180"></a>03180          {
<a name="l03181"></a>03181             <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03182"></a>03182          }
<a name="l03183"></a>03183          elseif ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_DC_10, <span class="stringliteral">&#39;identifier&#39;</span>))
<a name="l03184"></a>03184          {
<a name="l03185"></a>03185             <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03186"></a>03186          }
<a name="l03187"></a>03187          elseif (($return = $this-&gt;get_permalink()) !== null)
<a name="l03188"></a>03188          {
<a name="l03189"></a>03189             <span class="keywordflow">return</span> $return;
<a name="l03190"></a>03190          }
<a name="l03191"></a>03191          elseif (($return = $this-&gt;get_title()) !== null)
<a name="l03192"></a>03192          {
<a name="l03193"></a>03193             <span class="keywordflow">return</span> $return;
<a name="l03194"></a>03194          }
<a name="l03195"></a>03195       }
<a name="l03196"></a>03196       <span class="keywordflow">if</span> ($this-&gt;get_permalink() !== null || $this-&gt;get_title() !== null)
<a name="l03197"></a>03197       {
<a name="l03198"></a>03198          <span class="keywordflow">return</span> md5($this-&gt;get_permalink() . $this-&gt;get_title());
<a name="l03199"></a>03199       }
<a name="l03200"></a>03200       <span class="keywordflow">else</span>
<a name="l03201"></a>03201       {
<a name="l03202"></a>03202          <span class="keywordflow">return</span> md5(serialize($this-&gt;data));
<a name="l03203"></a>03203       }
<a name="l03204"></a>03204    }
<a name="l03205"></a>03205 
<a name="l03206"></a>03206    <span class="keyword">function</span> get_title()
<a name="l03207"></a>03207    {
<a name="l03208"></a>03208       <span class="keywordflow">if</span> (!isset($this-&gt;data[<span class="stringliteral">&#39;title&#39;</span>]))
<a name="l03209"></a>03209       {
<a name="l03210"></a>03210          <span class="keywordflow">if</span> ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;title&#39;</span>))
<a name="l03211"></a>03211          {
<a name="l03212"></a>03212             $this-&gt;data[<span class="stringliteral">&#39;title&#39;</span>] = $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SimplePie_Misc::atom_10_construct_type($return[0][<span class="stringliteral">&#39;attribs&#39;</span>]), $this-&gt;get_base($return[0]));
<a name="l03213"></a>03213          }
<a name="l03214"></a>03214          elseif ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_ATOM_03, <span class="stringliteral">&#39;title&#39;</span>))
<a name="l03215"></a>03215          {
<a name="l03216"></a>03216             $this-&gt;data[<span class="stringliteral">&#39;title&#39;</span>] = $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SimplePie_Misc::atom_03_construct_type($return[0][<span class="stringliteral">&#39;attribs&#39;</span>]), $this-&gt;get_base($return[0]));
<a name="l03217"></a>03217          }
<a name="l03218"></a>03218          elseif ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_RSS_10, <span class="stringliteral">&#39;title&#39;</span>))
<a name="l03219"></a>03219          {
<a name="l03220"></a>03220             $this-&gt;data[<span class="stringliteral">&#39;title&#39;</span>] = $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_MAYBE_HTML, $this-&gt;get_base($return[0]));
<a name="l03221"></a>03221          }
<a name="l03222"></a>03222          elseif ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_RSS_090, <span class="stringliteral">&#39;title&#39;</span>))
<a name="l03223"></a>03223          {
<a name="l03224"></a>03224             $this-&gt;data[<span class="stringliteral">&#39;title&#39;</span>] = $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_MAYBE_HTML, $this-&gt;get_base($return[0]));
<a name="l03225"></a>03225          }
<a name="l03226"></a>03226          elseif ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_RSS_20, <span class="stringliteral">&#39;title&#39;</span>))
<a name="l03227"></a>03227          {
<a name="l03228"></a>03228             $this-&gt;data[<span class="stringliteral">&#39;title&#39;</span>] = $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_MAYBE_HTML, $this-&gt;get_base($return[0]));
<a name="l03229"></a>03229          }
<a name="l03230"></a>03230          elseif ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_DC_11, <span class="stringliteral">&#39;title&#39;</span>))
<a name="l03231"></a>03231          {
<a name="l03232"></a>03232             $this-&gt;data[<span class="stringliteral">&#39;title&#39;</span>] = $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03233"></a>03233          }
<a name="l03234"></a>03234          elseif ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_DC_10, <span class="stringliteral">&#39;title&#39;</span>))
<a name="l03235"></a>03235          {
<a name="l03236"></a>03236             $this-&gt;data[<span class="stringliteral">&#39;title&#39;</span>] = $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03237"></a>03237          }
<a name="l03238"></a>03238          <span class="keywordflow">else</span>
<a name="l03239"></a>03239          {
<a name="l03240"></a>03240             $this-&gt;data[<span class="stringliteral">&#39;title&#39;</span>] = null;
<a name="l03241"></a>03241          }
<a name="l03242"></a>03242       }
<a name="l03243"></a>03243       <span class="keywordflow">return</span> $this-&gt;data[<span class="stringliteral">&#39;title&#39;</span>];
<a name="l03244"></a>03244    }
<a name="l03245"></a>03245 
<a name="l03246"></a>03246    <span class="keyword">function</span> get_description($description_only = <span class="keyword">false</span>)
<a name="l03247"></a>03247    {
<a name="l03248"></a>03248       <span class="keywordflow">if</span> ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;summary&#39;</span>))
<a name="l03249"></a>03249       {
<a name="l03250"></a>03250          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SimplePie_Misc::atom_10_construct_type($return[0][<span class="stringliteral">&#39;attribs&#39;</span>]), $this-&gt;get_base($return[0]));
<a name="l03251"></a>03251       }
<a name="l03252"></a>03252       elseif ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_ATOM_03, <span class="stringliteral">&#39;summary&#39;</span>))
<a name="l03253"></a>03253       {
<a name="l03254"></a>03254          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SimplePie_Misc::atom_03_construct_type($return[0][<span class="stringliteral">&#39;attribs&#39;</span>]), $this-&gt;get_base($return[0]));
<a name="l03255"></a>03255       }
<a name="l03256"></a>03256       elseif ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_RSS_10, <span class="stringliteral">&#39;description&#39;</span>))
<a name="l03257"></a>03257       {
<a name="l03258"></a>03258          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_MAYBE_HTML, $this-&gt;get_base($return[0]));
<a name="l03259"></a>03259       }
<a name="l03260"></a>03260       elseif ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_RSS_20, <span class="stringliteral">&#39;description&#39;</span>))
<a name="l03261"></a>03261       {
<a name="l03262"></a>03262          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_HTML, $this-&gt;get_base($return[0]));
<a name="l03263"></a>03263       }
<a name="l03264"></a>03264       elseif ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_DC_11, <span class="stringliteral">&#39;description&#39;</span>))
<a name="l03265"></a>03265       {
<a name="l03266"></a>03266          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03267"></a>03267       }
<a name="l03268"></a>03268       elseif ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_DC_10, <span class="stringliteral">&#39;description&#39;</span>))
<a name="l03269"></a>03269       {
<a name="l03270"></a>03270          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03271"></a>03271       }
<a name="l03272"></a>03272       elseif ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_ITUNES, <span class="stringliteral">&#39;summary&#39;</span>))
<a name="l03273"></a>03273       {
<a name="l03274"></a>03274          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_HTML, $this-&gt;get_base($return[0]));
<a name="l03275"></a>03275       }
<a name="l03276"></a>03276       elseif ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_ITUNES, <span class="stringliteral">&#39;subtitle&#39;</span>))
<a name="l03277"></a>03277       {
<a name="l03278"></a>03278          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03279"></a>03279       }
<a name="l03280"></a>03280       elseif (!$description_only)
<a name="l03281"></a>03281       {
<a name="l03282"></a>03282          <span class="keywordflow">return</span> $this-&gt;get_content(<span class="keyword">true</span>);
<a name="l03283"></a>03283       }
<a name="l03284"></a>03284       <span class="keywordflow">else</span>
<a name="l03285"></a>03285       {
<a name="l03286"></a>03286          <span class="keywordflow">return</span> null;
<a name="l03287"></a>03287       }
<a name="l03288"></a>03288    }
<a name="l03289"></a>03289 
<a name="l03290"></a>03290    <span class="keyword">function</span> get_content($content_only = <span class="keyword">false</span>)
<a name="l03291"></a>03291    {
<a name="l03292"></a>03292       <span class="keywordflow">if</span> ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;content&#39;</span>))
<a name="l03293"></a>03293       {
<a name="l03294"></a>03294          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SimplePie_Misc::atom_10_content_construct_type($return[0][<span class="stringliteral">&#39;attribs&#39;</span>]), $this-&gt;get_base($return[0]));
<a name="l03295"></a>03295       }
<a name="l03296"></a>03296       elseif ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_ATOM_03, <span class="stringliteral">&#39;content&#39;</span>))
<a name="l03297"></a>03297       {
<a name="l03298"></a>03298          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SimplePie_Misc::atom_03_construct_type($return[0][<span class="stringliteral">&#39;attribs&#39;</span>]), $this-&gt;get_base($return[0]));
<a name="l03299"></a>03299       }
<a name="l03300"></a>03300       elseif ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_RSS_10_MODULES_CONTENT, <span class="stringliteral">&#39;encoded&#39;</span>))
<a name="l03301"></a>03301       {
<a name="l03302"></a>03302          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_HTML, $this-&gt;get_base($return[0]));
<a name="l03303"></a>03303       }
<a name="l03304"></a>03304       elseif (!$content_only)
<a name="l03305"></a>03305       {
<a name="l03306"></a>03306          <span class="keywordflow">return</span> $this-&gt;get_description(<span class="keyword">true</span>);
<a name="l03307"></a>03307       }
<a name="l03308"></a>03308       <span class="keywordflow">else</span>
<a name="l03309"></a>03309       {
<a name="l03310"></a>03310          <span class="keywordflow">return</span> null;
<a name="l03311"></a>03311       }
<a name="l03312"></a>03312    }
<a name="l03313"></a>03313 
<a name="l03314"></a>03314    <span class="keyword">function</span> get_category($key = 0)
<a name="l03315"></a>03315    {
<a name="l03316"></a>03316       $categories = $this-&gt;get_categories();
<a name="l03317"></a>03317       <span class="keywordflow">if</span> (isset($categories[$key]))
<a name="l03318"></a>03318       {
<a name="l03319"></a>03319          <span class="keywordflow">return</span> $categories[$key];
<a name="l03320"></a>03320       }
<a name="l03321"></a>03321       <span class="keywordflow">else</span>
<a name="l03322"></a>03322       {
<a name="l03323"></a>03323          <span class="keywordflow">return</span> null;
<a name="l03324"></a>03324       }
<a name="l03325"></a>03325    }
<a name="l03326"></a>03326 
<a name="l03327"></a>03327    <span class="keyword">function</span> get_categories()
<a name="l03328"></a>03328    {
<a name="l03329"></a>03329       $categories = array();
<a name="l03330"></a>03330 
<a name="l03331"></a>03331       <span class="keywordflow">foreach</span> ((array) $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;category&#39;</span>) as $category)
<a name="l03332"></a>03332       {
<a name="l03333"></a>03333          $term = null;
<a name="l03334"></a>03334          $scheme = null;
<a name="l03335"></a>03335          $label = null;
<a name="l03336"></a>03336          <span class="keywordflow">if</span> (isset($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;term&#39;</span>]))
<a name="l03337"></a>03337          {
<a name="l03338"></a>03338             $term = $this-&gt;sanitize($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;term&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03339"></a>03339          }
<a name="l03340"></a>03340          <span class="keywordflow">if</span> (isset($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>]))
<a name="l03341"></a>03341          {
<a name="l03342"></a>03342             $scheme = $this-&gt;sanitize($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03343"></a>03343          }
<a name="l03344"></a>03344          <span class="keywordflow">if</span> (isset($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;label&#39;</span>]))
<a name="l03345"></a>03345          {
<a name="l03346"></a>03346             $label = $this-&gt;sanitize($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;label&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03347"></a>03347          }
<a name="l03348"></a>03348          $categories[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;category_class($term, $scheme, $label);
<a name="l03349"></a>03349       }
<a name="l03350"></a>03350       <span class="keywordflow">foreach</span> ((array) $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_RSS_20, <span class="stringliteral">&#39;category&#39;</span>) as $category)
<a name="l03351"></a>03351       {
<a name="l03352"></a>03352          <span class="comment">// This is really the label, but keep this as the term also for BC.</span>
<a name="l03353"></a>03353          <span class="comment">// Label will also work on retrieving because that falls back to term.</span>
<a name="l03354"></a>03354          $term = $this-&gt;sanitize($category[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03355"></a>03355          <span class="keywordflow">if</span> (isset($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;domain&#39;</span>]))
<a name="l03356"></a>03356          {
<a name="l03357"></a>03357             $scheme = $this-&gt;sanitize($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;domain&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03358"></a>03358          }
<a name="l03359"></a>03359          <span class="keywordflow">else</span>
<a name="l03360"></a>03360          {
<a name="l03361"></a>03361             $scheme = null;
<a name="l03362"></a>03362          }
<a name="l03363"></a>03363          $categories[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;category_class($term, $scheme, null);
<a name="l03364"></a>03364       }
<a name="l03365"></a>03365       <span class="keywordflow">foreach</span> ((array) $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_DC_11, <span class="stringliteral">&#39;subject&#39;</span>) as $category)
<a name="l03366"></a>03366       {
<a name="l03367"></a>03367          $categories[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;category_class($this-&gt;sanitize($category[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT), null, null);
<a name="l03368"></a>03368       }
<a name="l03369"></a>03369       <span class="keywordflow">foreach</span> ((array) $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_DC_10, <span class="stringliteral">&#39;subject&#39;</span>) as $category)
<a name="l03370"></a>03370       {
<a name="l03371"></a>03371          $categories[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;category_class($this-&gt;sanitize($category[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT), null, null);
<a name="l03372"></a>03372       }
<a name="l03373"></a>03373 
<a name="l03374"></a>03374       <span class="keywordflow">if</span> (!empty($categories))
<a name="l03375"></a>03375       {
<a name="l03376"></a>03376          <span class="keywordflow">return</span> SimplePie_Misc::array_unique($categories);
<a name="l03377"></a>03377       }
<a name="l03378"></a>03378       <span class="keywordflow">else</span>
<a name="l03379"></a>03379       {
<a name="l03380"></a>03380          <span class="keywordflow">return</span> null;
<a name="l03381"></a>03381       }
<a name="l03382"></a>03382    }
<a name="l03383"></a>03383 
<a name="l03384"></a>03384    <span class="keyword">function</span> get_author($key = 0)
<a name="l03385"></a>03385    {
<a name="l03386"></a>03386       $authors = $this-&gt;get_authors();
<a name="l03387"></a>03387       <span class="keywordflow">if</span> (isset($authors[$key]))
<a name="l03388"></a>03388       {
<a name="l03389"></a>03389          <span class="keywordflow">return</span> $authors[$key];
<a name="l03390"></a>03390       }
<a name="l03391"></a>03391       <span class="keywordflow">else</span>
<a name="l03392"></a>03392       {
<a name="l03393"></a>03393          <span class="keywordflow">return</span> null;
<a name="l03394"></a>03394       }
<a name="l03395"></a>03395    }
<a name="l03396"></a>03396 
<a name="l03397"></a>03397    <span class="keyword">function</span> get_contributor($key = 0)
<a name="l03398"></a>03398    {
<a name="l03399"></a>03399       $contributors = $this-&gt;get_contributors();
<a name="l03400"></a>03400       <span class="keywordflow">if</span> (isset($contributors[$key]))
<a name="l03401"></a>03401       {
<a name="l03402"></a>03402          <span class="keywordflow">return</span> $contributors[$key];
<a name="l03403"></a>03403       }
<a name="l03404"></a>03404       <span class="keywordflow">else</span>
<a name="l03405"></a>03405       {
<a name="l03406"></a>03406          <span class="keywordflow">return</span> null;
<a name="l03407"></a>03407       }
<a name="l03408"></a>03408    }
<a name="l03409"></a>03409 
<a name="l03410"></a>03410    <span class="keyword">function</span> get_contributors()
<a name="l03411"></a>03411    {
<a name="l03412"></a>03412       $contributors = array();
<a name="l03413"></a>03413       <span class="keywordflow">foreach</span> ((array) $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;contributor&#39;</span>) as $contributor)
<a name="l03414"></a>03414       {
<a name="l03415"></a>03415          $name = null;
<a name="l03416"></a>03416          $uri = null;
<a name="l03417"></a>03417          $email = null;
<a name="l03418"></a>03418          <span class="keywordflow">if</span> (isset($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;name&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l03419"></a>03419          {
<a name="l03420"></a>03420             $name = $this-&gt;sanitize($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;name&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03421"></a>03421          }
<a name="l03422"></a>03422          <span class="keywordflow">if</span> (isset($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;uri&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l03423"></a>03423          {
<a name="l03424"></a>03424             $uri = $this-&gt;sanitize($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;uri&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;uri&#39;</span>][0]));
<a name="l03425"></a>03425          }
<a name="l03426"></a>03426          <span class="keywordflow">if</span> (isset($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;email&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l03427"></a>03427          {
<a name="l03428"></a>03428             $email = $this-&gt;sanitize($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;email&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03429"></a>03429          }
<a name="l03430"></a>03430          <span class="keywordflow">if</span> ($name !== null || $email !== null || $uri !== null)
<a name="l03431"></a>03431          {
<a name="l03432"></a>03432             $contributors[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;author_class($name, $uri, $email);
<a name="l03433"></a>03433          }
<a name="l03434"></a>03434       }
<a name="l03435"></a>03435       <span class="keywordflow">foreach</span> ((array) $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_ATOM_03, <span class="stringliteral">&#39;contributor&#39;</span>) as $contributor)
<a name="l03436"></a>03436       {
<a name="l03437"></a>03437          $name = null;
<a name="l03438"></a>03438          $url = null;
<a name="l03439"></a>03439          $email = null;
<a name="l03440"></a>03440          <span class="keywordflow">if</span> (isset($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;name&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l03441"></a>03441          {
<a name="l03442"></a>03442             $name = $this-&gt;sanitize($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;name&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03443"></a>03443          }
<a name="l03444"></a>03444          <span class="keywordflow">if</span> (isset($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;url&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l03445"></a>03445          {
<a name="l03446"></a>03446             $url = $this-&gt;sanitize($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;url&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;url&#39;</span>][0]));
<a name="l03447"></a>03447          }
<a name="l03448"></a>03448          <span class="keywordflow">if</span> (isset($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;email&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l03449"></a>03449          {
<a name="l03450"></a>03450             $email = $this-&gt;sanitize($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;email&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03451"></a>03451          }
<a name="l03452"></a>03452          <span class="keywordflow">if</span> ($name !== null || $email !== null || $url !== null)
<a name="l03453"></a>03453          {
<a name="l03454"></a>03454             $contributors[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;author_class($name, $url, $email);
<a name="l03455"></a>03455          }
<a name="l03456"></a>03456       }
<a name="l03457"></a>03457 
<a name="l03458"></a>03458       <span class="keywordflow">if</span> (!empty($contributors))
<a name="l03459"></a>03459       {
<a name="l03460"></a>03460          <span class="keywordflow">return</span> SimplePie_Misc::array_unique($contributors);
<a name="l03461"></a>03461       }
<a name="l03462"></a>03462       <span class="keywordflow">else</span>
<a name="l03463"></a>03463       {
<a name="l03464"></a>03464          <span class="keywordflow">return</span> null;
<a name="l03465"></a>03465       }
<a name="l03466"></a>03466    }
<a name="l03467"></a>03467 
<a name="l03468"></a>03468    <span class="keyword">function</span> get_authors()
<a name="l03469"></a>03469    {
<a name="l03470"></a>03470       $authors = array();
<a name="l03471"></a>03471       <span class="keywordflow">foreach</span> ((array) $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;author&#39;</span>) as $author)
<a name="l03472"></a>03472       {
<a name="l03473"></a>03473          $name = null;
<a name="l03474"></a>03474          $uri = null;
<a name="l03475"></a>03475          $email = null;
<a name="l03476"></a>03476          <span class="keywordflow">if</span> (isset($author[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;name&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l03477"></a>03477          {
<a name="l03478"></a>03478             $name = $this-&gt;sanitize($author[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;name&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03479"></a>03479          }
<a name="l03480"></a>03480          <span class="keywordflow">if</span> (isset($author[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;uri&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l03481"></a>03481          {
<a name="l03482"></a>03482             $uri = $this-&gt;sanitize($author[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;uri&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($author[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;uri&#39;</span>][0]));
<a name="l03483"></a>03483          }
<a name="l03484"></a>03484          <span class="keywordflow">if</span> (isset($author[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;email&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l03485"></a>03485          {
<a name="l03486"></a>03486             $email = $this-&gt;sanitize($author[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;email&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03487"></a>03487          }
<a name="l03488"></a>03488          <span class="keywordflow">if</span> ($name !== null || $email !== null || $uri !== null)
<a name="l03489"></a>03489          {
<a name="l03490"></a>03490             $authors[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;author_class($name, $uri, $email);
<a name="l03491"></a>03491          }
<a name="l03492"></a>03492       }
<a name="l03493"></a>03493       <span class="keywordflow">if</span> ($author = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_ATOM_03, <span class="stringliteral">&#39;author&#39;</span>))
<a name="l03494"></a>03494       {
<a name="l03495"></a>03495          $name = null;
<a name="l03496"></a>03496          $url = null;
<a name="l03497"></a>03497          $email = null;
<a name="l03498"></a>03498          <span class="keywordflow">if</span> (isset($author[0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;name&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l03499"></a>03499          {
<a name="l03500"></a>03500             $name = $this-&gt;sanitize($author[0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;name&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03501"></a>03501          }
<a name="l03502"></a>03502          <span class="keywordflow">if</span> (isset($author[0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;url&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l03503"></a>03503          {
<a name="l03504"></a>03504             $url = $this-&gt;sanitize($author[0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;url&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($author[0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;url&#39;</span>][0]));
<a name="l03505"></a>03505          }
<a name="l03506"></a>03506          <span class="keywordflow">if</span> (isset($author[0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;email&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l03507"></a>03507          {
<a name="l03508"></a>03508             $email = $this-&gt;sanitize($author[0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;email&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03509"></a>03509          }
<a name="l03510"></a>03510          <span class="keywordflow">if</span> ($name !== null || $email !== null || $url !== null)
<a name="l03511"></a>03511          {
<a name="l03512"></a>03512             $authors[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;author_class($name, $url, $email);
<a name="l03513"></a>03513          }
<a name="l03514"></a>03514       }
<a name="l03515"></a>03515       <span class="keywordflow">if</span> ($author = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_RSS_20, <span class="stringliteral">&#39;author&#39;</span>))
<a name="l03516"></a>03516       {
<a name="l03517"></a>03517          $authors[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;author_class(null, null, $this-&gt;sanitize($author[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT));
<a name="l03518"></a>03518       }
<a name="l03519"></a>03519       <span class="keywordflow">foreach</span> ((array) $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_DC_11, <span class="stringliteral">&#39;creator&#39;</span>) as $author)
<a name="l03520"></a>03520       {
<a name="l03521"></a>03521          $authors[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;author_class($this-&gt;sanitize($author[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT), null, null);
<a name="l03522"></a>03522       }
<a name="l03523"></a>03523       <span class="keywordflow">foreach</span> ((array) $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_DC_10, <span class="stringliteral">&#39;creator&#39;</span>) as $author)
<a name="l03524"></a>03524       {
<a name="l03525"></a>03525          $authors[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;author_class($this-&gt;sanitize($author[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT), null, null);
<a name="l03526"></a>03526       }
<a name="l03527"></a>03527       <span class="keywordflow">foreach</span> ((array) $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_ITUNES, <span class="stringliteral">&#39;author&#39;</span>) as $author)
<a name="l03528"></a>03528       {
<a name="l03529"></a>03529          $authors[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;author_class($this-&gt;sanitize($author[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT), null, null);
<a name="l03530"></a>03530       }
<a name="l03531"></a>03531 
<a name="l03532"></a>03532       <span class="keywordflow">if</span> (!empty($authors))
<a name="l03533"></a>03533       {
<a name="l03534"></a>03534          <span class="keywordflow">return</span> SimplePie_Misc::array_unique($authors);
<a name="l03535"></a>03535       }
<a name="l03536"></a>03536       elseif (($source = $this-&gt;get_source()) &amp;&amp; ($authors = $source-&gt;get_authors()))
<a name="l03537"></a>03537       {
<a name="l03538"></a>03538          <span class="keywordflow">return</span> $authors;
<a name="l03539"></a>03539       }
<a name="l03540"></a>03540       elseif ($authors = $this-&gt;feed-&gt;get_authors())
<a name="l03541"></a>03541       {
<a name="l03542"></a>03542          <span class="keywordflow">return</span> $authors;
<a name="l03543"></a>03543       }
<a name="l03544"></a>03544       <span class="keywordflow">else</span>
<a name="l03545"></a>03545       {
<a name="l03546"></a>03546          <span class="keywordflow">return</span> null;
<a name="l03547"></a>03547       }
<a name="l03548"></a>03548    }
<a name="l03549"></a>03549 
<a name="l03550"></a>03550    <span class="keyword">function</span> get_copyright()
<a name="l03551"></a>03551    {
<a name="l03552"></a>03552       <span class="keywordflow">if</span> ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;rights&#39;</span>))
<a name="l03553"></a>03553       {
<a name="l03554"></a>03554          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SimplePie_Misc::atom_10_construct_type($return[0][<span class="stringliteral">&#39;attribs&#39;</span>]), $this-&gt;get_base($return[0]));
<a name="l03555"></a>03555       }
<a name="l03556"></a>03556       elseif ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_DC_11, <span class="stringliteral">&#39;rights&#39;</span>))
<a name="l03557"></a>03557       {
<a name="l03558"></a>03558          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03559"></a>03559       }
<a name="l03560"></a>03560       elseif ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_DC_10, <span class="stringliteral">&#39;rights&#39;</span>))
<a name="l03561"></a>03561       {
<a name="l03562"></a>03562          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03563"></a>03563       }
<a name="l03564"></a>03564       <span class="keywordflow">else</span>
<a name="l03565"></a>03565       {
<a name="l03566"></a>03566          <span class="keywordflow">return</span> null;
<a name="l03567"></a>03567       }
<a name="l03568"></a>03568    }
<a name="l03569"></a>03569 
<a name="l03570"></a>03570    <span class="keyword">function</span> get_date($date_format = <span class="stringliteral">&#39;j F Y, g:i a&#39;</span>)
<a name="l03571"></a>03571    {
<a name="l03572"></a>03572       <span class="keywordflow">if</span> (!isset($this-&gt;data[<span class="stringliteral">&#39;date&#39;</span>]))
<a name="l03573"></a>03573       {
<a name="l03574"></a>03574          <span class="keywordflow">if</span> ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;published&#39;</span>))
<a name="l03575"></a>03575          {
<a name="l03576"></a>03576             $this-&gt;data[<span class="stringliteral">&#39;date&#39;</span>][<span class="stringliteral">&#39;raw&#39;</span>] = $return[0][<span class="stringliteral">&#39;data&#39;</span>];
<a name="l03577"></a>03577          }
<a name="l03578"></a>03578          elseif ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;updated&#39;</span>))
<a name="l03579"></a>03579          {
<a name="l03580"></a>03580             $this-&gt;data[<span class="stringliteral">&#39;date&#39;</span>][<span class="stringliteral">&#39;raw&#39;</span>] = $return[0][<span class="stringliteral">&#39;data&#39;</span>];
<a name="l03581"></a>03581          }
<a name="l03582"></a>03582          elseif ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_ATOM_03, <span class="stringliteral">&#39;issued&#39;</span>))
<a name="l03583"></a>03583          {
<a name="l03584"></a>03584             $this-&gt;data[<span class="stringliteral">&#39;date&#39;</span>][<span class="stringliteral">&#39;raw&#39;</span>] = $return[0][<span class="stringliteral">&#39;data&#39;</span>];
<a name="l03585"></a>03585          }
<a name="l03586"></a>03586          elseif ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_ATOM_03, <span class="stringliteral">&#39;created&#39;</span>))
<a name="l03587"></a>03587          {
<a name="l03588"></a>03588             $this-&gt;data[<span class="stringliteral">&#39;date&#39;</span>][<span class="stringliteral">&#39;raw&#39;</span>] = $return[0][<span class="stringliteral">&#39;data&#39;</span>];
<a name="l03589"></a>03589          }
<a name="l03590"></a>03590          elseif ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_ATOM_03, <span class="stringliteral">&#39;modified&#39;</span>))
<a name="l03591"></a>03591          {
<a name="l03592"></a>03592             $this-&gt;data[<span class="stringliteral">&#39;date&#39;</span>][<span class="stringliteral">&#39;raw&#39;</span>] = $return[0][<span class="stringliteral">&#39;data&#39;</span>];
<a name="l03593"></a>03593          }
<a name="l03594"></a>03594          elseif ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_RSS_20, <span class="stringliteral">&#39;pubDate&#39;</span>))
<a name="l03595"></a>03595          {
<a name="l03596"></a>03596             $this-&gt;data[<span class="stringliteral">&#39;date&#39;</span>][<span class="stringliteral">&#39;raw&#39;</span>] = $return[0][<span class="stringliteral">&#39;data&#39;</span>];
<a name="l03597"></a>03597          }
<a name="l03598"></a>03598          elseif ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_DC_11, <span class="stringliteral">&#39;date&#39;</span>))
<a name="l03599"></a>03599          {
<a name="l03600"></a>03600             $this-&gt;data[<span class="stringliteral">&#39;date&#39;</span>][<span class="stringliteral">&#39;raw&#39;</span>] = $return[0][<span class="stringliteral">&#39;data&#39;</span>];
<a name="l03601"></a>03601          }
<a name="l03602"></a>03602          elseif ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_DC_10, <span class="stringliteral">&#39;date&#39;</span>))
<a name="l03603"></a>03603          {
<a name="l03604"></a>03604             $this-&gt;data[<span class="stringliteral">&#39;date&#39;</span>][<span class="stringliteral">&#39;raw&#39;</span>] = $return[0][<span class="stringliteral">&#39;data&#39;</span>];
<a name="l03605"></a>03605          }
<a name="l03606"></a>03606 
<a name="l03607"></a>03607          <span class="keywordflow">if</span> (!empty($this-&gt;data[<span class="stringliteral">&#39;date&#39;</span>][<span class="stringliteral">&#39;raw&#39;</span>]))
<a name="l03608"></a>03608          {
<a name="l03609"></a>03609             $parser = <a class="code" href="class_simple_pie___parse___date.html#ac33ee765f5ad9f134540bac393721cfe">SimplePie_Parse_Date::get</a>();
<a name="l03610"></a>03610             $this-&gt;data[<span class="stringliteral">&#39;date&#39;</span>][<span class="stringliteral">&#39;parsed&#39;</span>] = $parser-&gt;parse($this-&gt;data[<span class="stringliteral">&#39;date&#39;</span>][<span class="stringliteral">&#39;raw&#39;</span>]);
<a name="l03611"></a>03611          }
<a name="l03612"></a>03612          <span class="keywordflow">else</span>
<a name="l03613"></a>03613          {
<a name="l03614"></a>03614             $this-&gt;data[<span class="stringliteral">&#39;date&#39;</span>] = null;
<a name="l03615"></a>03615          }
<a name="l03616"></a>03616       }
<a name="l03617"></a>03617       <span class="keywordflow">if</span> ($this-&gt;data[<span class="stringliteral">&#39;date&#39;</span>])
<a name="l03618"></a>03618       {
<a name="l03619"></a>03619          $date_format = (string) $date_format;
<a name="l03620"></a>03620          <span class="keywordflow">switch</span> ($date_format)
<a name="l03621"></a>03621          {
<a name="l03622"></a>03622             <span class="keywordflow">case</span> <span class="stringliteral">&#39;&#39;</span>:
<a name="l03623"></a>03623                <span class="keywordflow">return</span> $this-&gt;sanitize($this-&gt;data[<span class="stringliteral">&#39;date&#39;</span>][<span class="stringliteral">&#39;raw&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03624"></a>03624 
<a name="l03625"></a>03625             <span class="keywordflow">case</span> <span class="charliteral">&#39;U&#39;</span>:
<a name="l03626"></a>03626                <span class="keywordflow">return</span> $this-&gt;data[<span class="stringliteral">&#39;date&#39;</span>][<span class="stringliteral">&#39;parsed&#39;</span>];
<a name="l03627"></a>03627 
<a name="l03628"></a>03628             <span class="keywordflow">default</span>:
<a name="l03629"></a>03629                <span class="keywordflow">return</span> date($date_format, $this-&gt;data[<span class="stringliteral">&#39;date&#39;</span>][<span class="stringliteral">&#39;parsed&#39;</span>]);
<a name="l03630"></a>03630          }
<a name="l03631"></a>03631       }
<a name="l03632"></a>03632       <span class="keywordflow">else</span>
<a name="l03633"></a>03633       {
<a name="l03634"></a>03634          <span class="keywordflow">return</span> null;
<a name="l03635"></a>03635       }
<a name="l03636"></a>03636    }
<a name="l03637"></a>03637 
<a name="l03638"></a>03638    <span class="keyword">function</span> get_local_date($date_format = <span class="stringliteral">&#39;%c&#39;</span>)
<a name="l03639"></a>03639    {
<a name="l03640"></a>03640       <span class="keywordflow">if</span> (!$date_format)
<a name="l03641"></a>03641       {
<a name="l03642"></a>03642          <span class="keywordflow">return</span> $this-&gt;sanitize($this-&gt;get_date(<span class="stringliteral">&#39;&#39;</span>), SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03643"></a>03643       }
<a name="l03644"></a>03644       elseif (($date = $this-&gt;get_date(<span class="charliteral">&#39;U&#39;</span>)) !== null)
<a name="l03645"></a>03645       {
<a name="l03646"></a>03646          <span class="keywordflow">return</span> strftime($date_format, $date);
<a name="l03647"></a>03647       }
<a name="l03648"></a>03648       <span class="keywordflow">else</span>
<a name="l03649"></a>03649       {
<a name="l03650"></a>03650          <span class="keywordflow">return</span> null;
<a name="l03651"></a>03651       }
<a name="l03652"></a>03652    }
<a name="l03653"></a>03653 
<a name="l03654"></a>03654    <span class="keyword">function</span> get_permalink()
<a name="l03655"></a>03655    {
<a name="l03656"></a>03656       $link = $this-&gt;get_link();
<a name="l03657"></a>03657       $enclosure = $this-&gt;<a class="code" href="class_simple_pie___item.html#aa33a975d8bab85bde5aed303b1060a51">get_enclosure</a>(0);
<a name="l03658"></a>03658       <span class="keywordflow">if</span> ($link !== null)
<a name="l03659"></a>03659       {
<a name="l03660"></a>03660          <span class="keywordflow">return</span> $link;
<a name="l03661"></a>03661       }
<a name="l03662"></a>03662       elseif ($enclosure !== null)
<a name="l03663"></a>03663       {
<a name="l03664"></a>03664          <span class="keywordflow">return</span> $enclosure-&gt;get_link();
<a name="l03665"></a>03665       }
<a name="l03666"></a>03666       <span class="keywordflow">else</span>
<a name="l03667"></a>03667       {
<a name="l03668"></a>03668          <span class="keywordflow">return</span> null;
<a name="l03669"></a>03669       }
<a name="l03670"></a>03670    }
<a name="l03671"></a>03671 
<a name="l03672"></a>03672    <span class="keyword">function</span> get_link($key = 0, $rel = <span class="stringliteral">&#39;alternate&#39;</span>)
<a name="l03673"></a>03673    {
<a name="l03674"></a>03674       $links = $this-&gt;get_links($rel);
<a name="l03675"></a>03675       <span class="keywordflow">if</span> ($links[$key] !== null)
<a name="l03676"></a>03676       {
<a name="l03677"></a>03677          <span class="keywordflow">return</span> $links[$key];
<a name="l03678"></a>03678       }
<a name="l03679"></a>03679       <span class="keywordflow">else</span>
<a name="l03680"></a>03680       {
<a name="l03681"></a>03681          <span class="keywordflow">return</span> null;
<a name="l03682"></a>03682       }
<a name="l03683"></a>03683    }
<a name="l03684"></a>03684 
<a name="l03685"></a>03685    <span class="keyword">function</span> get_links($rel = <span class="stringliteral">&#39;alternate&#39;</span>)
<a name="l03686"></a>03686    {
<a name="l03687"></a>03687       <span class="keywordflow">if</span> (!isset($this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>]))
<a name="l03688"></a>03688       {
<a name="l03689"></a>03689          $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>] = array();
<a name="l03690"></a>03690          <span class="keywordflow">foreach</span> ((array) $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;link&#39;</span>) as $link)
<a name="l03691"></a>03691          {
<a name="l03692"></a>03692             <span class="keywordflow">if</span> (isset($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;href&#39;</span>]))
<a name="l03693"></a>03693             {
<a name="l03694"></a>03694                $link_rel = (isset($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;rel&#39;</span>])) ? $link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;rel&#39;</span>] : <span class="stringliteral">&#39;alternate&#39;</span>;
<a name="l03695"></a>03695                $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][$link_rel][] = $this-&gt;sanitize($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;href&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($link));
<a name="l03696"></a>03696 
<a name="l03697"></a>03697             }
<a name="l03698"></a>03698          }
<a name="l03699"></a>03699          <span class="keywordflow">foreach</span> ((array) $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_ATOM_03, <span class="stringliteral">&#39;link&#39;</span>) as $link)
<a name="l03700"></a>03700          {
<a name="l03701"></a>03701             <span class="keywordflow">if</span> (isset($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;href&#39;</span>]))
<a name="l03702"></a>03702             {
<a name="l03703"></a>03703                $link_rel = (isset($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;rel&#39;</span>])) ? $link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;rel&#39;</span>] : <span class="stringliteral">&#39;alternate&#39;</span>;
<a name="l03704"></a>03704                $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][$link_rel][] = $this-&gt;sanitize($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;href&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($link));
<a name="l03705"></a>03705             }
<a name="l03706"></a>03706          }
<a name="l03707"></a>03707          <span class="keywordflow">if</span> ($links = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_RSS_10, <span class="stringliteral">&#39;link&#39;</span>))
<a name="l03708"></a>03708          {
<a name="l03709"></a>03709             $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][<span class="stringliteral">&#39;alternate&#39;</span>][] = $this-&gt;sanitize($links[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($links[0]));
<a name="l03710"></a>03710          }
<a name="l03711"></a>03711          <span class="keywordflow">if</span> ($links = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_RSS_090, <span class="stringliteral">&#39;link&#39;</span>))
<a name="l03712"></a>03712          {
<a name="l03713"></a>03713             $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][<span class="stringliteral">&#39;alternate&#39;</span>][] = $this-&gt;sanitize($links[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($links[0]));
<a name="l03714"></a>03714          }
<a name="l03715"></a>03715          <span class="keywordflow">if</span> ($links = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_RSS_20, <span class="stringliteral">&#39;link&#39;</span>))
<a name="l03716"></a>03716          {
<a name="l03717"></a>03717             $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][<span class="stringliteral">&#39;alternate&#39;</span>][] = $this-&gt;sanitize($links[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($links[0]));
<a name="l03718"></a>03718          }
<a name="l03719"></a>03719          <span class="keywordflow">if</span> ($links = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_RSS_20, <span class="stringliteral">&#39;guid&#39;</span>))
<a name="l03720"></a>03720          {
<a name="l03721"></a>03721             <span class="keywordflow">if</span> (!isset($links[0][<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;isPermaLink&#39;</span>]) || strtolower(trim($links[0][<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;isPermaLink&#39;</span>])) === <span class="stringliteral">&#39;true&#39;</span>)
<a name="l03722"></a>03722             {
<a name="l03723"></a>03723                $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][<span class="stringliteral">&#39;alternate&#39;</span>][] = $this-&gt;sanitize($links[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($links[0]));
<a name="l03724"></a>03724             }
<a name="l03725"></a>03725          }
<a name="l03726"></a>03726 
<a name="l03727"></a>03727          $keys = array_keys($this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>]);
<a name="l03728"></a>03728          <span class="keywordflow">foreach</span> ($keys as $key)
<a name="l03729"></a>03729          {
<a name="l03730"></a>03730             <span class="keywordflow">if</span> (SimplePie_Misc::is_isegment_nz_nc($key))
<a name="l03731"></a>03731             {
<a name="l03732"></a>03732                <span class="keywordflow">if</span> (isset($this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][SIMPLEPIE_IANA_LINK_RELATIONS_REGISTRY . $key]))
<a name="l03733"></a>03733                {
<a name="l03734"></a>03734                   $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][SIMPLEPIE_IANA_LINK_RELATIONS_REGISTRY . $key] = array_merge($this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][$key], $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][SIMPLEPIE_IANA_LINK_RELATIONS_REGISTRY . $key]);
<a name="l03735"></a>03735                   $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][$key] =&amp; $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][SIMPLEPIE_IANA_LINK_RELATIONS_REGISTRY . $key];
<a name="l03736"></a>03736                }
<a name="l03737"></a>03737                <span class="keywordflow">else</span>
<a name="l03738"></a>03738                {
<a name="l03739"></a>03739                   $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][SIMPLEPIE_IANA_LINK_RELATIONS_REGISTRY . $key] =&amp; $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][$key];
<a name="l03740"></a>03740                }
<a name="l03741"></a>03741             }
<a name="l03742"></a>03742             elseif (substr($key, 0, 41) === SIMPLEPIE_IANA_LINK_RELATIONS_REGISTRY)
<a name="l03743"></a>03743             {
<a name="l03744"></a>03744                $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][substr($key, 41)] =&amp; $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][$key];
<a name="l03745"></a>03745             }
<a name="l03746"></a>03746             $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][$key] = array_unique($this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][$key]);
<a name="l03747"></a>03747          }
<a name="l03748"></a>03748       }
<a name="l03749"></a>03749       <span class="keywordflow">if</span> (isset($this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][$rel]))
<a name="l03750"></a>03750       {
<a name="l03751"></a>03751          <span class="keywordflow">return</span> $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][$rel];
<a name="l03752"></a>03752       }
<a name="l03753"></a>03753       <span class="keywordflow">else</span>
<a name="l03754"></a>03754       {
<a name="l03755"></a>03755          <span class="keywordflow">return</span> null;
<a name="l03756"></a>03756       }
<a name="l03757"></a>03757    }
<a name="l03758"></a>03758 <span class="comment"></span>
<a name="l03759"></a>03759 <span class="comment">   /**</span>
<a name="l03760"></a>03760 <span class="comment">    * @todo Add ability to prefer one type of content over another (in a media group).</span>
<a name="l03761"></a>03761 <span class="comment">    */</span>
<a name="l03762"></a><a class="code" href="class_simple_pie___item.html#aa33a975d8bab85bde5aed303b1060a51">03762</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie___item.html#aa33a975d8bab85bde5aed303b1060a51">get_enclosure</a>($key = 0, $prefer = null)
<a name="l03763"></a>03763    {
<a name="l03764"></a>03764       $enclosures = $this-&gt;<a class="code" href="class_simple_pie___item.html#ae5495772db7c995587c2d6ebbe2f185c">get_enclosures</a>();
<a name="l03765"></a>03765       <span class="keywordflow">if</span> (isset($enclosures[$key]))
<a name="l03766"></a>03766       {
<a name="l03767"></a>03767          <span class="keywordflow">return</span> $enclosures[$key];
<a name="l03768"></a>03768       }
<a name="l03769"></a>03769       <span class="keywordflow">else</span>
<a name="l03770"></a>03770       {
<a name="l03771"></a>03771          <span class="keywordflow">return</span> null;
<a name="l03772"></a>03772       }
<a name="l03773"></a>03773    }
<a name="l03774"></a>03774 <span class="comment"></span>
<a name="l03775"></a>03775 <span class="comment">   /**</span>
<a name="l03776"></a>03776 <span class="comment">    * Grabs all available enclosures (podcasts, etc.)</span>
<a name="l03777"></a>03777 <span class="comment">    *</span>
<a name="l03778"></a>03778 <span class="comment">    * Supports the &lt;enclosure&gt; RSS tag, as well as Media RSS and iTunes RSS.</span>
<a name="l03779"></a>03779 <span class="comment">    *</span>
<a name="l03780"></a>03780 <span class="comment">    * At this point, we&#39;re pretty much assuming that all enclosures for an item are the same content.  Anything else is too complicated to properly support.</span>
<a name="l03781"></a>03781 <span class="comment">    *</span>
<a name="l03782"></a>03782 <span class="comment">    * @todo Add support for end-user defined sorting of enclosures by type/handler (so we can prefer the faster-loading FLV over MP4).</span>
<a name="l03783"></a>03783 <span class="comment">    * @todo If an element exists at a level, but it&#39;s value is empty, we should fall back to the value from the parent (if it exists).</span>
<a name="l03784"></a>03784 <span class="comment">    */</span>
<a name="l03785"></a><a class="code" href="class_simple_pie___item.html#ae5495772db7c995587c2d6ebbe2f185c">03785</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie___item.html#ae5495772db7c995587c2d6ebbe2f185c">get_enclosures</a>()
<a name="l03786"></a>03786    {
<a name="l03787"></a>03787       <span class="keywordflow">if</span> (!isset($this-&gt;data[<span class="stringliteral">&#39;enclosures&#39;</span>]))
<a name="l03788"></a>03788       {
<a name="l03789"></a>03789          $this-&gt;data[<span class="stringliteral">&#39;enclosures&#39;</span>] = array();
<a name="l03790"></a>03790 
<a name="l03791"></a>03791          <span class="comment">// Elements</span>
<a name="l03792"></a>03792          $captions_parent = null;
<a name="l03793"></a>03793          $categories_parent = null;
<a name="l03794"></a>03794          $copyrights_parent = null;
<a name="l03795"></a>03795          $credits_parent = null;
<a name="l03796"></a>03796          $description_parent = null;
<a name="l03797"></a>03797          $duration_parent = null;
<a name="l03798"></a>03798          $hashes_parent = null;
<a name="l03799"></a>03799          $keywords_parent = null;
<a name="l03800"></a>03800          $player_parent = null;
<a name="l03801"></a>03801          $ratings_parent = null;
<a name="l03802"></a>03802          $restrictions_parent = null;
<a name="l03803"></a>03803          $thumbnails_parent = null;
<a name="l03804"></a>03804          $title_parent = null;
<a name="l03805"></a>03805 
<a name="l03806"></a>03806          <span class="comment">// Let&#39;s do the channel and item-level ones first, and just re-use them if we need to.</span>
<a name="l03807"></a>03807          $parent = $this-&gt;get_feed();
<a name="l03808"></a>03808 
<a name="l03809"></a>03809          <span class="comment">// CAPTIONS</span>
<a name="l03810"></a>03810          <span class="keywordflow">if</span> ($captions = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_MEDIARSS, <span class="stringliteral">&#39;text&#39;</span>))
<a name="l03811"></a>03811          {
<a name="l03812"></a>03812             <span class="keywordflow">foreach</span> ($captions as $caption)
<a name="l03813"></a>03813             {
<a name="l03814"></a>03814                $caption_type = null;
<a name="l03815"></a>03815                $caption_lang = null;
<a name="l03816"></a>03816                $caption_startTime = null;
<a name="l03817"></a>03817                $caption_endTime = null;
<a name="l03818"></a>03818                $caption_text = null;
<a name="l03819"></a>03819                <span class="keywordflow">if</span> (isset($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>]))
<a name="l03820"></a>03820                {
<a name="l03821"></a>03821                   $caption_type = $this-&gt;sanitize($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03822"></a>03822                }
<a name="l03823"></a>03823                <span class="keywordflow">if</span> (isset($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;lang&#39;</span>]))
<a name="l03824"></a>03824                {
<a name="l03825"></a>03825                   $caption_lang = $this-&gt;sanitize($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;lang&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03826"></a>03826                }
<a name="l03827"></a>03827                <span class="keywordflow">if</span> (isset($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;start&#39;</span>]))
<a name="l03828"></a>03828                {
<a name="l03829"></a>03829                   $caption_startTime = $this-&gt;sanitize($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;start&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03830"></a>03830                }
<a name="l03831"></a>03831                <span class="keywordflow">if</span> (isset($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;end&#39;</span>]))
<a name="l03832"></a>03832                {
<a name="l03833"></a>03833                   $caption_endTime = $this-&gt;sanitize($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;end&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03834"></a>03834                }
<a name="l03835"></a>03835                <span class="keywordflow">if</span> (isset($caption[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l03836"></a>03836                {
<a name="l03837"></a>03837                   $caption_text = $this-&gt;sanitize($caption[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03838"></a>03838                }
<a name="l03839"></a>03839                $captions_parent[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;caption_class($caption_type, $caption_lang, $caption_startTime, $caption_endTime, $caption_text);
<a name="l03840"></a>03840             }
<a name="l03841"></a>03841          }
<a name="l03842"></a>03842          elseif ($captions = $parent-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_MEDIARSS, <span class="stringliteral">&#39;text&#39;</span>))
<a name="l03843"></a>03843          {
<a name="l03844"></a>03844             <span class="keywordflow">foreach</span> ($captions as $caption)
<a name="l03845"></a>03845             {
<a name="l03846"></a>03846                $caption_type = null;
<a name="l03847"></a>03847                $caption_lang = null;
<a name="l03848"></a>03848                $caption_startTime = null;
<a name="l03849"></a>03849                $caption_endTime = null;
<a name="l03850"></a>03850                $caption_text = null;
<a name="l03851"></a>03851                <span class="keywordflow">if</span> (isset($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>]))
<a name="l03852"></a>03852                {
<a name="l03853"></a>03853                   $caption_type = $this-&gt;sanitize($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03854"></a>03854                }
<a name="l03855"></a>03855                <span class="keywordflow">if</span> (isset($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;lang&#39;</span>]))
<a name="l03856"></a>03856                {
<a name="l03857"></a>03857                   $caption_lang = $this-&gt;sanitize($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;lang&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03858"></a>03858                }
<a name="l03859"></a>03859                <span class="keywordflow">if</span> (isset($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;start&#39;</span>]))
<a name="l03860"></a>03860                {
<a name="l03861"></a>03861                   $caption_startTime = $this-&gt;sanitize($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;start&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03862"></a>03862                }
<a name="l03863"></a>03863                <span class="keywordflow">if</span> (isset($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;end&#39;</span>]))
<a name="l03864"></a>03864                {
<a name="l03865"></a>03865                   $caption_endTime = $this-&gt;sanitize($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;end&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03866"></a>03866                }
<a name="l03867"></a>03867                <span class="keywordflow">if</span> (isset($caption[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l03868"></a>03868                {
<a name="l03869"></a>03869                   $caption_text = $this-&gt;sanitize($caption[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03870"></a>03870                }
<a name="l03871"></a>03871                $captions_parent[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;caption_class($caption_type, $caption_lang, $caption_startTime, $caption_endTime, $caption_text);
<a name="l03872"></a>03872             }
<a name="l03873"></a>03873          }
<a name="l03874"></a>03874          <span class="keywordflow">if</span> (is_array($captions_parent))
<a name="l03875"></a>03875          {
<a name="l03876"></a>03876             $captions_parent = array_values(SimplePie_Misc::array_unique($captions_parent));
<a name="l03877"></a>03877          }
<a name="l03878"></a>03878 
<a name="l03879"></a>03879          <span class="comment">// CATEGORIES</span>
<a name="l03880"></a>03880          <span class="keywordflow">foreach</span> ((array) $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_MEDIARSS, <span class="stringliteral">&#39;category&#39;</span>) as $category)
<a name="l03881"></a>03881          {
<a name="l03882"></a>03882             $term = null;
<a name="l03883"></a>03883             $scheme = null;
<a name="l03884"></a>03884             $label = null;
<a name="l03885"></a>03885             <span class="keywordflow">if</span> (isset($category[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l03886"></a>03886             {
<a name="l03887"></a>03887                $term = $this-&gt;sanitize($category[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03888"></a>03888             }
<a name="l03889"></a>03889             <span class="keywordflow">if</span> (isset($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>]))
<a name="l03890"></a>03890             {
<a name="l03891"></a>03891                $scheme = $this-&gt;sanitize($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03892"></a>03892             }
<a name="l03893"></a>03893             <span class="keywordflow">else</span>
<a name="l03894"></a>03894             {
<a name="l03895"></a>03895                $scheme = <span class="stringliteral">&#39;http://search.yahoo.com/mrss/category_schema&#39;</span>;
<a name="l03896"></a>03896             }
<a name="l03897"></a>03897             <span class="keywordflow">if</span> (isset($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;label&#39;</span>]))
<a name="l03898"></a>03898             {
<a name="l03899"></a>03899                $label = $this-&gt;sanitize($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;label&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03900"></a>03900             }
<a name="l03901"></a>03901             $categories_parent[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;category_class($term, $scheme, $label);
<a name="l03902"></a>03902          }
<a name="l03903"></a>03903          <span class="keywordflow">foreach</span> ((array) $parent-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_MEDIARSS, <span class="stringliteral">&#39;category&#39;</span>) as $category)
<a name="l03904"></a>03904          {
<a name="l03905"></a>03905             $term = null;
<a name="l03906"></a>03906             $scheme = null;
<a name="l03907"></a>03907             $label = null;
<a name="l03908"></a>03908             <span class="keywordflow">if</span> (isset($category[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l03909"></a>03909             {
<a name="l03910"></a>03910                $term = $this-&gt;sanitize($category[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03911"></a>03911             }
<a name="l03912"></a>03912             <span class="keywordflow">if</span> (isset($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>]))
<a name="l03913"></a>03913             {
<a name="l03914"></a>03914                $scheme = $this-&gt;sanitize($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03915"></a>03915             }
<a name="l03916"></a>03916             <span class="keywordflow">else</span>
<a name="l03917"></a>03917             {
<a name="l03918"></a>03918                $scheme = <span class="stringliteral">&#39;http://search.yahoo.com/mrss/category_schema&#39;</span>;
<a name="l03919"></a>03919             }
<a name="l03920"></a>03920             <span class="keywordflow">if</span> (isset($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;label&#39;</span>]))
<a name="l03921"></a>03921             {
<a name="l03922"></a>03922                $label = $this-&gt;sanitize($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;label&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03923"></a>03923             }
<a name="l03924"></a>03924             $categories_parent[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;category_class($term, $scheme, $label);
<a name="l03925"></a>03925          }
<a name="l03926"></a>03926          <span class="keywordflow">foreach</span> ((array) $parent-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_ITUNES, <span class="stringliteral">&#39;category&#39;</span>) as $category)
<a name="l03927"></a>03927          {
<a name="l03928"></a>03928             $term = null;
<a name="l03929"></a>03929             $scheme = <span class="stringliteral">&#39;http://www.itunes.com/dtds/podcast-1.0.dtd&#39;</span>;
<a name="l03930"></a>03930             $label = null;
<a name="l03931"></a>03931             <span class="keywordflow">if</span> (isset($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;text&#39;</span>]))
<a name="l03932"></a>03932             {
<a name="l03933"></a>03933                $label = $this-&gt;sanitize($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;text&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03934"></a>03934             }
<a name="l03935"></a>03935             $categories_parent[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;category_class($term, $scheme, $label);
<a name="l03936"></a>03936 
<a name="l03937"></a>03937             <span class="keywordflow">if</span> (isset($category[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ITUNES][<span class="stringliteral">&#39;category&#39;</span>]))
<a name="l03938"></a>03938             {
<a name="l03939"></a>03939                <span class="keywordflow">foreach</span> ((array) $category[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ITUNES][<span class="stringliteral">&#39;category&#39;</span>] as $subcategory)
<a name="l03940"></a>03940                {
<a name="l03941"></a>03941                   <span class="keywordflow">if</span> (isset($subcategory[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;text&#39;</span>]))
<a name="l03942"></a>03942                   {
<a name="l03943"></a>03943                      $label = $this-&gt;sanitize($subcategory[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;text&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03944"></a>03944                   }
<a name="l03945"></a>03945                   $categories_parent[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;category_class($term, $scheme, $label);
<a name="l03946"></a>03946                }
<a name="l03947"></a>03947             }
<a name="l03948"></a>03948          }
<a name="l03949"></a>03949          <span class="keywordflow">if</span> (is_array($categories_parent))
<a name="l03950"></a>03950          {
<a name="l03951"></a>03951             $categories_parent = array_values(SimplePie_Misc::array_unique($categories_parent));
<a name="l03952"></a>03952          }
<a name="l03953"></a>03953 
<a name="l03954"></a>03954          <span class="comment">// COPYRIGHT</span>
<a name="l03955"></a>03955          <span class="keywordflow">if</span> ($copyright = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_MEDIARSS, <span class="stringliteral">&#39;copyright&#39;</span>))
<a name="l03956"></a>03956          {
<a name="l03957"></a>03957             $copyright_url = null;
<a name="l03958"></a>03958             $copyright_label = null;
<a name="l03959"></a>03959             <span class="keywordflow">if</span> (isset($copyright[0][<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;url&#39;</span>]))
<a name="l03960"></a>03960             {
<a name="l03961"></a>03961                $copyright_url = $this-&gt;sanitize($copyright[0][<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;url&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03962"></a>03962             }
<a name="l03963"></a>03963             <span class="keywordflow">if</span> (isset($copyright[0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l03964"></a>03964             {
<a name="l03965"></a>03965                $copyright_label = $this-&gt;sanitize($copyright[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03966"></a>03966             }
<a name="l03967"></a>03967             $copyrights_parent =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;copyright_class($copyright_url, $copyright_label);
<a name="l03968"></a>03968          }
<a name="l03969"></a>03969          elseif ($copyright = $parent-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_MEDIARSS, <span class="stringliteral">&#39;copyright&#39;</span>))
<a name="l03970"></a>03970          {
<a name="l03971"></a>03971             $copyright_url = null;
<a name="l03972"></a>03972             $copyright_label = null;
<a name="l03973"></a>03973             <span class="keywordflow">if</span> (isset($copyright[0][<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;url&#39;</span>]))
<a name="l03974"></a>03974             {
<a name="l03975"></a>03975                $copyright_url = $this-&gt;sanitize($copyright[0][<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;url&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03976"></a>03976             }
<a name="l03977"></a>03977             <span class="keywordflow">if</span> (isset($copyright[0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l03978"></a>03978             {
<a name="l03979"></a>03979                $copyright_label = $this-&gt;sanitize($copyright[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03980"></a>03980             }
<a name="l03981"></a>03981             $copyrights_parent =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;copyright_class($copyright_url, $copyright_label);
<a name="l03982"></a>03982          }
<a name="l03983"></a>03983 
<a name="l03984"></a>03984          <span class="comment">// CREDITS</span>
<a name="l03985"></a>03985          <span class="keywordflow">if</span> ($credits = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_MEDIARSS, <span class="stringliteral">&#39;credit&#39;</span>))
<a name="l03986"></a>03986          {
<a name="l03987"></a>03987             <span class="keywordflow">foreach</span> ($credits as $credit)
<a name="l03988"></a>03988             {
<a name="l03989"></a>03989                $credit_role = null;
<a name="l03990"></a>03990                $credit_scheme = null;
<a name="l03991"></a>03991                $credit_name = null;
<a name="l03992"></a>03992                <span class="keywordflow">if</span> (isset($credit[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;role&#39;</span>]))
<a name="l03993"></a>03993                {
<a name="l03994"></a>03994                   $credit_role = $this-&gt;sanitize($credit[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;role&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03995"></a>03995                }
<a name="l03996"></a>03996                <span class="keywordflow">if</span> (isset($credit[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>]))
<a name="l03997"></a>03997                {
<a name="l03998"></a>03998                   $credit_scheme = $this-&gt;sanitize($credit[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l03999"></a>03999                }
<a name="l04000"></a>04000                <span class="keywordflow">else</span>
<a name="l04001"></a>04001                {
<a name="l04002"></a>04002                   $credit_scheme = <span class="stringliteral">&#39;urn:ebu&#39;</span>;
<a name="l04003"></a>04003                }
<a name="l04004"></a>04004                <span class="keywordflow">if</span> (isset($credit[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04005"></a>04005                {
<a name="l04006"></a>04006                   $credit_name = $this-&gt;sanitize($credit[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04007"></a>04007                }
<a name="l04008"></a>04008                $credits_parent[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;credit_class($credit_role, $credit_scheme, $credit_name);
<a name="l04009"></a>04009             }
<a name="l04010"></a>04010          }
<a name="l04011"></a>04011          elseif ($credits = $parent-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_MEDIARSS, <span class="stringliteral">&#39;credit&#39;</span>))
<a name="l04012"></a>04012          {
<a name="l04013"></a>04013             <span class="keywordflow">foreach</span> ($credits as $credit)
<a name="l04014"></a>04014             {
<a name="l04015"></a>04015                $credit_role = null;
<a name="l04016"></a>04016                $credit_scheme = null;
<a name="l04017"></a>04017                $credit_name = null;
<a name="l04018"></a>04018                <span class="keywordflow">if</span> (isset($credit[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;role&#39;</span>]))
<a name="l04019"></a>04019                {
<a name="l04020"></a>04020                   $credit_role = $this-&gt;sanitize($credit[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;role&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04021"></a>04021                }
<a name="l04022"></a>04022                <span class="keywordflow">if</span> (isset($credit[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>]))
<a name="l04023"></a>04023                {
<a name="l04024"></a>04024                   $credit_scheme = $this-&gt;sanitize($credit[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04025"></a>04025                }
<a name="l04026"></a>04026                <span class="keywordflow">else</span>
<a name="l04027"></a>04027                {
<a name="l04028"></a>04028                   $credit_scheme = <span class="stringliteral">&#39;urn:ebu&#39;</span>;
<a name="l04029"></a>04029                }
<a name="l04030"></a>04030                <span class="keywordflow">if</span> (isset($credit[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04031"></a>04031                {
<a name="l04032"></a>04032                   $credit_name = $this-&gt;sanitize($credit[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04033"></a>04033                }
<a name="l04034"></a>04034                $credits_parent[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;credit_class($credit_role, $credit_scheme, $credit_name);
<a name="l04035"></a>04035             }
<a name="l04036"></a>04036          }
<a name="l04037"></a>04037          <span class="keywordflow">if</span> (is_array($credits_parent))
<a name="l04038"></a>04038          {
<a name="l04039"></a>04039             $credits_parent = array_values(SimplePie_Misc::array_unique($credits_parent));
<a name="l04040"></a>04040          }
<a name="l04041"></a>04041 
<a name="l04042"></a>04042          <span class="comment">// DESCRIPTION</span>
<a name="l04043"></a>04043          <span class="keywordflow">if</span> ($description_parent = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_MEDIARSS, <span class="stringliteral">&#39;description&#39;</span>))
<a name="l04044"></a>04044          {
<a name="l04045"></a>04045             <span class="keywordflow">if</span> (isset($description_parent[0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04046"></a>04046             {
<a name="l04047"></a>04047                $description_parent = $this-&gt;sanitize($description_parent[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04048"></a>04048             }
<a name="l04049"></a>04049          }
<a name="l04050"></a>04050          elseif ($description_parent = $parent-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_MEDIARSS, <span class="stringliteral">&#39;description&#39;</span>))
<a name="l04051"></a>04051          {
<a name="l04052"></a>04052             <span class="keywordflow">if</span> (isset($description_parent[0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04053"></a>04053             {
<a name="l04054"></a>04054                $description_parent = $this-&gt;sanitize($description_parent[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04055"></a>04055             }
<a name="l04056"></a>04056          }
<a name="l04057"></a>04057 
<a name="l04058"></a>04058          <span class="comment">// DURATION</span>
<a name="l04059"></a>04059          <span class="keywordflow">if</span> ($duration_parent = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_ITUNES, <span class="stringliteral">&#39;duration&#39;</span>))
<a name="l04060"></a>04060          {
<a name="l04061"></a>04061             $seconds = null;
<a name="l04062"></a>04062             $minutes = null;
<a name="l04063"></a>04063             $hours = null;
<a name="l04064"></a>04064             <span class="keywordflow">if</span> (isset($duration_parent[0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04065"></a>04065             {
<a name="l04066"></a>04066                $temp = explode(<span class="charliteral">&#39;:&#39;</span>, $this-&gt;sanitize($duration_parent[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT));
<a name="l04067"></a>04067                <span class="keywordflow">if</span> (<span class="keyword">sizeof</span>($temp) &gt; 0)
<a name="l04068"></a>04068                {
<a name="l04069"></a>04069                   (int) $seconds = array_pop($temp);
<a name="l04070"></a>04070                }
<a name="l04071"></a>04071                <span class="keywordflow">if</span> (<span class="keyword">sizeof</span>($temp) &gt; 0)
<a name="l04072"></a>04072                {
<a name="l04073"></a>04073                   (int) $minutes = array_pop($temp);
<a name="l04074"></a>04074                   $seconds += $minutes * 60;
<a name="l04075"></a>04075                }
<a name="l04076"></a>04076                <span class="keywordflow">if</span> (<span class="keyword">sizeof</span>($temp) &gt; 0)
<a name="l04077"></a>04077                {
<a name="l04078"></a>04078                   (int) $hours = array_pop($temp);
<a name="l04079"></a>04079                   $seconds += $hours * 3600;
<a name="l04080"></a>04080                }
<a name="l04081"></a>04081                unset($temp);
<a name="l04082"></a>04082                $duration_parent = $seconds;
<a name="l04083"></a>04083             }
<a name="l04084"></a>04084          }
<a name="l04085"></a>04085 
<a name="l04086"></a>04086          <span class="comment">// HASHES</span>
<a name="l04087"></a>04087          <span class="keywordflow">if</span> ($hashes_iterator = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_MEDIARSS, <span class="stringliteral">&#39;hash&#39;</span>))
<a name="l04088"></a>04088          {
<a name="l04089"></a>04089             <span class="keywordflow">foreach</span> ($hashes_iterator as $hash)
<a name="l04090"></a>04090             {
<a name="l04091"></a>04091                $value = null;
<a name="l04092"></a>04092                $algo = null;
<a name="l04093"></a>04093                <span class="keywordflow">if</span> (isset($hash[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04094"></a>04094                {
<a name="l04095"></a>04095                   $value = $this-&gt;sanitize($hash[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04096"></a>04096                }
<a name="l04097"></a>04097                <span class="keywordflow">if</span> (isset($hash[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;algo&#39;</span>]))
<a name="l04098"></a>04098                {
<a name="l04099"></a>04099                   $algo = $this-&gt;sanitize($hash[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;algo&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04100"></a>04100                }
<a name="l04101"></a>04101                <span class="keywordflow">else</span>
<a name="l04102"></a>04102                {
<a name="l04103"></a>04103                   $algo = <span class="stringliteral">&#39;md5&#39;</span>;
<a name="l04104"></a>04104                }
<a name="l04105"></a>04105                $hashes_parent[] = $algo.<span class="charliteral">&#39;:&#39;</span>.$value;
<a name="l04106"></a>04106             }
<a name="l04107"></a>04107          }
<a name="l04108"></a>04108          elseif ($hashes_iterator = $parent-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_MEDIARSS, <span class="stringliteral">&#39;hash&#39;</span>))
<a name="l04109"></a>04109          {
<a name="l04110"></a>04110             <span class="keywordflow">foreach</span> ($hashes_iterator as $hash)
<a name="l04111"></a>04111             {
<a name="l04112"></a>04112                $value = null;
<a name="l04113"></a>04113                $algo = null;
<a name="l04114"></a>04114                <span class="keywordflow">if</span> (isset($hash[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04115"></a>04115                {
<a name="l04116"></a>04116                   $value = $this-&gt;sanitize($hash[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04117"></a>04117                }
<a name="l04118"></a>04118                <span class="keywordflow">if</span> (isset($hash[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;algo&#39;</span>]))
<a name="l04119"></a>04119                {
<a name="l04120"></a>04120                   $algo = $this-&gt;sanitize($hash[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;algo&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04121"></a>04121                }
<a name="l04122"></a>04122                <span class="keywordflow">else</span>
<a name="l04123"></a>04123                {
<a name="l04124"></a>04124                   $algo = <span class="stringliteral">&#39;md5&#39;</span>;
<a name="l04125"></a>04125                }
<a name="l04126"></a>04126                $hashes_parent[] = $algo.<span class="charliteral">&#39;:&#39;</span>.$value;
<a name="l04127"></a>04127             }
<a name="l04128"></a>04128          }
<a name="l04129"></a>04129          <span class="keywordflow">if</span> (is_array($hashes_parent))
<a name="l04130"></a>04130          {
<a name="l04131"></a>04131             $hashes_parent = array_values(SimplePie_Misc::array_unique($hashes_parent));
<a name="l04132"></a>04132          }
<a name="l04133"></a>04133 
<a name="l04134"></a>04134          <span class="comment">// KEYWORDS</span>
<a name="l04135"></a>04135          <span class="keywordflow">if</span> ($keywords = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_MEDIARSS, <span class="stringliteral">&#39;keywords&#39;</span>))
<a name="l04136"></a>04136          {
<a name="l04137"></a>04137             <span class="keywordflow">if</span> (isset($keywords[0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04138"></a>04138             {
<a name="l04139"></a>04139                $temp = explode(<span class="charliteral">&#39;,&#39;</span>, $this-&gt;sanitize($keywords[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT));
<a name="l04140"></a>04140                <span class="keywordflow">foreach</span> ($temp as $word)
<a name="l04141"></a>04141                {
<a name="l04142"></a>04142                   $keywords_parent[] = trim($word);
<a name="l04143"></a>04143                }
<a name="l04144"></a>04144             }
<a name="l04145"></a>04145             unset($temp);
<a name="l04146"></a>04146          }
<a name="l04147"></a>04147          elseif ($keywords = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_ITUNES, <span class="stringliteral">&#39;keywords&#39;</span>))
<a name="l04148"></a>04148          {
<a name="l04149"></a>04149             <span class="keywordflow">if</span> (isset($keywords[0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04150"></a>04150             {
<a name="l04151"></a>04151                $temp = explode(<span class="charliteral">&#39;,&#39;</span>, $this-&gt;sanitize($keywords[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT));
<a name="l04152"></a>04152                <span class="keywordflow">foreach</span> ($temp as $word)
<a name="l04153"></a>04153                {
<a name="l04154"></a>04154                   $keywords_parent[] = trim($word);
<a name="l04155"></a>04155                }
<a name="l04156"></a>04156             }
<a name="l04157"></a>04157             unset($temp);
<a name="l04158"></a>04158          }
<a name="l04159"></a>04159          elseif ($keywords = $parent-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_MEDIARSS, <span class="stringliteral">&#39;keywords&#39;</span>))
<a name="l04160"></a>04160          {
<a name="l04161"></a>04161             <span class="keywordflow">if</span> (isset($keywords[0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04162"></a>04162             {
<a name="l04163"></a>04163                $temp = explode(<span class="charliteral">&#39;,&#39;</span>, $this-&gt;sanitize($keywords[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT));
<a name="l04164"></a>04164                <span class="keywordflow">foreach</span> ($temp as $word)
<a name="l04165"></a>04165                {
<a name="l04166"></a>04166                   $keywords_parent[] = trim($word);
<a name="l04167"></a>04167                }
<a name="l04168"></a>04168             }
<a name="l04169"></a>04169             unset($temp);
<a name="l04170"></a>04170          }
<a name="l04171"></a>04171          elseif ($keywords = $parent-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_ITUNES, <span class="stringliteral">&#39;keywords&#39;</span>))
<a name="l04172"></a>04172          {
<a name="l04173"></a>04173             <span class="keywordflow">if</span> (isset($keywords[0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04174"></a>04174             {
<a name="l04175"></a>04175                $temp = explode(<span class="charliteral">&#39;,&#39;</span>, $this-&gt;sanitize($keywords[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT));
<a name="l04176"></a>04176                <span class="keywordflow">foreach</span> ($temp as $word)
<a name="l04177"></a>04177                {
<a name="l04178"></a>04178                   $keywords_parent[] = trim($word);
<a name="l04179"></a>04179                }
<a name="l04180"></a>04180             }
<a name="l04181"></a>04181             unset($temp);
<a name="l04182"></a>04182          }
<a name="l04183"></a>04183          <span class="keywordflow">if</span> (is_array($keywords_parent))
<a name="l04184"></a>04184          {
<a name="l04185"></a>04185             $keywords_parent = array_values(SimplePie_Misc::array_unique($keywords_parent));
<a name="l04186"></a>04186          }
<a name="l04187"></a>04187 
<a name="l04188"></a>04188          <span class="comment">// PLAYER</span>
<a name="l04189"></a>04189          <span class="keywordflow">if</span> ($player_parent = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_MEDIARSS, <span class="stringliteral">&#39;player&#39;</span>))
<a name="l04190"></a>04190          {
<a name="l04191"></a>04191             <span class="keywordflow">if</span> (isset($player_parent[0][<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;url&#39;</span>]))
<a name="l04192"></a>04192             {
<a name="l04193"></a>04193                $player_parent = $this-&gt;sanitize($player_parent[0][<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;url&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI);
<a name="l04194"></a>04194             }
<a name="l04195"></a>04195          }
<a name="l04196"></a>04196          elseif ($player_parent = $parent-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_MEDIARSS, <span class="stringliteral">&#39;player&#39;</span>))
<a name="l04197"></a>04197          {
<a name="l04198"></a>04198             <span class="keywordflow">if</span> (isset($player_parent[0][<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;url&#39;</span>]))
<a name="l04199"></a>04199             {
<a name="l04200"></a>04200                $player_parent = $this-&gt;sanitize($player_parent[0][<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;url&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI);
<a name="l04201"></a>04201             }
<a name="l04202"></a>04202          }
<a name="l04203"></a>04203 
<a name="l04204"></a>04204          <span class="comment">// RATINGS</span>
<a name="l04205"></a>04205          <span class="keywordflow">if</span> ($ratings = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_MEDIARSS, <span class="stringliteral">&#39;rating&#39;</span>))
<a name="l04206"></a>04206          {
<a name="l04207"></a>04207             <span class="keywordflow">foreach</span> ($ratings as $rating)
<a name="l04208"></a>04208             {
<a name="l04209"></a>04209                $rating_scheme = null;
<a name="l04210"></a>04210                $rating_value = null;
<a name="l04211"></a>04211                <span class="keywordflow">if</span> (isset($rating[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>]))
<a name="l04212"></a>04212                {
<a name="l04213"></a>04213                   $rating_scheme = $this-&gt;sanitize($rating[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04214"></a>04214                }
<a name="l04215"></a>04215                <span class="keywordflow">else</span>
<a name="l04216"></a>04216                {
<a name="l04217"></a>04217                   $rating_scheme = <span class="stringliteral">&#39;urn:simple&#39;</span>;
<a name="l04218"></a>04218                }
<a name="l04219"></a>04219                <span class="keywordflow">if</span> (isset($rating[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04220"></a>04220                {
<a name="l04221"></a>04221                   $rating_value = $this-&gt;sanitize($rating[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04222"></a>04222                }
<a name="l04223"></a>04223                $ratings_parent[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;rating_class($rating_scheme, $rating_value);
<a name="l04224"></a>04224             }
<a name="l04225"></a>04225          }
<a name="l04226"></a>04226          elseif ($ratings = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_ITUNES, <span class="stringliteral">&#39;explicit&#39;</span>))
<a name="l04227"></a>04227          {
<a name="l04228"></a>04228             <span class="keywordflow">foreach</span> ($ratings as $rating)
<a name="l04229"></a>04229             {
<a name="l04230"></a>04230                $rating_scheme = <span class="stringliteral">&#39;urn:itunes&#39;</span>;
<a name="l04231"></a>04231                $rating_value = null;
<a name="l04232"></a>04232                <span class="keywordflow">if</span> (isset($rating[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04233"></a>04233                {
<a name="l04234"></a>04234                   $rating_value = $this-&gt;sanitize($rating[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04235"></a>04235                }
<a name="l04236"></a>04236                $ratings_parent[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;rating_class($rating_scheme, $rating_value);
<a name="l04237"></a>04237             }
<a name="l04238"></a>04238          }
<a name="l04239"></a>04239          elseif ($ratings = $parent-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_MEDIARSS, <span class="stringliteral">&#39;rating&#39;</span>))
<a name="l04240"></a>04240          {
<a name="l04241"></a>04241             <span class="keywordflow">foreach</span> ($ratings as $rating)
<a name="l04242"></a>04242             {
<a name="l04243"></a>04243                $rating_scheme = null;
<a name="l04244"></a>04244                $rating_value = null;
<a name="l04245"></a>04245                <span class="keywordflow">if</span> (isset($rating[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>]))
<a name="l04246"></a>04246                {
<a name="l04247"></a>04247                   $rating_scheme = $this-&gt;sanitize($rating[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04248"></a>04248                }
<a name="l04249"></a>04249                <span class="keywordflow">else</span>
<a name="l04250"></a>04250                {
<a name="l04251"></a>04251                   $rating_scheme = <span class="stringliteral">&#39;urn:simple&#39;</span>;
<a name="l04252"></a>04252                }
<a name="l04253"></a>04253                <span class="keywordflow">if</span> (isset($rating[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04254"></a>04254                {
<a name="l04255"></a>04255                   $rating_value = $this-&gt;sanitize($rating[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04256"></a>04256                }
<a name="l04257"></a>04257                $ratings_parent[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;rating_class($rating_scheme, $rating_value);
<a name="l04258"></a>04258             }
<a name="l04259"></a>04259          }
<a name="l04260"></a>04260          elseif ($ratings = $parent-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_ITUNES, <span class="stringliteral">&#39;explicit&#39;</span>))
<a name="l04261"></a>04261          {
<a name="l04262"></a>04262             <span class="keywordflow">foreach</span> ($ratings as $rating)
<a name="l04263"></a>04263             {
<a name="l04264"></a>04264                $rating_scheme = <span class="stringliteral">&#39;urn:itunes&#39;</span>;
<a name="l04265"></a>04265                $rating_value = null;
<a name="l04266"></a>04266                <span class="keywordflow">if</span> (isset($rating[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04267"></a>04267                {
<a name="l04268"></a>04268                   $rating_value = $this-&gt;sanitize($rating[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04269"></a>04269                }
<a name="l04270"></a>04270                $ratings_parent[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;rating_class($rating_scheme, $rating_value);
<a name="l04271"></a>04271             }
<a name="l04272"></a>04272          }
<a name="l04273"></a>04273          <span class="keywordflow">if</span> (is_array($ratings_parent))
<a name="l04274"></a>04274          {
<a name="l04275"></a>04275             $ratings_parent = array_values(SimplePie_Misc::array_unique($ratings_parent));
<a name="l04276"></a>04276          }
<a name="l04277"></a>04277 
<a name="l04278"></a>04278          <span class="comment">// RESTRICTIONS</span>
<a name="l04279"></a>04279          <span class="keywordflow">if</span> ($restrictions = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_MEDIARSS, <span class="stringliteral">&#39;restriction&#39;</span>))
<a name="l04280"></a>04280          {
<a name="l04281"></a>04281             <span class="keywordflow">foreach</span> ($restrictions as $restriction)
<a name="l04282"></a>04282             {
<a name="l04283"></a>04283                $restriction_relationship = null;
<a name="l04284"></a>04284                $restriction_type = null;
<a name="l04285"></a>04285                $restriction_value = null;
<a name="l04286"></a>04286                <span class="keywordflow">if</span> (isset($restriction[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;relationship&#39;</span>]))
<a name="l04287"></a>04287                {
<a name="l04288"></a>04288                   $restriction_relationship = $this-&gt;sanitize($restriction[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;relationship&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04289"></a>04289                }
<a name="l04290"></a>04290                <span class="keywordflow">if</span> (isset($restriction[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>]))
<a name="l04291"></a>04291                {
<a name="l04292"></a>04292                   $restriction_type = $this-&gt;sanitize($restriction[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04293"></a>04293                }
<a name="l04294"></a>04294                <span class="keywordflow">if</span> (isset($restriction[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04295"></a>04295                {
<a name="l04296"></a>04296                   $restriction_value = $this-&gt;sanitize($restriction[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04297"></a>04297                }
<a name="l04298"></a>04298                $restrictions_parent[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;restriction_class($restriction_relationship, $restriction_type, $restriction_value);
<a name="l04299"></a>04299             }
<a name="l04300"></a>04300          }
<a name="l04301"></a>04301          elseif ($restrictions = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_ITUNES, <span class="stringliteral">&#39;block&#39;</span>))
<a name="l04302"></a>04302          {
<a name="l04303"></a>04303             <span class="keywordflow">foreach</span> ($restrictions as $restriction)
<a name="l04304"></a>04304             {
<a name="l04305"></a>04305                $restriction_relationship = <span class="stringliteral">&#39;allow&#39;</span>;
<a name="l04306"></a>04306                $restriction_type = null;
<a name="l04307"></a>04307                $restriction_value = <span class="stringliteral">&#39;itunes&#39;</span>;
<a name="l04308"></a>04308                <span class="keywordflow">if</span> (isset($restriction[<span class="stringliteral">&#39;data&#39;</span>]) &amp;&amp; strtolower($restriction[<span class="stringliteral">&#39;data&#39;</span>]) === <span class="stringliteral">&#39;yes&#39;</span>)
<a name="l04309"></a>04309                {
<a name="l04310"></a>04310                   $restriction_relationship = <span class="stringliteral">&#39;deny&#39;</span>;
<a name="l04311"></a>04311                }
<a name="l04312"></a>04312                $restrictions_parent[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;restriction_class($restriction_relationship, $restriction_type, $restriction_value);
<a name="l04313"></a>04313             }
<a name="l04314"></a>04314          }
<a name="l04315"></a>04315          elseif ($restrictions = $parent-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_MEDIARSS, <span class="stringliteral">&#39;restriction&#39;</span>))
<a name="l04316"></a>04316          {
<a name="l04317"></a>04317             <span class="keywordflow">foreach</span> ($restrictions as $restriction)
<a name="l04318"></a>04318             {
<a name="l04319"></a>04319                $restriction_relationship = null;
<a name="l04320"></a>04320                $restriction_type = null;
<a name="l04321"></a>04321                $restriction_value = null;
<a name="l04322"></a>04322                <span class="keywordflow">if</span> (isset($restriction[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;relationship&#39;</span>]))
<a name="l04323"></a>04323                {
<a name="l04324"></a>04324                   $restriction_relationship = $this-&gt;sanitize($restriction[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;relationship&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04325"></a>04325                }
<a name="l04326"></a>04326                <span class="keywordflow">if</span> (isset($restriction[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>]))
<a name="l04327"></a>04327                {
<a name="l04328"></a>04328                   $restriction_type = $this-&gt;sanitize($restriction[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04329"></a>04329                }
<a name="l04330"></a>04330                <span class="keywordflow">if</span> (isset($restriction[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04331"></a>04331                {
<a name="l04332"></a>04332                   $restriction_value = $this-&gt;sanitize($restriction[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04333"></a>04333                }
<a name="l04334"></a>04334                $restrictions_parent[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;restriction_class($restriction_relationship, $restriction_type, $restriction_value);
<a name="l04335"></a>04335             }
<a name="l04336"></a>04336          }
<a name="l04337"></a>04337          elseif ($restrictions = $parent-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_ITUNES, <span class="stringliteral">&#39;block&#39;</span>))
<a name="l04338"></a>04338          {
<a name="l04339"></a>04339             <span class="keywordflow">foreach</span> ($restrictions as $restriction)
<a name="l04340"></a>04340             {
<a name="l04341"></a>04341                $restriction_relationship = <span class="stringliteral">&#39;allow&#39;</span>;
<a name="l04342"></a>04342                $restriction_type = null;
<a name="l04343"></a>04343                $restriction_value = <span class="stringliteral">&#39;itunes&#39;</span>;
<a name="l04344"></a>04344                <span class="keywordflow">if</span> (isset($restriction[<span class="stringliteral">&#39;data&#39;</span>]) &amp;&amp; strtolower($restriction[<span class="stringliteral">&#39;data&#39;</span>]) === <span class="stringliteral">&#39;yes&#39;</span>)
<a name="l04345"></a>04345                {
<a name="l04346"></a>04346                   $restriction_relationship = <span class="stringliteral">&#39;deny&#39;</span>;
<a name="l04347"></a>04347                }
<a name="l04348"></a>04348                $restrictions_parent[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;restriction_class($restriction_relationship, $restriction_type, $restriction_value);
<a name="l04349"></a>04349             }
<a name="l04350"></a>04350          }
<a name="l04351"></a>04351          <span class="keywordflow">if</span> (is_array($restrictions_parent))
<a name="l04352"></a>04352          {
<a name="l04353"></a>04353             $restrictions_parent = array_values(SimplePie_Misc::array_unique($restrictions_parent));
<a name="l04354"></a>04354          }
<a name="l04355"></a>04355 
<a name="l04356"></a>04356          <span class="comment">// THUMBNAILS</span>
<a name="l04357"></a>04357          <span class="keywordflow">if</span> ($thumbnails = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_MEDIARSS, <span class="stringliteral">&#39;thumbnail&#39;</span>))
<a name="l04358"></a>04358          {
<a name="l04359"></a>04359             <span class="keywordflow">foreach</span> ($thumbnails as $thumbnail)
<a name="l04360"></a>04360             {
<a name="l04361"></a>04361                <span class="keywordflow">if</span> (isset($thumbnail[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;url&#39;</span>]))
<a name="l04362"></a>04362                {
<a name="l04363"></a>04363                   $thumbnails_parent[] = $this-&gt;sanitize($thumbnail[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;url&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI);
<a name="l04364"></a>04364                }
<a name="l04365"></a>04365             }
<a name="l04366"></a>04366          }
<a name="l04367"></a>04367          elseif ($thumbnails = $parent-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_MEDIARSS, <span class="stringliteral">&#39;thumbnail&#39;</span>))
<a name="l04368"></a>04368          {
<a name="l04369"></a>04369             <span class="keywordflow">foreach</span> ($thumbnails as $thumbnail)
<a name="l04370"></a>04370             {
<a name="l04371"></a>04371                <span class="keywordflow">if</span> (isset($thumbnail[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;url&#39;</span>]))
<a name="l04372"></a>04372                {
<a name="l04373"></a>04373                   $thumbnails_parent[] = $this-&gt;sanitize($thumbnail[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;url&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI);
<a name="l04374"></a>04374                }
<a name="l04375"></a>04375             }
<a name="l04376"></a>04376          }
<a name="l04377"></a>04377 
<a name="l04378"></a>04378          <span class="comment">// TITLES</span>
<a name="l04379"></a>04379          <span class="keywordflow">if</span> ($title_parent = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_MEDIARSS, <span class="stringliteral">&#39;title&#39;</span>))
<a name="l04380"></a>04380          {
<a name="l04381"></a>04381             <span class="keywordflow">if</span> (isset($title_parent[0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04382"></a>04382             {
<a name="l04383"></a>04383                $title_parent = $this-&gt;sanitize($title_parent[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04384"></a>04384             }
<a name="l04385"></a>04385          }
<a name="l04386"></a>04386          elseif ($title_parent = $parent-&gt;get_channel_tags(SIMPLEPIE_NAMESPACE_MEDIARSS, <span class="stringliteral">&#39;title&#39;</span>))
<a name="l04387"></a>04387          {
<a name="l04388"></a>04388             <span class="keywordflow">if</span> (isset($title_parent[0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04389"></a>04389             {
<a name="l04390"></a>04390                $title_parent = $this-&gt;sanitize($title_parent[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04391"></a>04391             }
<a name="l04392"></a>04392          }
<a name="l04393"></a>04393 
<a name="l04394"></a>04394          <span class="comment">// Clear the memory</span>
<a name="l04395"></a>04395          unset($parent);
<a name="l04396"></a>04396 
<a name="l04397"></a>04397          <span class="comment">// Attributes</span>
<a name="l04398"></a>04398          $bitrate = null;
<a name="l04399"></a>04399          $channels = null;
<a name="l04400"></a>04400          $duration = null;
<a name="l04401"></a>04401          $expression = null;
<a name="l04402"></a>04402          $framerate = null;
<a name="l04403"></a>04403          $height = null;
<a name="l04404"></a>04404          $javascript = null;
<a name="l04405"></a>04405          $lang = null;
<a name="l04406"></a>04406          $length = null;
<a name="l04407"></a>04407          $medium = null;
<a name="l04408"></a>04408          $samplingrate = null;
<a name="l04409"></a>04409          $type = null;
<a name="l04410"></a>04410          $url = null;
<a name="l04411"></a>04411          $width = null;
<a name="l04412"></a>04412 
<a name="l04413"></a>04413          <span class="comment">// Elements</span>
<a name="l04414"></a>04414          $captions = null;
<a name="l04415"></a>04415          $categories = null;
<a name="l04416"></a>04416          $copyrights = null;
<a name="l04417"></a>04417          $credits = null;
<a name="l04418"></a>04418          $description = null;
<a name="l04419"></a>04419          $hashes = null;
<a name="l04420"></a>04420          $keywords = null;
<a name="l04421"></a>04421          $player = null;
<a name="l04422"></a>04422          $ratings = null;
<a name="l04423"></a>04423          $restrictions = null;
<a name="l04424"></a>04424          $thumbnails = null;
<a name="l04425"></a>04425          $title = null;
<a name="l04426"></a>04426 
<a name="l04427"></a>04427          <span class="comment">// If we have media:group tags, loop through them.</span>
<a name="l04428"></a>04428          <span class="keywordflow">foreach</span> ((array) $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_MEDIARSS, <span class="stringliteral">&#39;group&#39;</span>) as $group)
<a name="l04429"></a>04429          {
<a name="l04430"></a>04430             <span class="comment">// If we have media:content tags, loop through them.</span>
<a name="l04431"></a>04431             <span class="keywordflow">foreach</span> ((array) $group[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;content&#39;</span>] as $content)
<a name="l04432"></a>04432             {
<a name="l04433"></a>04433                <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;url&#39;</span>]))
<a name="l04434"></a>04434                {
<a name="l04435"></a>04435                   <span class="comment">// Attributes</span>
<a name="l04436"></a>04436                   $bitrate = null;
<a name="l04437"></a>04437                   $channels = null;
<a name="l04438"></a>04438                   $duration = null;
<a name="l04439"></a>04439                   $expression = null;
<a name="l04440"></a>04440                   $framerate = null;
<a name="l04441"></a>04441                   $height = null;
<a name="l04442"></a>04442                   $javascript = null;
<a name="l04443"></a>04443                   $lang = null;
<a name="l04444"></a>04444                   $length = null;
<a name="l04445"></a>04445                   $medium = null;
<a name="l04446"></a>04446                   $samplingrate = null;
<a name="l04447"></a>04447                   $type = null;
<a name="l04448"></a>04448                   $url = null;
<a name="l04449"></a>04449                   $width = null;
<a name="l04450"></a>04450 
<a name="l04451"></a>04451                   <span class="comment">// Elements</span>
<a name="l04452"></a>04452                   $captions = null;
<a name="l04453"></a>04453                   $categories = null;
<a name="l04454"></a>04454                   $copyrights = null;
<a name="l04455"></a>04455                   $credits = null;
<a name="l04456"></a>04456                   $description = null;
<a name="l04457"></a>04457                   $hashes = null;
<a name="l04458"></a>04458                   $keywords = null;
<a name="l04459"></a>04459                   $player = null;
<a name="l04460"></a>04460                   $ratings = null;
<a name="l04461"></a>04461                   $restrictions = null;
<a name="l04462"></a>04462                   $thumbnails = null;
<a name="l04463"></a>04463                   $title = null;
<a name="l04464"></a>04464 
<a name="l04465"></a>04465                   <span class="comment">// Start checking the attributes of media:content</span>
<a name="l04466"></a>04466                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;bitrate&#39;</span>]))
<a name="l04467"></a>04467                   {
<a name="l04468"></a>04468                      $bitrate = $this-&gt;sanitize($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;bitrate&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04469"></a>04469                   }
<a name="l04470"></a>04470                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;channels&#39;</span>]))
<a name="l04471"></a>04471                   {
<a name="l04472"></a>04472                      $channels = $this-&gt;sanitize($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;channels&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04473"></a>04473                   }
<a name="l04474"></a>04474                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;duration&#39;</span>]))
<a name="l04475"></a>04475                   {
<a name="l04476"></a>04476                      $duration = $this-&gt;sanitize($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;duration&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04477"></a>04477                   }
<a name="l04478"></a>04478                   <span class="keywordflow">else</span>
<a name="l04479"></a>04479                   {
<a name="l04480"></a>04480                      $duration = $duration_parent;
<a name="l04481"></a>04481                   }
<a name="l04482"></a>04482                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;expression&#39;</span>]))
<a name="l04483"></a>04483                   {
<a name="l04484"></a>04484                      $expression = $this-&gt;sanitize($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;expression&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04485"></a>04485                   }
<a name="l04486"></a>04486                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;framerate&#39;</span>]))
<a name="l04487"></a>04487                   {
<a name="l04488"></a>04488                      $framerate = $this-&gt;sanitize($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;framerate&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04489"></a>04489                   }
<a name="l04490"></a>04490                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;height&#39;</span>]))
<a name="l04491"></a>04491                   {
<a name="l04492"></a>04492                      $height = $this-&gt;sanitize($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;height&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04493"></a>04493                   }
<a name="l04494"></a>04494                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;lang&#39;</span>]))
<a name="l04495"></a>04495                   {
<a name="l04496"></a>04496                      $lang = $this-&gt;sanitize($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;lang&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04497"></a>04497                   }
<a name="l04498"></a>04498                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;fileSize&#39;</span>]))
<a name="l04499"></a>04499                   {
<a name="l04500"></a>04500                      $length = ceil($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;fileSize&#39;</span>]);
<a name="l04501"></a>04501                   }
<a name="l04502"></a>04502                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;medium&#39;</span>]))
<a name="l04503"></a>04503                   {
<a name="l04504"></a>04504                      $medium = $this-&gt;sanitize($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;medium&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04505"></a>04505                   }
<a name="l04506"></a>04506                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;samplingrate&#39;</span>]))
<a name="l04507"></a>04507                   {
<a name="l04508"></a>04508                      $samplingrate = $this-&gt;sanitize($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;samplingrate&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04509"></a>04509                   }
<a name="l04510"></a>04510                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>]))
<a name="l04511"></a>04511                   {
<a name="l04512"></a>04512                      $type = $this-&gt;sanitize($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04513"></a>04513                   }
<a name="l04514"></a>04514                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;width&#39;</span>]))
<a name="l04515"></a>04515                   {
<a name="l04516"></a>04516                      $width = $this-&gt;sanitize($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;width&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04517"></a>04517                   }
<a name="l04518"></a>04518                   $url = $this-&gt;sanitize($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;url&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI);
<a name="l04519"></a>04519 
<a name="l04520"></a>04520                   <span class="comment">// Checking the other optional media: elements. Priority: media:content, media:group, item, channel</span>
<a name="l04521"></a>04521 
<a name="l04522"></a>04522                   <span class="comment">// CAPTIONS</span>
<a name="l04523"></a>04523                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;text&#39;</span>]))
<a name="l04524"></a>04524                   {
<a name="l04525"></a>04525                      <span class="keywordflow">foreach</span> ($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;text&#39;</span>] as $caption)
<a name="l04526"></a>04526                      {
<a name="l04527"></a>04527                         $caption_type = null;
<a name="l04528"></a>04528                         $caption_lang = null;
<a name="l04529"></a>04529                         $caption_startTime = null;
<a name="l04530"></a>04530                         $caption_endTime = null;
<a name="l04531"></a>04531                         $caption_text = null;
<a name="l04532"></a>04532                         <span class="keywordflow">if</span> (isset($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>]))
<a name="l04533"></a>04533                         {
<a name="l04534"></a>04534                            $caption_type = $this-&gt;sanitize($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04535"></a>04535                         }
<a name="l04536"></a>04536                         <span class="keywordflow">if</span> (isset($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;lang&#39;</span>]))
<a name="l04537"></a>04537                         {
<a name="l04538"></a>04538                            $caption_lang = $this-&gt;sanitize($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;lang&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04539"></a>04539                         }
<a name="l04540"></a>04540                         <span class="keywordflow">if</span> (isset($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;start&#39;</span>]))
<a name="l04541"></a>04541                         {
<a name="l04542"></a>04542                            $caption_startTime = $this-&gt;sanitize($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;start&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04543"></a>04543                         }
<a name="l04544"></a>04544                         <span class="keywordflow">if</span> (isset($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;end&#39;</span>]))
<a name="l04545"></a>04545                         {
<a name="l04546"></a>04546                            $caption_endTime = $this-&gt;sanitize($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;end&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04547"></a>04547                         }
<a name="l04548"></a>04548                         <span class="keywordflow">if</span> (isset($caption[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04549"></a>04549                         {
<a name="l04550"></a>04550                            $caption_text = $this-&gt;sanitize($caption[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04551"></a>04551                         }
<a name="l04552"></a>04552                         $captions[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;caption_class($caption_type, $caption_lang, $caption_startTime, $caption_endTime, $caption_text);
<a name="l04553"></a>04553                      }
<a name="l04554"></a>04554                      <span class="keywordflow">if</span> (is_array($captions))
<a name="l04555"></a>04555                      {
<a name="l04556"></a>04556                         $captions = array_values(SimplePie_Misc::array_unique($captions));
<a name="l04557"></a>04557                      }
<a name="l04558"></a>04558                   }
<a name="l04559"></a>04559                   elseif (isset($group[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;text&#39;</span>]))
<a name="l04560"></a>04560                   {
<a name="l04561"></a>04561                      <span class="keywordflow">foreach</span> ($group[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;text&#39;</span>] as $caption)
<a name="l04562"></a>04562                      {
<a name="l04563"></a>04563                         $caption_type = null;
<a name="l04564"></a>04564                         $caption_lang = null;
<a name="l04565"></a>04565                         $caption_startTime = null;
<a name="l04566"></a>04566                         $caption_endTime = null;
<a name="l04567"></a>04567                         $caption_text = null;
<a name="l04568"></a>04568                         <span class="keywordflow">if</span> (isset($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>]))
<a name="l04569"></a>04569                         {
<a name="l04570"></a>04570                            $caption_type = $this-&gt;sanitize($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04571"></a>04571                         }
<a name="l04572"></a>04572                         <span class="keywordflow">if</span> (isset($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;lang&#39;</span>]))
<a name="l04573"></a>04573                         {
<a name="l04574"></a>04574                            $caption_lang = $this-&gt;sanitize($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;lang&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04575"></a>04575                         }
<a name="l04576"></a>04576                         <span class="keywordflow">if</span> (isset($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;start&#39;</span>]))
<a name="l04577"></a>04577                         {
<a name="l04578"></a>04578                            $caption_startTime = $this-&gt;sanitize($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;start&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04579"></a>04579                         }
<a name="l04580"></a>04580                         <span class="keywordflow">if</span> (isset($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;end&#39;</span>]))
<a name="l04581"></a>04581                         {
<a name="l04582"></a>04582                            $caption_endTime = $this-&gt;sanitize($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;end&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04583"></a>04583                         }
<a name="l04584"></a>04584                         <span class="keywordflow">if</span> (isset($caption[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04585"></a>04585                         {
<a name="l04586"></a>04586                            $caption_text = $this-&gt;sanitize($caption[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04587"></a>04587                         }
<a name="l04588"></a>04588                         $captions[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;caption_class($caption_type, $caption_lang, $caption_startTime, $caption_endTime, $caption_text);
<a name="l04589"></a>04589                      }
<a name="l04590"></a>04590                      <span class="keywordflow">if</span> (is_array($captions))
<a name="l04591"></a>04591                      {
<a name="l04592"></a>04592                         $captions = array_values(SimplePie_Misc::array_unique($captions));
<a name="l04593"></a>04593                      }
<a name="l04594"></a>04594                   }
<a name="l04595"></a>04595                   <span class="keywordflow">else</span>
<a name="l04596"></a>04596                   {
<a name="l04597"></a>04597                      $captions = $captions_parent;
<a name="l04598"></a>04598                   }
<a name="l04599"></a>04599 
<a name="l04600"></a>04600                   <span class="comment">// CATEGORIES</span>
<a name="l04601"></a>04601                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;category&#39;</span>]))
<a name="l04602"></a>04602                   {
<a name="l04603"></a>04603                      <span class="keywordflow">foreach</span> ((array) $content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;category&#39;</span>] as $category)
<a name="l04604"></a>04604                      {
<a name="l04605"></a>04605                         $term = null;
<a name="l04606"></a>04606                         $scheme = null;
<a name="l04607"></a>04607                         $label = null;
<a name="l04608"></a>04608                         <span class="keywordflow">if</span> (isset($category[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04609"></a>04609                         {
<a name="l04610"></a>04610                            $term = $this-&gt;sanitize($category[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04611"></a>04611                         }
<a name="l04612"></a>04612                         <span class="keywordflow">if</span> (isset($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>]))
<a name="l04613"></a>04613                         {
<a name="l04614"></a>04614                            $scheme = $this-&gt;sanitize($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04615"></a>04615                         }
<a name="l04616"></a>04616                         <span class="keywordflow">else</span>
<a name="l04617"></a>04617                         {
<a name="l04618"></a>04618                            $scheme = <span class="stringliteral">&#39;http://search.yahoo.com/mrss/category_schema&#39;</span>;
<a name="l04619"></a>04619                         }
<a name="l04620"></a>04620                         <span class="keywordflow">if</span> (isset($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;label&#39;</span>]))
<a name="l04621"></a>04621                         {
<a name="l04622"></a>04622                            $label = $this-&gt;sanitize($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;label&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04623"></a>04623                         }
<a name="l04624"></a>04624                         $categories[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;category_class($term, $scheme, $label);
<a name="l04625"></a>04625                      }
<a name="l04626"></a>04626                   }
<a name="l04627"></a>04627                   <span class="keywordflow">if</span> (isset($group[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;category&#39;</span>]))
<a name="l04628"></a>04628                   {
<a name="l04629"></a>04629                      <span class="keywordflow">foreach</span> ((array) $group[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;category&#39;</span>] as $category)
<a name="l04630"></a>04630                      {
<a name="l04631"></a>04631                         $term = null;
<a name="l04632"></a>04632                         $scheme = null;
<a name="l04633"></a>04633                         $label = null;
<a name="l04634"></a>04634                         <span class="keywordflow">if</span> (isset($category[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04635"></a>04635                         {
<a name="l04636"></a>04636                            $term = $this-&gt;sanitize($category[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04637"></a>04637                         }
<a name="l04638"></a>04638                         <span class="keywordflow">if</span> (isset($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>]))
<a name="l04639"></a>04639                         {
<a name="l04640"></a>04640                            $scheme = $this-&gt;sanitize($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04641"></a>04641                         }
<a name="l04642"></a>04642                         <span class="keywordflow">else</span>
<a name="l04643"></a>04643                         {
<a name="l04644"></a>04644                            $scheme = <span class="stringliteral">&#39;http://search.yahoo.com/mrss/category_schema&#39;</span>;
<a name="l04645"></a>04645                         }
<a name="l04646"></a>04646                         <span class="keywordflow">if</span> (isset($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;label&#39;</span>]))
<a name="l04647"></a>04647                         {
<a name="l04648"></a>04648                            $label = $this-&gt;sanitize($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;label&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04649"></a>04649                         }
<a name="l04650"></a>04650                         $categories[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;category_class($term, $scheme, $label);
<a name="l04651"></a>04651                      }
<a name="l04652"></a>04652                   }
<a name="l04653"></a>04653                   <span class="keywordflow">if</span> (is_array($categories) &amp;&amp; is_array($categories_parent))
<a name="l04654"></a>04654                   {
<a name="l04655"></a>04655                      $categories = array_values(SimplePie_Misc::array_unique(array_merge($categories, $categories_parent)));
<a name="l04656"></a>04656                   }
<a name="l04657"></a>04657                   elseif (is_array($categories))
<a name="l04658"></a>04658                   {
<a name="l04659"></a>04659                      $categories = array_values(SimplePie_Misc::array_unique($categories));
<a name="l04660"></a>04660                   }
<a name="l04661"></a>04661                   elseif (is_array($categories_parent))
<a name="l04662"></a>04662                   {
<a name="l04663"></a>04663                      $categories = array_values(SimplePie_Misc::array_unique($categories_parent));
<a name="l04664"></a>04664                   }
<a name="l04665"></a>04665 
<a name="l04666"></a>04666                   <span class="comment">// COPYRIGHTS</span>
<a name="l04667"></a>04667                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;copyright&#39;</span>]))
<a name="l04668"></a>04668                   {
<a name="l04669"></a>04669                      $copyright_url = null;
<a name="l04670"></a>04670                      $copyright_label = null;
<a name="l04671"></a>04671                      <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;copyright&#39;</span>][0][<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;url&#39;</span>]))
<a name="l04672"></a>04672                      {
<a name="l04673"></a>04673                         $copyright_url = $this-&gt;sanitize($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;copyright&#39;</span>][0][<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;url&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04674"></a>04674                      }
<a name="l04675"></a>04675                      <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;copyright&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04676"></a>04676                      {
<a name="l04677"></a>04677                         $copyright_label = $this-&gt;sanitize($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;copyright&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04678"></a>04678                      }
<a name="l04679"></a>04679                      $copyrights =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;copyright_class($copyright_url, $copyright_label);
<a name="l04680"></a>04680                   }
<a name="l04681"></a>04681                   elseif (isset($group[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;copyright&#39;</span>]))
<a name="l04682"></a>04682                   {
<a name="l04683"></a>04683                      $copyright_url = null;
<a name="l04684"></a>04684                      $copyright_label = null;
<a name="l04685"></a>04685                      <span class="keywordflow">if</span> (isset($group[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;copyright&#39;</span>][0][<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;url&#39;</span>]))
<a name="l04686"></a>04686                      {
<a name="l04687"></a>04687                         $copyright_url = $this-&gt;sanitize($group[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;copyright&#39;</span>][0][<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;url&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04688"></a>04688                      }
<a name="l04689"></a>04689                      <span class="keywordflow">if</span> (isset($group[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;copyright&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04690"></a>04690                      {
<a name="l04691"></a>04691                         $copyright_label = $this-&gt;sanitize($group[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;copyright&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04692"></a>04692                      }
<a name="l04693"></a>04693                      $copyrights =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;copyright_class($copyright_url, $copyright_label);
<a name="l04694"></a>04694                   }
<a name="l04695"></a>04695                   <span class="keywordflow">else</span>
<a name="l04696"></a>04696                   {
<a name="l04697"></a>04697                      $copyrights = $copyrights_parent;
<a name="l04698"></a>04698                   }
<a name="l04699"></a>04699 
<a name="l04700"></a>04700                   <span class="comment">// CREDITS</span>
<a name="l04701"></a>04701                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;credit&#39;</span>]))
<a name="l04702"></a>04702                   {
<a name="l04703"></a>04703                      <span class="keywordflow">foreach</span> ($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;credit&#39;</span>] as $credit)
<a name="l04704"></a>04704                      {
<a name="l04705"></a>04705                         $credit_role = null;
<a name="l04706"></a>04706                         $credit_scheme = null;
<a name="l04707"></a>04707                         $credit_name = null;
<a name="l04708"></a>04708                         <span class="keywordflow">if</span> (isset($credit[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;role&#39;</span>]))
<a name="l04709"></a>04709                         {
<a name="l04710"></a>04710                            $credit_role = $this-&gt;sanitize($credit[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;role&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04711"></a>04711                         }
<a name="l04712"></a>04712                         <span class="keywordflow">if</span> (isset($credit[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>]))
<a name="l04713"></a>04713                         {
<a name="l04714"></a>04714                            $credit_scheme = $this-&gt;sanitize($credit[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04715"></a>04715                         }
<a name="l04716"></a>04716                         <span class="keywordflow">else</span>
<a name="l04717"></a>04717                         {
<a name="l04718"></a>04718                            $credit_scheme = <span class="stringliteral">&#39;urn:ebu&#39;</span>;
<a name="l04719"></a>04719                         }
<a name="l04720"></a>04720                         <span class="keywordflow">if</span> (isset($credit[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04721"></a>04721                         {
<a name="l04722"></a>04722                            $credit_name = $this-&gt;sanitize($credit[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04723"></a>04723                         }
<a name="l04724"></a>04724                         $credits[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;credit_class($credit_role, $credit_scheme, $credit_name);
<a name="l04725"></a>04725                      }
<a name="l04726"></a>04726                      <span class="keywordflow">if</span> (is_array($credits))
<a name="l04727"></a>04727                      {
<a name="l04728"></a>04728                         $credits = array_values(SimplePie_Misc::array_unique($credits));
<a name="l04729"></a>04729                      }
<a name="l04730"></a>04730                   }
<a name="l04731"></a>04731                   elseif (isset($group[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;credit&#39;</span>]))
<a name="l04732"></a>04732                   {
<a name="l04733"></a>04733                      <span class="keywordflow">foreach</span> ($group[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;credit&#39;</span>] as $credit)
<a name="l04734"></a>04734                      {
<a name="l04735"></a>04735                         $credit_role = null;
<a name="l04736"></a>04736                         $credit_scheme = null;
<a name="l04737"></a>04737                         $credit_name = null;
<a name="l04738"></a>04738                         <span class="keywordflow">if</span> (isset($credit[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;role&#39;</span>]))
<a name="l04739"></a>04739                         {
<a name="l04740"></a>04740                            $credit_role = $this-&gt;sanitize($credit[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;role&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04741"></a>04741                         }
<a name="l04742"></a>04742                         <span class="keywordflow">if</span> (isset($credit[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>]))
<a name="l04743"></a>04743                         {
<a name="l04744"></a>04744                            $credit_scheme = $this-&gt;sanitize($credit[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04745"></a>04745                         }
<a name="l04746"></a>04746                         <span class="keywordflow">else</span>
<a name="l04747"></a>04747                         {
<a name="l04748"></a>04748                            $credit_scheme = <span class="stringliteral">&#39;urn:ebu&#39;</span>;
<a name="l04749"></a>04749                         }
<a name="l04750"></a>04750                         <span class="keywordflow">if</span> (isset($credit[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04751"></a>04751                         {
<a name="l04752"></a>04752                            $credit_name = $this-&gt;sanitize($credit[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04753"></a>04753                         }
<a name="l04754"></a>04754                         $credits[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;credit_class($credit_role, $credit_scheme, $credit_name);
<a name="l04755"></a>04755                      }
<a name="l04756"></a>04756                      <span class="keywordflow">if</span> (is_array($credits))
<a name="l04757"></a>04757                      {
<a name="l04758"></a>04758                         $credits = array_values(SimplePie_Misc::array_unique($credits));
<a name="l04759"></a>04759                      }
<a name="l04760"></a>04760                   }
<a name="l04761"></a>04761                   <span class="keywordflow">else</span>
<a name="l04762"></a>04762                   {
<a name="l04763"></a>04763                      $credits = $credits_parent;
<a name="l04764"></a>04764                   }
<a name="l04765"></a>04765 
<a name="l04766"></a>04766                   <span class="comment">// DESCRIPTION</span>
<a name="l04767"></a>04767                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;description&#39;</span>]))
<a name="l04768"></a>04768                   {
<a name="l04769"></a>04769                      $description = $this-&gt;sanitize($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;description&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04770"></a>04770                   }
<a name="l04771"></a>04771                   elseif (isset($group[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;description&#39;</span>]))
<a name="l04772"></a>04772                   {
<a name="l04773"></a>04773                      $description = $this-&gt;sanitize($group[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;description&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04774"></a>04774                   }
<a name="l04775"></a>04775                   <span class="keywordflow">else</span>
<a name="l04776"></a>04776                   {
<a name="l04777"></a>04777                      $description = $description_parent;
<a name="l04778"></a>04778                   }
<a name="l04779"></a>04779 
<a name="l04780"></a>04780                   <span class="comment">// HASHES</span>
<a name="l04781"></a>04781                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;hash&#39;</span>]))
<a name="l04782"></a>04782                   {
<a name="l04783"></a>04783                      <span class="keywordflow">foreach</span> ($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;hash&#39;</span>] as $hash)
<a name="l04784"></a>04784                      {
<a name="l04785"></a>04785                         $value = null;
<a name="l04786"></a>04786                         $algo = null;
<a name="l04787"></a>04787                         <span class="keywordflow">if</span> (isset($hash[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04788"></a>04788                         {
<a name="l04789"></a>04789                            $value = $this-&gt;sanitize($hash[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04790"></a>04790                         }
<a name="l04791"></a>04791                         <span class="keywordflow">if</span> (isset($hash[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;algo&#39;</span>]))
<a name="l04792"></a>04792                         {
<a name="l04793"></a>04793                            $algo = $this-&gt;sanitize($hash[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;algo&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04794"></a>04794                         }
<a name="l04795"></a>04795                         <span class="keywordflow">else</span>
<a name="l04796"></a>04796                         {
<a name="l04797"></a>04797                            $algo = <span class="stringliteral">&#39;md5&#39;</span>;
<a name="l04798"></a>04798                         }
<a name="l04799"></a>04799                         $hashes[] = $algo.<span class="charliteral">&#39;:&#39;</span>.$value;
<a name="l04800"></a>04800                      }
<a name="l04801"></a>04801                      <span class="keywordflow">if</span> (is_array($hashes))
<a name="l04802"></a>04802                      {
<a name="l04803"></a>04803                         $hashes = array_values(SimplePie_Misc::array_unique($hashes));
<a name="l04804"></a>04804                      }
<a name="l04805"></a>04805                   }
<a name="l04806"></a>04806                   elseif (isset($group[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;hash&#39;</span>]))
<a name="l04807"></a>04807                   {
<a name="l04808"></a>04808                      <span class="keywordflow">foreach</span> ($group[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;hash&#39;</span>] as $hash)
<a name="l04809"></a>04809                      {
<a name="l04810"></a>04810                         $value = null;
<a name="l04811"></a>04811                         $algo = null;
<a name="l04812"></a>04812                         <span class="keywordflow">if</span> (isset($hash[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04813"></a>04813                         {
<a name="l04814"></a>04814                            $value = $this-&gt;sanitize($hash[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04815"></a>04815                         }
<a name="l04816"></a>04816                         <span class="keywordflow">if</span> (isset($hash[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;algo&#39;</span>]))
<a name="l04817"></a>04817                         {
<a name="l04818"></a>04818                            $algo = $this-&gt;sanitize($hash[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;algo&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04819"></a>04819                         }
<a name="l04820"></a>04820                         <span class="keywordflow">else</span>
<a name="l04821"></a>04821                         {
<a name="l04822"></a>04822                            $algo = <span class="stringliteral">&#39;md5&#39;</span>;
<a name="l04823"></a>04823                         }
<a name="l04824"></a>04824                         $hashes[] = $algo.<span class="charliteral">&#39;:&#39;</span>.$value;
<a name="l04825"></a>04825                      }
<a name="l04826"></a>04826                      <span class="keywordflow">if</span> (is_array($hashes))
<a name="l04827"></a>04827                      {
<a name="l04828"></a>04828                         $hashes = array_values(SimplePie_Misc::array_unique($hashes));
<a name="l04829"></a>04829                      }
<a name="l04830"></a>04830                   }
<a name="l04831"></a>04831                   <span class="keywordflow">else</span>
<a name="l04832"></a>04832                   {
<a name="l04833"></a>04833                      $hashes = $hashes_parent;
<a name="l04834"></a>04834                   }
<a name="l04835"></a>04835 
<a name="l04836"></a>04836                   <span class="comment">// KEYWORDS</span>
<a name="l04837"></a>04837                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;keywords&#39;</span>]))
<a name="l04838"></a>04838                   {
<a name="l04839"></a>04839                      <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;keywords&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04840"></a>04840                      {
<a name="l04841"></a>04841                         $temp = explode(<span class="charliteral">&#39;,&#39;</span>, $this-&gt;sanitize($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;keywords&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT));
<a name="l04842"></a>04842                         <span class="keywordflow">foreach</span> ($temp as $word)
<a name="l04843"></a>04843                         {
<a name="l04844"></a>04844                            $keywords[] = trim($word);
<a name="l04845"></a>04845                         }
<a name="l04846"></a>04846                         unset($temp);
<a name="l04847"></a>04847                      }
<a name="l04848"></a>04848                      <span class="keywordflow">if</span> (is_array($keywords))
<a name="l04849"></a>04849                      {
<a name="l04850"></a>04850                         $keywords = array_values(SimplePie_Misc::array_unique($keywords));
<a name="l04851"></a>04851                      }
<a name="l04852"></a>04852                   }
<a name="l04853"></a>04853                   elseif (isset($group[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;keywords&#39;</span>]))
<a name="l04854"></a>04854                   {
<a name="l04855"></a>04855                      <span class="keywordflow">if</span> (isset($group[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;keywords&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04856"></a>04856                      {
<a name="l04857"></a>04857                         $temp = explode(<span class="charliteral">&#39;,&#39;</span>, $this-&gt;sanitize($group[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;keywords&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT));
<a name="l04858"></a>04858                         <span class="keywordflow">foreach</span> ($temp as $word)
<a name="l04859"></a>04859                         {
<a name="l04860"></a>04860                            $keywords[] = trim($word);
<a name="l04861"></a>04861                         }
<a name="l04862"></a>04862                         unset($temp);
<a name="l04863"></a>04863                      }
<a name="l04864"></a>04864                      <span class="keywordflow">if</span> (is_array($keywords))
<a name="l04865"></a>04865                      {
<a name="l04866"></a>04866                         $keywords = array_values(SimplePie_Misc::array_unique($keywords));
<a name="l04867"></a>04867                      }
<a name="l04868"></a>04868                   }
<a name="l04869"></a>04869                   <span class="keywordflow">else</span>
<a name="l04870"></a>04870                   {
<a name="l04871"></a>04871                      $keywords = $keywords_parent;
<a name="l04872"></a>04872                   }
<a name="l04873"></a>04873 
<a name="l04874"></a>04874                   <span class="comment">// PLAYER</span>
<a name="l04875"></a>04875                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;player&#39;</span>]))
<a name="l04876"></a>04876                   {
<a name="l04877"></a>04877                      $player = $this-&gt;sanitize($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;player&#39;</span>][0][<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;url&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI);
<a name="l04878"></a>04878                   }
<a name="l04879"></a>04879                   elseif (isset($group[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;player&#39;</span>]))
<a name="l04880"></a>04880                   {
<a name="l04881"></a>04881                      $player = $this-&gt;sanitize($group[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;player&#39;</span>][0][<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;url&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI);
<a name="l04882"></a>04882                   }
<a name="l04883"></a>04883                   <span class="keywordflow">else</span>
<a name="l04884"></a>04884                   {
<a name="l04885"></a>04885                      $player = $player_parent;
<a name="l04886"></a>04886                   }
<a name="l04887"></a>04887 
<a name="l04888"></a>04888                   <span class="comment">// RATINGS</span>
<a name="l04889"></a>04889                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;rating&#39;</span>]))
<a name="l04890"></a>04890                   {
<a name="l04891"></a>04891                      <span class="keywordflow">foreach</span> ($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;rating&#39;</span>] as $rating)
<a name="l04892"></a>04892                      {
<a name="l04893"></a>04893                         $rating_scheme = null;
<a name="l04894"></a>04894                         $rating_value = null;
<a name="l04895"></a>04895                         <span class="keywordflow">if</span> (isset($rating[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>]))
<a name="l04896"></a>04896                         {
<a name="l04897"></a>04897                            $rating_scheme = $this-&gt;sanitize($rating[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04898"></a>04898                         }
<a name="l04899"></a>04899                         <span class="keywordflow">else</span>
<a name="l04900"></a>04900                         {
<a name="l04901"></a>04901                            $rating_scheme = <span class="stringliteral">&#39;urn:simple&#39;</span>;
<a name="l04902"></a>04902                         }
<a name="l04903"></a>04903                         <span class="keywordflow">if</span> (isset($rating[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04904"></a>04904                         {
<a name="l04905"></a>04905                            $rating_value = $this-&gt;sanitize($rating[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04906"></a>04906                         }
<a name="l04907"></a>04907                         $ratings[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;rating_class($rating_scheme, $rating_value);
<a name="l04908"></a>04908                      }
<a name="l04909"></a>04909                      <span class="keywordflow">if</span> (is_array($ratings))
<a name="l04910"></a>04910                      {
<a name="l04911"></a>04911                         $ratings = array_values(SimplePie_Misc::array_unique($ratings));
<a name="l04912"></a>04912                      }
<a name="l04913"></a>04913                   }
<a name="l04914"></a>04914                   elseif (isset($group[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;rating&#39;</span>]))
<a name="l04915"></a>04915                   {
<a name="l04916"></a>04916                      <span class="keywordflow">foreach</span> ($group[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;rating&#39;</span>] as $rating)
<a name="l04917"></a>04917                      {
<a name="l04918"></a>04918                         $rating_scheme = null;
<a name="l04919"></a>04919                         $rating_value = null;
<a name="l04920"></a>04920                         <span class="keywordflow">if</span> (isset($rating[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>]))
<a name="l04921"></a>04921                         {
<a name="l04922"></a>04922                            $rating_scheme = $this-&gt;sanitize($rating[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04923"></a>04923                         }
<a name="l04924"></a>04924                         <span class="keywordflow">else</span>
<a name="l04925"></a>04925                         {
<a name="l04926"></a>04926                            $rating_scheme = <span class="stringliteral">&#39;urn:simple&#39;</span>;
<a name="l04927"></a>04927                         }
<a name="l04928"></a>04928                         <span class="keywordflow">if</span> (isset($rating[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04929"></a>04929                         {
<a name="l04930"></a>04930                            $rating_value = $this-&gt;sanitize($rating[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04931"></a>04931                         }
<a name="l04932"></a>04932                         $ratings[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;rating_class($rating_scheme, $rating_value);
<a name="l04933"></a>04933                      }
<a name="l04934"></a>04934                      <span class="keywordflow">if</span> (is_array($ratings))
<a name="l04935"></a>04935                      {
<a name="l04936"></a>04936                         $ratings = array_values(SimplePie_Misc::array_unique($ratings));
<a name="l04937"></a>04937                      }
<a name="l04938"></a>04938                   }
<a name="l04939"></a>04939                   <span class="keywordflow">else</span>
<a name="l04940"></a>04940                   {
<a name="l04941"></a>04941                      $ratings = $ratings_parent;
<a name="l04942"></a>04942                   }
<a name="l04943"></a>04943 
<a name="l04944"></a>04944                   <span class="comment">// RESTRICTIONS</span>
<a name="l04945"></a>04945                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;restriction&#39;</span>]))
<a name="l04946"></a>04946                   {
<a name="l04947"></a>04947                      <span class="keywordflow">foreach</span> ($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;restriction&#39;</span>] as $restriction)
<a name="l04948"></a>04948                      {
<a name="l04949"></a>04949                         $restriction_relationship = null;
<a name="l04950"></a>04950                         $restriction_type = null;
<a name="l04951"></a>04951                         $restriction_value = null;
<a name="l04952"></a>04952                         <span class="keywordflow">if</span> (isset($restriction[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;relationship&#39;</span>]))
<a name="l04953"></a>04953                         {
<a name="l04954"></a>04954                            $restriction_relationship = $this-&gt;sanitize($restriction[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;relationship&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04955"></a>04955                         }
<a name="l04956"></a>04956                         <span class="keywordflow">if</span> (isset($restriction[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>]))
<a name="l04957"></a>04957                         {
<a name="l04958"></a>04958                            $restriction_type = $this-&gt;sanitize($restriction[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04959"></a>04959                         }
<a name="l04960"></a>04960                         <span class="keywordflow">if</span> (isset($restriction[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04961"></a>04961                         {
<a name="l04962"></a>04962                            $restriction_value = $this-&gt;sanitize($restriction[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04963"></a>04963                         }
<a name="l04964"></a>04964                         $restrictions[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;restriction_class($restriction_relationship, $restriction_type, $restriction_value);
<a name="l04965"></a>04965                      }
<a name="l04966"></a>04966                      <span class="keywordflow">if</span> (is_array($restrictions))
<a name="l04967"></a>04967                      {
<a name="l04968"></a>04968                         $restrictions = array_values(SimplePie_Misc::array_unique($restrictions));
<a name="l04969"></a>04969                      }
<a name="l04970"></a>04970                   }
<a name="l04971"></a>04971                   elseif (isset($group[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;restriction&#39;</span>]))
<a name="l04972"></a>04972                   {
<a name="l04973"></a>04973                      <span class="keywordflow">foreach</span> ($group[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;restriction&#39;</span>] as $restriction)
<a name="l04974"></a>04974                      {
<a name="l04975"></a>04975                         $restriction_relationship = null;
<a name="l04976"></a>04976                         $restriction_type = null;
<a name="l04977"></a>04977                         $restriction_value = null;
<a name="l04978"></a>04978                         <span class="keywordflow">if</span> (isset($restriction[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;relationship&#39;</span>]))
<a name="l04979"></a>04979                         {
<a name="l04980"></a>04980                            $restriction_relationship = $this-&gt;sanitize($restriction[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;relationship&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04981"></a>04981                         }
<a name="l04982"></a>04982                         <span class="keywordflow">if</span> (isset($restriction[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>]))
<a name="l04983"></a>04983                         {
<a name="l04984"></a>04984                            $restriction_type = $this-&gt;sanitize($restriction[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04985"></a>04985                         }
<a name="l04986"></a>04986                         <span class="keywordflow">if</span> (isset($restriction[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l04987"></a>04987                         {
<a name="l04988"></a>04988                            $restriction_value = $this-&gt;sanitize($restriction[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l04989"></a>04989                         }
<a name="l04990"></a>04990                         $restrictions[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;restriction_class($restriction_relationship, $restriction_type, $restriction_value);
<a name="l04991"></a>04991                      }
<a name="l04992"></a>04992                      <span class="keywordflow">if</span> (is_array($restrictions))
<a name="l04993"></a>04993                      {
<a name="l04994"></a>04994                         $restrictions = array_values(SimplePie_Misc::array_unique($restrictions));
<a name="l04995"></a>04995                      }
<a name="l04996"></a>04996                   }
<a name="l04997"></a>04997                   <span class="keywordflow">else</span>
<a name="l04998"></a>04998                   {
<a name="l04999"></a>04999                      $restrictions = $restrictions_parent;
<a name="l05000"></a>05000                   }
<a name="l05001"></a>05001 
<a name="l05002"></a>05002                   <span class="comment">// THUMBNAILS</span>
<a name="l05003"></a>05003                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;thumbnail&#39;</span>]))
<a name="l05004"></a>05004                   {
<a name="l05005"></a>05005                      <span class="keywordflow">foreach</span> ($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;thumbnail&#39;</span>] as $thumbnail)
<a name="l05006"></a>05006                      {
<a name="l05007"></a>05007                         $thumbnails[] = $this-&gt;sanitize($thumbnail[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;url&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI);
<a name="l05008"></a>05008                      }
<a name="l05009"></a>05009                      <span class="keywordflow">if</span> (is_array($thumbnails))
<a name="l05010"></a>05010                      {
<a name="l05011"></a>05011                         $thumbnails = array_values(SimplePie_Misc::array_unique($thumbnails));
<a name="l05012"></a>05012                      }
<a name="l05013"></a>05013                   }
<a name="l05014"></a>05014                   elseif (isset($group[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;thumbnail&#39;</span>]))
<a name="l05015"></a>05015                   {
<a name="l05016"></a>05016                      <span class="keywordflow">foreach</span> ($group[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;thumbnail&#39;</span>] as $thumbnail)
<a name="l05017"></a>05017                      {
<a name="l05018"></a>05018                         $thumbnails[] = $this-&gt;sanitize($thumbnail[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;url&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI);
<a name="l05019"></a>05019                      }
<a name="l05020"></a>05020                      <span class="keywordflow">if</span> (is_array($thumbnails))
<a name="l05021"></a>05021                      {
<a name="l05022"></a>05022                         $thumbnails = array_values(SimplePie_Misc::array_unique($thumbnails));
<a name="l05023"></a>05023                      }
<a name="l05024"></a>05024                   }
<a name="l05025"></a>05025                   <span class="keywordflow">else</span>
<a name="l05026"></a>05026                   {
<a name="l05027"></a>05027                      $thumbnails = $thumbnails_parent;
<a name="l05028"></a>05028                   }
<a name="l05029"></a>05029 
<a name="l05030"></a>05030                   <span class="comment">// TITLES</span>
<a name="l05031"></a>05031                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;title&#39;</span>]))
<a name="l05032"></a>05032                   {
<a name="l05033"></a>05033                      $title = $this-&gt;sanitize($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;title&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05034"></a>05034                   }
<a name="l05035"></a>05035                   elseif (isset($group[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;title&#39;</span>]))
<a name="l05036"></a>05036                   {
<a name="l05037"></a>05037                      $title = $this-&gt;sanitize($group[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;title&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05038"></a>05038                   }
<a name="l05039"></a>05039                   <span class="keywordflow">else</span>
<a name="l05040"></a>05040                   {
<a name="l05041"></a>05041                      $title = $title_parent;
<a name="l05042"></a>05042                   }
<a name="l05043"></a>05043 
<a name="l05044"></a>05044                   $this-&gt;data[<span class="stringliteral">&#39;enclosures&#39;</span>][] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;enclosure_class($url, $type, $length, $this-&gt;feed-&gt;javascript, $bitrate, $captions, $categories, $channels, $copyrights, $credits, $description, $duration, $expression, $framerate, $hashes, $height, $keywords, $lang, $medium, $player, $ratings, $restrictions, $samplingrate, $thumbnails, $title, $width);
<a name="l05045"></a>05045                }
<a name="l05046"></a>05046             }
<a name="l05047"></a>05047          }
<a name="l05048"></a>05048 
<a name="l05049"></a>05049          <span class="comment">// If we have standalone media:content tags, loop through them.</span>
<a name="l05050"></a>05050          <span class="keywordflow">if</span> (isset($this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;content&#39;</span>]))
<a name="l05051"></a>05051          {
<a name="l05052"></a>05052             <span class="keywordflow">foreach</span> ((array) $this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;content&#39;</span>] as $content)
<a name="l05053"></a>05053             {
<a name="l05054"></a>05054                <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;url&#39;</span>]))
<a name="l05055"></a>05055                {
<a name="l05056"></a>05056                   <span class="comment">// Attributes</span>
<a name="l05057"></a>05057                   $bitrate = null;
<a name="l05058"></a>05058                   $channels = null;
<a name="l05059"></a>05059                   $duration = null;
<a name="l05060"></a>05060                   $expression = null;
<a name="l05061"></a>05061                   $framerate = null;
<a name="l05062"></a>05062                   $height = null;
<a name="l05063"></a>05063                   $javascript = null;
<a name="l05064"></a>05064                   $lang = null;
<a name="l05065"></a>05065                   $length = null;
<a name="l05066"></a>05066                   $medium = null;
<a name="l05067"></a>05067                   $samplingrate = null;
<a name="l05068"></a>05068                   $type = null;
<a name="l05069"></a>05069                   $url = null;
<a name="l05070"></a>05070                   $width = null;
<a name="l05071"></a>05071 
<a name="l05072"></a>05072                   <span class="comment">// Elements</span>
<a name="l05073"></a>05073                   $captions = null;
<a name="l05074"></a>05074                   $categories = null;
<a name="l05075"></a>05075                   $copyrights = null;
<a name="l05076"></a>05076                   $credits = null;
<a name="l05077"></a>05077                   $description = null;
<a name="l05078"></a>05078                   $hashes = null;
<a name="l05079"></a>05079                   $keywords = null;
<a name="l05080"></a>05080                   $player = null;
<a name="l05081"></a>05081                   $ratings = null;
<a name="l05082"></a>05082                   $restrictions = null;
<a name="l05083"></a>05083                   $thumbnails = null;
<a name="l05084"></a>05084                   $title = null;
<a name="l05085"></a>05085 
<a name="l05086"></a>05086                   <span class="comment">// Start checking the attributes of media:content</span>
<a name="l05087"></a>05087                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;bitrate&#39;</span>]))
<a name="l05088"></a>05088                   {
<a name="l05089"></a>05089                      $bitrate = $this-&gt;sanitize($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;bitrate&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05090"></a>05090                   }
<a name="l05091"></a>05091                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;channels&#39;</span>]))
<a name="l05092"></a>05092                   {
<a name="l05093"></a>05093                      $channels = $this-&gt;sanitize($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;channels&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05094"></a>05094                   }
<a name="l05095"></a>05095                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;duration&#39;</span>]))
<a name="l05096"></a>05096                   {
<a name="l05097"></a>05097                      $duration = $this-&gt;sanitize($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;duration&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05098"></a>05098                   }
<a name="l05099"></a>05099                   <span class="keywordflow">else</span>
<a name="l05100"></a>05100                   {
<a name="l05101"></a>05101                      $duration = $duration_parent;
<a name="l05102"></a>05102                   }
<a name="l05103"></a>05103                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;expression&#39;</span>]))
<a name="l05104"></a>05104                   {
<a name="l05105"></a>05105                      $expression = $this-&gt;sanitize($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;expression&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05106"></a>05106                   }
<a name="l05107"></a>05107                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;framerate&#39;</span>]))
<a name="l05108"></a>05108                   {
<a name="l05109"></a>05109                      $framerate = $this-&gt;sanitize($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;framerate&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05110"></a>05110                   }
<a name="l05111"></a>05111                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;height&#39;</span>]))
<a name="l05112"></a>05112                   {
<a name="l05113"></a>05113                      $height = $this-&gt;sanitize($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;height&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05114"></a>05114                   }
<a name="l05115"></a>05115                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;lang&#39;</span>]))
<a name="l05116"></a>05116                   {
<a name="l05117"></a>05117                      $lang = $this-&gt;sanitize($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;lang&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05118"></a>05118                   }
<a name="l05119"></a>05119                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;fileSize&#39;</span>]))
<a name="l05120"></a>05120                   {
<a name="l05121"></a>05121                      $length = ceil($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;fileSize&#39;</span>]);
<a name="l05122"></a>05122                   }
<a name="l05123"></a>05123                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;medium&#39;</span>]))
<a name="l05124"></a>05124                   {
<a name="l05125"></a>05125                      $medium = $this-&gt;sanitize($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;medium&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05126"></a>05126                   }
<a name="l05127"></a>05127                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;samplingrate&#39;</span>]))
<a name="l05128"></a>05128                   {
<a name="l05129"></a>05129                      $samplingrate = $this-&gt;sanitize($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;samplingrate&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05130"></a>05130                   }
<a name="l05131"></a>05131                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>]))
<a name="l05132"></a>05132                   {
<a name="l05133"></a>05133                      $type = $this-&gt;sanitize($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05134"></a>05134                   }
<a name="l05135"></a>05135                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;width&#39;</span>]))
<a name="l05136"></a>05136                   {
<a name="l05137"></a>05137                      $width = $this-&gt;sanitize($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;width&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05138"></a>05138                   }
<a name="l05139"></a>05139                   $url = $this-&gt;sanitize($content[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;url&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI);
<a name="l05140"></a>05140 
<a name="l05141"></a>05141                   <span class="comment">// Checking the other optional media: elements. Priority: media:content, media:group, item, channel</span>
<a name="l05142"></a>05142 
<a name="l05143"></a>05143                   <span class="comment">// CAPTIONS</span>
<a name="l05144"></a>05144                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;text&#39;</span>]))
<a name="l05145"></a>05145                   {
<a name="l05146"></a>05146                      <span class="keywordflow">foreach</span> ($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;text&#39;</span>] as $caption)
<a name="l05147"></a>05147                      {
<a name="l05148"></a>05148                         $caption_type = null;
<a name="l05149"></a>05149                         $caption_lang = null;
<a name="l05150"></a>05150                         $caption_startTime = null;
<a name="l05151"></a>05151                         $caption_endTime = null;
<a name="l05152"></a>05152                         $caption_text = null;
<a name="l05153"></a>05153                         <span class="keywordflow">if</span> (isset($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>]))
<a name="l05154"></a>05154                         {
<a name="l05155"></a>05155                            $caption_type = $this-&gt;sanitize($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05156"></a>05156                         }
<a name="l05157"></a>05157                         <span class="keywordflow">if</span> (isset($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;lang&#39;</span>]))
<a name="l05158"></a>05158                         {
<a name="l05159"></a>05159                            $caption_lang = $this-&gt;sanitize($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;lang&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05160"></a>05160                         }
<a name="l05161"></a>05161                         <span class="keywordflow">if</span> (isset($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;start&#39;</span>]))
<a name="l05162"></a>05162                         {
<a name="l05163"></a>05163                            $caption_startTime = $this-&gt;sanitize($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;start&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05164"></a>05164                         }
<a name="l05165"></a>05165                         <span class="keywordflow">if</span> (isset($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;end&#39;</span>]))
<a name="l05166"></a>05166                         {
<a name="l05167"></a>05167                            $caption_endTime = $this-&gt;sanitize($caption[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;end&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05168"></a>05168                         }
<a name="l05169"></a>05169                         <span class="keywordflow">if</span> (isset($caption[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l05170"></a>05170                         {
<a name="l05171"></a>05171                            $caption_text = $this-&gt;sanitize($caption[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05172"></a>05172                         }
<a name="l05173"></a>05173                         $captions[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;caption_class($caption_type, $caption_lang, $caption_startTime, $caption_endTime, $caption_text);
<a name="l05174"></a>05174                      }
<a name="l05175"></a>05175                      <span class="keywordflow">if</span> (is_array($captions))
<a name="l05176"></a>05176                      {
<a name="l05177"></a>05177                         $captions = array_values(SimplePie_Misc::array_unique($captions));
<a name="l05178"></a>05178                      }
<a name="l05179"></a>05179                   }
<a name="l05180"></a>05180                   <span class="keywordflow">else</span>
<a name="l05181"></a>05181                   {
<a name="l05182"></a>05182                      $captions = $captions_parent;
<a name="l05183"></a>05183                   }
<a name="l05184"></a>05184 
<a name="l05185"></a>05185                   <span class="comment">// CATEGORIES</span>
<a name="l05186"></a>05186                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;category&#39;</span>]))
<a name="l05187"></a>05187                   {
<a name="l05188"></a>05188                      <span class="keywordflow">foreach</span> ((array) $content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;category&#39;</span>] as $category)
<a name="l05189"></a>05189                      {
<a name="l05190"></a>05190                         $term = null;
<a name="l05191"></a>05191                         $scheme = null;
<a name="l05192"></a>05192                         $label = null;
<a name="l05193"></a>05193                         <span class="keywordflow">if</span> (isset($category[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l05194"></a>05194                         {
<a name="l05195"></a>05195                            $term = $this-&gt;sanitize($category[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05196"></a>05196                         }
<a name="l05197"></a>05197                         <span class="keywordflow">if</span> (isset($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>]))
<a name="l05198"></a>05198                         {
<a name="l05199"></a>05199                            $scheme = $this-&gt;sanitize($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05200"></a>05200                         }
<a name="l05201"></a>05201                         <span class="keywordflow">else</span>
<a name="l05202"></a>05202                         {
<a name="l05203"></a>05203                            $scheme = <span class="stringliteral">&#39;http://search.yahoo.com/mrss/category_schema&#39;</span>;
<a name="l05204"></a>05204                         }
<a name="l05205"></a>05205                         <span class="keywordflow">if</span> (isset($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;label&#39;</span>]))
<a name="l05206"></a>05206                         {
<a name="l05207"></a>05207                            $label = $this-&gt;sanitize($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;label&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05208"></a>05208                         }
<a name="l05209"></a>05209                         $categories[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;category_class($term, $scheme, $label);
<a name="l05210"></a>05210                      }
<a name="l05211"></a>05211                   }
<a name="l05212"></a>05212                   <span class="keywordflow">if</span> (is_array($categories) &amp;&amp; is_array($categories_parent))
<a name="l05213"></a>05213                   {
<a name="l05214"></a>05214                      $categories = array_values(SimplePie_Misc::array_unique(array_merge($categories, $categories_parent)));
<a name="l05215"></a>05215                   }
<a name="l05216"></a>05216                   elseif (is_array($categories))
<a name="l05217"></a>05217                   {
<a name="l05218"></a>05218                      $categories = array_values(SimplePie_Misc::array_unique($categories));
<a name="l05219"></a>05219                   }
<a name="l05220"></a>05220                   elseif (is_array($categories_parent))
<a name="l05221"></a>05221                   {
<a name="l05222"></a>05222                      $categories = array_values(SimplePie_Misc::array_unique($categories_parent));
<a name="l05223"></a>05223                   }
<a name="l05224"></a>05224                   <span class="keywordflow">else</span>
<a name="l05225"></a>05225                   {
<a name="l05226"></a>05226                      $categories = null;
<a name="l05227"></a>05227                   }
<a name="l05228"></a>05228 
<a name="l05229"></a>05229                   <span class="comment">// COPYRIGHTS</span>
<a name="l05230"></a>05230                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;copyright&#39;</span>]))
<a name="l05231"></a>05231                   {
<a name="l05232"></a>05232                      $copyright_url = null;
<a name="l05233"></a>05233                      $copyright_label = null;
<a name="l05234"></a>05234                      <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;copyright&#39;</span>][0][<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;url&#39;</span>]))
<a name="l05235"></a>05235                      {
<a name="l05236"></a>05236                         $copyright_url = $this-&gt;sanitize($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;copyright&#39;</span>][0][<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;url&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05237"></a>05237                      }
<a name="l05238"></a>05238                      <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;copyright&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l05239"></a>05239                      {
<a name="l05240"></a>05240                         $copyright_label = $this-&gt;sanitize($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;copyright&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05241"></a>05241                      }
<a name="l05242"></a>05242                      $copyrights =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;copyright_class($copyright_url, $copyright_label);
<a name="l05243"></a>05243                   }
<a name="l05244"></a>05244                   <span class="keywordflow">else</span>
<a name="l05245"></a>05245                   {
<a name="l05246"></a>05246                      $copyrights = $copyrights_parent;
<a name="l05247"></a>05247                   }
<a name="l05248"></a>05248 
<a name="l05249"></a>05249                   <span class="comment">// CREDITS</span>
<a name="l05250"></a>05250                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;credit&#39;</span>]))
<a name="l05251"></a>05251                   {
<a name="l05252"></a>05252                      <span class="keywordflow">foreach</span> ($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;credit&#39;</span>] as $credit)
<a name="l05253"></a>05253                      {
<a name="l05254"></a>05254                         $credit_role = null;
<a name="l05255"></a>05255                         $credit_scheme = null;
<a name="l05256"></a>05256                         $credit_name = null;
<a name="l05257"></a>05257                         <span class="keywordflow">if</span> (isset($credit[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;role&#39;</span>]))
<a name="l05258"></a>05258                         {
<a name="l05259"></a>05259                            $credit_role = $this-&gt;sanitize($credit[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;role&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05260"></a>05260                         }
<a name="l05261"></a>05261                         <span class="keywordflow">if</span> (isset($credit[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>]))
<a name="l05262"></a>05262                         {
<a name="l05263"></a>05263                            $credit_scheme = $this-&gt;sanitize($credit[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05264"></a>05264                         }
<a name="l05265"></a>05265                         <span class="keywordflow">else</span>
<a name="l05266"></a>05266                         {
<a name="l05267"></a>05267                            $credit_scheme = <span class="stringliteral">&#39;urn:ebu&#39;</span>;
<a name="l05268"></a>05268                         }
<a name="l05269"></a>05269                         <span class="keywordflow">if</span> (isset($credit[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l05270"></a>05270                         {
<a name="l05271"></a>05271                            $credit_name = $this-&gt;sanitize($credit[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05272"></a>05272                         }
<a name="l05273"></a>05273                         $credits[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;credit_class($credit_role, $credit_scheme, $credit_name);
<a name="l05274"></a>05274                      }
<a name="l05275"></a>05275                      <span class="keywordflow">if</span> (is_array($credits))
<a name="l05276"></a>05276                      {
<a name="l05277"></a>05277                         $credits = array_values(SimplePie_Misc::array_unique($credits));
<a name="l05278"></a>05278                      }
<a name="l05279"></a>05279                   }
<a name="l05280"></a>05280                   <span class="keywordflow">else</span>
<a name="l05281"></a>05281                   {
<a name="l05282"></a>05282                      $credits = $credits_parent;
<a name="l05283"></a>05283                   }
<a name="l05284"></a>05284 
<a name="l05285"></a>05285                   <span class="comment">// DESCRIPTION</span>
<a name="l05286"></a>05286                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;description&#39;</span>]))
<a name="l05287"></a>05287                   {
<a name="l05288"></a>05288                      $description = $this-&gt;sanitize($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;description&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05289"></a>05289                   }
<a name="l05290"></a>05290                   <span class="keywordflow">else</span>
<a name="l05291"></a>05291                   {
<a name="l05292"></a>05292                      $description = $description_parent;
<a name="l05293"></a>05293                   }
<a name="l05294"></a>05294 
<a name="l05295"></a>05295                   <span class="comment">// HASHES</span>
<a name="l05296"></a>05296                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;hash&#39;</span>]))
<a name="l05297"></a>05297                   {
<a name="l05298"></a>05298                      <span class="keywordflow">foreach</span> ($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;hash&#39;</span>] as $hash)
<a name="l05299"></a>05299                      {
<a name="l05300"></a>05300                         $value = null;
<a name="l05301"></a>05301                         $algo = null;
<a name="l05302"></a>05302                         <span class="keywordflow">if</span> (isset($hash[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l05303"></a>05303                         {
<a name="l05304"></a>05304                            $value = $this-&gt;sanitize($hash[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05305"></a>05305                         }
<a name="l05306"></a>05306                         <span class="keywordflow">if</span> (isset($hash[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;algo&#39;</span>]))
<a name="l05307"></a>05307                         {
<a name="l05308"></a>05308                            $algo = $this-&gt;sanitize($hash[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;algo&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05309"></a>05309                         }
<a name="l05310"></a>05310                         <span class="keywordflow">else</span>
<a name="l05311"></a>05311                         {
<a name="l05312"></a>05312                            $algo = <span class="stringliteral">&#39;md5&#39;</span>;
<a name="l05313"></a>05313                         }
<a name="l05314"></a>05314                         $hashes[] = $algo.<span class="charliteral">&#39;:&#39;</span>.$value;
<a name="l05315"></a>05315                      }
<a name="l05316"></a>05316                      <span class="keywordflow">if</span> (is_array($hashes))
<a name="l05317"></a>05317                      {
<a name="l05318"></a>05318                         $hashes = array_values(SimplePie_Misc::array_unique($hashes));
<a name="l05319"></a>05319                      }
<a name="l05320"></a>05320                   }
<a name="l05321"></a>05321                   <span class="keywordflow">else</span>
<a name="l05322"></a>05322                   {
<a name="l05323"></a>05323                      $hashes = $hashes_parent;
<a name="l05324"></a>05324                   }
<a name="l05325"></a>05325 
<a name="l05326"></a>05326                   <span class="comment">// KEYWORDS</span>
<a name="l05327"></a>05327                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;keywords&#39;</span>]))
<a name="l05328"></a>05328                   {
<a name="l05329"></a>05329                      <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;keywords&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l05330"></a>05330                      {
<a name="l05331"></a>05331                         $temp = explode(<span class="charliteral">&#39;,&#39;</span>, $this-&gt;sanitize($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;keywords&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT));
<a name="l05332"></a>05332                         <span class="keywordflow">foreach</span> ($temp as $word)
<a name="l05333"></a>05333                         {
<a name="l05334"></a>05334                            $keywords[] = trim($word);
<a name="l05335"></a>05335                         }
<a name="l05336"></a>05336                         unset($temp);
<a name="l05337"></a>05337                      }
<a name="l05338"></a>05338                      <span class="keywordflow">if</span> (is_array($keywords))
<a name="l05339"></a>05339                      {
<a name="l05340"></a>05340                         $keywords = array_values(SimplePie_Misc::array_unique($keywords));
<a name="l05341"></a>05341                      }
<a name="l05342"></a>05342                   }
<a name="l05343"></a>05343                   <span class="keywordflow">else</span>
<a name="l05344"></a>05344                   {
<a name="l05345"></a>05345                      $keywords = $keywords_parent;
<a name="l05346"></a>05346                   }
<a name="l05347"></a>05347 
<a name="l05348"></a>05348                   <span class="comment">// PLAYER</span>
<a name="l05349"></a>05349                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;player&#39;</span>]))
<a name="l05350"></a>05350                   {
<a name="l05351"></a>05351                      $player = $this-&gt;sanitize($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;player&#39;</span>][0][<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;url&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI);
<a name="l05352"></a>05352                   }
<a name="l05353"></a>05353                   <span class="keywordflow">else</span>
<a name="l05354"></a>05354                   {
<a name="l05355"></a>05355                      $player = $player_parent;
<a name="l05356"></a>05356                   }
<a name="l05357"></a>05357 
<a name="l05358"></a>05358                   <span class="comment">// RATINGS</span>
<a name="l05359"></a>05359                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;rating&#39;</span>]))
<a name="l05360"></a>05360                   {
<a name="l05361"></a>05361                      <span class="keywordflow">foreach</span> ($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;rating&#39;</span>] as $rating)
<a name="l05362"></a>05362                      {
<a name="l05363"></a>05363                         $rating_scheme = null;
<a name="l05364"></a>05364                         $rating_value = null;
<a name="l05365"></a>05365                         <span class="keywordflow">if</span> (isset($rating[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>]))
<a name="l05366"></a>05366                         {
<a name="l05367"></a>05367                            $rating_scheme = $this-&gt;sanitize($rating[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05368"></a>05368                         }
<a name="l05369"></a>05369                         <span class="keywordflow">else</span>
<a name="l05370"></a>05370                         {
<a name="l05371"></a>05371                            $rating_scheme = <span class="stringliteral">&#39;urn:simple&#39;</span>;
<a name="l05372"></a>05372                         }
<a name="l05373"></a>05373                         <span class="keywordflow">if</span> (isset($rating[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l05374"></a>05374                         {
<a name="l05375"></a>05375                            $rating_value = $this-&gt;sanitize($rating[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05376"></a>05376                         }
<a name="l05377"></a>05377                         $ratings[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;rating_class($rating_scheme, $rating_value);
<a name="l05378"></a>05378                      }
<a name="l05379"></a>05379                      <span class="keywordflow">if</span> (is_array($ratings))
<a name="l05380"></a>05380                      {
<a name="l05381"></a>05381                         $ratings = array_values(SimplePie_Misc::array_unique($ratings));
<a name="l05382"></a>05382                      }
<a name="l05383"></a>05383                   }
<a name="l05384"></a>05384                   <span class="keywordflow">else</span>
<a name="l05385"></a>05385                   {
<a name="l05386"></a>05386                      $ratings = $ratings_parent;
<a name="l05387"></a>05387                   }
<a name="l05388"></a>05388 
<a name="l05389"></a>05389                   <span class="comment">// RESTRICTIONS</span>
<a name="l05390"></a>05390                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;restriction&#39;</span>]))
<a name="l05391"></a>05391                   {
<a name="l05392"></a>05392                      <span class="keywordflow">foreach</span> ($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;restriction&#39;</span>] as $restriction)
<a name="l05393"></a>05393                      {
<a name="l05394"></a>05394                         $restriction_relationship = null;
<a name="l05395"></a>05395                         $restriction_type = null;
<a name="l05396"></a>05396                         $restriction_value = null;
<a name="l05397"></a>05397                         <span class="keywordflow">if</span> (isset($restriction[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;relationship&#39;</span>]))
<a name="l05398"></a>05398                         {
<a name="l05399"></a>05399                            $restriction_relationship = $this-&gt;sanitize($restriction[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;relationship&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05400"></a>05400                         }
<a name="l05401"></a>05401                         <span class="keywordflow">if</span> (isset($restriction[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>]))
<a name="l05402"></a>05402                         {
<a name="l05403"></a>05403                            $restriction_type = $this-&gt;sanitize($restriction[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05404"></a>05404                         }
<a name="l05405"></a>05405                         <span class="keywordflow">if</span> (isset($restriction[<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l05406"></a>05406                         {
<a name="l05407"></a>05407                            $restriction_value = $this-&gt;sanitize($restriction[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05408"></a>05408                         }
<a name="l05409"></a>05409                         $restrictions[] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;restriction_class($restriction_relationship, $restriction_type, $restriction_value);
<a name="l05410"></a>05410                      }
<a name="l05411"></a>05411                      <span class="keywordflow">if</span> (is_array($restrictions))
<a name="l05412"></a>05412                      {
<a name="l05413"></a>05413                         $restrictions = array_values(SimplePie_Misc::array_unique($restrictions));
<a name="l05414"></a>05414                      }
<a name="l05415"></a>05415                   }
<a name="l05416"></a>05416                   <span class="keywordflow">else</span>
<a name="l05417"></a>05417                   {
<a name="l05418"></a>05418                      $restrictions = $restrictions_parent;
<a name="l05419"></a>05419                   }
<a name="l05420"></a>05420 
<a name="l05421"></a>05421                   <span class="comment">// THUMBNAILS</span>
<a name="l05422"></a>05422                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;thumbnail&#39;</span>]))
<a name="l05423"></a>05423                   {
<a name="l05424"></a>05424                      <span class="keywordflow">foreach</span> ($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;thumbnail&#39;</span>] as $thumbnail)
<a name="l05425"></a>05425                      {
<a name="l05426"></a>05426                         $thumbnails[] = $this-&gt;sanitize($thumbnail[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;url&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI);
<a name="l05427"></a>05427                      }
<a name="l05428"></a>05428                      <span class="keywordflow">if</span> (is_array($thumbnails))
<a name="l05429"></a>05429                      {
<a name="l05430"></a>05430                         $thumbnails = array_values(SimplePie_Misc::array_unique($thumbnails));
<a name="l05431"></a>05431                      }
<a name="l05432"></a>05432                   }
<a name="l05433"></a>05433                   <span class="keywordflow">else</span>
<a name="l05434"></a>05434                   {
<a name="l05435"></a>05435                      $thumbnails = $thumbnails_parent;
<a name="l05436"></a>05436                   }
<a name="l05437"></a>05437 
<a name="l05438"></a>05438                   <span class="comment">// TITLES</span>
<a name="l05439"></a>05439                   <span class="keywordflow">if</span> (isset($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;title&#39;</span>]))
<a name="l05440"></a>05440                   {
<a name="l05441"></a>05441                      $title = $this-&gt;sanitize($content[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_MEDIARSS][<span class="stringliteral">&#39;title&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05442"></a>05442                   }
<a name="l05443"></a>05443                   <span class="keywordflow">else</span>
<a name="l05444"></a>05444                   {
<a name="l05445"></a>05445                      $title = $title_parent;
<a name="l05446"></a>05446                   }
<a name="l05447"></a>05447 
<a name="l05448"></a>05448                   $this-&gt;data[<span class="stringliteral">&#39;enclosures&#39;</span>][] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;enclosure_class($url, $type, $length, $this-&gt;feed-&gt;javascript, $bitrate, $captions, $categories, $channels, $copyrights, $credits, $description, $duration, $expression, $framerate, $hashes, $height, $keywords, $lang, $medium, $player, $ratings, $restrictions, $samplingrate, $thumbnails, $title, $width);
<a name="l05449"></a>05449                }
<a name="l05450"></a>05450             }
<a name="l05451"></a>05451          }
<a name="l05452"></a>05452 
<a name="l05453"></a>05453          <span class="keywordflow">foreach</span> ((array) $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;link&#39;</span>) as $link)
<a name="l05454"></a>05454          {
<a name="l05455"></a>05455             <span class="keywordflow">if</span> (isset($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;href&#39;</span>]) &amp;&amp; !empty($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;rel&#39;</span>]) &amp;&amp; $link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;rel&#39;</span>] === <span class="stringliteral">&#39;enclosure&#39;</span>)
<a name="l05456"></a>05456             {
<a name="l05457"></a>05457                <span class="comment">// Attributes</span>
<a name="l05458"></a>05458                $bitrate = null;
<a name="l05459"></a>05459                $channels = null;
<a name="l05460"></a>05460                $duration = null;
<a name="l05461"></a>05461                $expression = null;
<a name="l05462"></a>05462                $framerate = null;
<a name="l05463"></a>05463                $height = null;
<a name="l05464"></a>05464                $javascript = null;
<a name="l05465"></a>05465                $lang = null;
<a name="l05466"></a>05466                $length = null;
<a name="l05467"></a>05467                $medium = null;
<a name="l05468"></a>05468                $samplingrate = null;
<a name="l05469"></a>05469                $type = null;
<a name="l05470"></a>05470                $url = null;
<a name="l05471"></a>05471                $width = null;
<a name="l05472"></a>05472 
<a name="l05473"></a>05473                $url = $this-&gt;sanitize($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;href&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($link));
<a name="l05474"></a>05474                <span class="keywordflow">if</span> (isset($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>]))
<a name="l05475"></a>05475                {
<a name="l05476"></a>05476                   $type = $this-&gt;sanitize($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05477"></a>05477                }
<a name="l05478"></a>05478                <span class="keywordflow">if</span> (isset($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;length&#39;</span>]))
<a name="l05479"></a>05479                {
<a name="l05480"></a>05480                   $length = ceil($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;length&#39;</span>]);
<a name="l05481"></a>05481                }
<a name="l05482"></a>05482 
<a name="l05483"></a>05483                <span class="comment">// Since we don&#39;t have group or content for these, we&#39;ll just pass the &#39;*_parent&#39; variables directly to the constructor</span>
<a name="l05484"></a>05484                $this-&gt;data[<span class="stringliteral">&#39;enclosures&#39;</span>][] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;enclosure_class($url, $type, $length, $this-&gt;feed-&gt;javascript, $bitrate, $captions_parent, $categories_parent, $channels, $copyrights_parent, $credits_parent, $description_parent, $duration_parent, $expression, $framerate, $hashes_parent, $height, $keywords_parent, $lang, $medium, $player_parent, $ratings_parent, $restrictions_parent, $samplingrate, $thumbnails_parent, $title_parent, $width);
<a name="l05485"></a>05485             }
<a name="l05486"></a>05486          }
<a name="l05487"></a>05487 
<a name="l05488"></a>05488          <span class="keywordflow">foreach</span> ((array) $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_ATOM_03, <span class="stringliteral">&#39;link&#39;</span>) as $link)
<a name="l05489"></a>05489          {
<a name="l05490"></a>05490             <span class="keywordflow">if</span> (isset($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;href&#39;</span>]) &amp;&amp; !empty($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;rel&#39;</span>]) &amp;&amp; $link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;rel&#39;</span>] === <span class="stringliteral">&#39;enclosure&#39;</span>)
<a name="l05491"></a>05491             {
<a name="l05492"></a>05492                <span class="comment">// Attributes</span>
<a name="l05493"></a>05493                $bitrate = null;
<a name="l05494"></a>05494                $channels = null;
<a name="l05495"></a>05495                $duration = null;
<a name="l05496"></a>05496                $expression = null;
<a name="l05497"></a>05497                $framerate = null;
<a name="l05498"></a>05498                $height = null;
<a name="l05499"></a>05499                $javascript = null;
<a name="l05500"></a>05500                $lang = null;
<a name="l05501"></a>05501                $length = null;
<a name="l05502"></a>05502                $medium = null;
<a name="l05503"></a>05503                $samplingrate = null;
<a name="l05504"></a>05504                $type = null;
<a name="l05505"></a>05505                $url = null;
<a name="l05506"></a>05506                $width = null;
<a name="l05507"></a>05507 
<a name="l05508"></a>05508                $url = $this-&gt;sanitize($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;href&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($link));
<a name="l05509"></a>05509                <span class="keywordflow">if</span> (isset($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>]))
<a name="l05510"></a>05510                {
<a name="l05511"></a>05511                   $type = $this-&gt;sanitize($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05512"></a>05512                }
<a name="l05513"></a>05513                <span class="keywordflow">if</span> (isset($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;length&#39;</span>]))
<a name="l05514"></a>05514                {
<a name="l05515"></a>05515                   $length = ceil($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;length&#39;</span>]);
<a name="l05516"></a>05516                }
<a name="l05517"></a>05517 
<a name="l05518"></a>05518                <span class="comment">// Since we don&#39;t have group or content for these, we&#39;ll just pass the &#39;*_parent&#39; variables directly to the constructor</span>
<a name="l05519"></a>05519                $this-&gt;data[<span class="stringliteral">&#39;enclosures&#39;</span>][] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;enclosure_class($url, $type, $length, $this-&gt;feed-&gt;javascript, $bitrate, $captions_parent, $categories_parent, $channels, $copyrights_parent, $credits_parent, $description_parent, $duration_parent, $expression, $framerate, $hashes_parent, $height, $keywords_parent, $lang, $medium, $player_parent, $ratings_parent, $restrictions_parent, $samplingrate, $thumbnails_parent, $title_parent, $width);
<a name="l05520"></a>05520             }
<a name="l05521"></a>05521          }
<a name="l05522"></a>05522 
<a name="l05523"></a>05523          <span class="keywordflow">if</span> ($enclosure = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_RSS_20, <span class="stringliteral">&#39;enclosure&#39;</span>))
<a name="l05524"></a>05524          {
<a name="l05525"></a>05525             <span class="keywordflow">if</span> (isset($enclosure[0][<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;url&#39;</span>]))
<a name="l05526"></a>05526             {
<a name="l05527"></a>05527                <span class="comment">// Attributes</span>
<a name="l05528"></a>05528                $bitrate = null;
<a name="l05529"></a>05529                $channels = null;
<a name="l05530"></a>05530                $duration = null;
<a name="l05531"></a>05531                $expression = null;
<a name="l05532"></a>05532                $framerate = null;
<a name="l05533"></a>05533                $height = null;
<a name="l05534"></a>05534                $javascript = null;
<a name="l05535"></a>05535                $lang = null;
<a name="l05536"></a>05536                $length = null;
<a name="l05537"></a>05537                $medium = null;
<a name="l05538"></a>05538                $samplingrate = null;
<a name="l05539"></a>05539                $type = null;
<a name="l05540"></a>05540                $url = null;
<a name="l05541"></a>05541                $width = null;
<a name="l05542"></a>05542 
<a name="l05543"></a>05543                $url = $this-&gt;sanitize($enclosure[0][<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;url&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($enclosure[0]));
<a name="l05544"></a>05544                <span class="keywordflow">if</span> (isset($enclosure[0][<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>]))
<a name="l05545"></a>05545                {
<a name="l05546"></a>05546                   $type = $this-&gt;sanitize($enclosure[0][<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05547"></a>05547                }
<a name="l05548"></a>05548                <span class="keywordflow">if</span> (isset($enclosure[0][<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;length&#39;</span>]))
<a name="l05549"></a>05549                {
<a name="l05550"></a>05550                   $length = ceil($enclosure[0][<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;length&#39;</span>]);
<a name="l05551"></a>05551                }
<a name="l05552"></a>05552 
<a name="l05553"></a>05553                <span class="comment">// Since we don&#39;t have group or content for these, we&#39;ll just pass the &#39;*_parent&#39; variables directly to the constructor</span>
<a name="l05554"></a>05554                $this-&gt;data[<span class="stringliteral">&#39;enclosures&#39;</span>][] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;enclosure_class($url, $type, $length, $this-&gt;feed-&gt;javascript, $bitrate, $captions_parent, $categories_parent, $channels, $copyrights_parent, $credits_parent, $description_parent, $duration_parent, $expression, $framerate, $hashes_parent, $height, $keywords_parent, $lang, $medium, $player_parent, $ratings_parent, $restrictions_parent, $samplingrate, $thumbnails_parent, $title_parent, $width);
<a name="l05555"></a>05555             }
<a name="l05556"></a>05556          }
<a name="l05557"></a>05557 
<a name="l05558"></a>05558          <span class="keywordflow">if</span> (<span class="keyword">sizeof</span>($this-&gt;data[<span class="stringliteral">&#39;enclosures&#39;</span>]) === 0 &amp;&amp; ($url || $type || $length || $bitrate || $captions_parent || $categories_parent || $channels || $copyrights_parent || $credits_parent || $description_parent || $duration_parent || $expression || $framerate || $hashes_parent || $height || $keywords_parent || $lang || $medium || $player_parent || $ratings_parent || $restrictions_parent || $samplingrate || $thumbnails_parent || $title_parent || $width))
<a name="l05559"></a>05559          {
<a name="l05560"></a>05560             <span class="comment">// Since we don&#39;t have group or content for these, we&#39;ll just pass the &#39;*_parent&#39; variables directly to the constructor</span>
<a name="l05561"></a>05561             $this-&gt;data[<span class="stringliteral">&#39;enclosures&#39;</span>][] =&amp; <span class="keyword">new</span> $this-&gt;feed-&gt;enclosure_class($url, $type, $length, $this-&gt;feed-&gt;javascript, $bitrate, $captions_parent, $categories_parent, $channels, $copyrights_parent, $credits_parent, $description_parent, $duration_parent, $expression, $framerate, $hashes_parent, $height, $keywords_parent, $lang, $medium, $player_parent, $ratings_parent, $restrictions_parent, $samplingrate, $thumbnails_parent, $title_parent, $width);
<a name="l05562"></a>05562          }
<a name="l05563"></a>05563 
<a name="l05564"></a>05564          $this-&gt;data[<span class="stringliteral">&#39;enclosures&#39;</span>] = array_values(SimplePie_Misc::array_unique($this-&gt;data[<span class="stringliteral">&#39;enclosures&#39;</span>]));
<a name="l05565"></a>05565       }
<a name="l05566"></a>05566       <span class="keywordflow">if</span> (!empty($this-&gt;data[<span class="stringliteral">&#39;enclosures&#39;</span>]))
<a name="l05567"></a>05567       {
<a name="l05568"></a>05568          <span class="keywordflow">return</span> $this-&gt;data[<span class="stringliteral">&#39;enclosures&#39;</span>];
<a name="l05569"></a>05569       }
<a name="l05570"></a>05570       <span class="keywordflow">else</span>
<a name="l05571"></a>05571       {
<a name="l05572"></a>05572          <span class="keywordflow">return</span> null;
<a name="l05573"></a>05573       }
<a name="l05574"></a>05574    }
<a name="l05575"></a>05575 
<a name="l05576"></a>05576    <span class="keyword">function</span> get_latitude()
<a name="l05577"></a>05577    {
<a name="l05578"></a>05578       <span class="keywordflow">if</span> ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_W3C_BASIC_GEO, <span class="stringliteral">&#39;lat&#39;</span>))
<a name="l05579"></a>05579       {
<a name="l05580"></a>05580          <span class="keywordflow">return</span> (<span class="keywordtype">float</span>) $return[0][<span class="stringliteral">&#39;data&#39;</span>];
<a name="l05581"></a>05581       }
<a name="l05582"></a>05582       elseif (($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_GEORSS, <span class="stringliteral">&#39;point&#39;</span>)) &amp;&amp; preg_match(<span class="stringliteral">&#39;/^((?:-)?[0-9]+(?:\.[0-9]+)) ((?:-)?[0-9]+(?:\.[0-9]+))$/&#39;</span>, $return[0][<span class="stringliteral">&#39;data&#39;</span>], $match))
<a name="l05583"></a>05583       {
<a name="l05584"></a>05584          <span class="keywordflow">return</span> (<span class="keywordtype">float</span>) $match[1];
<a name="l05585"></a>05585       }
<a name="l05586"></a>05586       <span class="keywordflow">else</span>
<a name="l05587"></a>05587       {
<a name="l05588"></a>05588          <span class="keywordflow">return</span> null;
<a name="l05589"></a>05589       }
<a name="l05590"></a>05590    }
<a name="l05591"></a>05591 
<a name="l05592"></a>05592    <span class="keyword">function</span> get_longitude()
<a name="l05593"></a>05593    {
<a name="l05594"></a>05594       <span class="keywordflow">if</span> ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_W3C_BASIC_GEO, <span class="stringliteral">&#39;long&#39;</span>))
<a name="l05595"></a>05595       {
<a name="l05596"></a>05596          <span class="keywordflow">return</span> (<span class="keywordtype">float</span>) $return[0][<span class="stringliteral">&#39;data&#39;</span>];
<a name="l05597"></a>05597       }
<a name="l05598"></a>05598       elseif ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_W3C_BASIC_GEO, <span class="stringliteral">&#39;lon&#39;</span>))
<a name="l05599"></a>05599       {
<a name="l05600"></a>05600          <span class="keywordflow">return</span> (<span class="keywordtype">float</span>) $return[0][<span class="stringliteral">&#39;data&#39;</span>];
<a name="l05601"></a>05601       }
<a name="l05602"></a>05602       elseif (($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_GEORSS, <span class="stringliteral">&#39;point&#39;</span>)) &amp;&amp; preg_match(<span class="stringliteral">&#39;/^((?:-)?[0-9]+(?:\.[0-9]+)) ((?:-)?[0-9]+(?:\.[0-9]+))$/&#39;</span>, $return[0][<span class="stringliteral">&#39;data&#39;</span>], $match))
<a name="l05603"></a>05603       {
<a name="l05604"></a>05604          <span class="keywordflow">return</span> (<span class="keywordtype">float</span>) $match[2];
<a name="l05605"></a>05605       }
<a name="l05606"></a>05606       <span class="keywordflow">else</span>
<a name="l05607"></a>05607       {
<a name="l05608"></a>05608          <span class="keywordflow">return</span> null;
<a name="l05609"></a>05609       }
<a name="l05610"></a>05610    }
<a name="l05611"></a>05611 
<a name="l05612"></a>05612    <span class="keyword">function</span> get_source()
<a name="l05613"></a>05613    {
<a name="l05614"></a>05614       <span class="keywordflow">if</span> ($return = $this-&gt;get_item_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;source&#39;</span>))
<a name="l05615"></a>05615       {
<a name="l05616"></a>05616          <span class="keywordflow">return</span> <span class="keyword">new</span> $this-&gt;feed-&gt;source_class($this, $return[0]);
<a name="l05617"></a>05617       }
<a name="l05618"></a>05618       <span class="keywordflow">else</span>
<a name="l05619"></a>05619       {
<a name="l05620"></a>05620          <span class="keywordflow">return</span> null;
<a name="l05621"></a>05621       }
<a name="l05622"></a>05622    }
<a name="l05623"></a>05623 <span class="comment"></span>
<a name="l05624"></a>05624 <span class="comment">   /**</span>
<a name="l05625"></a>05625 <span class="comment">    * Creates the add_to_* methods&#39; return data</span>
<a name="l05626"></a>05626 <span class="comment">    *</span>
<a name="l05627"></a>05627 <span class="comment">    * @access private</span>
<a name="l05628"></a>05628 <span class="comment">    * @param string $item_url String to prefix to the item permalink</span>
<a name="l05629"></a>05629 <span class="comment">    * @param string $title_url String to prefix to the item title</span>
<a name="l05630"></a>05630 <span class="comment">    * (and suffix to the item permalink)</span>
<a name="l05631"></a>05631 <span class="comment">    * @return mixed URL if feed exists, false otherwise</span>
<a name="l05632"></a>05632 <span class="comment">    */</span>
<a name="l05633"></a><a class="code" href="class_simple_pie___item.html#ac4d435f7f854d104ae85b2643678e382">05633</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie___item.html#ac4d435f7f854d104ae85b2643678e382">add_to_service</a>($item_url, $title_url = null, $summary_url = null)
<a name="l05634"></a>05634    {
<a name="l05635"></a>05635       <span class="keywordflow">if</span> ($this-&gt;get_permalink() !== null)
<a name="l05636"></a>05636       {
<a name="l05637"></a>05637          $return = $item_url . rawurlencode($this-&gt;get_permalink());
<a name="l05638"></a>05638          <span class="keywordflow">if</span> ($title_url !== null &amp;&amp; $this-&gt;get_title() !== null)
<a name="l05639"></a>05639          {
<a name="l05640"></a>05640             $return .= $title_url . rawurlencode($this-&gt;get_title());
<a name="l05641"></a>05641          }
<a name="l05642"></a>05642          <span class="keywordflow">if</span> ($summary_url !== null &amp;&amp; $this-&gt;get_description() !== null)
<a name="l05643"></a>05643          {
<a name="l05644"></a>05644             $return .= $summary_url . rawurlencode($this-&gt;get_description());
<a name="l05645"></a>05645          }
<a name="l05646"></a>05646          <span class="keywordflow">return</span> $this-&gt;sanitize($return, SIMPLEPIE_CONSTRUCT_IRI);
<a name="l05647"></a>05647       }
<a name="l05648"></a>05648       <span class="keywordflow">else</span>
<a name="l05649"></a>05649       {
<a name="l05650"></a>05650          <span class="keywordflow">return</span> null;
<a name="l05651"></a>05651       }
<a name="l05652"></a>05652    }
<a name="l05653"></a>05653 
<a name="l05654"></a>05654    <span class="keyword">function</span> add_to_blinklist()
<a name="l05655"></a>05655    {
<a name="l05656"></a>05656       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie___item.html#ac4d435f7f854d104ae85b2643678e382">add_to_service</a>(<span class="stringliteral">&#39;http://www.blinklist.com/index.php?Action=Blink/addblink.php&amp;Description=&amp;Url=&#39;</span>, <span class="stringliteral">&#39;&amp;Title=&#39;</span>);
<a name="l05657"></a>05657    }
<a name="l05658"></a>05658 
<a name="l05659"></a>05659    <span class="keyword">function</span> add_to_blogmarks()
<a name="l05660"></a>05660    {
<a name="l05661"></a>05661       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie___item.html#ac4d435f7f854d104ae85b2643678e382">add_to_service</a>(<span class="stringliteral">&#39;http://blogmarks.net/my/new.php?mini=1&amp;simple=1&amp;url=&#39;</span>, <span class="stringliteral">&#39;&amp;title=&#39;</span>);
<a name="l05662"></a>05662    }
<a name="l05663"></a>05663 
<a name="l05664"></a>05664    <span class="keyword">function</span> add_to_delicious()
<a name="l05665"></a>05665    {
<a name="l05666"></a>05666       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie___item.html#ac4d435f7f854d104ae85b2643678e382">add_to_service</a>(<span class="stringliteral">&#39;http://del.icio.us/post/?v=4&amp;url=&#39;</span>, <span class="stringliteral">&#39;&amp;title=&#39;</span>);
<a name="l05667"></a>05667    }
<a name="l05668"></a>05668 
<a name="l05669"></a>05669    <span class="keyword">function</span> add_to_digg()
<a name="l05670"></a>05670    {
<a name="l05671"></a>05671       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie___item.html#ac4d435f7f854d104ae85b2643678e382">add_to_service</a>(<span class="stringliteral">&#39;http://digg.com/submit?url=&#39;</span>, <span class="stringliteral">&#39;&amp;title=&#39;</span>, <span class="stringliteral">&#39;&amp;bodytext=&#39;</span>);
<a name="l05672"></a>05672    }
<a name="l05673"></a>05673 
<a name="l05674"></a>05674    <span class="keyword">function</span> add_to_furl()
<a name="l05675"></a>05675    {
<a name="l05676"></a>05676       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie___item.html#ac4d435f7f854d104ae85b2643678e382">add_to_service</a>(<span class="stringliteral">&#39;http://www.furl.net/storeIt.jsp?u=&#39;</span>, <span class="stringliteral">&#39;&amp;t=&#39;</span>);
<a name="l05677"></a>05677    }
<a name="l05678"></a>05678 
<a name="l05679"></a>05679    <span class="keyword">function</span> add_to_magnolia()
<a name="l05680"></a>05680    {
<a name="l05681"></a>05681       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie___item.html#ac4d435f7f854d104ae85b2643678e382">add_to_service</a>(<span class="stringliteral">&#39;http://ma.gnolia.com/bookmarklet/add?url=&#39;</span>, <span class="stringliteral">&#39;&amp;title=&#39;</span>);
<a name="l05682"></a>05682    }
<a name="l05683"></a>05683 
<a name="l05684"></a>05684    <span class="keyword">function</span> add_to_myweb20()
<a name="l05685"></a>05685    {
<a name="l05686"></a>05686       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie___item.html#ac4d435f7f854d104ae85b2643678e382">add_to_service</a>(<span class="stringliteral">&#39;http://myweb2.search.yahoo.com/myresults/bookmarklet?u=&#39;</span>, <span class="stringliteral">&#39;&amp;t=&#39;</span>);
<a name="l05687"></a>05687    }
<a name="l05688"></a>05688 
<a name="l05689"></a>05689    <span class="keyword">function</span> add_to_newsvine()
<a name="l05690"></a>05690    {
<a name="l05691"></a>05691       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie___item.html#ac4d435f7f854d104ae85b2643678e382">add_to_service</a>(<span class="stringliteral">&#39;http://www.newsvine.com/_wine/save?u=&#39;</span>, <span class="stringliteral">&#39;&amp;h=&#39;</span>);
<a name="l05692"></a>05692    }
<a name="l05693"></a>05693 
<a name="l05694"></a>05694    <span class="keyword">function</span> add_to_reddit()
<a name="l05695"></a>05695    {
<a name="l05696"></a>05696       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie___item.html#ac4d435f7f854d104ae85b2643678e382">add_to_service</a>(<span class="stringliteral">&#39;http://reddit.com/submit?url=&#39;</span>, <span class="stringliteral">&#39;&amp;title=&#39;</span>);
<a name="l05697"></a>05697    }
<a name="l05698"></a>05698 
<a name="l05699"></a>05699    <span class="keyword">function</span> add_to_segnalo()
<a name="l05700"></a>05700    {
<a name="l05701"></a>05701       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie___item.html#ac4d435f7f854d104ae85b2643678e382">add_to_service</a>(<span class="stringliteral">&#39;http://segnalo.com/post.html.php?url=&#39;</span>, <span class="stringliteral">&#39;&amp;title=&#39;</span>);
<a name="l05702"></a>05702    }
<a name="l05703"></a>05703 
<a name="l05704"></a>05704    <span class="keyword">function</span> add_to_simpy()
<a name="l05705"></a>05705    {
<a name="l05706"></a>05706       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie___item.html#ac4d435f7f854d104ae85b2643678e382">add_to_service</a>(<span class="stringliteral">&#39;http://www.simpy.com/simpy/LinkAdd.do?href=&#39;</span>, <span class="stringliteral">&#39;&amp;title=&#39;</span>);
<a name="l05707"></a>05707    }
<a name="l05708"></a>05708 
<a name="l05709"></a>05709    <span class="keyword">function</span> add_to_spurl()
<a name="l05710"></a>05710    {
<a name="l05711"></a>05711       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie___item.html#ac4d435f7f854d104ae85b2643678e382">add_to_service</a>(<span class="stringliteral">&#39;http://www.spurl.net/spurl.php?v=3&amp;url=&#39;</span>, <span class="stringliteral">&#39;&amp;title=&#39;</span>);
<a name="l05712"></a>05712    }
<a name="l05713"></a>05713 
<a name="l05714"></a>05714    <span class="keyword">function</span> add_to_wists()
<a name="l05715"></a>05715    {
<a name="l05716"></a>05716       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie___item.html#ac4d435f7f854d104ae85b2643678e382">add_to_service</a>(<span class="stringliteral">&#39;http://wists.com/r.php?c=&amp;r=&#39;</span>, <span class="stringliteral">&#39;&amp;title=&#39;</span>);
<a name="l05717"></a>05717    }
<a name="l05718"></a>05718 
<a name="l05719"></a>05719    <span class="keyword">function</span> search_technorati()
<a name="l05720"></a>05720    {
<a name="l05721"></a>05721       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie___item.html#ac4d435f7f854d104ae85b2643678e382">add_to_service</a>(<span class="stringliteral">&#39;http://www.technorati.com/search/&#39;</span>);
<a name="l05722"></a>05722    }
<a name="l05723"></a>05723 }
<a name="l05724"></a>05724 
<a name="l05725"></a><a class="code" href="class_simple_pie___source.html">05725</a> <span class="keyword">class </span><a class="code" href="class_simple_pie___source.html">SimplePie_Source</a>
<a name="l05726"></a>05726 {
<a name="l05727"></a>05727    var $item;
<a name="l05728"></a>05728    var $data = array();
<a name="l05729"></a>05729 
<a name="l05730"></a>05730    <span class="keyword">function</span> <a class="code" href="class_simple_pie___source.html">SimplePie_Source</a>($item, $data)
<a name="l05731"></a>05731    {
<a name="l05732"></a>05732       $this-&gt;item = $item;
<a name="l05733"></a>05733       $this-&gt;data = $data;
<a name="l05734"></a>05734    }
<a name="l05735"></a>05735 
<a name="l05736"></a>05736    <span class="keyword">function</span> __toString()
<a name="l05737"></a>05737    {
<a name="l05738"></a>05738       <span class="keywordflow">return</span> md5(serialize($this-&gt;data));
<a name="l05739"></a>05739    }
<a name="l05740"></a>05740 
<a name="l05741"></a>05741    <span class="keyword">function</span> get_source_tags($namespace, $tag)
<a name="l05742"></a>05742    {
<a name="l05743"></a>05743       <span class="keywordflow">if</span> (isset($this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][$namespace][$tag]))
<a name="l05744"></a>05744       {
<a name="l05745"></a>05745          <span class="keywordflow">return</span> $this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][$namespace][$tag];
<a name="l05746"></a>05746       }
<a name="l05747"></a>05747       <span class="keywordflow">else</span>
<a name="l05748"></a>05748       {
<a name="l05749"></a>05749          <span class="keywordflow">return</span> null;
<a name="l05750"></a>05750       }
<a name="l05751"></a>05751    }
<a name="l05752"></a>05752 
<a name="l05753"></a>05753    <span class="keyword">function</span> get_base($element = array())
<a name="l05754"></a>05754    {
<a name="l05755"></a>05755       <span class="keywordflow">return</span> $this-&gt;item-&gt;get_base($element);
<a name="l05756"></a>05756    }
<a name="l05757"></a>05757 
<a name="l05758"></a>05758    <span class="keyword">function</span> sanitize($data, $type, $base = <span class="stringliteral">&#39;&#39;</span>)
<a name="l05759"></a>05759    {
<a name="l05760"></a>05760       <span class="keywordflow">return</span> $this-&gt;item-&gt;sanitize($data, $type, $base);
<a name="l05761"></a>05761    }
<a name="l05762"></a>05762 
<a name="l05763"></a>05763    <span class="keyword">function</span> get_item()
<a name="l05764"></a>05764    {
<a name="l05765"></a>05765       <span class="keywordflow">return</span> $this-&gt;item;
<a name="l05766"></a>05766    }
<a name="l05767"></a>05767 
<a name="l05768"></a>05768    <span class="keyword">function</span> get_title()
<a name="l05769"></a>05769    {
<a name="l05770"></a>05770       <span class="keywordflow">if</span> ($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;title&#39;</span>))
<a name="l05771"></a>05771       {
<a name="l05772"></a>05772          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SimplePie_Misc::atom_10_construct_type($return[0][<span class="stringliteral">&#39;attribs&#39;</span>]), $this-&gt;get_base($return[0]));
<a name="l05773"></a>05773       }
<a name="l05774"></a>05774       elseif ($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_ATOM_03, <span class="stringliteral">&#39;title&#39;</span>))
<a name="l05775"></a>05775       {
<a name="l05776"></a>05776          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SimplePie_Misc::atom_03_construct_type($return[0][<span class="stringliteral">&#39;attribs&#39;</span>]), $this-&gt;get_base($return[0]));
<a name="l05777"></a>05777       }
<a name="l05778"></a>05778       elseif ($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_RSS_10, <span class="stringliteral">&#39;title&#39;</span>))
<a name="l05779"></a>05779       {
<a name="l05780"></a>05780          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_MAYBE_HTML, $this-&gt;get_base($return[0]));
<a name="l05781"></a>05781       }
<a name="l05782"></a>05782       elseif ($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_RSS_090, <span class="stringliteral">&#39;title&#39;</span>))
<a name="l05783"></a>05783       {
<a name="l05784"></a>05784          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_MAYBE_HTML, $this-&gt;get_base($return[0]));
<a name="l05785"></a>05785       }
<a name="l05786"></a>05786       elseif ($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_RSS_20, <span class="stringliteral">&#39;title&#39;</span>))
<a name="l05787"></a>05787       {
<a name="l05788"></a>05788          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_MAYBE_HTML, $this-&gt;get_base($return[0]));
<a name="l05789"></a>05789       }
<a name="l05790"></a>05790       elseif ($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_DC_11, <span class="stringliteral">&#39;title&#39;</span>))
<a name="l05791"></a>05791       {
<a name="l05792"></a>05792          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05793"></a>05793       }
<a name="l05794"></a>05794       elseif ($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_DC_10, <span class="stringliteral">&#39;title&#39;</span>))
<a name="l05795"></a>05795       {
<a name="l05796"></a>05796          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05797"></a>05797       }
<a name="l05798"></a>05798       <span class="keywordflow">else</span>
<a name="l05799"></a>05799       {
<a name="l05800"></a>05800          <span class="keywordflow">return</span> null;
<a name="l05801"></a>05801       }
<a name="l05802"></a>05802    }
<a name="l05803"></a>05803 
<a name="l05804"></a>05804    <span class="keyword">function</span> get_category($key = 0)
<a name="l05805"></a>05805    {
<a name="l05806"></a>05806       $categories = $this-&gt;get_categories();
<a name="l05807"></a>05807       <span class="keywordflow">if</span> (isset($categories[$key]))
<a name="l05808"></a>05808       {
<a name="l05809"></a>05809          <span class="keywordflow">return</span> $categories[$key];
<a name="l05810"></a>05810       }
<a name="l05811"></a>05811       <span class="keywordflow">else</span>
<a name="l05812"></a>05812       {
<a name="l05813"></a>05813          <span class="keywordflow">return</span> null;
<a name="l05814"></a>05814       }
<a name="l05815"></a>05815    }
<a name="l05816"></a>05816 
<a name="l05817"></a>05817    <span class="keyword">function</span> get_categories()
<a name="l05818"></a>05818    {
<a name="l05819"></a>05819       $categories = array();
<a name="l05820"></a>05820 
<a name="l05821"></a>05821       <span class="keywordflow">foreach</span> ((array) $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;category&#39;</span>) as $category)
<a name="l05822"></a>05822       {
<a name="l05823"></a>05823          $term = null;
<a name="l05824"></a>05824          $scheme = null;
<a name="l05825"></a>05825          $label = null;
<a name="l05826"></a>05826          <span class="keywordflow">if</span> (isset($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;term&#39;</span>]))
<a name="l05827"></a>05827          {
<a name="l05828"></a>05828             $term = $this-&gt;sanitize($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;term&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05829"></a>05829          }
<a name="l05830"></a>05830          <span class="keywordflow">if</span> (isset($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>]))
<a name="l05831"></a>05831          {
<a name="l05832"></a>05832             $scheme = $this-&gt;sanitize($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;scheme&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05833"></a>05833          }
<a name="l05834"></a>05834          <span class="keywordflow">if</span> (isset($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;label&#39;</span>]))
<a name="l05835"></a>05835          {
<a name="l05836"></a>05836             $label = $this-&gt;sanitize($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;label&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05837"></a>05837          }
<a name="l05838"></a>05838          $categories[] =&amp; <span class="keyword">new</span> $this-&gt;item-&gt;feed-&gt;category_class($term, $scheme, $label);
<a name="l05839"></a>05839       }
<a name="l05840"></a>05840       <span class="keywordflow">foreach</span> ((array) $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_RSS_20, <span class="stringliteral">&#39;category&#39;</span>) as $category)
<a name="l05841"></a>05841       {
<a name="l05842"></a>05842          <span class="comment">// This is really the label, but keep this as the term also for BC.</span>
<a name="l05843"></a>05843          <span class="comment">// Label will also work on retrieving because that falls back to term.</span>
<a name="l05844"></a>05844          $term = $this-&gt;sanitize($category[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05845"></a>05845          <span class="keywordflow">if</span> (isset($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;domain&#39;</span>]))
<a name="l05846"></a>05846          {
<a name="l05847"></a>05847             $scheme = $this-&gt;sanitize($category[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;domain&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05848"></a>05848          }
<a name="l05849"></a>05849          <span class="keywordflow">else</span>
<a name="l05850"></a>05850          {
<a name="l05851"></a>05851             $scheme = null;
<a name="l05852"></a>05852          }
<a name="l05853"></a>05853          $categories[] =&amp; <span class="keyword">new</span> $this-&gt;item-&gt;feed-&gt;category_class($term, $scheme, null);
<a name="l05854"></a>05854       }
<a name="l05855"></a>05855       <span class="keywordflow">foreach</span> ((array) $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_DC_11, <span class="stringliteral">&#39;subject&#39;</span>) as $category)
<a name="l05856"></a>05856       {
<a name="l05857"></a>05857          $categories[] =&amp; <span class="keyword">new</span> $this-&gt;item-&gt;feed-&gt;category_class($this-&gt;sanitize($category[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT), null, null);
<a name="l05858"></a>05858       }
<a name="l05859"></a>05859       <span class="keywordflow">foreach</span> ((array) $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_DC_10, <span class="stringliteral">&#39;subject&#39;</span>) as $category)
<a name="l05860"></a>05860       {
<a name="l05861"></a>05861          $categories[] =&amp; <span class="keyword">new</span> $this-&gt;item-&gt;feed-&gt;category_class($this-&gt;sanitize($category[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT), null, null);
<a name="l05862"></a>05862       }
<a name="l05863"></a>05863 
<a name="l05864"></a>05864       <span class="keywordflow">if</span> (!empty($categories))
<a name="l05865"></a>05865       {
<a name="l05866"></a>05866          <span class="keywordflow">return</span> SimplePie_Misc::array_unique($categories);
<a name="l05867"></a>05867       }
<a name="l05868"></a>05868       <span class="keywordflow">else</span>
<a name="l05869"></a>05869       {
<a name="l05870"></a>05870          <span class="keywordflow">return</span> null;
<a name="l05871"></a>05871       }
<a name="l05872"></a>05872    }
<a name="l05873"></a>05873 
<a name="l05874"></a>05874    <span class="keyword">function</span> get_author($key = 0)
<a name="l05875"></a>05875    {
<a name="l05876"></a>05876       $authors = $this-&gt;get_authors();
<a name="l05877"></a>05877       <span class="keywordflow">if</span> (isset($authors[$key]))
<a name="l05878"></a>05878       {
<a name="l05879"></a>05879          <span class="keywordflow">return</span> $authors[$key];
<a name="l05880"></a>05880       }
<a name="l05881"></a>05881       <span class="keywordflow">else</span>
<a name="l05882"></a>05882       {
<a name="l05883"></a>05883          <span class="keywordflow">return</span> null;
<a name="l05884"></a>05884       }
<a name="l05885"></a>05885    }
<a name="l05886"></a>05886 
<a name="l05887"></a>05887    <span class="keyword">function</span> get_authors()
<a name="l05888"></a>05888    {
<a name="l05889"></a>05889       $authors = array();
<a name="l05890"></a>05890       <span class="keywordflow">foreach</span> ((array) $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;author&#39;</span>) as $author)
<a name="l05891"></a>05891       {
<a name="l05892"></a>05892          $name = null;
<a name="l05893"></a>05893          $uri = null;
<a name="l05894"></a>05894          $email = null;
<a name="l05895"></a>05895          <span class="keywordflow">if</span> (isset($author[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;name&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l05896"></a>05896          {
<a name="l05897"></a>05897             $name = $this-&gt;sanitize($author[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;name&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05898"></a>05898          }
<a name="l05899"></a>05899          <span class="keywordflow">if</span> (isset($author[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;uri&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l05900"></a>05900          {
<a name="l05901"></a>05901             $uri = $this-&gt;sanitize($author[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;uri&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($author[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;uri&#39;</span>][0]));
<a name="l05902"></a>05902          }
<a name="l05903"></a>05903          <span class="keywordflow">if</span> (isset($author[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;email&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l05904"></a>05904          {
<a name="l05905"></a>05905             $email = $this-&gt;sanitize($author[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;email&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05906"></a>05906          }
<a name="l05907"></a>05907          <span class="keywordflow">if</span> ($name !== null || $email !== null || $uri !== null)
<a name="l05908"></a>05908          {
<a name="l05909"></a>05909             $authors[] =&amp; <span class="keyword">new</span> $this-&gt;item-&gt;feed-&gt;author_class($name, $uri, $email);
<a name="l05910"></a>05910          }
<a name="l05911"></a>05911       }
<a name="l05912"></a>05912       <span class="keywordflow">if</span> ($author = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_ATOM_03, <span class="stringliteral">&#39;author&#39;</span>))
<a name="l05913"></a>05913       {
<a name="l05914"></a>05914          $name = null;
<a name="l05915"></a>05915          $url = null;
<a name="l05916"></a>05916          $email = null;
<a name="l05917"></a>05917          <span class="keywordflow">if</span> (isset($author[0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;name&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l05918"></a>05918          {
<a name="l05919"></a>05919             $name = $this-&gt;sanitize($author[0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;name&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05920"></a>05920          }
<a name="l05921"></a>05921          <span class="keywordflow">if</span> (isset($author[0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;url&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l05922"></a>05922          {
<a name="l05923"></a>05923             $url = $this-&gt;sanitize($author[0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;url&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($author[0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;url&#39;</span>][0]));
<a name="l05924"></a>05924          }
<a name="l05925"></a>05925          <span class="keywordflow">if</span> (isset($author[0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;email&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l05926"></a>05926          {
<a name="l05927"></a>05927             $email = $this-&gt;sanitize($author[0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;email&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05928"></a>05928          }
<a name="l05929"></a>05929          <span class="keywordflow">if</span> ($name !== null || $email !== null || $url !== null)
<a name="l05930"></a>05930          {
<a name="l05931"></a>05931             $authors[] =&amp; <span class="keyword">new</span> $this-&gt;item-&gt;feed-&gt;author_class($name, $url, $email);
<a name="l05932"></a>05932          }
<a name="l05933"></a>05933       }
<a name="l05934"></a>05934       <span class="keywordflow">foreach</span> ((array) $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_DC_11, <span class="stringliteral">&#39;creator&#39;</span>) as $author)
<a name="l05935"></a>05935       {
<a name="l05936"></a>05936          $authors[] =&amp; <span class="keyword">new</span> $this-&gt;item-&gt;feed-&gt;author_class($this-&gt;sanitize($author[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT), null, null);
<a name="l05937"></a>05937       }
<a name="l05938"></a>05938       <span class="keywordflow">foreach</span> ((array) $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_DC_10, <span class="stringliteral">&#39;creator&#39;</span>) as $author)
<a name="l05939"></a>05939       {
<a name="l05940"></a>05940          $authors[] =&amp; <span class="keyword">new</span> $this-&gt;item-&gt;feed-&gt;author_class($this-&gt;sanitize($author[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT), null, null);
<a name="l05941"></a>05941       }
<a name="l05942"></a>05942       <span class="keywordflow">foreach</span> ((array) $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_ITUNES, <span class="stringliteral">&#39;author&#39;</span>) as $author)
<a name="l05943"></a>05943       {
<a name="l05944"></a>05944          $authors[] =&amp; <span class="keyword">new</span> $this-&gt;item-&gt;feed-&gt;author_class($this-&gt;sanitize($author[<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT), null, null);
<a name="l05945"></a>05945       }
<a name="l05946"></a>05946 
<a name="l05947"></a>05947       <span class="keywordflow">if</span> (!empty($authors))
<a name="l05948"></a>05948       {
<a name="l05949"></a>05949          <span class="keywordflow">return</span> SimplePie_Misc::array_unique($authors);
<a name="l05950"></a>05950       }
<a name="l05951"></a>05951       <span class="keywordflow">else</span>
<a name="l05952"></a>05952       {
<a name="l05953"></a>05953          <span class="keywordflow">return</span> null;
<a name="l05954"></a>05954       }
<a name="l05955"></a>05955    }
<a name="l05956"></a>05956 
<a name="l05957"></a>05957    <span class="keyword">function</span> get_contributor($key = 0)
<a name="l05958"></a>05958    {
<a name="l05959"></a>05959       $contributors = $this-&gt;get_contributors();
<a name="l05960"></a>05960       <span class="keywordflow">if</span> (isset($contributors[$key]))
<a name="l05961"></a>05961       {
<a name="l05962"></a>05962          <span class="keywordflow">return</span> $contributors[$key];
<a name="l05963"></a>05963       }
<a name="l05964"></a>05964       <span class="keywordflow">else</span>
<a name="l05965"></a>05965       {
<a name="l05966"></a>05966          <span class="keywordflow">return</span> null;
<a name="l05967"></a>05967       }
<a name="l05968"></a>05968    }
<a name="l05969"></a>05969 
<a name="l05970"></a>05970    <span class="keyword">function</span> get_contributors()
<a name="l05971"></a>05971    {
<a name="l05972"></a>05972       $contributors = array();
<a name="l05973"></a>05973       <span class="keywordflow">foreach</span> ((array) $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;contributor&#39;</span>) as $contributor)
<a name="l05974"></a>05974       {
<a name="l05975"></a>05975          $name = null;
<a name="l05976"></a>05976          $uri = null;
<a name="l05977"></a>05977          $email = null;
<a name="l05978"></a>05978          <span class="keywordflow">if</span> (isset($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;name&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l05979"></a>05979          {
<a name="l05980"></a>05980             $name = $this-&gt;sanitize($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;name&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05981"></a>05981          }
<a name="l05982"></a>05982          <span class="keywordflow">if</span> (isset($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;uri&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l05983"></a>05983          {
<a name="l05984"></a>05984             $uri = $this-&gt;sanitize($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;uri&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;uri&#39;</span>][0]));
<a name="l05985"></a>05985          }
<a name="l05986"></a>05986          <span class="keywordflow">if</span> (isset($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;email&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l05987"></a>05987          {
<a name="l05988"></a>05988             $email = $this-&gt;sanitize($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;email&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l05989"></a>05989          }
<a name="l05990"></a>05990          <span class="keywordflow">if</span> ($name !== null || $email !== null || $uri !== null)
<a name="l05991"></a>05991          {
<a name="l05992"></a>05992             $contributors[] =&amp; <span class="keyword">new</span> $this-&gt;item-&gt;feed-&gt;author_class($name, $uri, $email);
<a name="l05993"></a>05993          }
<a name="l05994"></a>05994       }
<a name="l05995"></a>05995       <span class="keywordflow">foreach</span> ((array) $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_ATOM_03, <span class="stringliteral">&#39;contributor&#39;</span>) as $contributor)
<a name="l05996"></a>05996       {
<a name="l05997"></a>05997          $name = null;
<a name="l05998"></a>05998          $url = null;
<a name="l05999"></a>05999          $email = null;
<a name="l06000"></a>06000          <span class="keywordflow">if</span> (isset($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;name&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l06001"></a>06001          {
<a name="l06002"></a>06002             $name = $this-&gt;sanitize($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;name&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l06003"></a>06003          }
<a name="l06004"></a>06004          <span class="keywordflow">if</span> (isset($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;url&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l06005"></a>06005          {
<a name="l06006"></a>06006             $url = $this-&gt;sanitize($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;url&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;url&#39;</span>][0]));
<a name="l06007"></a>06007          }
<a name="l06008"></a>06008          <span class="keywordflow">if</span> (isset($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;email&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l06009"></a>06009          {
<a name="l06010"></a>06010             $email = $this-&gt;sanitize($contributor[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;email&#39;</span>][0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l06011"></a>06011          }
<a name="l06012"></a>06012          <span class="keywordflow">if</span> ($name !== null || $email !== null || $url !== null)
<a name="l06013"></a>06013          {
<a name="l06014"></a>06014             $contributors[] =&amp; <span class="keyword">new</span> $this-&gt;item-&gt;feed-&gt;author_class($name, $url, $email);
<a name="l06015"></a>06015          }
<a name="l06016"></a>06016       }
<a name="l06017"></a>06017 
<a name="l06018"></a>06018       <span class="keywordflow">if</span> (!empty($contributors))
<a name="l06019"></a>06019       {
<a name="l06020"></a>06020          <span class="keywordflow">return</span> SimplePie_Misc::array_unique($contributors);
<a name="l06021"></a>06021       }
<a name="l06022"></a>06022       <span class="keywordflow">else</span>
<a name="l06023"></a>06023       {
<a name="l06024"></a>06024          <span class="keywordflow">return</span> null;
<a name="l06025"></a>06025       }
<a name="l06026"></a>06026    }
<a name="l06027"></a>06027 
<a name="l06028"></a>06028    <span class="keyword">function</span> get_link($key = 0, $rel = <span class="stringliteral">&#39;alternate&#39;</span>)
<a name="l06029"></a>06029    {
<a name="l06030"></a>06030       $links = $this-&gt;get_links($rel);
<a name="l06031"></a>06031       <span class="keywordflow">if</span> (isset($links[$key]))
<a name="l06032"></a>06032       {
<a name="l06033"></a>06033          <span class="keywordflow">return</span> $links[$key];
<a name="l06034"></a>06034       }
<a name="l06035"></a>06035       <span class="keywordflow">else</span>
<a name="l06036"></a>06036       {
<a name="l06037"></a>06037          <span class="keywordflow">return</span> null;
<a name="l06038"></a>06038       }
<a name="l06039"></a>06039    }
<a name="l06040"></a>06040 <span class="comment"></span>
<a name="l06041"></a>06041 <span class="comment">   /**</span>
<a name="l06042"></a>06042 <span class="comment">    * Added for parity between the parent-level and the item/entry-level.</span>
<a name="l06043"></a>06043 <span class="comment">    */</span>
<a name="l06044"></a><a class="code" href="class_simple_pie___source.html#aa89f08250c57fe9a64d5a07b9c9cc93c">06044</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie___source.html#aa89f08250c57fe9a64d5a07b9c9cc93c">get_permalink</a>()
<a name="l06045"></a>06045    {
<a name="l06046"></a>06046       <span class="keywordflow">return</span> $this-&gt;get_link(0);
<a name="l06047"></a>06047    }
<a name="l06048"></a>06048 
<a name="l06049"></a>06049    <span class="keyword">function</span> get_links($rel = <span class="stringliteral">&#39;alternate&#39;</span>)
<a name="l06050"></a>06050    {
<a name="l06051"></a>06051       <span class="keywordflow">if</span> (!isset($this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>]))
<a name="l06052"></a>06052       {
<a name="l06053"></a>06053          $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>] = array();
<a name="l06054"></a>06054          <span class="keywordflow">if</span> ($links = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;link&#39;</span>))
<a name="l06055"></a>06055          {
<a name="l06056"></a>06056             <span class="keywordflow">foreach</span> ($links as $link)
<a name="l06057"></a>06057             {
<a name="l06058"></a>06058                <span class="keywordflow">if</span> (isset($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;href&#39;</span>]))
<a name="l06059"></a>06059                {
<a name="l06060"></a>06060                   $link_rel = (isset($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;rel&#39;</span>])) ? $link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;rel&#39;</span>] : <span class="stringliteral">&#39;alternate&#39;</span>;
<a name="l06061"></a>06061                   $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][$link_rel][] = $this-&gt;sanitize($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;href&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($link));
<a name="l06062"></a>06062                }
<a name="l06063"></a>06063             }
<a name="l06064"></a>06064          }
<a name="l06065"></a>06065          <span class="keywordflow">if</span> ($links = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_ATOM_03, <span class="stringliteral">&#39;link&#39;</span>))
<a name="l06066"></a>06066          {
<a name="l06067"></a>06067             <span class="keywordflow">foreach</span> ($links as $link)
<a name="l06068"></a>06068             {
<a name="l06069"></a>06069                <span class="keywordflow">if</span> (isset($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;href&#39;</span>]))
<a name="l06070"></a>06070                {
<a name="l06071"></a>06071                   $link_rel = (isset($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;rel&#39;</span>])) ? $link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;rel&#39;</span>] : <span class="stringliteral">&#39;alternate&#39;</span>;
<a name="l06072"></a>06072                   $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][$link_rel][] = $this-&gt;sanitize($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;href&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($link));
<a name="l06073"></a>06073 
<a name="l06074"></a>06074                }
<a name="l06075"></a>06075             }
<a name="l06076"></a>06076          }
<a name="l06077"></a>06077          <span class="keywordflow">if</span> ($links = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_RSS_10, <span class="stringliteral">&#39;link&#39;</span>))
<a name="l06078"></a>06078          {
<a name="l06079"></a>06079             $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][<span class="stringliteral">&#39;alternate&#39;</span>][] = $this-&gt;sanitize($links[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($links[0]));
<a name="l06080"></a>06080          }
<a name="l06081"></a>06081          <span class="keywordflow">if</span> ($links = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_RSS_090, <span class="stringliteral">&#39;link&#39;</span>))
<a name="l06082"></a>06082          {
<a name="l06083"></a>06083             $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][<span class="stringliteral">&#39;alternate&#39;</span>][] = $this-&gt;sanitize($links[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($links[0]));
<a name="l06084"></a>06084          }
<a name="l06085"></a>06085          <span class="keywordflow">if</span> ($links = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_RSS_20, <span class="stringliteral">&#39;link&#39;</span>))
<a name="l06086"></a>06086          {
<a name="l06087"></a>06087             $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][<span class="stringliteral">&#39;alternate&#39;</span>][] = $this-&gt;sanitize($links[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($links[0]));
<a name="l06088"></a>06088          }
<a name="l06089"></a>06089 
<a name="l06090"></a>06090          $keys = array_keys($this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>]);
<a name="l06091"></a>06091          <span class="keywordflow">foreach</span> ($keys as $key)
<a name="l06092"></a>06092          {
<a name="l06093"></a>06093             <span class="keywordflow">if</span> (SimplePie_Misc::is_isegment_nz_nc($key))
<a name="l06094"></a>06094             {
<a name="l06095"></a>06095                <span class="keywordflow">if</span> (isset($this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][SIMPLEPIE_IANA_LINK_RELATIONS_REGISTRY . $key]))
<a name="l06096"></a>06096                {
<a name="l06097"></a>06097                   $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][SIMPLEPIE_IANA_LINK_RELATIONS_REGISTRY . $key] = array_merge($this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][$key], $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][SIMPLEPIE_IANA_LINK_RELATIONS_REGISTRY . $key]);
<a name="l06098"></a>06098                   $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][$key] =&amp; $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][SIMPLEPIE_IANA_LINK_RELATIONS_REGISTRY . $key];
<a name="l06099"></a>06099                }
<a name="l06100"></a>06100                <span class="keywordflow">else</span>
<a name="l06101"></a>06101                {
<a name="l06102"></a>06102                   $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][SIMPLEPIE_IANA_LINK_RELATIONS_REGISTRY . $key] =&amp; $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][$key];
<a name="l06103"></a>06103                }
<a name="l06104"></a>06104             }
<a name="l06105"></a>06105             elseif (substr($key, 0, 41) === SIMPLEPIE_IANA_LINK_RELATIONS_REGISTRY)
<a name="l06106"></a>06106             {
<a name="l06107"></a>06107                $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][substr($key, 41)] =&amp; $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][$key];
<a name="l06108"></a>06108             }
<a name="l06109"></a>06109             $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][$key] = array_unique($this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][$key]);
<a name="l06110"></a>06110          }
<a name="l06111"></a>06111       }
<a name="l06112"></a>06112 
<a name="l06113"></a>06113       <span class="keywordflow">if</span> (isset($this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][$rel]))
<a name="l06114"></a>06114       {
<a name="l06115"></a>06115          <span class="keywordflow">return</span> $this-&gt;data[<span class="stringliteral">&#39;links&#39;</span>][$rel];
<a name="l06116"></a>06116       }
<a name="l06117"></a>06117       <span class="keywordflow">else</span>
<a name="l06118"></a>06118       {
<a name="l06119"></a>06119          <span class="keywordflow">return</span> null;
<a name="l06120"></a>06120       }
<a name="l06121"></a>06121    }
<a name="l06122"></a>06122 
<a name="l06123"></a>06123    <span class="keyword">function</span> get_description()
<a name="l06124"></a>06124    {
<a name="l06125"></a>06125       <span class="keywordflow">if</span> ($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;subtitle&#39;</span>))
<a name="l06126"></a>06126       {
<a name="l06127"></a>06127          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SimplePie_Misc::atom_10_construct_type($return[0][<span class="stringliteral">&#39;attribs&#39;</span>]), $this-&gt;get_base($return[0]));
<a name="l06128"></a>06128       }
<a name="l06129"></a>06129       elseif ($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_ATOM_03, <span class="stringliteral">&#39;tagline&#39;</span>))
<a name="l06130"></a>06130       {
<a name="l06131"></a>06131          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SimplePie_Misc::atom_03_construct_type($return[0][<span class="stringliteral">&#39;attribs&#39;</span>]), $this-&gt;get_base($return[0]));
<a name="l06132"></a>06132       }
<a name="l06133"></a>06133       elseif ($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_RSS_10, <span class="stringliteral">&#39;description&#39;</span>))
<a name="l06134"></a>06134       {
<a name="l06135"></a>06135          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_MAYBE_HTML, $this-&gt;get_base($return[0]));
<a name="l06136"></a>06136       }
<a name="l06137"></a>06137       elseif ($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_RSS_090, <span class="stringliteral">&#39;description&#39;</span>))
<a name="l06138"></a>06138       {
<a name="l06139"></a>06139          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_MAYBE_HTML, $this-&gt;get_base($return[0]));
<a name="l06140"></a>06140       }
<a name="l06141"></a>06141       elseif ($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_RSS_20, <span class="stringliteral">&#39;description&#39;</span>))
<a name="l06142"></a>06142       {
<a name="l06143"></a>06143          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_MAYBE_HTML, $this-&gt;get_base($return[0]));
<a name="l06144"></a>06144       }
<a name="l06145"></a>06145       elseif ($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_DC_11, <span class="stringliteral">&#39;description&#39;</span>))
<a name="l06146"></a>06146       {
<a name="l06147"></a>06147          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l06148"></a>06148       }
<a name="l06149"></a>06149       elseif ($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_DC_10, <span class="stringliteral">&#39;description&#39;</span>))
<a name="l06150"></a>06150       {
<a name="l06151"></a>06151          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l06152"></a>06152       }
<a name="l06153"></a>06153       elseif ($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_ITUNES, <span class="stringliteral">&#39;summary&#39;</span>))
<a name="l06154"></a>06154       {
<a name="l06155"></a>06155          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_HTML, $this-&gt;get_base($return[0]));
<a name="l06156"></a>06156       }
<a name="l06157"></a>06157       elseif ($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_ITUNES, <span class="stringliteral">&#39;subtitle&#39;</span>))
<a name="l06158"></a>06158       {
<a name="l06159"></a>06159          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_HTML, $this-&gt;get_base($return[0]));
<a name="l06160"></a>06160       }
<a name="l06161"></a>06161       <span class="keywordflow">else</span>
<a name="l06162"></a>06162       {
<a name="l06163"></a>06163          <span class="keywordflow">return</span> null;
<a name="l06164"></a>06164       }
<a name="l06165"></a>06165    }
<a name="l06166"></a>06166 
<a name="l06167"></a>06167    <span class="keyword">function</span> get_copyright()
<a name="l06168"></a>06168    {
<a name="l06169"></a>06169       <span class="keywordflow">if</span> ($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;rights&#39;</span>))
<a name="l06170"></a>06170       {
<a name="l06171"></a>06171          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SimplePie_Misc::atom_10_construct_type($return[0][<span class="stringliteral">&#39;attribs&#39;</span>]), $this-&gt;get_base($return[0]));
<a name="l06172"></a>06172       }
<a name="l06173"></a>06173       elseif ($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_ATOM_03, <span class="stringliteral">&#39;copyright&#39;</span>))
<a name="l06174"></a>06174       {
<a name="l06175"></a>06175          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SimplePie_Misc::atom_03_construct_type($return[0][<span class="stringliteral">&#39;attribs&#39;</span>]), $this-&gt;get_base($return[0]));
<a name="l06176"></a>06176       }
<a name="l06177"></a>06177       elseif ($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_RSS_20, <span class="stringliteral">&#39;copyright&#39;</span>))
<a name="l06178"></a>06178       {
<a name="l06179"></a>06179          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l06180"></a>06180       }
<a name="l06181"></a>06181       elseif ($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_DC_11, <span class="stringliteral">&#39;rights&#39;</span>))
<a name="l06182"></a>06182       {
<a name="l06183"></a>06183          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l06184"></a>06184       }
<a name="l06185"></a>06185       elseif ($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_DC_10, <span class="stringliteral">&#39;rights&#39;</span>))
<a name="l06186"></a>06186       {
<a name="l06187"></a>06187          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l06188"></a>06188       }
<a name="l06189"></a>06189       <span class="keywordflow">else</span>
<a name="l06190"></a>06190       {
<a name="l06191"></a>06191          <span class="keywordflow">return</span> null;
<a name="l06192"></a>06192       }
<a name="l06193"></a>06193    }
<a name="l06194"></a>06194 
<a name="l06195"></a>06195    <span class="keyword">function</span> get_language()
<a name="l06196"></a>06196    {
<a name="l06197"></a>06197       <span class="keywordflow">if</span> ($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_RSS_20, <span class="stringliteral">&#39;language&#39;</span>))
<a name="l06198"></a>06198       {
<a name="l06199"></a>06199          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l06200"></a>06200       }
<a name="l06201"></a>06201       elseif ($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_DC_11, <span class="stringliteral">&#39;language&#39;</span>))
<a name="l06202"></a>06202       {
<a name="l06203"></a>06203          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l06204"></a>06204       }
<a name="l06205"></a>06205       elseif ($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_DC_10, <span class="stringliteral">&#39;language&#39;</span>))
<a name="l06206"></a>06206       {
<a name="l06207"></a>06207          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l06208"></a>06208       }
<a name="l06209"></a>06209       elseif (isset($this-&gt;data[<span class="stringliteral">&#39;xml_lang&#39;</span>]))
<a name="l06210"></a>06210       {
<a name="l06211"></a>06211          <span class="keywordflow">return</span> $this-&gt;sanitize($this-&gt;data[<span class="stringliteral">&#39;xml_lang&#39;</span>], SIMPLEPIE_CONSTRUCT_TEXT);
<a name="l06212"></a>06212       }
<a name="l06213"></a>06213       <span class="keywordflow">else</span>
<a name="l06214"></a>06214       {
<a name="l06215"></a>06215          <span class="keywordflow">return</span> null;
<a name="l06216"></a>06216       }
<a name="l06217"></a>06217    }
<a name="l06218"></a>06218 
<a name="l06219"></a>06219    <span class="keyword">function</span> get_latitude()
<a name="l06220"></a>06220    {
<a name="l06221"></a>06221       <span class="keywordflow">if</span> ($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_W3C_BASIC_GEO, <span class="stringliteral">&#39;lat&#39;</span>))
<a name="l06222"></a>06222       {
<a name="l06223"></a>06223          <span class="keywordflow">return</span> (<span class="keywordtype">float</span>) $return[0][<span class="stringliteral">&#39;data&#39;</span>];
<a name="l06224"></a>06224       }
<a name="l06225"></a>06225       elseif (($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_GEORSS, <span class="stringliteral">&#39;point&#39;</span>)) &amp;&amp; preg_match(<span class="stringliteral">&#39;/^((?:-)?[0-9]+(?:\.[0-9]+)) ((?:-)?[0-9]+(?:\.[0-9]+))$/&#39;</span>, $return[0][<span class="stringliteral">&#39;data&#39;</span>], $match))
<a name="l06226"></a>06226       {
<a name="l06227"></a>06227          <span class="keywordflow">return</span> (<span class="keywordtype">float</span>) $match[1];
<a name="l06228"></a>06228       }
<a name="l06229"></a>06229       <span class="keywordflow">else</span>
<a name="l06230"></a>06230       {
<a name="l06231"></a>06231          <span class="keywordflow">return</span> null;
<a name="l06232"></a>06232       }
<a name="l06233"></a>06233    }
<a name="l06234"></a>06234 
<a name="l06235"></a>06235    <span class="keyword">function</span> get_longitude()
<a name="l06236"></a>06236    {
<a name="l06237"></a>06237       <span class="keywordflow">if</span> ($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_W3C_BASIC_GEO, <span class="stringliteral">&#39;long&#39;</span>))
<a name="l06238"></a>06238       {
<a name="l06239"></a>06239          <span class="keywordflow">return</span> (<span class="keywordtype">float</span>) $return[0][<span class="stringliteral">&#39;data&#39;</span>];
<a name="l06240"></a>06240       }
<a name="l06241"></a>06241       elseif ($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_W3C_BASIC_GEO, <span class="stringliteral">&#39;lon&#39;</span>))
<a name="l06242"></a>06242       {
<a name="l06243"></a>06243          <span class="keywordflow">return</span> (<span class="keywordtype">float</span>) $return[0][<span class="stringliteral">&#39;data&#39;</span>];
<a name="l06244"></a>06244       }
<a name="l06245"></a>06245       elseif (($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_GEORSS, <span class="stringliteral">&#39;point&#39;</span>)) &amp;&amp; preg_match(<span class="stringliteral">&#39;/^((?:-)?[0-9]+(?:\.[0-9]+)) ((?:-)?[0-9]+(?:\.[0-9]+))$/&#39;</span>, $return[0][<span class="stringliteral">&#39;data&#39;</span>], $match))
<a name="l06246"></a>06246       {
<a name="l06247"></a>06247          <span class="keywordflow">return</span> (<span class="keywordtype">float</span>) $match[2];
<a name="l06248"></a>06248       }
<a name="l06249"></a>06249       <span class="keywordflow">else</span>
<a name="l06250"></a>06250       {
<a name="l06251"></a>06251          <span class="keywordflow">return</span> null;
<a name="l06252"></a>06252       }
<a name="l06253"></a>06253    }
<a name="l06254"></a>06254 
<a name="l06255"></a>06255    <span class="keyword">function</span> get_image_url()
<a name="l06256"></a>06256    {
<a name="l06257"></a>06257       <span class="keywordflow">if</span> ($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_ITUNES, <span class="stringliteral">&#39;image&#39;</span>))
<a name="l06258"></a>06258       {
<a name="l06259"></a>06259          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;href&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI);
<a name="l06260"></a>06260       }
<a name="l06261"></a>06261       elseif ($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;logo&#39;</span>))
<a name="l06262"></a>06262       {
<a name="l06263"></a>06263          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($return[0]));
<a name="l06264"></a>06264       }
<a name="l06265"></a>06265       elseif ($return = $this-&gt;get_source_tags(SIMPLEPIE_NAMESPACE_ATOM_10, <span class="stringliteral">&#39;icon&#39;</span>))
<a name="l06266"></a>06266       {
<a name="l06267"></a>06267          <span class="keywordflow">return</span> $this-&gt;sanitize($return[0][<span class="stringliteral">&#39;data&#39;</span>], SIMPLEPIE_CONSTRUCT_IRI, $this-&gt;get_base($return[0]));
<a name="l06268"></a>06268       }
<a name="l06269"></a>06269       <span class="keywordflow">else</span>
<a name="l06270"></a>06270       {
<a name="l06271"></a>06271          <span class="keywordflow">return</span> null;
<a name="l06272"></a>06272       }
<a name="l06273"></a>06273    }
<a name="l06274"></a>06274 }
<a name="l06275"></a>06275 
<a name="l06276"></a><a class="code" href="class_simple_pie___author.html">06276</a> <span class="keyword">class </span><a class="code" href="class_simple_pie___author.html">SimplePie_Author</a>
<a name="l06277"></a>06277 {
<a name="l06278"></a>06278    var $name;
<a name="l06279"></a>06279    var $link;
<a name="l06280"></a>06280    var $email;
<a name="l06281"></a>06281 
<a name="l06282"></a>06282    <span class="comment">// Constructor, used to input the data</span>
<a name="l06283"></a>06283    <span class="keyword">function</span> <a class="code" href="class_simple_pie___author.html">SimplePie_Author</a>($name = null, $link = null, $email = null)
<a name="l06284"></a>06284    {
<a name="l06285"></a>06285       $this-&gt;name = $name;
<a name="l06286"></a>06286       $this-&gt;link = $link;
<a name="l06287"></a>06287       $this-&gt;email = $email;
<a name="l06288"></a>06288    }
<a name="l06289"></a>06289 
<a name="l06290"></a>06290    <span class="keyword">function</span> __toString()
<a name="l06291"></a>06291    {
<a name="l06292"></a>06292       <span class="comment">// There is no $this-&gt;data here</span>
<a name="l06293"></a>06293       <span class="keywordflow">return</span> md5(serialize($this));
<a name="l06294"></a>06294    }
<a name="l06295"></a>06295 
<a name="l06296"></a>06296    <span class="keyword">function</span> get_name()
<a name="l06297"></a>06297    {
<a name="l06298"></a>06298       <span class="keywordflow">if</span> ($this-&gt;name !== null)
<a name="l06299"></a>06299       {
<a name="l06300"></a>06300          <span class="keywordflow">return</span> $this-&gt;name;
<a name="l06301"></a>06301       }
<a name="l06302"></a>06302       <span class="keywordflow">else</span>
<a name="l06303"></a>06303       {
<a name="l06304"></a>06304          <span class="keywordflow">return</span> null;
<a name="l06305"></a>06305       }
<a name="l06306"></a>06306    }
<a name="l06307"></a>06307 
<a name="l06308"></a>06308    <span class="keyword">function</span> get_link()
<a name="l06309"></a>06309    {
<a name="l06310"></a>06310       <span class="keywordflow">if</span> ($this-&gt;link !== null)
<a name="l06311"></a>06311       {
<a name="l06312"></a>06312          <span class="keywordflow">return</span> $this-&gt;link;
<a name="l06313"></a>06313       }
<a name="l06314"></a>06314       <span class="keywordflow">else</span>
<a name="l06315"></a>06315       {
<a name="l06316"></a>06316          <span class="keywordflow">return</span> null;
<a name="l06317"></a>06317       }
<a name="l06318"></a>06318    }
<a name="l06319"></a>06319 
<a name="l06320"></a>06320    <span class="keyword">function</span> get_email()
<a name="l06321"></a>06321    {
<a name="l06322"></a>06322       <span class="keywordflow">if</span> ($this-&gt;email !== null)
<a name="l06323"></a>06323       {
<a name="l06324"></a>06324          <span class="keywordflow">return</span> $this-&gt;email;
<a name="l06325"></a>06325       }
<a name="l06326"></a>06326       <span class="keywordflow">else</span>
<a name="l06327"></a>06327       {
<a name="l06328"></a>06328          <span class="keywordflow">return</span> null;
<a name="l06329"></a>06329       }
<a name="l06330"></a>06330    }
<a name="l06331"></a>06331 }
<a name="l06332"></a>06332 
<a name="l06333"></a><a class="code" href="class_simple_pie___category.html">06333</a> <span class="keyword">class </span><a class="code" href="class_simple_pie___category.html">SimplePie_Category</a>
<a name="l06334"></a>06334 {
<a name="l06335"></a>06335    var $term;
<a name="l06336"></a>06336    var $scheme;
<a name="l06337"></a>06337    var $label;
<a name="l06338"></a>06338 
<a name="l06339"></a>06339    <span class="comment">// Constructor, used to input the data</span>
<a name="l06340"></a>06340    <span class="keyword">function</span> <a class="code" href="class_simple_pie___category.html">SimplePie_Category</a>($term = null, $scheme = null, $label = null)
<a name="l06341"></a>06341    {
<a name="l06342"></a>06342       $this-&gt;term = $term;
<a name="l06343"></a>06343       $this-&gt;scheme = $scheme;
<a name="l06344"></a>06344       $this-&gt;label = $label;
<a name="l06345"></a>06345    }
<a name="l06346"></a>06346 
<a name="l06347"></a>06347    <span class="keyword">function</span> __toString()
<a name="l06348"></a>06348    {
<a name="l06349"></a>06349       <span class="comment">// There is no $this-&gt;data here</span>
<a name="l06350"></a>06350       <span class="keywordflow">return</span> md5(serialize($this));
<a name="l06351"></a>06351    }
<a name="l06352"></a>06352 
<a name="l06353"></a>06353    <span class="keyword">function</span> get_term()
<a name="l06354"></a>06354    {
<a name="l06355"></a>06355       <span class="keywordflow">if</span> ($this-&gt;term !== null)
<a name="l06356"></a>06356       {
<a name="l06357"></a>06357          <span class="keywordflow">return</span> $this-&gt;term;
<a name="l06358"></a>06358       }
<a name="l06359"></a>06359       <span class="keywordflow">else</span>
<a name="l06360"></a>06360       {
<a name="l06361"></a>06361          <span class="keywordflow">return</span> null;
<a name="l06362"></a>06362       }
<a name="l06363"></a>06363    }
<a name="l06364"></a>06364 
<a name="l06365"></a>06365    <span class="keyword">function</span> get_scheme()
<a name="l06366"></a>06366    {
<a name="l06367"></a>06367       <span class="keywordflow">if</span> ($this-&gt;scheme !== null)
<a name="l06368"></a>06368       {
<a name="l06369"></a>06369          <span class="keywordflow">return</span> $this-&gt;scheme;
<a name="l06370"></a>06370       }
<a name="l06371"></a>06371       <span class="keywordflow">else</span>
<a name="l06372"></a>06372       {
<a name="l06373"></a>06373          <span class="keywordflow">return</span> null;
<a name="l06374"></a>06374       }
<a name="l06375"></a>06375    }
<a name="l06376"></a>06376 
<a name="l06377"></a>06377    <span class="keyword">function</span> get_label()
<a name="l06378"></a>06378    {
<a name="l06379"></a>06379       <span class="keywordflow">if</span> ($this-&gt;label !== null)
<a name="l06380"></a>06380       {
<a name="l06381"></a>06381          <span class="keywordflow">return</span> $this-&gt;label;
<a name="l06382"></a>06382       }
<a name="l06383"></a>06383       <span class="keywordflow">else</span>
<a name="l06384"></a>06384       {
<a name="l06385"></a>06385          <span class="keywordflow">return</span> $this-&gt;get_term();
<a name="l06386"></a>06386       }
<a name="l06387"></a>06387    }
<a name="l06388"></a>06388 }
<a name="l06389"></a>06389 
<a name="l06390"></a><a class="code" href="class_simple_pie___enclosure.html">06390</a> <span class="keyword">class </span><a class="code" href="class_simple_pie___enclosure.html">SimplePie_Enclosure</a>
<a name="l06391"></a>06391 {
<a name="l06392"></a>06392    var $bitrate;
<a name="l06393"></a>06393    var $captions;
<a name="l06394"></a>06394    var $categories;
<a name="l06395"></a>06395    var $channels;
<a name="l06396"></a>06396    var $copyright;
<a name="l06397"></a>06397    var $credits;
<a name="l06398"></a>06398    var $description;
<a name="l06399"></a>06399    var $duration;
<a name="l06400"></a>06400    var $expression;
<a name="l06401"></a>06401    var $framerate;
<a name="l06402"></a>06402    var $handler;
<a name="l06403"></a>06403    var $hashes;
<a name="l06404"></a>06404    var $height;
<a name="l06405"></a>06405    var $javascript;
<a name="l06406"></a>06406    var $keywords;
<a name="l06407"></a>06407    var $lang;
<a name="l06408"></a>06408    var $length;
<a name="l06409"></a>06409    var $link;
<a name="l06410"></a>06410    var $medium;
<a name="l06411"></a>06411    var $player;
<a name="l06412"></a>06412    var $ratings;
<a name="l06413"></a>06413    var $restrictions;
<a name="l06414"></a>06414    var $samplingrate;
<a name="l06415"></a>06415    var $thumbnails;
<a name="l06416"></a>06416    var $title;
<a name="l06417"></a>06417    var $type;
<a name="l06418"></a>06418    var $width;
<a name="l06419"></a>06419 
<a name="l06420"></a>06420    <span class="comment">// Constructor, used to input the data</span>
<a name="l06421"></a>06421    <span class="keyword">function</span> <a class="code" href="class_simple_pie___enclosure.html">SimplePie_Enclosure</a>($link = null, $type = null, $length = null, $javascript = null, $bitrate = null, $captions = null, $categories = null, $channels = null, $copyright = null, $credits = null, $description = null, $duration = null, $expression = null, $framerate = null, $hashes = null, $height = null, $keywords = null, $lang = null, $medium = null, $player = null, $ratings = null, $restrictions = null, $samplingrate = null, $thumbnails = null, $title = null, $width = null)
<a name="l06422"></a>06422    {
<a name="l06423"></a>06423       $this-&gt;bitrate = $bitrate;
<a name="l06424"></a>06424       $this-&gt;captions = $captions;
<a name="l06425"></a>06425       $this-&gt;categories = $categories;
<a name="l06426"></a>06426       $this-&gt;channels = $channels;
<a name="l06427"></a>06427       $this-&gt;copyright = $copyright;
<a name="l06428"></a>06428       $this-&gt;credits = $credits;
<a name="l06429"></a>06429       $this-&gt;description = $description;
<a name="l06430"></a>06430       $this-&gt;duration = $duration;
<a name="l06431"></a>06431       $this-&gt;expression = $expression;
<a name="l06432"></a>06432       $this-&gt;framerate = $framerate;
<a name="l06433"></a>06433       $this-&gt;hashes = $hashes;
<a name="l06434"></a>06434       $this-&gt;height = $height;
<a name="l06435"></a>06435       $this-&gt;javascript = $javascript;
<a name="l06436"></a>06436       $this-&gt;keywords = $keywords;
<a name="l06437"></a>06437       $this-&gt;lang = $lang;
<a name="l06438"></a>06438       $this-&gt;length = $length;
<a name="l06439"></a>06439       $this-&gt;link = $link;
<a name="l06440"></a>06440       $this-&gt;medium = $medium;
<a name="l06441"></a>06441       $this-&gt;player = $player;
<a name="l06442"></a>06442       $this-&gt;ratings = $ratings;
<a name="l06443"></a>06443       $this-&gt;restrictions = $restrictions;
<a name="l06444"></a>06444       $this-&gt;samplingrate = $samplingrate;
<a name="l06445"></a>06445       $this-&gt;thumbnails = $thumbnails;
<a name="l06446"></a>06446       $this-&gt;title = $title;
<a name="l06447"></a>06447       $this-&gt;type = $type;
<a name="l06448"></a>06448       $this-&gt;width = $width;
<a name="l06449"></a>06449       <span class="keywordflow">if</span> (class_exists(<span class="stringliteral">&#39;idna_convert&#39;</span>))
<a name="l06450"></a>06450       {
<a name="l06451"></a>06451          $idn =&amp; <span class="keyword">new</span> idna_convert;
<a name="l06452"></a>06452          $parsed = SimplePie_Misc::parse_url($link);
<a name="l06453"></a>06453          $this-&gt;link = SimplePie_Misc::compress_parse_url($parsed[<span class="stringliteral">&#39;scheme&#39;</span>], $idn-&gt;encode($parsed[<span class="stringliteral">&#39;authority&#39;</span>]), $parsed[<span class="stringliteral">&#39;path&#39;</span>], $parsed[<span class="stringliteral">&#39;query&#39;</span>], $parsed[<span class="stringliteral">&#39;fragment&#39;</span>]);
<a name="l06454"></a>06454       }
<a name="l06455"></a>06455       $this-&gt;handler = $this-&gt;get_handler(); <span class="comment">// Needs to load last</span>
<a name="l06456"></a>06456    }
<a name="l06457"></a>06457 
<a name="l06458"></a>06458    <span class="keyword">function</span> __toString()
<a name="l06459"></a>06459    {
<a name="l06460"></a>06460       <span class="comment">// There is no $this-&gt;data here</span>
<a name="l06461"></a>06461       <span class="keywordflow">return</span> md5(serialize($this));
<a name="l06462"></a>06462    }
<a name="l06463"></a>06463 
<a name="l06464"></a>06464    <span class="keyword">function</span> get_bitrate()
<a name="l06465"></a>06465    {
<a name="l06466"></a>06466       <span class="keywordflow">if</span> ($this-&gt;bitrate !== null)
<a name="l06467"></a>06467       {
<a name="l06468"></a>06468          <span class="keywordflow">return</span> $this-&gt;bitrate;
<a name="l06469"></a>06469       }
<a name="l06470"></a>06470       <span class="keywordflow">else</span>
<a name="l06471"></a>06471       {
<a name="l06472"></a>06472          <span class="keywordflow">return</span> null;
<a name="l06473"></a>06473       }
<a name="l06474"></a>06474    }
<a name="l06475"></a>06475 
<a name="l06476"></a>06476    <span class="keyword">function</span> get_caption($key = 0)
<a name="l06477"></a>06477    {
<a name="l06478"></a>06478       $captions = $this-&gt;get_captions();
<a name="l06479"></a>06479       <span class="keywordflow">if</span> (isset($captions[$key]))
<a name="l06480"></a>06480       {
<a name="l06481"></a>06481          <span class="keywordflow">return</span> $captions[$key];
<a name="l06482"></a>06482       }
<a name="l06483"></a>06483       <span class="keywordflow">else</span>
<a name="l06484"></a>06484       {
<a name="l06485"></a>06485          <span class="keywordflow">return</span> null;
<a name="l06486"></a>06486       }
<a name="l06487"></a>06487    }
<a name="l06488"></a>06488 
<a name="l06489"></a>06489    <span class="keyword">function</span> get_captions()
<a name="l06490"></a>06490    {
<a name="l06491"></a>06491       <span class="keywordflow">if</span> ($this-&gt;captions !== null)
<a name="l06492"></a>06492       {
<a name="l06493"></a>06493          <span class="keywordflow">return</span> $this-&gt;captions;
<a name="l06494"></a>06494       }
<a name="l06495"></a>06495       <span class="keywordflow">else</span>
<a name="l06496"></a>06496       {
<a name="l06497"></a>06497          <span class="keywordflow">return</span> null;
<a name="l06498"></a>06498       }
<a name="l06499"></a>06499    }
<a name="l06500"></a>06500 
<a name="l06501"></a>06501    <span class="keyword">function</span> get_category($key = 0)
<a name="l06502"></a>06502    {
<a name="l06503"></a>06503       $categories = $this-&gt;get_categories();
<a name="l06504"></a>06504       <span class="keywordflow">if</span> (isset($categories[$key]))
<a name="l06505"></a>06505       {
<a name="l06506"></a>06506          <span class="keywordflow">return</span> $categories[$key];
<a name="l06507"></a>06507       }
<a name="l06508"></a>06508       <span class="keywordflow">else</span>
<a name="l06509"></a>06509       {
<a name="l06510"></a>06510          <span class="keywordflow">return</span> null;
<a name="l06511"></a>06511       }
<a name="l06512"></a>06512    }
<a name="l06513"></a>06513 
<a name="l06514"></a>06514    <span class="keyword">function</span> get_categories()
<a name="l06515"></a>06515    {
<a name="l06516"></a>06516       <span class="keywordflow">if</span> ($this-&gt;categories !== null)
<a name="l06517"></a>06517       {
<a name="l06518"></a>06518          <span class="keywordflow">return</span> $this-&gt;categories;
<a name="l06519"></a>06519       }
<a name="l06520"></a>06520       <span class="keywordflow">else</span>
<a name="l06521"></a>06521       {
<a name="l06522"></a>06522          <span class="keywordflow">return</span> null;
<a name="l06523"></a>06523       }
<a name="l06524"></a>06524    }
<a name="l06525"></a>06525 
<a name="l06526"></a>06526    <span class="keyword">function</span> get_channels()
<a name="l06527"></a>06527    {
<a name="l06528"></a>06528       <span class="keywordflow">if</span> ($this-&gt;channels !== null)
<a name="l06529"></a>06529       {
<a name="l06530"></a>06530          <span class="keywordflow">return</span> $this-&gt;channels;
<a name="l06531"></a>06531       }
<a name="l06532"></a>06532       <span class="keywordflow">else</span>
<a name="l06533"></a>06533       {
<a name="l06534"></a>06534          <span class="keywordflow">return</span> null;
<a name="l06535"></a>06535       }
<a name="l06536"></a>06536    }
<a name="l06537"></a>06537 
<a name="l06538"></a>06538    <span class="keyword">function</span> get_copyright()
<a name="l06539"></a>06539    {
<a name="l06540"></a>06540       <span class="keywordflow">if</span> ($this-&gt;copyright !== null)
<a name="l06541"></a>06541       {
<a name="l06542"></a>06542          <span class="keywordflow">return</span> $this-&gt;copyright;
<a name="l06543"></a>06543       }
<a name="l06544"></a>06544       <span class="keywordflow">else</span>
<a name="l06545"></a>06545       {
<a name="l06546"></a>06546          <span class="keywordflow">return</span> null;
<a name="l06547"></a>06547       }
<a name="l06548"></a>06548    }
<a name="l06549"></a>06549 
<a name="l06550"></a>06550    <span class="keyword">function</span> get_credit($key = 0)
<a name="l06551"></a>06551    {
<a name="l06552"></a>06552       $credits = $this-&gt;get_credits();
<a name="l06553"></a>06553       <span class="keywordflow">if</span> (isset($credits[$key]))
<a name="l06554"></a>06554       {
<a name="l06555"></a>06555          <span class="keywordflow">return</span> $credits[$key];
<a name="l06556"></a>06556       }
<a name="l06557"></a>06557       <span class="keywordflow">else</span>
<a name="l06558"></a>06558       {
<a name="l06559"></a>06559          <span class="keywordflow">return</span> null;
<a name="l06560"></a>06560       }
<a name="l06561"></a>06561    }
<a name="l06562"></a>06562 
<a name="l06563"></a>06563    <span class="keyword">function</span> get_credits()
<a name="l06564"></a>06564    {
<a name="l06565"></a>06565       <span class="keywordflow">if</span> ($this-&gt;credits !== null)
<a name="l06566"></a>06566       {
<a name="l06567"></a>06567          <span class="keywordflow">return</span> $this-&gt;credits;
<a name="l06568"></a>06568       }
<a name="l06569"></a>06569       <span class="keywordflow">else</span>
<a name="l06570"></a>06570       {
<a name="l06571"></a>06571          <span class="keywordflow">return</span> null;
<a name="l06572"></a>06572       }
<a name="l06573"></a>06573    }
<a name="l06574"></a>06574 
<a name="l06575"></a>06575    <span class="keyword">function</span> get_description()
<a name="l06576"></a>06576    {
<a name="l06577"></a>06577       <span class="keywordflow">if</span> ($this-&gt;description !== null)
<a name="l06578"></a>06578       {
<a name="l06579"></a>06579          <span class="keywordflow">return</span> $this-&gt;description;
<a name="l06580"></a>06580       }
<a name="l06581"></a>06581       <span class="keywordflow">else</span>
<a name="l06582"></a>06582       {
<a name="l06583"></a>06583          <span class="keywordflow">return</span> null;
<a name="l06584"></a>06584       }
<a name="l06585"></a>06585    }
<a name="l06586"></a>06586 
<a name="l06587"></a>06587    <span class="keyword">function</span> get_duration($convert = <span class="keyword">false</span>)
<a name="l06588"></a>06588    {
<a name="l06589"></a>06589       <span class="keywordflow">if</span> ($this-&gt;duration !== null)
<a name="l06590"></a>06590       {
<a name="l06591"></a>06591          <span class="keywordflow">if</span> ($convert)
<a name="l06592"></a>06592          {
<a name="l06593"></a>06593             $time = SimplePie_Misc::time_hms($this-&gt;duration);
<a name="l06594"></a>06594             <span class="keywordflow">return</span> $time;
<a name="l06595"></a>06595          }
<a name="l06596"></a>06596          <span class="keywordflow">else</span>
<a name="l06597"></a>06597          {
<a name="l06598"></a>06598             <span class="keywordflow">return</span> $this-&gt;duration;
<a name="l06599"></a>06599          }
<a name="l06600"></a>06600       }
<a name="l06601"></a>06601       <span class="keywordflow">else</span>
<a name="l06602"></a>06602       {
<a name="l06603"></a>06603          <span class="keywordflow">return</span> null;
<a name="l06604"></a>06604       }
<a name="l06605"></a>06605    }
<a name="l06606"></a>06606 
<a name="l06607"></a>06607    <span class="keyword">function</span> get_expression()
<a name="l06608"></a>06608    {
<a name="l06609"></a>06609       <span class="keywordflow">if</span> ($this-&gt;expression !== null)
<a name="l06610"></a>06610       {
<a name="l06611"></a>06611          <span class="keywordflow">return</span> $this-&gt;expression;
<a name="l06612"></a>06612       }
<a name="l06613"></a>06613       <span class="keywordflow">else</span>
<a name="l06614"></a>06614       {
<a name="l06615"></a>06615          <span class="keywordflow">return</span> <span class="stringliteral">&#39;full&#39;</span>;
<a name="l06616"></a>06616       }
<a name="l06617"></a>06617    }
<a name="l06618"></a>06618 
<a name="l06619"></a>06619    <span class="keyword">function</span> get_extension()
<a name="l06620"></a>06620    {
<a name="l06621"></a>06621       <span class="keywordflow">if</span> ($this-&gt;link !== null)
<a name="l06622"></a>06622       {
<a name="l06623"></a>06623          $url = SimplePie_Misc::parse_url($this-&gt;link);
<a name="l06624"></a>06624          <span class="keywordflow">if</span> ($url[<span class="stringliteral">&#39;path&#39;</span>] !== <span class="stringliteral">&#39;&#39;</span>)
<a name="l06625"></a>06625          {
<a name="l06626"></a>06626             <span class="keywordflow">return</span> pathinfo($url[<span class="stringliteral">&#39;path&#39;</span>], PATHINFO_EXTENSION);
<a name="l06627"></a>06627          }
<a name="l06628"></a>06628       }
<a name="l06629"></a>06629       <span class="keywordflow">return</span> null;
<a name="l06630"></a>06630    }
<a name="l06631"></a>06631 
<a name="l06632"></a>06632    <span class="keyword">function</span> get_framerate()
<a name="l06633"></a>06633    {
<a name="l06634"></a>06634       <span class="keywordflow">if</span> ($this-&gt;framerate !== null)
<a name="l06635"></a>06635       {
<a name="l06636"></a>06636          <span class="keywordflow">return</span> $this-&gt;framerate;
<a name="l06637"></a>06637       }
<a name="l06638"></a>06638       <span class="keywordflow">else</span>
<a name="l06639"></a>06639       {
<a name="l06640"></a>06640          <span class="keywordflow">return</span> null;
<a name="l06641"></a>06641       }
<a name="l06642"></a>06642    }
<a name="l06643"></a>06643 
<a name="l06644"></a>06644    <span class="keyword">function</span> get_handler()
<a name="l06645"></a>06645    {
<a name="l06646"></a>06646       <span class="keywordflow">return</span> $this-&gt;get_real_type(<span class="keyword">true</span>);
<a name="l06647"></a>06647    }
<a name="l06648"></a>06648 
<a name="l06649"></a>06649    <span class="keyword">function</span> get_hash($key = 0)
<a name="l06650"></a>06650    {
<a name="l06651"></a>06651       $hashes = $this-&gt;get_hashes();
<a name="l06652"></a>06652       <span class="keywordflow">if</span> (isset($hashes[$key]))
<a name="l06653"></a>06653       {
<a name="l06654"></a>06654          <span class="keywordflow">return</span> $hashes[$key];
<a name="l06655"></a>06655       }
<a name="l06656"></a>06656       <span class="keywordflow">else</span>
<a name="l06657"></a>06657       {
<a name="l06658"></a>06658          <span class="keywordflow">return</span> null;
<a name="l06659"></a>06659       }
<a name="l06660"></a>06660    }
<a name="l06661"></a>06661 
<a name="l06662"></a>06662    <span class="keyword">function</span> get_hashes()
<a name="l06663"></a>06663    {
<a name="l06664"></a>06664       <span class="keywordflow">if</span> ($this-&gt;hashes !== null)
<a name="l06665"></a>06665       {
<a name="l06666"></a>06666          <span class="keywordflow">return</span> $this-&gt;hashes;
<a name="l06667"></a>06667       }
<a name="l06668"></a>06668       <span class="keywordflow">else</span>
<a name="l06669"></a>06669       {
<a name="l06670"></a>06670          <span class="keywordflow">return</span> null;
<a name="l06671"></a>06671       }
<a name="l06672"></a>06672    }
<a name="l06673"></a>06673 
<a name="l06674"></a>06674    <span class="keyword">function</span> get_height()
<a name="l06675"></a>06675    {
<a name="l06676"></a>06676       <span class="keywordflow">if</span> ($this-&gt;height !== null)
<a name="l06677"></a>06677       {
<a name="l06678"></a>06678          <span class="keywordflow">return</span> $this-&gt;height;
<a name="l06679"></a>06679       }
<a name="l06680"></a>06680       <span class="keywordflow">else</span>
<a name="l06681"></a>06681       {
<a name="l06682"></a>06682          <span class="keywordflow">return</span> null;
<a name="l06683"></a>06683       }
<a name="l06684"></a>06684    }
<a name="l06685"></a>06685 
<a name="l06686"></a>06686    <span class="keyword">function</span> get_language()
<a name="l06687"></a>06687    {
<a name="l06688"></a>06688       <span class="keywordflow">if</span> ($this-&gt;lang !== null)
<a name="l06689"></a>06689       {
<a name="l06690"></a>06690          <span class="keywordflow">return</span> $this-&gt;lang;
<a name="l06691"></a>06691       }
<a name="l06692"></a>06692       <span class="keywordflow">else</span>
<a name="l06693"></a>06693       {
<a name="l06694"></a>06694          <span class="keywordflow">return</span> null;
<a name="l06695"></a>06695       }
<a name="l06696"></a>06696    }
<a name="l06697"></a>06697 
<a name="l06698"></a>06698    <span class="keyword">function</span> get_keyword($key = 0)
<a name="l06699"></a>06699    {
<a name="l06700"></a>06700       $keywords = $this-&gt;get_keywords();
<a name="l06701"></a>06701       <span class="keywordflow">if</span> (isset($keywords[$key]))
<a name="l06702"></a>06702       {
<a name="l06703"></a>06703          <span class="keywordflow">return</span> $keywords[$key];
<a name="l06704"></a>06704       }
<a name="l06705"></a>06705       <span class="keywordflow">else</span>
<a name="l06706"></a>06706       {
<a name="l06707"></a>06707          <span class="keywordflow">return</span> null;
<a name="l06708"></a>06708       }
<a name="l06709"></a>06709    }
<a name="l06710"></a>06710 
<a name="l06711"></a>06711    <span class="keyword">function</span> get_keywords()
<a name="l06712"></a>06712    {
<a name="l06713"></a>06713       <span class="keywordflow">if</span> ($this-&gt;keywords !== null)
<a name="l06714"></a>06714       {
<a name="l06715"></a>06715          <span class="keywordflow">return</span> $this-&gt;keywords;
<a name="l06716"></a>06716       }
<a name="l06717"></a>06717       <span class="keywordflow">else</span>
<a name="l06718"></a>06718       {
<a name="l06719"></a>06719          <span class="keywordflow">return</span> null;
<a name="l06720"></a>06720       }
<a name="l06721"></a>06721    }
<a name="l06722"></a>06722 
<a name="l06723"></a>06723    <span class="keyword">function</span> get_length()
<a name="l06724"></a>06724    {
<a name="l06725"></a>06725       <span class="keywordflow">if</span> ($this-&gt;length !== null)
<a name="l06726"></a>06726       {
<a name="l06727"></a>06727          <span class="keywordflow">return</span> $this-&gt;length;
<a name="l06728"></a>06728       }
<a name="l06729"></a>06729       <span class="keywordflow">else</span>
<a name="l06730"></a>06730       {
<a name="l06731"></a>06731          <span class="keywordflow">return</span> null;
<a name="l06732"></a>06732       }
<a name="l06733"></a>06733    }
<a name="l06734"></a>06734 
<a name="l06735"></a>06735    <span class="keyword">function</span> get_link()
<a name="l06736"></a>06736    {
<a name="l06737"></a>06737       <span class="keywordflow">if</span> ($this-&gt;link !== null)
<a name="l06738"></a>06738       {
<a name="l06739"></a>06739          <span class="keywordflow">return</span> urldecode($this-&gt;link);
<a name="l06740"></a>06740       }
<a name="l06741"></a>06741       <span class="keywordflow">else</span>
<a name="l06742"></a>06742       {
<a name="l06743"></a>06743          <span class="keywordflow">return</span> null;
<a name="l06744"></a>06744       }
<a name="l06745"></a>06745    }
<a name="l06746"></a>06746 
<a name="l06747"></a>06747    <span class="keyword">function</span> get_medium()
<a name="l06748"></a>06748    {
<a name="l06749"></a>06749       <span class="keywordflow">if</span> ($this-&gt;medium !== null)
<a name="l06750"></a>06750       {
<a name="l06751"></a>06751          <span class="keywordflow">return</span> $this-&gt;medium;
<a name="l06752"></a>06752       }
<a name="l06753"></a>06753       <span class="keywordflow">else</span>
<a name="l06754"></a>06754       {
<a name="l06755"></a>06755          <span class="keywordflow">return</span> null;
<a name="l06756"></a>06756       }
<a name="l06757"></a>06757    }
<a name="l06758"></a>06758 
<a name="l06759"></a>06759    <span class="keyword">function</span> get_player()
<a name="l06760"></a>06760    {
<a name="l06761"></a>06761       <span class="keywordflow">if</span> ($this-&gt;player !== null)
<a name="l06762"></a>06762       {
<a name="l06763"></a>06763          <span class="keywordflow">return</span> $this-&gt;player;
<a name="l06764"></a>06764       }
<a name="l06765"></a>06765       <span class="keywordflow">else</span>
<a name="l06766"></a>06766       {
<a name="l06767"></a>06767          <span class="keywordflow">return</span> null;
<a name="l06768"></a>06768       }
<a name="l06769"></a>06769    }
<a name="l06770"></a>06770 
<a name="l06771"></a>06771    <span class="keyword">function</span> get_rating($key = 0)
<a name="l06772"></a>06772    {
<a name="l06773"></a>06773       $ratings = $this-&gt;get_ratings();
<a name="l06774"></a>06774       <span class="keywordflow">if</span> (isset($ratings[$key]))
<a name="l06775"></a>06775       {
<a name="l06776"></a>06776          <span class="keywordflow">return</span> $ratings[$key];
<a name="l06777"></a>06777       }
<a name="l06778"></a>06778       <span class="keywordflow">else</span>
<a name="l06779"></a>06779       {
<a name="l06780"></a>06780          <span class="keywordflow">return</span> null;
<a name="l06781"></a>06781       }
<a name="l06782"></a>06782    }
<a name="l06783"></a>06783 
<a name="l06784"></a>06784    <span class="keyword">function</span> get_ratings()
<a name="l06785"></a>06785    {
<a name="l06786"></a>06786       <span class="keywordflow">if</span> ($this-&gt;ratings !== null)
<a name="l06787"></a>06787       {
<a name="l06788"></a>06788          <span class="keywordflow">return</span> $this-&gt;ratings;
<a name="l06789"></a>06789       }
<a name="l06790"></a>06790       <span class="keywordflow">else</span>
<a name="l06791"></a>06791       {
<a name="l06792"></a>06792          <span class="keywordflow">return</span> null;
<a name="l06793"></a>06793       }
<a name="l06794"></a>06794    }
<a name="l06795"></a>06795 
<a name="l06796"></a>06796    <span class="keyword">function</span> get_restriction($key = 0)
<a name="l06797"></a>06797    {
<a name="l06798"></a>06798       $restrictions = $this-&gt;get_restrictions();
<a name="l06799"></a>06799       <span class="keywordflow">if</span> (isset($restrictions[$key]))
<a name="l06800"></a>06800       {
<a name="l06801"></a>06801          <span class="keywordflow">return</span> $restrictions[$key];
<a name="l06802"></a>06802       }
<a name="l06803"></a>06803       <span class="keywordflow">else</span>
<a name="l06804"></a>06804       {
<a name="l06805"></a>06805          <span class="keywordflow">return</span> null;
<a name="l06806"></a>06806       }
<a name="l06807"></a>06807    }
<a name="l06808"></a>06808 
<a name="l06809"></a>06809    <span class="keyword">function</span> get_restrictions()
<a name="l06810"></a>06810    {
<a name="l06811"></a>06811       <span class="keywordflow">if</span> ($this-&gt;restrictions !== null)
<a name="l06812"></a>06812       {
<a name="l06813"></a>06813          <span class="keywordflow">return</span> $this-&gt;restrictions;
<a name="l06814"></a>06814       }
<a name="l06815"></a>06815       <span class="keywordflow">else</span>
<a name="l06816"></a>06816       {
<a name="l06817"></a>06817          <span class="keywordflow">return</span> null;
<a name="l06818"></a>06818       }
<a name="l06819"></a>06819    }
<a name="l06820"></a>06820 
<a name="l06821"></a>06821    <span class="keyword">function</span> get_sampling_rate()
<a name="l06822"></a>06822    {
<a name="l06823"></a>06823       <span class="keywordflow">if</span> ($this-&gt;samplingrate !== null)
<a name="l06824"></a>06824       {
<a name="l06825"></a>06825          <span class="keywordflow">return</span> $this-&gt;samplingrate;
<a name="l06826"></a>06826       }
<a name="l06827"></a>06827       <span class="keywordflow">else</span>
<a name="l06828"></a>06828       {
<a name="l06829"></a>06829          <span class="keywordflow">return</span> null;
<a name="l06830"></a>06830       }
<a name="l06831"></a>06831    }
<a name="l06832"></a>06832 
<a name="l06833"></a>06833    <span class="keyword">function</span> get_size()
<a name="l06834"></a>06834    {
<a name="l06835"></a>06835       $length = $this-&gt;get_length();
<a name="l06836"></a>06836       <span class="keywordflow">if</span> ($length !== null)
<a name="l06837"></a>06837       {
<a name="l06838"></a>06838          <span class="keywordflow">return</span> round($length/1048576, 2);
<a name="l06839"></a>06839       }
<a name="l06840"></a>06840       <span class="keywordflow">else</span>
<a name="l06841"></a>06841       {
<a name="l06842"></a>06842          <span class="keywordflow">return</span> null;
<a name="l06843"></a>06843       }
<a name="l06844"></a>06844    }
<a name="l06845"></a>06845 
<a name="l06846"></a>06846    <span class="keyword">function</span> get_thumbnail($key = 0)
<a name="l06847"></a>06847    {
<a name="l06848"></a>06848       $thumbnails = $this-&gt;get_thumbnails();
<a name="l06849"></a>06849       <span class="keywordflow">if</span> (isset($thumbnails[$key]))
<a name="l06850"></a>06850       {
<a name="l06851"></a>06851          <span class="keywordflow">return</span> $thumbnails[$key];
<a name="l06852"></a>06852       }
<a name="l06853"></a>06853       <span class="keywordflow">else</span>
<a name="l06854"></a>06854       {
<a name="l06855"></a>06855          <span class="keywordflow">return</span> null;
<a name="l06856"></a>06856       }
<a name="l06857"></a>06857    }
<a name="l06858"></a>06858 
<a name="l06859"></a>06859    <span class="keyword">function</span> get_thumbnails()
<a name="l06860"></a>06860    {
<a name="l06861"></a>06861       <span class="keywordflow">if</span> ($this-&gt;thumbnails !== null)
<a name="l06862"></a>06862       {
<a name="l06863"></a>06863          <span class="keywordflow">return</span> $this-&gt;thumbnails;
<a name="l06864"></a>06864       }
<a name="l06865"></a>06865       <span class="keywordflow">else</span>
<a name="l06866"></a>06866       {
<a name="l06867"></a>06867          <span class="keywordflow">return</span> null;
<a name="l06868"></a>06868       }
<a name="l06869"></a>06869    }
<a name="l06870"></a>06870 
<a name="l06871"></a>06871    <span class="keyword">function</span> get_title()
<a name="l06872"></a>06872    {
<a name="l06873"></a>06873       <span class="keywordflow">if</span> ($this-&gt;title !== null)
<a name="l06874"></a>06874       {
<a name="l06875"></a>06875          <span class="keywordflow">return</span> $this-&gt;title;
<a name="l06876"></a>06876       }
<a name="l06877"></a>06877       <span class="keywordflow">else</span>
<a name="l06878"></a>06878       {
<a name="l06879"></a>06879          <span class="keywordflow">return</span> null;
<a name="l06880"></a>06880       }
<a name="l06881"></a>06881    }
<a name="l06882"></a>06882 
<a name="l06883"></a>06883    <span class="keyword">function</span> get_type()
<a name="l06884"></a>06884    {
<a name="l06885"></a>06885       <span class="keywordflow">if</span> ($this-&gt;type !== null)
<a name="l06886"></a>06886       {
<a name="l06887"></a>06887          <span class="keywordflow">return</span> $this-&gt;type;
<a name="l06888"></a>06888       }
<a name="l06889"></a>06889       <span class="keywordflow">else</span>
<a name="l06890"></a>06890       {
<a name="l06891"></a>06891          <span class="keywordflow">return</span> null;
<a name="l06892"></a>06892       }
<a name="l06893"></a>06893    }
<a name="l06894"></a>06894 
<a name="l06895"></a>06895    <span class="keyword">function</span> get_width()
<a name="l06896"></a>06896    {
<a name="l06897"></a>06897       <span class="keywordflow">if</span> ($this-&gt;width !== null)
<a name="l06898"></a>06898       {
<a name="l06899"></a>06899          <span class="keywordflow">return</span> $this-&gt;width;
<a name="l06900"></a>06900       }
<a name="l06901"></a>06901       <span class="keywordflow">else</span>
<a name="l06902"></a>06902       {
<a name="l06903"></a>06903          <span class="keywordflow">return</span> null;
<a name="l06904"></a>06904       }
<a name="l06905"></a>06905    }
<a name="l06906"></a>06906 
<a name="l06907"></a>06907    <span class="keyword">function</span> native_embed($options=<span class="stringliteral">&#39;&#39;</span>)
<a name="l06908"></a>06908    {
<a name="l06909"></a>06909       <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie___enclosure.html#aabc419170b5750efe64d6323aad3ae22">embed</a>($options, <span class="keyword">true</span>);
<a name="l06910"></a>06910    }
<a name="l06911"></a>06911 <span class="comment"></span>
<a name="l06912"></a>06912 <span class="comment">   /**</span>
<a name="l06913"></a>06913 <span class="comment">    * @todo If the dimensions for media:content are defined, use them when width/height are set to &#39;auto&#39;.</span>
<a name="l06914"></a>06914 <span class="comment">    */</span>
<a name="l06915"></a><a class="code" href="class_simple_pie___enclosure.html#aabc419170b5750efe64d6323aad3ae22">06915</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie___enclosure.html#aabc419170b5750efe64d6323aad3ae22">embed</a>($options = <span class="stringliteral">&#39;&#39;</span>, $native = <span class="keyword">false</span>)
<a name="l06916"></a>06916    {
<a name="l06917"></a>06917       <span class="comment">// Set up defaults</span>
<a name="l06918"></a>06918       $audio = <span class="stringliteral">&#39;&#39;</span>;
<a name="l06919"></a>06919       $video = <span class="stringliteral">&#39;&#39;</span>;
<a name="l06920"></a>06920       $alt = <span class="stringliteral">&#39;&#39;</span>;
<a name="l06921"></a>06921       $altclass = <span class="stringliteral">&#39;&#39;</span>;
<a name="l06922"></a>06922       $loop = <span class="stringliteral">&#39;false&#39;</span>;
<a name="l06923"></a>06923       $width = <span class="stringliteral">&#39;auto&#39;</span>;
<a name="l06924"></a>06924       $height = <span class="stringliteral">&#39;auto&#39;</span>;
<a name="l06925"></a>06925       $bgcolor = <span class="stringliteral">&#39;#ffffff&#39;</span>;
<a name="l06926"></a>06926       $mediaplayer = <span class="stringliteral">&#39;&#39;</span>;
<a name="l06927"></a>06927       $widescreen = <span class="keyword">false</span>;
<a name="l06928"></a>06928       $handler = $this-&gt;get_handler();
<a name="l06929"></a>06929       $type = $this-&gt;get_real_type();
<a name="l06930"></a>06930 
<a name="l06931"></a>06931       <span class="comment">// Process options and reassign values as necessary</span>
<a name="l06932"></a>06932       <span class="keywordflow">if</span> (is_array($options))
<a name="l06933"></a>06933       {
<a name="l06934"></a>06934          extract($options);
<a name="l06935"></a>06935       }
<a name="l06936"></a>06936       <span class="keywordflow">else</span>
<a name="l06937"></a>06937       {
<a name="l06938"></a>06938          $options = explode(<span class="charliteral">&#39;,&#39;</span>, $options);
<a name="l06939"></a>06939          <span class="keywordflow">foreach</span>($options as $option)
<a name="l06940"></a>06940          {
<a name="l06941"></a>06941             $opt = explode(<span class="charliteral">&#39;:&#39;</span>, $option, 2);
<a name="l06942"></a>06942             <span class="keywordflow">if</span> (isset($opt[0], $opt[1]))
<a name="l06943"></a>06943             {
<a name="l06944"></a>06944                $opt[0] = trim($opt[0]);
<a name="l06945"></a>06945                $opt[1] = trim($opt[1]);
<a name="l06946"></a>06946                <span class="keywordflow">switch</span> ($opt[0])
<a name="l06947"></a>06947                {
<a name="l06948"></a>06948                   <span class="keywordflow">case</span> <span class="stringliteral">&#39;audio&#39;</span>:
<a name="l06949"></a>06949                      $audio = $opt[1];
<a name="l06950"></a>06950                      <span class="keywordflow">break</span>;
<a name="l06951"></a>06951 
<a name="l06952"></a>06952                   <span class="keywordflow">case</span> <span class="stringliteral">&#39;video&#39;</span>:
<a name="l06953"></a>06953                      $video = $opt[1];
<a name="l06954"></a>06954                      <span class="keywordflow">break</span>;
<a name="l06955"></a>06955 
<a name="l06956"></a>06956                   <span class="keywordflow">case</span> <span class="stringliteral">&#39;alt&#39;</span>:
<a name="l06957"></a>06957                      $alt = $opt[1];
<a name="l06958"></a>06958                      <span class="keywordflow">break</span>;
<a name="l06959"></a>06959 
<a name="l06960"></a>06960                   <span class="keywordflow">case</span> <span class="stringliteral">&#39;altclass&#39;</span>:
<a name="l06961"></a>06961                      $altclass = $opt[1];
<a name="l06962"></a>06962                      <span class="keywordflow">break</span>;
<a name="l06963"></a>06963 
<a name="l06964"></a>06964                   <span class="keywordflow">case</span> <span class="stringliteral">&#39;loop&#39;</span>:
<a name="l06965"></a>06965                      $loop = $opt[1];
<a name="l06966"></a>06966                      <span class="keywordflow">break</span>;
<a name="l06967"></a>06967 
<a name="l06968"></a>06968                   <span class="keywordflow">case</span> <span class="stringliteral">&#39;width&#39;</span>:
<a name="l06969"></a>06969                      $width = $opt[1];
<a name="l06970"></a>06970                      <span class="keywordflow">break</span>;
<a name="l06971"></a>06971 
<a name="l06972"></a>06972                   <span class="keywordflow">case</span> <span class="stringliteral">&#39;height&#39;</span>:
<a name="l06973"></a>06973                      $height = $opt[1];
<a name="l06974"></a>06974                      <span class="keywordflow">break</span>;
<a name="l06975"></a>06975 
<a name="l06976"></a>06976                   <span class="keywordflow">case</span> <span class="stringliteral">&#39;bgcolor&#39;</span>:
<a name="l06977"></a>06977                      $bgcolor = $opt[1];
<a name="l06978"></a>06978                      <span class="keywordflow">break</span>;
<a name="l06979"></a>06979 
<a name="l06980"></a>06980                   <span class="keywordflow">case</span> <span class="stringliteral">&#39;mediaplayer&#39;</span>:
<a name="l06981"></a>06981                      $mediaplayer = $opt[1];
<a name="l06982"></a>06982                      <span class="keywordflow">break</span>;
<a name="l06983"></a>06983 
<a name="l06984"></a>06984                   <span class="keywordflow">case</span> <span class="stringliteral">&#39;widescreen&#39;</span>:
<a name="l06985"></a>06985                      $widescreen = $opt[1];
<a name="l06986"></a>06986                      <span class="keywordflow">break</span>;
<a name="l06987"></a>06987                }
<a name="l06988"></a>06988             }
<a name="l06989"></a>06989          }
<a name="l06990"></a>06990       }
<a name="l06991"></a>06991 
<a name="l06992"></a>06992       $mime = explode(<span class="charliteral">&#39;/&#39;</span>, $type, 2);
<a name="l06993"></a>06993       $mime = $mime[0];
<a name="l06994"></a>06994 
<a name="l06995"></a>06995       <span class="comment">// Process values for &#39;auto&#39;</span>
<a name="l06996"></a>06996       <span class="keywordflow">if</span> ($width === <span class="stringliteral">&#39;auto&#39;</span>)
<a name="l06997"></a>06997       {
<a name="l06998"></a>06998          <span class="keywordflow">if</span> ($mime === <span class="stringliteral">&#39;video&#39;</span>)
<a name="l06999"></a>06999          {
<a name="l07000"></a>07000             <span class="keywordflow">if</span> ($height === <span class="stringliteral">&#39;auto&#39;</span>)
<a name="l07001"></a>07001             {
<a name="l07002"></a>07002                $width = 480;
<a name="l07003"></a>07003             }
<a name="l07004"></a>07004             elseif ($widescreen)
<a name="l07005"></a>07005             {
<a name="l07006"></a>07006                $width = round((intval($height)/9)*16);
<a name="l07007"></a>07007             }
<a name="l07008"></a>07008             <span class="keywordflow">else</span>
<a name="l07009"></a>07009             {
<a name="l07010"></a>07010                $width = round((intval($height)/3)*4);
<a name="l07011"></a>07011             }
<a name="l07012"></a>07012          }
<a name="l07013"></a>07013          <span class="keywordflow">else</span>
<a name="l07014"></a>07014          {
<a name="l07015"></a>07015             $width = <span class="stringliteral">&#39;100%&#39;</span>;
<a name="l07016"></a>07016          }
<a name="l07017"></a>07017       }
<a name="l07018"></a>07018 
<a name="l07019"></a>07019       <span class="keywordflow">if</span> ($height === <span class="stringliteral">&#39;auto&#39;</span>)
<a name="l07020"></a>07020       {
<a name="l07021"></a>07021          <span class="keywordflow">if</span> ($mime === <span class="stringliteral">&#39;audio&#39;</span>)
<a name="l07022"></a>07022          {
<a name="l07023"></a>07023             $height = 0;
<a name="l07024"></a>07024          }
<a name="l07025"></a>07025          elseif ($mime === <span class="stringliteral">&#39;video&#39;</span>)
<a name="l07026"></a>07026          {
<a name="l07027"></a>07027             <span class="keywordflow">if</span> ($width === <span class="stringliteral">&#39;auto&#39;</span>)
<a name="l07028"></a>07028             {
<a name="l07029"></a>07029                <span class="keywordflow">if</span> ($widescreen)
<a name="l07030"></a>07030                {
<a name="l07031"></a>07031                   $height = 270;
<a name="l07032"></a>07032                }
<a name="l07033"></a>07033                <span class="keywordflow">else</span>
<a name="l07034"></a>07034                {
<a name="l07035"></a>07035                   $height = 360;
<a name="l07036"></a>07036                }
<a name="l07037"></a>07037             }
<a name="l07038"></a>07038             elseif ($widescreen)
<a name="l07039"></a>07039             {
<a name="l07040"></a>07040                $height = round((intval($width)/16)*9);
<a name="l07041"></a>07041             }
<a name="l07042"></a>07042             <span class="keywordflow">else</span>
<a name="l07043"></a>07043             {
<a name="l07044"></a>07044                $height = round((intval($width)/4)*3);
<a name="l07045"></a>07045             }
<a name="l07046"></a>07046          }
<a name="l07047"></a>07047          <span class="keywordflow">else</span>
<a name="l07048"></a>07048          {
<a name="l07049"></a>07049             $height = 376;
<a name="l07050"></a>07050          }
<a name="l07051"></a>07051       }
<a name="l07052"></a>07052       elseif ($mime === <span class="stringliteral">&#39;audio&#39;</span>)
<a name="l07053"></a>07053       {
<a name="l07054"></a>07054          $height = 0;
<a name="l07055"></a>07055       }
<a name="l07056"></a>07056 
<a name="l07057"></a>07057       <span class="comment">// Set proper placeholder value</span>
<a name="l07058"></a>07058       <span class="keywordflow">if</span> ($mime === <span class="stringliteral">&#39;audio&#39;</span>)
<a name="l07059"></a>07059       {
<a name="l07060"></a>07060          $placeholder = $audio;
<a name="l07061"></a>07061       }
<a name="l07062"></a>07062       elseif ($mime === <span class="stringliteral">&#39;video&#39;</span>)
<a name="l07063"></a>07063       {
<a name="l07064"></a>07064          $placeholder = $video;
<a name="l07065"></a>07065       }
<a name="l07066"></a>07066 
<a name="l07067"></a>07067       $embed = <span class="stringliteral">&#39;&#39;</span>;
<a name="l07068"></a>07068 
<a name="l07069"></a>07069       <span class="comment">// Make sure the JS library is included</span>
<a name="l07070"></a>07070       <span class="keywordflow">if</span> (!$native)
<a name="l07071"></a>07071       {
<a name="l07072"></a>07072          <span class="keyword">static</span> $javascript_outputted = null;
<a name="l07073"></a>07073          <span class="keywordflow">if</span> (!$javascript_outputted &amp;&amp; $this-&gt;javascript)
<a name="l07074"></a>07074          {
<a name="l07075"></a>07075             $embed .= <span class="stringliteral">&#39;&lt;script type=&quot;text/javascript&quot; src=&quot;?&#39;</span> . htmlspecialchars($this-&gt;javascript) . <span class="stringliteral">&#39;&quot;&gt;&lt;/script&gt;&#39;</span>;
<a name="l07076"></a>07076             $javascript_outputted = <span class="keyword">true</span>;
<a name="l07077"></a>07077          }
<a name="l07078"></a>07078       }
<a name="l07079"></a>07079 
<a name="l07080"></a>07080       <span class="comment">// Odeo Feed MP3&#39;s</span>
<a name="l07081"></a>07081       <span class="keywordflow">if</span> ($handler === <span class="stringliteral">&#39;odeo&#39;</span>)
<a name="l07082"></a>07082       {
<a name="l07083"></a>07083          <span class="keywordflow">if</span> ($native)
<a name="l07084"></a>07084          {
<a name="l07085"></a>07085             $embed .= <span class="stringliteral">&#39;&lt;embed src=&quot;http://odeo.com/flash/audio_player_fullsize.swf&quot; pluginspage=&quot;http://adobe.com/go/getflashplayer&quot; type=&quot;application/x-shockwave-flash&quot; quality=&quot;high&quot; width=&quot;440&quot; height=&quot;80&quot; wmode=&quot;transparent&quot; allowScriptAccess=&quot;any&quot; flashvars=&quot;valid_sample_rate=true&amp;external_url=&#39;</span> . $this-&gt;get_link() . <span class="stringliteral">&#39;&quot;&gt;&lt;/embed&gt;&#39;</span>;
<a name="l07086"></a>07086          }
<a name="l07087"></a>07087          <span class="keywordflow">else</span>
<a name="l07088"></a>07088          {
<a name="l07089"></a>07089             $embed .= <span class="stringliteral">&#39;&lt;script type=&quot;text/javascript&quot;&gt;embed_odeo(&quot;&#39;</span> . $this-&gt;get_link() . <span class="stringliteral">&#39;&quot;);&lt;/script&gt;&#39;</span>;
<a name="l07090"></a>07090          }
<a name="l07091"></a>07091       }
<a name="l07092"></a>07092 
<a name="l07093"></a>07093       <span class="comment">// Flash</span>
<a name="l07094"></a>07094       elseif ($handler === <span class="stringliteral">&#39;flash&#39;</span>)
<a name="l07095"></a>07095       {
<a name="l07096"></a>07096          <span class="keywordflow">if</span> ($native)
<a name="l07097"></a>07097          {
<a name="l07098"></a>07098             $embed .= <span class="stringliteral">&quot;&lt;embed src=\&quot;&quot;</span> . $this-&gt;get_link() . <span class="stringliteral">&quot;\&quot; pluginspage=\&quot;http://adobe.com/go/getflashplayer\&quot; type=\&quot;$type\&quot; quality=\&quot;high\&quot; width=\&quot;$width\&quot; height=\&quot;$height\&quot; bgcolor=\&quot;$bgcolor\&quot; loop=\&quot;$loop\&quot;&gt;&lt;/embed&gt;&quot;</span>;
<a name="l07099"></a>07099          }
<a name="l07100"></a>07100          <span class="keywordflow">else</span>
<a name="l07101"></a>07101          {
<a name="l07102"></a>07102             $embed .= <span class="stringliteral">&quot;&lt;script type=&#39;text/javascript&#39;&gt;embed_flash(&#39;$bgcolor&#39;, &#39;$width&#39;, &#39;$height&#39;, &#39;&quot;</span> . $this-&gt;get_link() . <span class="stringliteral">&quot;&#39;, &#39;$loop&#39;, &#39;$type&#39;);&lt;/script&gt;&quot;</span>;
<a name="l07103"></a>07103          }
<a name="l07104"></a>07104       }
<a name="l07105"></a>07105 
<a name="l07106"></a>07106       <span class="comment">// Flash Media Player file types.</span>
<a name="l07107"></a>07107       <span class="comment">// Preferred handler for MP3 file types.</span>
<a name="l07108"></a>07108       elseif ($handler === <span class="stringliteral">&#39;fmedia&#39;</span> || ($handler === <span class="stringliteral">&#39;mp3&#39;</span> &amp;&amp; $mediaplayer !== <span class="stringliteral">&#39;&#39;</span>))
<a name="l07109"></a>07109       {
<a name="l07110"></a>07110          $height += 20;
<a name="l07111"></a>07111          <span class="keywordflow">if</span> ($native)
<a name="l07112"></a>07112          {
<a name="l07113"></a>07113             $embed .= <span class="stringliteral">&quot;&lt;embed src=\&quot;$mediaplayer\&quot; pluginspage=\&quot;http://adobe.com/go/getflashplayer\&quot; type=\&quot;application/x-shockwave-flash\&quot; quality=\&quot;high\&quot; width=\&quot;$width\&quot; height=\&quot;$height\&quot; wmode=\&quot;transparent\&quot; flashvars=\&quot;file=&quot;</span> . rawurlencode($this-&gt;get_link().<span class="stringliteral">&#39;?file_extension=.&#39;</span>.$this-&gt;get_extension()) . <span class="stringliteral">&quot;&amp;autostart=false&amp;repeat=$loop&amp;showdigits=true&amp;showfsbutton=false\&quot;&gt;&lt;/embed&gt;&quot;</span>;
<a name="l07114"></a>07114          }
<a name="l07115"></a>07115          <span class="keywordflow">else</span>
<a name="l07116"></a>07116          {
<a name="l07117"></a>07117             $embed .= <span class="stringliteral">&quot;&lt;script type=&#39;text/javascript&#39;&gt;embed_flv(&#39;$width&#39;, &#39;$height&#39;, &#39;&quot;</span> . rawurlencode($this-&gt;get_link().<span class="stringliteral">&#39;?file_extension=.&#39;</span>.$this-&gt;get_extension()) . <span class="stringliteral">&quot;&#39;, &#39;$placeholder&#39;, &#39;$loop&#39;, &#39;$mediaplayer&#39;);&lt;/script&gt;&quot;</span>;
<a name="l07118"></a>07118          }
<a name="l07119"></a>07119       }
<a name="l07120"></a>07120 
<a name="l07121"></a>07121       <span class="comment">// QuickTime 7 file types.  Need to test with QuickTime 6.</span>
<a name="l07122"></a>07122       <span class="comment">// Only handle MP3&#39;s if the Flash Media Player is not present.</span>
<a name="l07123"></a>07123       elseif ($handler === <span class="stringliteral">&#39;quicktime&#39;</span> || ($handler === <span class="stringliteral">&#39;mp3&#39;</span> &amp;&amp; $mediaplayer === <span class="stringliteral">&#39;&#39;</span>))
<a name="l07124"></a>07124       {
<a name="l07125"></a>07125          $height += 16;
<a name="l07126"></a>07126          <span class="keywordflow">if</span> ($native)
<a name="l07127"></a>07127          {
<a name="l07128"></a>07128             <span class="keywordflow">if</span> ($placeholder !== <span class="stringliteral">&#39;&#39;</span>)
<a name="l07129"></a>07129             {
<a name="l07130"></a>07130                $embed .= <span class="stringliteral">&quot;&lt;embed type=\&quot;$type\&quot; style=\&quot;cursor:hand; cursor:pointer;\&quot; href=\&quot;&quot;</span> . $this-&gt;get_link() . <span class="stringliteral">&quot;\&quot; src=\&quot;$placeholder\&quot; width=\&quot;$width\&quot; height=\&quot;$height\&quot; autoplay=\&quot;false\&quot; target=\&quot;myself\&quot; controller=\&quot;false\&quot; loop=\&quot;$loop\&quot; scale=\&quot;aspect\&quot; bgcolor=\&quot;$bgcolor\&quot; pluginspage=\&quot;http://apple.com/quicktime/download/\&quot;&gt;&lt;/embed&gt;&quot;</span>;
<a name="l07131"></a>07131             }
<a name="l07132"></a>07132             <span class="keywordflow">else</span>
<a name="l07133"></a>07133             {
<a name="l07134"></a>07134                $embed .= <span class="stringliteral">&quot;&lt;embed type=\&quot;$type\&quot; style=\&quot;cursor:hand; cursor:pointer;\&quot; src=\&quot;&quot;</span> . $this-&gt;get_link() . <span class="stringliteral">&quot;\&quot; width=\&quot;$width\&quot; height=\&quot;$height\&quot; autoplay=\&quot;false\&quot; target=\&quot;myself\&quot; controller=\&quot;true\&quot; loop=\&quot;$loop\&quot; scale=\&quot;aspect\&quot; bgcolor=\&quot;$bgcolor\&quot; pluginspage=\&quot;http://apple.com/quicktime/download/\&quot;&gt;&lt;/embed&gt;&quot;</span>;
<a name="l07135"></a>07135             }
<a name="l07136"></a>07136          }
<a name="l07137"></a>07137          <span class="keywordflow">else</span>
<a name="l07138"></a>07138          {
<a name="l07139"></a>07139             $embed .= <span class="stringliteral">&quot;&lt;script type=&#39;text/javascript&#39;&gt;embed_quicktime(&#39;$type&#39;, &#39;$bgcolor&#39;, &#39;$width&#39;, &#39;$height&#39;, &#39;&quot;</span> . $this-&gt;get_link() . <span class="stringliteral">&quot;&#39;, &#39;$placeholder&#39;, &#39;$loop&#39;);&lt;/script&gt;&quot;</span>;
<a name="l07140"></a>07140          }
<a name="l07141"></a>07141       }
<a name="l07142"></a>07142 
<a name="l07143"></a>07143       <span class="comment">// Windows Media</span>
<a name="l07144"></a>07144       elseif ($handler === <span class="stringliteral">&#39;wmedia&#39;</span>)
<a name="l07145"></a>07145       {
<a name="l07146"></a>07146          $height += 45;
<a name="l07147"></a>07147          <span class="keywordflow">if</span> ($native)
<a name="l07148"></a>07148          {
<a name="l07149"></a>07149             $embed .= <span class="stringliteral">&quot;&lt;embed type=\&quot;application/x-mplayer2\&quot; src=\&quot;&quot;</span> . $this-&gt;get_link() . <span class="stringliteral">&quot;\&quot; autosize=\&quot;1\&quot; width=\&quot;$width\&quot; height=\&quot;$height\&quot; showcontrols=\&quot;1\&quot; showstatusbar=\&quot;0\&quot; showdisplay=\&quot;0\&quot; autostart=\&quot;0\&quot;&gt;&lt;/embed&gt;&quot;</span>;
<a name="l07150"></a>07150          }
<a name="l07151"></a>07151          <span class="keywordflow">else</span>
<a name="l07152"></a>07152          {
<a name="l07153"></a>07153             $embed .= <span class="stringliteral">&quot;&lt;script type=&#39;text/javascript&#39;&gt;embed_wmedia(&#39;$width&#39;, &#39;$height&#39;, &#39;&quot;</span> . $this-&gt;get_link() . <span class="stringliteral">&quot;&#39;);&lt;/script&gt;&quot;</span>;
<a name="l07154"></a>07154          }
<a name="l07155"></a>07155       }
<a name="l07156"></a>07156 
<a name="l07157"></a>07157       <span class="comment">// Everything else</span>
<a name="l07158"></a>07158       <span class="keywordflow">else</span> $embed .= <span class="stringliteral">&#39;&lt;a href=&quot;&#39;</span> . $this-&gt;get_link() . <span class="stringliteral">&#39;&quot; class=&quot;&#39;</span> . $altclass . <span class="stringliteral">&#39;&quot;&gt;&#39;</span> . $alt . <span class="stringliteral">&#39;&lt;/a&gt;&#39;</span>;
<a name="l07159"></a>07159 
<a name="l07160"></a>07160       <span class="keywordflow">return</span> $embed;
<a name="l07161"></a>07161    }
<a name="l07162"></a>07162 
<a name="l07163"></a>07163    <span class="keyword">function</span> get_real_type($find_handler = <span class="keyword">false</span>)
<a name="l07164"></a>07164    {
<a name="l07165"></a>07165       <span class="comment">// If it&#39;s Odeo, let&#39;s get it out of the way.</span>
<a name="l07166"></a>07166       <span class="keywordflow">if</span> (substr(strtolower($this-&gt;get_link()), 0, 15) === <span class="stringliteral">&#39;http://odeo.com&#39;</span>)
<a name="l07167"></a>07167       {
<a name="l07168"></a>07168          <span class="keywordflow">return</span> <span class="stringliteral">&#39;odeo&#39;</span>;
<a name="l07169"></a>07169       }
<a name="l07170"></a>07170 
<a name="l07171"></a>07171       <span class="comment">// Mime-types by handler.</span>
<a name="l07172"></a>07172       $types_flash = array(<span class="stringliteral">&#39;application/x-shockwave-flash&#39;</span>, <span class="stringliteral">&#39;application/futuresplash&#39;</span>); <span class="comment">// Flash</span>
<a name="l07173"></a>07173       $types_fmedia = array(<span class="stringliteral">&#39;video/flv&#39;</span>, <span class="stringliteral">&#39;video/x-flv&#39;</span>,<span class="stringliteral">&#39;flv-application/octet-stream&#39;</span>); <span class="comment">// Flash Media Player</span>
<a name="l07174"></a>07174       $types_quicktime = array(<span class="stringliteral">&#39;audio/3gpp&#39;</span>, <span class="stringliteral">&#39;audio/3gpp2&#39;</span>, <span class="stringliteral">&#39;audio/aac&#39;</span>, <span class="stringliteral">&#39;audio/x-aac&#39;</span>, <span class="stringliteral">&#39;audio/aiff&#39;</span>, <span class="stringliteral">&#39;audio/x-aiff&#39;</span>, <span class="stringliteral">&#39;audio/mid&#39;</span>, <span class="stringliteral">&#39;audio/midi&#39;</span>, <span class="stringliteral">&#39;audio/x-midi&#39;</span>, <span class="stringliteral">&#39;audio/mp4&#39;</span>, <span class="stringliteral">&#39;audio/m4a&#39;</span>, <span class="stringliteral">&#39;audio/x-m4a&#39;</span>, <span class="stringliteral">&#39;audio/wav&#39;</span>, <span class="stringliteral">&#39;audio/x-wav&#39;</span>, <span class="stringliteral">&#39;video/3gpp&#39;</span>, <span class="stringliteral">&#39;video/3gpp2&#39;</span>, <span class="stringliteral">&#39;video/m4v&#39;</span>, <span class="stringliteral">&#39;video/x-m4v&#39;</span>, <span class="stringliteral">&#39;video/mp4&#39;</span>, <span class="stringliteral">&#39;video/mpeg&#39;</span>, <span class="stringliteral">&#39;video/x-mpeg&#39;</span>, <span class="stringliteral">&#39;video/quicktime&#39;</span>, <span class="stringliteral">&#39;video/sd-video&#39;</span>); <span class="comment">// QuickTime</span>
<a name="l07175"></a>07175       $types_wmedia = array(<span class="stringliteral">&#39;application/asx&#39;</span>, <span class="stringliteral">&#39;application/x-mplayer2&#39;</span>, <span class="stringliteral">&#39;audio/x-ms-wma&#39;</span>, <span class="stringliteral">&#39;audio/x-ms-wax&#39;</span>, <span class="stringliteral">&#39;video/x-ms-asf-plugin&#39;</span>, <span class="stringliteral">&#39;video/x-ms-asf&#39;</span>, <span class="stringliteral">&#39;video/x-ms-wm&#39;</span>, <span class="stringliteral">&#39;video/x-ms-wmv&#39;</span>, <span class="stringliteral">&#39;video/x-ms-wvx&#39;</span>); <span class="comment">// Windows Media</span>
<a name="l07176"></a>07176       $types_mp3 = array(<span class="stringliteral">&#39;audio/mp3&#39;</span>, <span class="stringliteral">&#39;audio/x-mp3&#39;</span>, <span class="stringliteral">&#39;audio/mpeg&#39;</span>, <span class="stringliteral">&#39;audio/x-mpeg&#39;</span>); <span class="comment">// MP3</span>
<a name="l07177"></a>07177 
<a name="l07178"></a>07178       <span class="keywordflow">if</span> ($this-&gt;get_type() !== null)
<a name="l07179"></a>07179       {
<a name="l07180"></a>07180          $type = strtolower($this-&gt;type);
<a name="l07181"></a>07181       }
<a name="l07182"></a>07182       <span class="keywordflow">else</span>
<a name="l07183"></a>07183       {
<a name="l07184"></a>07184          $type = null;
<a name="l07185"></a>07185       }
<a name="l07186"></a>07186 
<a name="l07187"></a>07187       <span class="comment">// If we encounter an unsupported mime-type, check the file extension and guess intelligently.</span>
<a name="l07188"></a>07188       <span class="keywordflow">if</span> (!in_array($type, array_merge($types_flash, $types_fmedia, $types_quicktime, $types_wmedia, $types_mp3)))
<a name="l07189"></a>07189       {
<a name="l07190"></a>07190          <span class="keywordflow">switch</span> (strtolower($this-&gt;get_extension()))
<a name="l07191"></a>07191          {
<a name="l07192"></a>07192             <span class="comment">// Audio mime-types</span>
<a name="l07193"></a>07193             <span class="keywordflow">case</span> <span class="stringliteral">&#39;aac&#39;</span>:
<a name="l07194"></a>07194             <span class="keywordflow">case</span> <span class="stringliteral">&#39;adts&#39;</span>:
<a name="l07195"></a>07195                $type = <span class="stringliteral">&#39;audio/acc&#39;</span>;
<a name="l07196"></a>07196                <span class="keywordflow">break</span>;
<a name="l07197"></a>07197 
<a name="l07198"></a>07198             <span class="keywordflow">case</span> <span class="stringliteral">&#39;aif&#39;</span>:
<a name="l07199"></a>07199             <span class="keywordflow">case</span> <span class="stringliteral">&#39;aifc&#39;</span>:
<a name="l07200"></a>07200             <span class="keywordflow">case</span> <span class="stringliteral">&#39;aiff&#39;</span>:
<a name="l07201"></a>07201             <span class="keywordflow">case</span> <span class="stringliteral">&#39;cdda&#39;</span>:
<a name="l07202"></a>07202                $type = <span class="stringliteral">&#39;audio/aiff&#39;</span>;
<a name="l07203"></a>07203                <span class="keywordflow">break</span>;
<a name="l07204"></a>07204 
<a name="l07205"></a>07205             <span class="keywordflow">case</span> <span class="stringliteral">&#39;bwf&#39;</span>:
<a name="l07206"></a>07206                $type = <span class="stringliteral">&#39;audio/wav&#39;</span>;
<a name="l07207"></a>07207                <span class="keywordflow">break</span>;
<a name="l07208"></a>07208 
<a name="l07209"></a>07209             <span class="keywordflow">case</span> <span class="stringliteral">&#39;kar&#39;</span>:
<a name="l07210"></a>07210             <span class="keywordflow">case</span> <span class="stringliteral">&#39;mid&#39;</span>:
<a name="l07211"></a>07211             <span class="keywordflow">case</span> <span class="stringliteral">&#39;midi&#39;</span>:
<a name="l07212"></a>07212             <span class="keywordflow">case</span> <span class="stringliteral">&#39;smf&#39;</span>:
<a name="l07213"></a>07213                $type = <span class="stringliteral">&#39;audio/midi&#39;</span>;
<a name="l07214"></a>07214                <span class="keywordflow">break</span>;
<a name="l07215"></a>07215 
<a name="l07216"></a>07216             <span class="keywordflow">case</span> <span class="stringliteral">&#39;m4a&#39;</span>:
<a name="l07217"></a>07217                $type = <span class="stringliteral">&#39;audio/x-m4a&#39;</span>;
<a name="l07218"></a>07218                <span class="keywordflow">break</span>;
<a name="l07219"></a>07219 
<a name="l07220"></a>07220             <span class="keywordflow">case</span> <span class="stringliteral">&#39;mp3&#39;</span>:
<a name="l07221"></a>07221             <span class="keywordflow">case</span> <span class="stringliteral">&#39;swa&#39;</span>:
<a name="l07222"></a>07222                $type = <span class="stringliteral">&#39;audio/mp3&#39;</span>;
<a name="l07223"></a>07223                <span class="keywordflow">break</span>;
<a name="l07224"></a>07224 
<a name="l07225"></a>07225             <span class="keywordflow">case</span> <span class="stringliteral">&#39;wav&#39;</span>:
<a name="l07226"></a>07226                $type = <span class="stringliteral">&#39;audio/wav&#39;</span>;
<a name="l07227"></a>07227                <span class="keywordflow">break</span>;
<a name="l07228"></a>07228 
<a name="l07229"></a>07229             <span class="keywordflow">case</span> <span class="stringliteral">&#39;wax&#39;</span>:
<a name="l07230"></a>07230                $type = <span class="stringliteral">&#39;audio/x-ms-wax&#39;</span>;
<a name="l07231"></a>07231                <span class="keywordflow">break</span>;
<a name="l07232"></a>07232 
<a name="l07233"></a>07233             <span class="keywordflow">case</span> <span class="stringliteral">&#39;wma&#39;</span>:
<a name="l07234"></a>07234                $type = <span class="stringliteral">&#39;audio/x-ms-wma&#39;</span>;
<a name="l07235"></a>07235                <span class="keywordflow">break</span>;
<a name="l07236"></a>07236 
<a name="l07237"></a>07237             <span class="comment">// Video mime-types</span>
<a name="l07238"></a>07238             <span class="keywordflow">case</span> <span class="stringliteral">&#39;3gp&#39;</span>:
<a name="l07239"></a>07239             <span class="keywordflow">case</span> <span class="stringliteral">&#39;3gpp&#39;</span>:
<a name="l07240"></a>07240                $type = <span class="stringliteral">&#39;video/3gpp&#39;</span>;
<a name="l07241"></a>07241                <span class="keywordflow">break</span>;
<a name="l07242"></a>07242 
<a name="l07243"></a>07243             <span class="keywordflow">case</span> <span class="stringliteral">&#39;3g2&#39;</span>:
<a name="l07244"></a>07244             <span class="keywordflow">case</span> <span class="stringliteral">&#39;3gp2&#39;</span>:
<a name="l07245"></a>07245                $type = <span class="stringliteral">&#39;video/3gpp2&#39;</span>;
<a name="l07246"></a>07246                <span class="keywordflow">break</span>;
<a name="l07247"></a>07247 
<a name="l07248"></a>07248             <span class="keywordflow">case</span> <span class="stringliteral">&#39;asf&#39;</span>:
<a name="l07249"></a>07249                $type = <span class="stringliteral">&#39;video/x-ms-asf&#39;</span>;
<a name="l07250"></a>07250                <span class="keywordflow">break</span>;
<a name="l07251"></a>07251 
<a name="l07252"></a>07252             <span class="keywordflow">case</span> <span class="stringliteral">&#39;flv&#39;</span>:
<a name="l07253"></a>07253                $type = <span class="stringliteral">&#39;video/x-flv&#39;</span>;
<a name="l07254"></a>07254                <span class="keywordflow">break</span>;
<a name="l07255"></a>07255 
<a name="l07256"></a>07256             <span class="keywordflow">case</span> <span class="stringliteral">&#39;m1a&#39;</span>:
<a name="l07257"></a>07257             <span class="keywordflow">case</span> <span class="stringliteral">&#39;m1s&#39;</span>:
<a name="l07258"></a>07258             <span class="keywordflow">case</span> <span class="stringliteral">&#39;m1v&#39;</span>:
<a name="l07259"></a>07259             <span class="keywordflow">case</span> <span class="stringliteral">&#39;m15&#39;</span>:
<a name="l07260"></a>07260             <span class="keywordflow">case</span> <span class="stringliteral">&#39;m75&#39;</span>:
<a name="l07261"></a>07261             <span class="keywordflow">case</span> <span class="stringliteral">&#39;mp2&#39;</span>:
<a name="l07262"></a>07262             <span class="keywordflow">case</span> <span class="stringliteral">&#39;mpa&#39;</span>:
<a name="l07263"></a>07263             <span class="keywordflow">case</span> <span class="stringliteral">&#39;mpeg&#39;</span>:
<a name="l07264"></a>07264             <span class="keywordflow">case</span> <span class="stringliteral">&#39;mpg&#39;</span>:
<a name="l07265"></a>07265             <span class="keywordflow">case</span> <span class="stringliteral">&#39;mpm&#39;</span>:
<a name="l07266"></a>07266             <span class="keywordflow">case</span> <span class="stringliteral">&#39;mpv&#39;</span>:
<a name="l07267"></a>07267                $type = <span class="stringliteral">&#39;video/mpeg&#39;</span>;
<a name="l07268"></a>07268                <span class="keywordflow">break</span>;
<a name="l07269"></a>07269 
<a name="l07270"></a>07270             <span class="keywordflow">case</span> <span class="stringliteral">&#39;m4v&#39;</span>:
<a name="l07271"></a>07271                $type = <span class="stringliteral">&#39;video/x-m4v&#39;</span>;
<a name="l07272"></a>07272                <span class="keywordflow">break</span>;
<a name="l07273"></a>07273 
<a name="l07274"></a>07274             <span class="keywordflow">case</span> <span class="stringliteral">&#39;mov&#39;</span>:
<a name="l07275"></a>07275             <span class="keywordflow">case</span> <span class="stringliteral">&#39;qt&#39;</span>:
<a name="l07276"></a>07276                $type = <span class="stringliteral">&#39;video/quicktime&#39;</span>;
<a name="l07277"></a>07277                <span class="keywordflow">break</span>;
<a name="l07278"></a>07278 
<a name="l07279"></a>07279             <span class="keywordflow">case</span> <span class="stringliteral">&#39;mp4&#39;</span>:
<a name="l07280"></a>07280             <span class="keywordflow">case</span> <span class="stringliteral">&#39;mpg4&#39;</span>:
<a name="l07281"></a>07281                $type = <span class="stringliteral">&#39;video/mp4&#39;</span>;
<a name="l07282"></a>07282                <span class="keywordflow">break</span>;
<a name="l07283"></a>07283 
<a name="l07284"></a>07284             <span class="keywordflow">case</span> <span class="stringliteral">&#39;sdv&#39;</span>:
<a name="l07285"></a>07285                $type = <span class="stringliteral">&#39;video/sd-video&#39;</span>;
<a name="l07286"></a>07286                <span class="keywordflow">break</span>;
<a name="l07287"></a>07287 
<a name="l07288"></a>07288             <span class="keywordflow">case</span> <span class="stringliteral">&#39;wm&#39;</span>:
<a name="l07289"></a>07289                $type = <span class="stringliteral">&#39;video/x-ms-wm&#39;</span>;
<a name="l07290"></a>07290                <span class="keywordflow">break</span>;
<a name="l07291"></a>07291 
<a name="l07292"></a>07292             <span class="keywordflow">case</span> <span class="stringliteral">&#39;wmv&#39;</span>:
<a name="l07293"></a>07293                $type = <span class="stringliteral">&#39;video/x-ms-wmv&#39;</span>;
<a name="l07294"></a>07294                <span class="keywordflow">break</span>;
<a name="l07295"></a>07295 
<a name="l07296"></a>07296             <span class="keywordflow">case</span> <span class="stringliteral">&#39;wvx&#39;</span>:
<a name="l07297"></a>07297                $type = <span class="stringliteral">&#39;video/x-ms-wvx&#39;</span>;
<a name="l07298"></a>07298                <span class="keywordflow">break</span>;
<a name="l07299"></a>07299 
<a name="l07300"></a>07300             <span class="comment">// Flash mime-types</span>
<a name="l07301"></a>07301             <span class="keywordflow">case</span> <span class="stringliteral">&#39;spl&#39;</span>:
<a name="l07302"></a>07302                $type = <span class="stringliteral">&#39;application/futuresplash&#39;</span>;
<a name="l07303"></a>07303                <span class="keywordflow">break</span>;
<a name="l07304"></a>07304 
<a name="l07305"></a>07305             <span class="keywordflow">case</span> <span class="stringliteral">&#39;swf&#39;</span>:
<a name="l07306"></a>07306                $type = <span class="stringliteral">&#39;application/x-shockwave-flash&#39;</span>;
<a name="l07307"></a>07307                <span class="keywordflow">break</span>;
<a name="l07308"></a>07308          }
<a name="l07309"></a>07309       }
<a name="l07310"></a>07310 
<a name="l07311"></a>07311       <span class="keywordflow">if</span> ($find_handler)
<a name="l07312"></a>07312       {
<a name="l07313"></a>07313          <span class="keywordflow">if</span> (in_array($type, $types_flash))
<a name="l07314"></a>07314          {
<a name="l07315"></a>07315             <span class="keywordflow">return</span> <span class="stringliteral">&#39;flash&#39;</span>;
<a name="l07316"></a>07316          }
<a name="l07317"></a>07317          elseif (in_array($type, $types_fmedia))
<a name="l07318"></a>07318          {
<a name="l07319"></a>07319             <span class="keywordflow">return</span> <span class="stringliteral">&#39;fmedia&#39;</span>;
<a name="l07320"></a>07320          }
<a name="l07321"></a>07321          elseif (in_array($type, $types_quicktime))
<a name="l07322"></a>07322          {
<a name="l07323"></a>07323             <span class="keywordflow">return</span> <span class="stringliteral">&#39;quicktime&#39;</span>;
<a name="l07324"></a>07324          }
<a name="l07325"></a>07325          elseif (in_array($type, $types_wmedia))
<a name="l07326"></a>07326          {
<a name="l07327"></a>07327             <span class="keywordflow">return</span> <span class="stringliteral">&#39;wmedia&#39;</span>;
<a name="l07328"></a>07328          }
<a name="l07329"></a>07329          elseif (in_array($type, $types_mp3))
<a name="l07330"></a>07330          {
<a name="l07331"></a>07331             <span class="keywordflow">return</span> <span class="stringliteral">&#39;mp3&#39;</span>;
<a name="l07332"></a>07332          }
<a name="l07333"></a>07333          <span class="keywordflow">else</span>
<a name="l07334"></a>07334          {
<a name="l07335"></a>07335             <span class="keywordflow">return</span> null;
<a name="l07336"></a>07336          }
<a name="l07337"></a>07337       }
<a name="l07338"></a>07338       <span class="keywordflow">else</span>
<a name="l07339"></a>07339       {
<a name="l07340"></a>07340          <span class="keywordflow">return</span> $type;
<a name="l07341"></a>07341       }
<a name="l07342"></a>07342    }
<a name="l07343"></a>07343 }
<a name="l07344"></a>07344 
<a name="l07345"></a><a class="code" href="class_simple_pie___caption.html">07345</a> <span class="keyword">class </span><a class="code" href="class_simple_pie___caption.html">SimplePie_Caption</a>
<a name="l07346"></a>07346 {
<a name="l07347"></a>07347    var $type;
<a name="l07348"></a>07348    var $lang;
<a name="l07349"></a>07349    var $startTime;
<a name="l07350"></a>07350    var $endTime;
<a name="l07351"></a>07351    var $text;
<a name="l07352"></a>07352 
<a name="l07353"></a>07353    <span class="comment">// Constructor, used to input the data</span>
<a name="l07354"></a>07354    <span class="keyword">function</span> <a class="code" href="class_simple_pie___caption.html">SimplePie_Caption</a>($type = null, $lang = null, $startTime = null, $endTime = null, $text = null)
<a name="l07355"></a>07355    {
<a name="l07356"></a>07356       $this-&gt;type = $type;
<a name="l07357"></a>07357       $this-&gt;lang = $lang;
<a name="l07358"></a>07358       $this-&gt;startTime = $startTime;
<a name="l07359"></a>07359       $this-&gt;endTime = $endTime;
<a name="l07360"></a>07360       $this-&gt;text = $text;
<a name="l07361"></a>07361    }
<a name="l07362"></a>07362 
<a name="l07363"></a>07363    <span class="keyword">function</span> __toString()
<a name="l07364"></a>07364    {
<a name="l07365"></a>07365       <span class="comment">// There is no $this-&gt;data here</span>
<a name="l07366"></a>07366       <span class="keywordflow">return</span> md5(serialize($this));
<a name="l07367"></a>07367    }
<a name="l07368"></a>07368 
<a name="l07369"></a>07369    <span class="keyword">function</span> get_endtime()
<a name="l07370"></a>07370    {
<a name="l07371"></a>07371       <span class="keywordflow">if</span> ($this-&gt;endTime !== null)
<a name="l07372"></a>07372       {
<a name="l07373"></a>07373          <span class="keywordflow">return</span> $this-&gt;endTime;
<a name="l07374"></a>07374       }
<a name="l07375"></a>07375       <span class="keywordflow">else</span>
<a name="l07376"></a>07376       {
<a name="l07377"></a>07377          <span class="keywordflow">return</span> null;
<a name="l07378"></a>07378       }
<a name="l07379"></a>07379    }
<a name="l07380"></a>07380 
<a name="l07381"></a>07381    <span class="keyword">function</span> get_language()
<a name="l07382"></a>07382    {
<a name="l07383"></a>07383       <span class="keywordflow">if</span> ($this-&gt;lang !== null)
<a name="l07384"></a>07384       {
<a name="l07385"></a>07385          <span class="keywordflow">return</span> $this-&gt;lang;
<a name="l07386"></a>07386       }
<a name="l07387"></a>07387       <span class="keywordflow">else</span>
<a name="l07388"></a>07388       {
<a name="l07389"></a>07389          <span class="keywordflow">return</span> null;
<a name="l07390"></a>07390       }
<a name="l07391"></a>07391    }
<a name="l07392"></a>07392 
<a name="l07393"></a>07393    <span class="keyword">function</span> get_starttime()
<a name="l07394"></a>07394    {
<a name="l07395"></a>07395       <span class="keywordflow">if</span> ($this-&gt;startTime !== null)
<a name="l07396"></a>07396       {
<a name="l07397"></a>07397          <span class="keywordflow">return</span> $this-&gt;startTime;
<a name="l07398"></a>07398       }
<a name="l07399"></a>07399       <span class="keywordflow">else</span>
<a name="l07400"></a>07400       {
<a name="l07401"></a>07401          <span class="keywordflow">return</span> null;
<a name="l07402"></a>07402       }
<a name="l07403"></a>07403    }
<a name="l07404"></a>07404 
<a name="l07405"></a>07405    <span class="keyword">function</span> get_text()
<a name="l07406"></a>07406    {
<a name="l07407"></a>07407       <span class="keywordflow">if</span> ($this-&gt;text !== null)
<a name="l07408"></a>07408       {
<a name="l07409"></a>07409          <span class="keywordflow">return</span> $this-&gt;text;
<a name="l07410"></a>07410       }
<a name="l07411"></a>07411       <span class="keywordflow">else</span>
<a name="l07412"></a>07412       {
<a name="l07413"></a>07413          <span class="keywordflow">return</span> null;
<a name="l07414"></a>07414       }
<a name="l07415"></a>07415    }
<a name="l07416"></a>07416 
<a name="l07417"></a>07417    <span class="keyword">function</span> get_type()
<a name="l07418"></a>07418    {
<a name="l07419"></a>07419       <span class="keywordflow">if</span> ($this-&gt;type !== null)
<a name="l07420"></a>07420       {
<a name="l07421"></a>07421          <span class="keywordflow">return</span> $this-&gt;type;
<a name="l07422"></a>07422       }
<a name="l07423"></a>07423       <span class="keywordflow">else</span>
<a name="l07424"></a>07424       {
<a name="l07425"></a>07425          <span class="keywordflow">return</span> null;
<a name="l07426"></a>07426       }
<a name="l07427"></a>07427    }
<a name="l07428"></a>07428 }
<a name="l07429"></a>07429 
<a name="l07430"></a><a class="code" href="class_simple_pie___credit.html">07430</a> <span class="keyword">class </span><a class="code" href="class_simple_pie___credit.html">SimplePie_Credit</a>
<a name="l07431"></a>07431 {
<a name="l07432"></a>07432    var $role;
<a name="l07433"></a>07433    var $scheme;
<a name="l07434"></a>07434    var $name;
<a name="l07435"></a>07435 
<a name="l07436"></a>07436    <span class="comment">// Constructor, used to input the data</span>
<a name="l07437"></a>07437    <span class="keyword">function</span> <a class="code" href="class_simple_pie___credit.html">SimplePie_Credit</a>($role = null, $scheme = null, $name = null)
<a name="l07438"></a>07438    {
<a name="l07439"></a>07439       $this-&gt;role = $role;
<a name="l07440"></a>07440       $this-&gt;scheme = $scheme;
<a name="l07441"></a>07441       $this-&gt;name = $name;
<a name="l07442"></a>07442    }
<a name="l07443"></a>07443 
<a name="l07444"></a>07444    <span class="keyword">function</span> __toString()
<a name="l07445"></a>07445    {
<a name="l07446"></a>07446       <span class="comment">// There is no $this-&gt;data here</span>
<a name="l07447"></a>07447       <span class="keywordflow">return</span> md5(serialize($this));
<a name="l07448"></a>07448    }
<a name="l07449"></a>07449 
<a name="l07450"></a>07450    <span class="keyword">function</span> get_role()
<a name="l07451"></a>07451    {
<a name="l07452"></a>07452       <span class="keywordflow">if</span> ($this-&gt;role !== null)
<a name="l07453"></a>07453       {
<a name="l07454"></a>07454          <span class="keywordflow">return</span> $this-&gt;role;
<a name="l07455"></a>07455       }
<a name="l07456"></a>07456       <span class="keywordflow">else</span>
<a name="l07457"></a>07457       {
<a name="l07458"></a>07458          <span class="keywordflow">return</span> null;
<a name="l07459"></a>07459       }
<a name="l07460"></a>07460    }
<a name="l07461"></a>07461 
<a name="l07462"></a>07462    <span class="keyword">function</span> get_scheme()
<a name="l07463"></a>07463    {
<a name="l07464"></a>07464       <span class="keywordflow">if</span> ($this-&gt;scheme !== null)
<a name="l07465"></a>07465       {
<a name="l07466"></a>07466          <span class="keywordflow">return</span> $this-&gt;scheme;
<a name="l07467"></a>07467       }
<a name="l07468"></a>07468       <span class="keywordflow">else</span>
<a name="l07469"></a>07469       {
<a name="l07470"></a>07470          <span class="keywordflow">return</span> null;
<a name="l07471"></a>07471       }
<a name="l07472"></a>07472    }
<a name="l07473"></a>07473 
<a name="l07474"></a>07474    <span class="keyword">function</span> get_name()
<a name="l07475"></a>07475    {
<a name="l07476"></a>07476       <span class="keywordflow">if</span> ($this-&gt;name !== null)
<a name="l07477"></a>07477       {
<a name="l07478"></a>07478          <span class="keywordflow">return</span> $this-&gt;name;
<a name="l07479"></a>07479       }
<a name="l07480"></a>07480       <span class="keywordflow">else</span>
<a name="l07481"></a>07481       {
<a name="l07482"></a>07482          <span class="keywordflow">return</span> null;
<a name="l07483"></a>07483       }
<a name="l07484"></a>07484    }
<a name="l07485"></a>07485 }
<a name="l07486"></a>07486 
<a name="l07487"></a><a class="code" href="class_simple_pie___copyright.html">07487</a> <span class="keyword">class </span><a class="code" href="class_simple_pie___copyright.html">SimplePie_Copyright</a>
<a name="l07488"></a>07488 {
<a name="l07489"></a>07489    var $url;
<a name="l07490"></a>07490    var $label;
<a name="l07491"></a>07491 
<a name="l07492"></a>07492    <span class="comment">// Constructor, used to input the data</span>
<a name="l07493"></a>07493    <span class="keyword">function</span> <a class="code" href="class_simple_pie___copyright.html">SimplePie_Copyright</a>($url = null, $label = null)
<a name="l07494"></a>07494    {
<a name="l07495"></a>07495       $this-&gt;url = $url;
<a name="l07496"></a>07496       $this-&gt;label = $label;
<a name="l07497"></a>07497    }
<a name="l07498"></a>07498 
<a name="l07499"></a>07499    <span class="keyword">function</span> __toString()
<a name="l07500"></a>07500    {
<a name="l07501"></a>07501       <span class="comment">// There is no $this-&gt;data here</span>
<a name="l07502"></a>07502       <span class="keywordflow">return</span> md5(serialize($this));
<a name="l07503"></a>07503    }
<a name="l07504"></a>07504 
<a name="l07505"></a>07505    <span class="keyword">function</span> get_url()
<a name="l07506"></a>07506    {
<a name="l07507"></a>07507       <span class="keywordflow">if</span> ($this-&gt;url !== null)
<a name="l07508"></a>07508       {
<a name="l07509"></a>07509          <span class="keywordflow">return</span> $this-&gt;url;
<a name="l07510"></a>07510       }
<a name="l07511"></a>07511       <span class="keywordflow">else</span>
<a name="l07512"></a>07512       {
<a name="l07513"></a>07513          <span class="keywordflow">return</span> null;
<a name="l07514"></a>07514       }
<a name="l07515"></a>07515    }
<a name="l07516"></a>07516 
<a name="l07517"></a>07517    <span class="keyword">function</span> get_attribution()
<a name="l07518"></a>07518    {
<a name="l07519"></a>07519       <span class="keywordflow">if</span> ($this-&gt;label !== null)
<a name="l07520"></a>07520       {
<a name="l07521"></a>07521          <span class="keywordflow">return</span> $this-&gt;label;
<a name="l07522"></a>07522       }
<a name="l07523"></a>07523       <span class="keywordflow">else</span>
<a name="l07524"></a>07524       {
<a name="l07525"></a>07525          <span class="keywordflow">return</span> null;
<a name="l07526"></a>07526       }
<a name="l07527"></a>07527    }
<a name="l07528"></a>07528 }
<a name="l07529"></a>07529 
<a name="l07530"></a><a class="code" href="class_simple_pie___rating.html">07530</a> <span class="keyword">class </span><a class="code" href="class_simple_pie___rating.html">SimplePie_Rating</a>
<a name="l07531"></a>07531 {
<a name="l07532"></a>07532    var $scheme;
<a name="l07533"></a>07533    var $value;
<a name="l07534"></a>07534 
<a name="l07535"></a>07535    <span class="comment">// Constructor, used to input the data</span>
<a name="l07536"></a>07536    <span class="keyword">function</span> <a class="code" href="class_simple_pie___rating.html">SimplePie_Rating</a>($scheme = null, $value = null)
<a name="l07537"></a>07537    {
<a name="l07538"></a>07538       $this-&gt;scheme = $scheme;
<a name="l07539"></a>07539       $this-&gt;value = $value;
<a name="l07540"></a>07540    }
<a name="l07541"></a>07541 
<a name="l07542"></a>07542    <span class="keyword">function</span> __toString()
<a name="l07543"></a>07543    {
<a name="l07544"></a>07544       <span class="comment">// There is no $this-&gt;data here</span>
<a name="l07545"></a>07545       <span class="keywordflow">return</span> md5(serialize($this));
<a name="l07546"></a>07546    }
<a name="l07547"></a>07547 
<a name="l07548"></a>07548    <span class="keyword">function</span> get_scheme()
<a name="l07549"></a>07549    {
<a name="l07550"></a>07550       <span class="keywordflow">if</span> ($this-&gt;scheme !== null)
<a name="l07551"></a>07551       {
<a name="l07552"></a>07552          <span class="keywordflow">return</span> $this-&gt;scheme;
<a name="l07553"></a>07553       }
<a name="l07554"></a>07554       <span class="keywordflow">else</span>
<a name="l07555"></a>07555       {
<a name="l07556"></a>07556          <span class="keywordflow">return</span> null;
<a name="l07557"></a>07557       }
<a name="l07558"></a>07558    }
<a name="l07559"></a>07559 
<a name="l07560"></a>07560    <span class="keyword">function</span> get_value()
<a name="l07561"></a>07561    {
<a name="l07562"></a>07562       <span class="keywordflow">if</span> ($this-&gt;value !== null)
<a name="l07563"></a>07563       {
<a name="l07564"></a>07564          <span class="keywordflow">return</span> $this-&gt;value;
<a name="l07565"></a>07565       }
<a name="l07566"></a>07566       <span class="keywordflow">else</span>
<a name="l07567"></a>07567       {
<a name="l07568"></a>07568          <span class="keywordflow">return</span> null;
<a name="l07569"></a>07569       }
<a name="l07570"></a>07570    }
<a name="l07571"></a>07571 }
<a name="l07572"></a>07572 
<a name="l07573"></a><a class="code" href="class_simple_pie___restriction.html">07573</a> <span class="keyword">class </span><a class="code" href="class_simple_pie___restriction.html">SimplePie_Restriction</a>
<a name="l07574"></a>07574 {
<a name="l07575"></a>07575    var $relationship;
<a name="l07576"></a>07576    var $type;
<a name="l07577"></a>07577    var $value;
<a name="l07578"></a>07578 
<a name="l07579"></a>07579    <span class="comment">// Constructor, used to input the data</span>
<a name="l07580"></a>07580    <span class="keyword">function</span> <a class="code" href="class_simple_pie___restriction.html">SimplePie_Restriction</a>($relationship = null, $type = null, $value = null)
<a name="l07581"></a>07581    {
<a name="l07582"></a>07582       $this-&gt;relationship = $relationship;
<a name="l07583"></a>07583       $this-&gt;type = $type;
<a name="l07584"></a>07584       $this-&gt;value = $value;
<a name="l07585"></a>07585    }
<a name="l07586"></a>07586 
<a name="l07587"></a>07587    <span class="keyword">function</span> __toString()
<a name="l07588"></a>07588    {
<a name="l07589"></a>07589       <span class="comment">// There is no $this-&gt;data here</span>
<a name="l07590"></a>07590       <span class="keywordflow">return</span> md5(serialize($this));
<a name="l07591"></a>07591    }
<a name="l07592"></a>07592 
<a name="l07593"></a>07593    <span class="keyword">function</span> get_relationship()
<a name="l07594"></a>07594    {
<a name="l07595"></a>07595       <span class="keywordflow">if</span> ($this-&gt;relationship !== null)
<a name="l07596"></a>07596       {
<a name="l07597"></a>07597          <span class="keywordflow">return</span> $this-&gt;relationship;
<a name="l07598"></a>07598       }
<a name="l07599"></a>07599       <span class="keywordflow">else</span>
<a name="l07600"></a>07600       {
<a name="l07601"></a>07601          <span class="keywordflow">return</span> null;
<a name="l07602"></a>07602       }
<a name="l07603"></a>07603    }
<a name="l07604"></a>07604 
<a name="l07605"></a>07605    <span class="keyword">function</span> get_type()
<a name="l07606"></a>07606    {
<a name="l07607"></a>07607       <span class="keywordflow">if</span> ($this-&gt;type !== null)
<a name="l07608"></a>07608       {
<a name="l07609"></a>07609          <span class="keywordflow">return</span> $this-&gt;type;
<a name="l07610"></a>07610       }
<a name="l07611"></a>07611       <span class="keywordflow">else</span>
<a name="l07612"></a>07612       {
<a name="l07613"></a>07613          <span class="keywordflow">return</span> null;
<a name="l07614"></a>07614       }
<a name="l07615"></a>07615    }
<a name="l07616"></a>07616 
<a name="l07617"></a>07617    <span class="keyword">function</span> get_value()
<a name="l07618"></a>07618    {
<a name="l07619"></a>07619       <span class="keywordflow">if</span> ($this-&gt;value !== null)
<a name="l07620"></a>07620       {
<a name="l07621"></a>07621          <span class="keywordflow">return</span> $this-&gt;value;
<a name="l07622"></a>07622       }
<a name="l07623"></a>07623       <span class="keywordflow">else</span>
<a name="l07624"></a>07624       {
<a name="l07625"></a>07625          <span class="keywordflow">return</span> null;
<a name="l07626"></a>07626       }
<a name="l07627"></a>07627    }
<a name="l07628"></a>07628 }
<a name="l07629"></a>07629 <span class="comment"></span>
<a name="l07630"></a>07630 <span class="comment">/**</span>
<a name="l07631"></a>07631 <span class="comment"> * @todo Move to properly supporting RFC2616 (HTTP/1.1)</span>
<a name="l07632"></a>07632 <span class="comment"> */</span>
<a name="l07633"></a><a class="code" href="class_simple_pie___file.html">07633</a> <span class="keyword">class </span><a class="code" href="class_simple_pie___file.html">SimplePie_File</a>
<a name="l07634"></a>07634 {
<a name="l07635"></a>07635    var $url;
<a name="l07636"></a>07636    var $useragent;
<a name="l07637"></a>07637    var $success = <span class="keyword">true</span>;
<a name="l07638"></a>07638    var $headers = array();
<a name="l07639"></a>07639    var $body;
<a name="l07640"></a>07640    var $status_code;
<a name="l07641"></a>07641    var $redirects = 0;
<a name="l07642"></a>07642    var $error;
<a name="l07643"></a>07643    var $method = SIMPLEPIE_FILE_SOURCE_NONE;
<a name="l07644"></a>07644 
<a name="l07645"></a>07645    <span class="keyword">function</span> <a class="code" href="class_simple_pie___file.html">SimplePie_File</a>($url, $timeout = 10, $redirects = 5, $headers = null, $useragent = null, $force_fsockopen = <span class="keyword">false</span>)
<a name="l07646"></a>07646    {
<a name="l07647"></a>07647       <span class="keywordflow">if</span> (class_exists(<span class="stringliteral">&#39;idna_convert&#39;</span>))
<a name="l07648"></a>07648       {
<a name="l07649"></a>07649          $idn =&amp; <span class="keyword">new</span> idna_convert;
<a name="l07650"></a>07650          $parsed = SimplePie_Misc::parse_url($url);
<a name="l07651"></a>07651          $url = SimplePie_Misc::compress_parse_url($parsed[<span class="stringliteral">&#39;scheme&#39;</span>], $idn-&gt;encode($parsed[<span class="stringliteral">&#39;authority&#39;</span>]), $parsed[<span class="stringliteral">&#39;path&#39;</span>], $parsed[<span class="stringliteral">&#39;query&#39;</span>], $parsed[<span class="stringliteral">&#39;fragment&#39;</span>]);
<a name="l07652"></a>07652       }
<a name="l07653"></a>07653       $this-&gt;url = $url;
<a name="l07654"></a>07654       $this-&gt;useragent = $useragent;
<a name="l07655"></a>07655       <span class="keywordflow">if</span> (preg_match(<span class="stringliteral">&#39;/^http(s)?:\/\//i&#39;</span>, $url))
<a name="l07656"></a>07656       {
<a name="l07657"></a>07657          <span class="keywordflow">if</span> ($useragent === null)
<a name="l07658"></a>07658          {
<a name="l07659"></a>07659             $useragent = ini_get(<span class="stringliteral">&#39;user_agent&#39;</span>);
<a name="l07660"></a>07660             $this-&gt;useragent = $useragent;
<a name="l07661"></a>07661          }
<a name="l07662"></a>07662          <span class="keywordflow">if</span> (!is_array($headers))
<a name="l07663"></a>07663          {
<a name="l07664"></a>07664             $headers = array();
<a name="l07665"></a>07665          }
<a name="l07666"></a>07666          <span class="keywordflow">if</span> (!$force_fsockopen &amp;&amp; function_exists(<span class="stringliteral">&#39;curl_exec&#39;</span>))
<a name="l07667"></a>07667          {
<a name="l07668"></a>07668             $this-&gt;method = SIMPLEPIE_FILE_SOURCE_REMOTE | SIMPLEPIE_FILE_SOURCE_CURL;
<a name="l07669"></a>07669             $fp = curl_init();
<a name="l07670"></a>07670             $headers2 = array();
<a name="l07671"></a>07671             <span class="keywordflow">foreach</span> ($headers as $key =&gt; $value)
<a name="l07672"></a>07672             {
<a name="l07673"></a>07673                $headers2[] = <span class="stringliteral">&quot;$key: $value&quot;</span>;
<a name="l07674"></a>07674             }
<a name="l07675"></a>07675             <span class="keywordflow">if</span> (version_compare(SimplePie_Misc::get_curl_version(), <span class="stringliteral">&#39;7.10.5&#39;</span>, <span class="stringliteral">&#39;&gt;=&#39;</span>))
<a name="l07676"></a>07676             {
<a name="l07677"></a>07677                curl_setopt($fp, CURLOPT_ENCODING, <span class="stringliteral">&#39;&#39;</span>);
<a name="l07678"></a>07678             }
<a name="l07679"></a>07679             curl_setopt($fp, CURLOPT_URL, $url);
<a name="l07680"></a>07680             curl_setopt($fp, CURLOPT_HEADER, 1);
<a name="l07681"></a>07681             curl_setopt($fp, CURLOPT_RETURNTRANSFER, 1);
<a name="l07682"></a>07682             curl_setopt($fp, CURLOPT_TIMEOUT, $timeout);
<a name="l07683"></a>07683             curl_setopt($fp, CURLOPT_CONNECTTIMEOUT, $timeout);
<a name="l07684"></a>07684             curl_setopt($fp, CURLOPT_REFERER, $url);
<a name="l07685"></a>07685             curl_setopt($fp, CURLOPT_USERAGENT, $useragent);
<a name="l07686"></a>07686             curl_setopt($fp, CURLOPT_HTTPHEADER, $headers2);
<a name="l07687"></a>07687             <span class="keywordflow">if</span> (!ini_get(<span class="stringliteral">&#39;open_basedir&#39;</span>) &amp;&amp; !ini_get(<span class="stringliteral">&#39;safe_mode&#39;</span>) &amp;&amp; version_compare(SimplePie_Misc::get_curl_version(), <span class="stringliteral">&#39;7.15.2&#39;</span>, <span class="stringliteral">&#39;&gt;=&#39;</span>))
<a name="l07688"></a>07688             {
<a name="l07689"></a>07689                curl_setopt($fp, CURLOPT_FOLLOWLOCATION, 1);
<a name="l07690"></a>07690                curl_setopt($fp, CURLOPT_MAXREDIRS, $redirects);
<a name="l07691"></a>07691             }
<a name="l07692"></a>07692 
<a name="l07693"></a>07693             $this-&gt;headers = curl_exec($fp);
<a name="l07694"></a>07694             <span class="keywordflow">if</span> (curl_errno($fp) === 23 || curl_errno($fp) === 61)
<a name="l07695"></a>07695             {
<a name="l07696"></a>07696                curl_setopt($fp, CURLOPT_ENCODING, <span class="stringliteral">&#39;none&#39;</span>);
<a name="l07697"></a>07697                $this-&gt;headers = curl_exec($fp);
<a name="l07698"></a>07698             }
<a name="l07699"></a>07699             <span class="keywordflow">if</span> (curl_errno($fp))
<a name="l07700"></a>07700             {
<a name="l07701"></a>07701                $this-&gt;error = <span class="stringliteral">&#39;cURL error &#39;</span> . curl_errno($fp) . <span class="stringliteral">&#39;: &#39;</span> . curl_error($fp);
<a name="l07702"></a>07702                $this-&gt;success = <span class="keyword">false</span>;
<a name="l07703"></a>07703             }
<a name="l07704"></a>07704             <span class="keywordflow">else</span>
<a name="l07705"></a>07705             {
<a name="l07706"></a>07706                $info = curl_getinfo($fp);
<a name="l07707"></a>07707                curl_close($fp);
<a name="l07708"></a>07708                $this-&gt;headers = explode(<span class="stringliteral">&quot;\r\n\r\n&quot;</span>, $this-&gt;headers, $info[<span class="stringliteral">&#39;redirect_count&#39;</span>] + 1);
<a name="l07709"></a>07709                $this-&gt;headers = array_pop($this-&gt;headers);
<a name="l07710"></a>07710                $parser =&amp; <span class="keyword">new</span> <a class="code" href="class_simple_pie___h_t_t_p___parser.html">SimplePie_HTTP_Parser</a>($this-&gt;headers);
<a name="l07711"></a>07711                <span class="keywordflow">if</span> ($parser-&gt;parse())
<a name="l07712"></a>07712                {
<a name="l07713"></a>07713                   $this-&gt;headers = $parser-&gt;headers;
<a name="l07714"></a>07714                   $this-&gt;body = $parser-&gt;body;
<a name="l07715"></a>07715                   $this-&gt;status_code = $parser-&gt;status_code;
<a name="l07716"></a>07716                   <span class="keywordflow">if</span> ((in_array($this-&gt;status_code, array(300, 301, 302, 303, 307)) || $this-&gt;status_code &gt; 307 &amp;&amp; $this-&gt;status_code &lt; 400) &amp;&amp; isset($this-&gt;headers[<span class="stringliteral">&#39;location&#39;</span>]) &amp;&amp; $this-&gt;redirects &lt; $redirects)
<a name="l07717"></a>07717                   {
<a name="l07718"></a>07718                      $this-&gt;redirects++;
<a name="l07719"></a>07719                      $location = SimplePie_Misc::absolutize_url($this-&gt;headers[<span class="stringliteral">&#39;location&#39;</span>], $url);
<a name="l07720"></a>07720                      <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie___file.html">SimplePie_File</a>($location, $timeout, $redirects, $headers, $useragent, $force_fsockopen);
<a name="l07721"></a>07721                   }
<a name="l07722"></a>07722                }
<a name="l07723"></a>07723             }
<a name="l07724"></a>07724          }
<a name="l07725"></a>07725          <span class="keywordflow">else</span>
<a name="l07726"></a>07726          {
<a name="l07727"></a>07727             $this-&gt;method = SIMPLEPIE_FILE_SOURCE_REMOTE | SIMPLEPIE_FILE_SOURCE_FSOCKOPEN;
<a name="l07728"></a>07728             $url_parts = parse_url($url);
<a name="l07729"></a>07729             <span class="keywordflow">if</span> (isset($url_parts[<span class="stringliteral">&#39;scheme&#39;</span>]) &amp;&amp; strtolower($url_parts[<span class="stringliteral">&#39;scheme&#39;</span>]) === <span class="stringliteral">&#39;https&#39;</span>)
<a name="l07730"></a>07730             {
<a name="l07731"></a>07731                $url_parts[<span class="stringliteral">&#39;host&#39;</span>] = <span class="stringliteral">&quot;ssl://$url_parts[host]&quot;</span>;
<a name="l07732"></a>07732                $url_parts[<span class="stringliteral">&#39;port&#39;</span>] = 443;
<a name="l07733"></a>07733             }
<a name="l07734"></a>07734             <span class="keywordflow">if</span> (!isset($url_parts[<span class="stringliteral">&#39;port&#39;</span>]))
<a name="l07735"></a>07735             {
<a name="l07736"></a>07736                $url_parts[<span class="stringliteral">&#39;port&#39;</span>] = 80;
<a name="l07737"></a>07737             }
<a name="l07738"></a>07738             $fp = @fsockopen($url_parts[<span class="stringliteral">&#39;host&#39;</span>], $url_parts[<span class="stringliteral">&#39;port&#39;</span>], $errno, $errstr, $timeout);
<a name="l07739"></a>07739             <span class="keywordflow">if</span> (!$fp)
<a name="l07740"></a>07740             {
<a name="l07741"></a>07741                $this-&gt;error = <span class="stringliteral">&#39;fsockopen error: &#39;</span> . $errstr;
<a name="l07742"></a>07742                $this-&gt;success = <span class="keyword">false</span>;
<a name="l07743"></a>07743             }
<a name="l07744"></a>07744             <span class="keywordflow">else</span>
<a name="l07745"></a>07745             {
<a name="l07746"></a>07746                stream_set_timeout($fp, $timeout);
<a name="l07747"></a>07747                <span class="keywordflow">if</span> (isset($url_parts[<span class="stringliteral">&#39;path&#39;</span>]))
<a name="l07748"></a>07748                {
<a name="l07749"></a>07749                   <span class="keywordflow">if</span> (isset($url_parts[<span class="stringliteral">&#39;query&#39;</span>]))
<a name="l07750"></a>07750                   {
<a name="l07751"></a>07751                      $get = <span class="stringliteral">&quot;$url_parts[path]?$url_parts[query]&quot;</span>;
<a name="l07752"></a>07752                   }
<a name="l07753"></a>07753                   <span class="keywordflow">else</span>
<a name="l07754"></a>07754                   {
<a name="l07755"></a>07755                      $get = $url_parts[<span class="stringliteral">&#39;path&#39;</span>];
<a name="l07756"></a>07756                   }
<a name="l07757"></a>07757                }
<a name="l07758"></a>07758                <span class="keywordflow">else</span>
<a name="l07759"></a>07759                {
<a name="l07760"></a>07760                   $get = <span class="charliteral">&#39;/&#39;</span>;
<a name="l07761"></a>07761                }
<a name="l07762"></a>07762                $out = <span class="stringliteral">&quot;GET $get HTTP/1.0\r\n&quot;</span>;
<a name="l07763"></a>07763                $out .= <span class="stringliteral">&quot;Host: $url_parts[host]\r\n&quot;</span>;
<a name="l07764"></a>07764                $out .= <span class="stringliteral">&quot;User-Agent: $useragent\r\n&quot;</span>;
<a name="l07765"></a>07765                <span class="keywordflow">if</span> (extension_loaded(<span class="stringliteral">&#39;zlib&#39;</span>))
<a name="l07766"></a>07766                {
<a name="l07767"></a>07767                   $out .= <span class="stringliteral">&quot;Accept-Encoding: x-gzip,gzip,deflate\r\n&quot;</span>;
<a name="l07768"></a>07768                }
<a name="l07769"></a>07769 
<a name="l07770"></a>07770                <span class="keywordflow">if</span> (isset($url_parts[<span class="stringliteral">&#39;user&#39;</span>]) &amp;&amp; isset($url_parts[<span class="stringliteral">&#39;pass&#39;</span>]))
<a name="l07771"></a>07771                {
<a name="l07772"></a>07772                   $out .= <span class="stringliteral">&quot;Authorization: Basic &quot;</span> . base64_encode(<span class="stringliteral">&quot;$url_parts[user]:$url_parts[pass]&quot;</span>) . <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l07773"></a>07773                }
<a name="l07774"></a>07774                <span class="keywordflow">foreach</span> ($headers as $key =&gt; $value)
<a name="l07775"></a>07775                {
<a name="l07776"></a>07776                   $out .= <span class="stringliteral">&quot;$key: $value\r\n&quot;</span>;
<a name="l07777"></a>07777                }
<a name="l07778"></a>07778                $out .= <span class="stringliteral">&quot;Connection: Close\r\n\r\n&quot;</span>;
<a name="l07779"></a>07779                fwrite($fp, $out);
<a name="l07780"></a>07780 
<a name="l07781"></a>07781                $info = stream_get_meta_data($fp);
<a name="l07782"></a>07782 
<a name="l07783"></a>07783                $this-&gt;headers = <span class="stringliteral">&#39;&#39;</span>;
<a name="l07784"></a>07784                <span class="keywordflow">while</span> (!$info[<span class="stringliteral">&#39;eof&#39;</span>] &amp;&amp; !$info[<span class="stringliteral">&#39;timed_out&#39;</span>])
<a name="l07785"></a>07785                {
<a name="l07786"></a>07786                   $this-&gt;headers .= fread($fp, 1160);
<a name="l07787"></a>07787                   $info = stream_get_meta_data($fp);
<a name="l07788"></a>07788                }
<a name="l07789"></a>07789                <span class="keywordflow">if</span> (!$info[<span class="stringliteral">&#39;timed_out&#39;</span>])
<a name="l07790"></a>07790                {
<a name="l07791"></a>07791                   $parser =&amp; <span class="keyword">new</span> <a class="code" href="class_simple_pie___h_t_t_p___parser.html">SimplePie_HTTP_Parser</a>($this-&gt;headers);
<a name="l07792"></a>07792                   <span class="keywordflow">if</span> ($parser-&gt;parse())
<a name="l07793"></a>07793                   {
<a name="l07794"></a>07794                      $this-&gt;headers = $parser-&gt;headers;
<a name="l07795"></a>07795                      $this-&gt;body = $parser-&gt;body;
<a name="l07796"></a>07796                      $this-&gt;status_code = $parser-&gt;status_code;
<a name="l07797"></a>07797                      <span class="keywordflow">if</span> ((in_array($this-&gt;status_code, array(300, 301, 302, 303, 307)) || $this-&gt;status_code &gt; 307 &amp;&amp; $this-&gt;status_code &lt; 400) &amp;&amp; isset($this-&gt;headers[<span class="stringliteral">&#39;location&#39;</span>]) &amp;&amp; $this-&gt;redirects &lt; $redirects)
<a name="l07798"></a>07798                      {
<a name="l07799"></a>07799                         $this-&gt;redirects++;
<a name="l07800"></a>07800                         $location = SimplePie_Misc::absolutize_url($this-&gt;headers[<span class="stringliteral">&#39;location&#39;</span>], $url);
<a name="l07801"></a>07801                         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_simple_pie___file.html">SimplePie_File</a>($location, $timeout, $redirects, $headers, $useragent, $force_fsockopen);
<a name="l07802"></a>07802                      }
<a name="l07803"></a>07803                      <span class="keywordflow">if</span> (isset($this-&gt;headers[<span class="stringliteral">&#39;content-encoding&#39;</span>]))
<a name="l07804"></a>07804                      {
<a name="l07805"></a>07805                         <span class="comment">// Hey, we act dumb elsewhere, so let&#39;s do that here too</span>
<a name="l07806"></a>07806                         <span class="keywordflow">switch</span> (strtolower(trim($this-&gt;headers[<span class="stringliteral">&#39;content-encoding&#39;</span>], <span class="stringliteral">&quot;\x09\x0A\x0D\x20&quot;</span>)))
<a name="l07807"></a>07807                         {
<a name="l07808"></a>07808                            <span class="keywordflow">case</span> <span class="stringliteral">&#39;gzip&#39;</span>:
<a name="l07809"></a>07809                            <span class="keywordflow">case</span> <span class="stringliteral">&#39;x-gzip&#39;</span>:
<a name="l07810"></a>07810                               $decoder =&amp; <span class="keyword">new</span> <a class="code" href="class_simple_pie__gzdecode.html">SimplePie_gzdecode</a>($this-&gt;body);
<a name="l07811"></a>07811                               <span class="keywordflow">if</span> (!$decoder-&gt;parse())
<a name="l07812"></a>07812                               {
<a name="l07813"></a>07813                                  $this-&gt;error = <span class="stringliteral">&#39;Unable to decode HTTP &quot;gzip&quot; stream&#39;</span>;
<a name="l07814"></a>07814                                  $this-&gt;success = <span class="keyword">false</span>;
<a name="l07815"></a>07815                               }
<a name="l07816"></a>07816                               <span class="keywordflow">else</span>
<a name="l07817"></a>07817                               {
<a name="l07818"></a>07818                                  $this-&gt;body = $decoder-&gt;data;
<a name="l07819"></a>07819                               }
<a name="l07820"></a>07820                               <span class="keywordflow">break</span>;
<a name="l07821"></a>07821 
<a name="l07822"></a>07822                            <span class="keywordflow">case</span> <span class="stringliteral">&#39;deflate&#39;</span>:
<a name="l07823"></a>07823                               <span class="keywordflow">if</span> (($body = gzuncompress($this-&gt;body)) === <span class="keyword">false</span>)
<a name="l07824"></a>07824                               {
<a name="l07825"></a>07825                                  <span class="keywordflow">if</span> (($body = gzinflate($this-&gt;body)) === <span class="keyword">false</span>)
<a name="l07826"></a>07826                                  {
<a name="l07827"></a>07827                                     $this-&gt;error = <span class="stringliteral">&#39;Unable to decode HTTP &quot;deflate&quot; stream&#39;</span>;
<a name="l07828"></a>07828                                     $this-&gt;success = <span class="keyword">false</span>;
<a name="l07829"></a>07829                                  }
<a name="l07830"></a>07830                               }
<a name="l07831"></a>07831                               $this-&gt;body = $body;
<a name="l07832"></a>07832                               <span class="keywordflow">break</span>;
<a name="l07833"></a>07833 
<a name="l07834"></a>07834                            <span class="keywordflow">default</span>:
<a name="l07835"></a>07835                               $this-&gt;error = <span class="stringliteral">&#39;Unknown content coding&#39;</span>;
<a name="l07836"></a>07836                               $this-&gt;success = <span class="keyword">false</span>;
<a name="l07837"></a>07837                         }
<a name="l07838"></a>07838                      }
<a name="l07839"></a>07839                   }
<a name="l07840"></a>07840                }
<a name="l07841"></a>07841                <span class="keywordflow">else</span>
<a name="l07842"></a>07842                {
<a name="l07843"></a>07843                   $this-&gt;error = <span class="stringliteral">&#39;fsocket timed out&#39;</span>;
<a name="l07844"></a>07844                   $this-&gt;success = <span class="keyword">false</span>;
<a name="l07845"></a>07845                }
<a name="l07846"></a>07846                fclose($fp);
<a name="l07847"></a>07847             }
<a name="l07848"></a>07848          }
<a name="l07849"></a>07849       }
<a name="l07850"></a>07850       <span class="keywordflow">else</span>
<a name="l07851"></a>07851       {
<a name="l07852"></a>07852          $this-&gt;method = SIMPLEPIE_FILE_SOURCE_LOCAL | SIMPLEPIE_FILE_SOURCE_FILE_GET_CONTENTS;
<a name="l07853"></a>07853 
<a name="l07854"></a>07854          <span class="keywordflow">if</span> (!$this-&gt;body = file_get_contents($url))
<a name="l07855"></a>07855          {
<a name="l07856"></a>07856             $this-&gt;error = <span class="stringliteral">&#39;file_get_contents could not read the file&#39;</span>;
<a name="l07857"></a>07857             $this-&gt;success = <span class="keyword">false</span>;
<a name="l07858"></a>07858          }
<a name="l07859"></a>07859       }
<a name="l07860"></a>07860    }
<a name="l07861"></a>07861 }
<a name="l07862"></a>07862 <span class="comment"></span>
<a name="l07863"></a>07863 <span class="comment">/**</span>
<a name="l07864"></a>07864 <span class="comment"> * HTTP Response Parser</span>
<a name="l07865"></a>07865 <span class="comment"> *</span>
<a name="l07866"></a>07866 <span class="comment"> * @package SimplePie</span>
<a name="l07867"></a>07867 <span class="comment"> */</span>
<a name="l07868"></a><a class="code" href="class_simple_pie___h_t_t_p___parser.html">07868</a> <span class="keyword">class </span><a class="code" href="class_simple_pie___h_t_t_p___parser.html">SimplePie_HTTP_Parser</a>
<a name="l07869"></a>07869 {<span class="comment"></span>
<a name="l07870"></a>07870 <span class="comment">   /**</span>
<a name="l07871"></a>07871 <span class="comment">    * HTTP Version</span>
<a name="l07872"></a>07872 <span class="comment">    *</span>
<a name="l07873"></a>07873 <span class="comment">    * @access public</span>
<a name="l07874"></a>07874 <span class="comment">    * @var float</span>
<a name="l07875"></a>07875 <span class="comment">    */</span>
<a name="l07876"></a>07876    var $http_version = 0.0;
<a name="l07877"></a>07877 <span class="comment"></span>
<a name="l07878"></a>07878 <span class="comment">   /**</span>
<a name="l07879"></a>07879 <span class="comment">    * Status code</span>
<a name="l07880"></a>07880 <span class="comment">    *</span>
<a name="l07881"></a>07881 <span class="comment">    * @access public</span>
<a name="l07882"></a>07882 <span class="comment">    * @var int</span>
<a name="l07883"></a>07883 <span class="comment">    */</span>
<a name="l07884"></a>07884    var $status_code = 0;
<a name="l07885"></a>07885 <span class="comment"></span>
<a name="l07886"></a>07886 <span class="comment">   /**</span>
<a name="l07887"></a>07887 <span class="comment">    * Reason phrase</span>
<a name="l07888"></a>07888 <span class="comment">    *</span>
<a name="l07889"></a>07889 <span class="comment">    * @access public</span>
<a name="l07890"></a>07890 <span class="comment">    * @var string</span>
<a name="l07891"></a>07891 <span class="comment">    */</span>
<a name="l07892"></a>07892    var $reason = <span class="stringliteral">&#39;&#39;</span>;
<a name="l07893"></a>07893 <span class="comment"></span>
<a name="l07894"></a>07894 <span class="comment">   /**</span>
<a name="l07895"></a>07895 <span class="comment">    * Key/value pairs of the headers</span>
<a name="l07896"></a>07896 <span class="comment">    *</span>
<a name="l07897"></a>07897 <span class="comment">    * @access public</span>
<a name="l07898"></a>07898 <span class="comment">    * @var array</span>
<a name="l07899"></a>07899 <span class="comment">    */</span>
<a name="l07900"></a>07900    var $headers = array();
<a name="l07901"></a>07901 <span class="comment"></span>
<a name="l07902"></a>07902 <span class="comment">   /**</span>
<a name="l07903"></a>07903 <span class="comment">    * Body of the response</span>
<a name="l07904"></a>07904 <span class="comment">    *</span>
<a name="l07905"></a>07905 <span class="comment">    * @access public</span>
<a name="l07906"></a>07906 <span class="comment">    * @var string</span>
<a name="l07907"></a>07907 <span class="comment">    */</span>
<a name="l07908"></a>07908    var $body = <span class="stringliteral">&#39;&#39;</span>;
<a name="l07909"></a>07909 <span class="comment"></span>
<a name="l07910"></a>07910 <span class="comment">   /**</span>
<a name="l07911"></a>07911 <span class="comment">    * Current state of the state machine</span>
<a name="l07912"></a>07912 <span class="comment">    *</span>
<a name="l07913"></a>07913 <span class="comment">    * @access private</span>
<a name="l07914"></a>07914 <span class="comment">    * @var string</span>
<a name="l07915"></a>07915 <span class="comment">    */</span>
<a name="l07916"></a>07916    var $state = <span class="stringliteral">&#39;http_version&#39;</span>;
<a name="l07917"></a>07917 <span class="comment"></span>
<a name="l07918"></a>07918 <span class="comment">   /**</span>
<a name="l07919"></a>07919 <span class="comment">    * Input data</span>
<a name="l07920"></a>07920 <span class="comment">    *</span>
<a name="l07921"></a>07921 <span class="comment">    * @access private</span>
<a name="l07922"></a>07922 <span class="comment">    * @var string</span>
<a name="l07923"></a>07923 <span class="comment">    */</span>
<a name="l07924"></a>07924    var $data = <span class="stringliteral">&#39;&#39;</span>;
<a name="l07925"></a>07925 <span class="comment"></span>
<a name="l07926"></a>07926 <span class="comment">   /**</span>
<a name="l07927"></a>07927 <span class="comment">    * Input data length (to avoid calling strlen() everytime this is needed)</span>
<a name="l07928"></a>07928 <span class="comment">    *</span>
<a name="l07929"></a>07929 <span class="comment">    * @access private</span>
<a name="l07930"></a>07930 <span class="comment">    * @var int</span>
<a name="l07931"></a>07931 <span class="comment">    */</span>
<a name="l07932"></a>07932    var $data_length = 0;
<a name="l07933"></a>07933 <span class="comment"></span>
<a name="l07934"></a>07934 <span class="comment">   /**</span>
<a name="l07935"></a>07935 <span class="comment">    * Current position of the pointer</span>
<a name="l07936"></a>07936 <span class="comment">    *</span>
<a name="l07937"></a>07937 <span class="comment">    * @var int</span>
<a name="l07938"></a>07938 <span class="comment">    * @access private</span>
<a name="l07939"></a>07939 <span class="comment">    */</span>
<a name="l07940"></a>07940    var $position = 0;
<a name="l07941"></a>07941 <span class="comment"></span>
<a name="l07942"></a>07942 <span class="comment">   /**</span>
<a name="l07943"></a>07943 <span class="comment">    * Name of the hedaer currently being parsed</span>
<a name="l07944"></a>07944 <span class="comment">    *</span>
<a name="l07945"></a>07945 <span class="comment">    * @access private</span>
<a name="l07946"></a>07946 <span class="comment">    * @var string</span>
<a name="l07947"></a>07947 <span class="comment">    */</span>
<a name="l07948"></a>07948    var $name = <span class="stringliteral">&#39;&#39;</span>;
<a name="l07949"></a>07949 <span class="comment"></span>
<a name="l07950"></a>07950 <span class="comment">   /**</span>
<a name="l07951"></a>07951 <span class="comment">    * Value of the hedaer currently being parsed</span>
<a name="l07952"></a>07952 <span class="comment">    *</span>
<a name="l07953"></a>07953 <span class="comment">    * @access private</span>
<a name="l07954"></a>07954 <span class="comment">    * @var string</span>
<a name="l07955"></a>07955 <span class="comment">    */</span>
<a name="l07956"></a>07956    var $value = <span class="stringliteral">&#39;&#39;</span>;
<a name="l07957"></a>07957 <span class="comment"></span>
<a name="l07958"></a>07958 <span class="comment">   /**</span>
<a name="l07959"></a>07959 <span class="comment">    * Create an instance of the class with the input data</span>
<a name="l07960"></a>07960 <span class="comment">    *</span>
<a name="l07961"></a>07961 <span class="comment">    * @access public</span>
<a name="l07962"></a>07962 <span class="comment">    * @param string $data Input data</span>
<a name="l07963"></a>07963 <span class="comment">    */</span>
<a name="l07964"></a><a class="code" href="class_simple_pie___h_t_t_p___parser.html#ad3f74663721205c509434c79606eef9c">07964</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie___h_t_t_p___parser.html#ad3f74663721205c509434c79606eef9c">SimplePie_HTTP_Parser</a>($data)
<a name="l07965"></a>07965    {
<a name="l07966"></a>07966       $this-&gt;data = $data;
<a name="l07967"></a>07967       $this-&gt;data_length = strlen($this-&gt;data);
<a name="l07968"></a>07968    }
<a name="l07969"></a>07969 <span class="comment"></span>
<a name="l07970"></a>07970 <span class="comment">   /**</span>
<a name="l07971"></a>07971 <span class="comment">    * Parse the input data</span>
<a name="l07972"></a>07972 <span class="comment">    *</span>
<a name="l07973"></a>07973 <span class="comment">    * @access public</span>
<a name="l07974"></a>07974 <span class="comment">    * @return bool true on success, false on failure</span>
<a name="l07975"></a>07975 <span class="comment">    */</span>
<a name="l07976"></a><a class="code" href="class_simple_pie___h_t_t_p___parser.html#a38d99acc70a1d8fd8f94455743b2d237">07976</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie___h_t_t_p___parser.html#a38d99acc70a1d8fd8f94455743b2d237">parse</a>()
<a name="l07977"></a>07977    {
<a name="l07978"></a>07978       <span class="keywordflow">while</span> ($this-&gt;state &amp;&amp; $this-&gt;state !== <span class="stringliteral">&#39;emit&#39;</span> &amp;&amp; $this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#a9e97b54266785888abc290f4feb5eeb7">has_data</a>())
<a name="l07979"></a>07979       {
<a name="l07980"></a>07980          $state = $this-&gt;state;
<a name="l07981"></a>07981          $this-&gt;$state();
<a name="l07982"></a>07982       }
<a name="l07983"></a>07983       $this-&gt;data = <span class="stringliteral">&#39;&#39;</span>;
<a name="l07984"></a>07984       <span class="keywordflow">if</span> ($this-&gt;state === <span class="stringliteral">&#39;emit&#39;</span> || $this-&gt;state === <span class="stringliteral">&#39;body&#39;</span>)
<a name="l07985"></a>07985       {
<a name="l07986"></a>07986          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l07987"></a>07987       }
<a name="l07988"></a>07988       <span class="keywordflow">else</span>
<a name="l07989"></a>07989       {
<a name="l07990"></a>07990          $this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#a72b57b538d7bb945c383b7dfea8c87a5">http_version</a> = <span class="stringliteral">&#39;&#39;</span>;
<a name="l07991"></a>07991          $this-&gt;status_code = <span class="stringliteral">&#39;&#39;</span>;
<a name="l07992"></a>07992          $this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#ae5486f649cbd951ac235cc991d491345">reason</a> = <span class="stringliteral">&#39;&#39;</span>;
<a name="l07993"></a>07993          $this-&gt;headers = array();
<a name="l07994"></a>07994          $this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#a88c61c5f59a3f950b502f07325de2f87">body</a> = <span class="stringliteral">&#39;&#39;</span>;
<a name="l07995"></a>07995          <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l07996"></a>07996       }
<a name="l07997"></a>07997    }
<a name="l07998"></a>07998 <span class="comment"></span>
<a name="l07999"></a>07999 <span class="comment">   /**</span>
<a name="l08000"></a>08000 <span class="comment">    * Check whether there is data beyond the pointer</span>
<a name="l08001"></a>08001 <span class="comment">    *</span>
<a name="l08002"></a>08002 <span class="comment">    * @access private</span>
<a name="l08003"></a>08003 <span class="comment">    * @return bool true if there is further data, false if not</span>
<a name="l08004"></a>08004 <span class="comment">    */</span>
<a name="l08005"></a><a class="code" href="class_simple_pie___h_t_t_p___parser.html#a9e97b54266785888abc290f4feb5eeb7">08005</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie___h_t_t_p___parser.html#a9e97b54266785888abc290f4feb5eeb7">has_data</a>()
<a name="l08006"></a>08006    {
<a name="l08007"></a>08007       <span class="keywordflow">return</span> (<span class="keywordtype">bool</span>) ($this-&gt;position &lt; $this-&gt;data_length);
<a name="l08008"></a>08008    }
<a name="l08009"></a>08009 <span class="comment"></span>
<a name="l08010"></a>08010 <span class="comment">   /**</span>
<a name="l08011"></a>08011 <span class="comment">    * See if the next character is LWS</span>
<a name="l08012"></a>08012 <span class="comment">    *</span>
<a name="l08013"></a>08013 <span class="comment">    * @access private</span>
<a name="l08014"></a>08014 <span class="comment">    * @return bool true if the next character is LWS, false if not</span>
<a name="l08015"></a>08015 <span class="comment">    */</span>
<a name="l08016"></a><a class="code" href="class_simple_pie___h_t_t_p___parser.html#a6e891898695f6a9b4f795b7d4a4e767c">08016</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie___h_t_t_p___parser.html#a6e891898695f6a9b4f795b7d4a4e767c">is_linear_whitespace</a>()
<a name="l08017"></a>08017    {
<a name="l08018"></a>08018       <span class="keywordflow">return</span> (<span class="keywordtype">bool</span>) ($this-&gt;data[$this-&gt;position] === <span class="stringliteral">&quot;\x09&quot;</span>
<a name="l08019"></a>08019          || $this-&gt;data[$this-&gt;position] === <span class="stringliteral">&quot;\x20&quot;</span>
<a name="l08020"></a>08020          || ($this-&gt;data[$this-&gt;position] === <span class="stringliteral">&quot;\x0A&quot;</span>
<a name="l08021"></a>08021             &amp;&amp; isset($this-&gt;data[$this-&gt;position + 1])
<a name="l08022"></a>08022             &amp;&amp; ($this-&gt;data[$this-&gt;position + 1] === <span class="stringliteral">&quot;\x09&quot;</span> || $this-&gt;data[$this-&gt;position + 1] === <span class="stringliteral">&quot;\x20&quot;</span>)));
<a name="l08023"></a>08023    }
<a name="l08024"></a>08024 <span class="comment"></span>
<a name="l08025"></a>08025 <span class="comment">   /**</span>
<a name="l08026"></a>08026 <span class="comment">    * Parse the HTTP version</span>
<a name="l08027"></a>08027 <span class="comment">    *</span>
<a name="l08028"></a>08028 <span class="comment">    * @access private</span>
<a name="l08029"></a>08029 <span class="comment">    */</span>
<a name="l08030"></a><a class="code" href="class_simple_pie___h_t_t_p___parser.html#a72b57b538d7bb945c383b7dfea8c87a5">08030</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie___h_t_t_p___parser.html#a72b57b538d7bb945c383b7dfea8c87a5">http_version</a>()
<a name="l08031"></a>08031    {
<a name="l08032"></a>08032       <span class="keywordflow">if</span> (strpos($this-&gt;data, <span class="stringliteral">&quot;\x0A&quot;</span>) !== <span class="keyword">false</span> &amp;&amp; strtoupper(substr($this-&gt;data, 0, 5)) === <span class="stringliteral">&#39;HTTP/&#39;</span>)
<a name="l08033"></a>08033       {
<a name="l08034"></a>08034          $len = strspn($this-&gt;data, <span class="stringliteral">&#39;0123456789.&#39;</span>, 5);
<a name="l08035"></a>08035          $this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#a72b57b538d7bb945c383b7dfea8c87a5">http_version</a> = substr($this-&gt;data, 5, $len);
<a name="l08036"></a>08036          $this-&gt;position += 5 + $len;
<a name="l08037"></a>08037          <span class="keywordflow">if</span> (substr_count($this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#a72b57b538d7bb945c383b7dfea8c87a5">http_version</a>, <span class="charliteral">&#39;.&#39;</span>) &lt;= 1)
<a name="l08038"></a>08038          {
<a name="l08039"></a>08039             $this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#a72b57b538d7bb945c383b7dfea8c87a5">http_version</a> = (float) $this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#a72b57b538d7bb945c383b7dfea8c87a5">http_version</a>;
<a name="l08040"></a>08040             $this-&gt;position += strspn($this-&gt;data, <span class="stringliteral">&quot;\x09\x20&quot;</span>, $this-&gt;position);
<a name="l08041"></a>08041             $this-&gt;state = <span class="stringliteral">&#39;status&#39;</span>;
<a name="l08042"></a>08042          }
<a name="l08043"></a>08043          <span class="keywordflow">else</span>
<a name="l08044"></a>08044          {
<a name="l08045"></a>08045             $this-&gt;state = <span class="keyword">false</span>;
<a name="l08046"></a>08046          }
<a name="l08047"></a>08047       }
<a name="l08048"></a>08048       <span class="keywordflow">else</span>
<a name="l08049"></a>08049       {
<a name="l08050"></a>08050          $this-&gt;state = <span class="keyword">false</span>;
<a name="l08051"></a>08051       }
<a name="l08052"></a>08052    }
<a name="l08053"></a>08053 <span class="comment"></span>
<a name="l08054"></a>08054 <span class="comment">   /**</span>
<a name="l08055"></a>08055 <span class="comment">    * Parse the status code</span>
<a name="l08056"></a>08056 <span class="comment">    *</span>
<a name="l08057"></a>08057 <span class="comment">    * @access private</span>
<a name="l08058"></a>08058 <span class="comment">    */</span>
<a name="l08059"></a><a class="code" href="class_simple_pie___h_t_t_p___parser.html#a19e49aea71e41a8bd6076bc45169e4a3">08059</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie___h_t_t_p___parser.html#a19e49aea71e41a8bd6076bc45169e4a3">status</a>()
<a name="l08060"></a>08060    {
<a name="l08061"></a>08061       <span class="keywordflow">if</span> ($len = strspn($this-&gt;data, <span class="stringliteral">&#39;0123456789&#39;</span>, $this-&gt;position))
<a name="l08062"></a>08062       {
<a name="l08063"></a>08063          $this-&gt;status_code = (int) substr($this-&gt;data, $this-&gt;position, $len);
<a name="l08064"></a>08064          $this-&gt;position += $len;
<a name="l08065"></a>08065          $this-&gt;state = <span class="stringliteral">&#39;reason&#39;</span>;
<a name="l08066"></a>08066       }
<a name="l08067"></a>08067       <span class="keywordflow">else</span>
<a name="l08068"></a>08068       {
<a name="l08069"></a>08069          $this-&gt;state = <span class="keyword">false</span>;
<a name="l08070"></a>08070       }
<a name="l08071"></a>08071    }
<a name="l08072"></a>08072 <span class="comment"></span>
<a name="l08073"></a>08073 <span class="comment">   /**</span>
<a name="l08074"></a>08074 <span class="comment">    * Parse the reason phrase</span>
<a name="l08075"></a>08075 <span class="comment">    *</span>
<a name="l08076"></a>08076 <span class="comment">    * @access private</span>
<a name="l08077"></a>08077 <span class="comment">    */</span>
<a name="l08078"></a><a class="code" href="class_simple_pie___h_t_t_p___parser.html#ae5486f649cbd951ac235cc991d491345">08078</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie___h_t_t_p___parser.html#ae5486f649cbd951ac235cc991d491345">reason</a>()
<a name="l08079"></a>08079    {
<a name="l08080"></a>08080       $len = strcspn($this-&gt;data, <span class="stringliteral">&quot;\x0A&quot;</span>, $this-&gt;position);
<a name="l08081"></a>08081       $this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#ae5486f649cbd951ac235cc991d491345">reason</a> = trim(substr($this-&gt;data, $this-&gt;position, $len), <span class="stringliteral">&quot;\x09\x0D\x20&quot;</span>);
<a name="l08082"></a>08082       $this-&gt;position += $len + 1;
<a name="l08083"></a>08083       $this-&gt;state = <span class="stringliteral">&#39;new_line&#39;</span>;
<a name="l08084"></a>08084    }
<a name="l08085"></a>08085 <span class="comment"></span>
<a name="l08086"></a>08086 <span class="comment">   /**</span>
<a name="l08087"></a>08087 <span class="comment">    * Deal with a new line, shifting data around as needed</span>
<a name="l08088"></a>08088 <span class="comment">    *</span>
<a name="l08089"></a>08089 <span class="comment">    * @access private</span>
<a name="l08090"></a>08090 <span class="comment">    */</span>
<a name="l08091"></a><a class="code" href="class_simple_pie___h_t_t_p___parser.html#a195226652b40272d8cb59f3c78ac4a41">08091</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie___h_t_t_p___parser.html#a195226652b40272d8cb59f3c78ac4a41">new_line</a>()
<a name="l08092"></a>08092    {
<a name="l08093"></a>08093       $this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#aefbfa229f1c9e1fc967bff724a010f9e">value</a> = trim($this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#aefbfa229f1c9e1fc967bff724a010f9e">value</a>, <span class="stringliteral">&quot;\x0D\x20&quot;</span>);
<a name="l08094"></a>08094       <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#a4b516aaa5fa38da4fed24ab6001627e2">name</a> !== <span class="stringliteral">&#39;&#39;</span> &amp;&amp; $this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#aefbfa229f1c9e1fc967bff724a010f9e">value</a> !== <span class="stringliteral">&#39;&#39;</span>)
<a name="l08095"></a>08095       {
<a name="l08096"></a>08096          $this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#a4b516aaa5fa38da4fed24ab6001627e2">name</a> = strtolower($this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#a4b516aaa5fa38da4fed24ab6001627e2">name</a>);
<a name="l08097"></a>08097          <span class="keywordflow">if</span> (isset($this-&gt;headers[$this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#a4b516aaa5fa38da4fed24ab6001627e2">name</a>]))
<a name="l08098"></a>08098          {
<a name="l08099"></a>08099             $this-&gt;headers[$this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#a4b516aaa5fa38da4fed24ab6001627e2">name</a>] .= <span class="stringliteral">&#39;, &#39;</span> . $this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#aefbfa229f1c9e1fc967bff724a010f9e">value</a>;
<a name="l08100"></a>08100          }
<a name="l08101"></a>08101          <span class="keywordflow">else</span>
<a name="l08102"></a>08102          {
<a name="l08103"></a>08103             $this-&gt;headers[$this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#a4b516aaa5fa38da4fed24ab6001627e2">name</a>] = $this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#aefbfa229f1c9e1fc967bff724a010f9e">value</a>;
<a name="l08104"></a>08104          }
<a name="l08105"></a>08105       }
<a name="l08106"></a>08106       $this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#a4b516aaa5fa38da4fed24ab6001627e2">name</a> = <span class="stringliteral">&#39;&#39;</span>;
<a name="l08107"></a>08107       $this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#aefbfa229f1c9e1fc967bff724a010f9e">value</a> = <span class="stringliteral">&#39;&#39;</span>;
<a name="l08108"></a>08108       <span class="keywordflow">if</span> (substr($this-&gt;data[$this-&gt;position], 0, 2) === <span class="stringliteral">&quot;\x0D\x0A&quot;</span>)
<a name="l08109"></a>08109       {
<a name="l08110"></a>08110          $this-&gt;position += 2;
<a name="l08111"></a>08111          $this-&gt;state = <span class="stringliteral">&#39;body&#39;</span>;
<a name="l08112"></a>08112       }
<a name="l08113"></a>08113       elseif ($this-&gt;data[$this-&gt;position] === <span class="stringliteral">&quot;\x0A&quot;</span>)
<a name="l08114"></a>08114       {
<a name="l08115"></a>08115          $this-&gt;position++;
<a name="l08116"></a>08116          $this-&gt;state = <span class="stringliteral">&#39;body&#39;</span>;
<a name="l08117"></a>08117       }
<a name="l08118"></a>08118       <span class="keywordflow">else</span>
<a name="l08119"></a>08119       {
<a name="l08120"></a>08120          $this-&gt;state = <span class="stringliteral">&#39;name&#39;</span>;
<a name="l08121"></a>08121       }
<a name="l08122"></a>08122    }
<a name="l08123"></a>08123 <span class="comment"></span>
<a name="l08124"></a>08124 <span class="comment">   /**</span>
<a name="l08125"></a>08125 <span class="comment">    * Parse a header name</span>
<a name="l08126"></a>08126 <span class="comment">    *</span>
<a name="l08127"></a>08127 <span class="comment">    * @access private</span>
<a name="l08128"></a>08128 <span class="comment">    */</span>
<a name="l08129"></a><a class="code" href="class_simple_pie___h_t_t_p___parser.html#a4b516aaa5fa38da4fed24ab6001627e2">08129</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie___h_t_t_p___parser.html#a4b516aaa5fa38da4fed24ab6001627e2">name</a>()
<a name="l08130"></a>08130    {
<a name="l08131"></a>08131       $len = strcspn($this-&gt;data, <span class="stringliteral">&quot;\x0A:&quot;</span>, $this-&gt;position);
<a name="l08132"></a>08132       <span class="keywordflow">if</span> (isset($this-&gt;data[$this-&gt;position + $len]))
<a name="l08133"></a>08133       {
<a name="l08134"></a>08134          <span class="keywordflow">if</span> ($this-&gt;data[$this-&gt;position + $len] === <span class="stringliteral">&quot;\x0A&quot;</span>)
<a name="l08135"></a>08135          {
<a name="l08136"></a>08136             $this-&gt;position += $len;
<a name="l08137"></a>08137             $this-&gt;state = <span class="stringliteral">&#39;new_line&#39;</span>;
<a name="l08138"></a>08138          }
<a name="l08139"></a>08139          <span class="keywordflow">else</span>
<a name="l08140"></a>08140          {
<a name="l08141"></a>08141             $this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#a4b516aaa5fa38da4fed24ab6001627e2">name</a> = substr($this-&gt;data, $this-&gt;position, $len);
<a name="l08142"></a>08142             $this-&gt;position += $len + 1;
<a name="l08143"></a>08143             $this-&gt;state = <span class="stringliteral">&#39;value&#39;</span>;
<a name="l08144"></a>08144          }
<a name="l08145"></a>08145       }
<a name="l08146"></a>08146       <span class="keywordflow">else</span>
<a name="l08147"></a>08147       {
<a name="l08148"></a>08148          $this-&gt;state = <span class="keyword">false</span>;
<a name="l08149"></a>08149       }
<a name="l08150"></a>08150    }
<a name="l08151"></a>08151 <span class="comment"></span>
<a name="l08152"></a>08152 <span class="comment">   /**</span>
<a name="l08153"></a>08153 <span class="comment">    * Parse LWS, replacing consecutive LWS characters with a single space</span>
<a name="l08154"></a>08154 <span class="comment">    *</span>
<a name="l08155"></a>08155 <span class="comment">    * @access private</span>
<a name="l08156"></a>08156 <span class="comment">    */</span>
<a name="l08157"></a><a class="code" href="class_simple_pie___h_t_t_p___parser.html#acdc092743e82635472f589f632734e86">08157</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie___h_t_t_p___parser.html#acdc092743e82635472f589f632734e86">linear_whitespace</a>()
<a name="l08158"></a>08158    {
<a name="l08159"></a>08159       <span class="keywordflow">do</span>
<a name="l08160"></a>08160       {
<a name="l08161"></a>08161          <span class="keywordflow">if</span> (substr($this-&gt;data, $this-&gt;position, 2) === <span class="stringliteral">&quot;\x0D\x0A&quot;</span>)
<a name="l08162"></a>08162          {
<a name="l08163"></a>08163             $this-&gt;position += 2;
<a name="l08164"></a>08164          }
<a name="l08165"></a>08165          elseif ($this-&gt;data[$this-&gt;position] === <span class="stringliteral">&quot;\x0A&quot;</span>)
<a name="l08166"></a>08166          {
<a name="l08167"></a>08167             $this-&gt;position++;
<a name="l08168"></a>08168          }
<a name="l08169"></a>08169          $this-&gt;position += strspn($this-&gt;data, <span class="stringliteral">&quot;\x09\x20&quot;</span>, $this-&gt;position);
<a name="l08170"></a>08170       } <span class="keywordflow">while</span> ($this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#a9e97b54266785888abc290f4feb5eeb7">has_data</a>() &amp;&amp; $this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#a6e891898695f6a9b4f795b7d4a4e767c">is_linear_whitespace</a>());
<a name="l08171"></a>08171       $this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#aefbfa229f1c9e1fc967bff724a010f9e">value</a> .= <span class="stringliteral">&quot;\x20&quot;</span>;
<a name="l08172"></a>08172    }
<a name="l08173"></a>08173 <span class="comment"></span>
<a name="l08174"></a>08174 <span class="comment">   /**</span>
<a name="l08175"></a>08175 <span class="comment">    * See what state to move to while within non-quoted header values</span>
<a name="l08176"></a>08176 <span class="comment">    *</span>
<a name="l08177"></a>08177 <span class="comment">    * @access private</span>
<a name="l08178"></a>08178 <span class="comment">    */</span>
<a name="l08179"></a><a class="code" href="class_simple_pie___h_t_t_p___parser.html#aefbfa229f1c9e1fc967bff724a010f9e">08179</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie___h_t_t_p___parser.html#aefbfa229f1c9e1fc967bff724a010f9e">value</a>()
<a name="l08180"></a>08180    {
<a name="l08181"></a>08181       <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#a6e891898695f6a9b4f795b7d4a4e767c">is_linear_whitespace</a>())
<a name="l08182"></a>08182       {
<a name="l08183"></a>08183          $this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#acdc092743e82635472f589f632734e86">linear_whitespace</a>();
<a name="l08184"></a>08184       }
<a name="l08185"></a>08185       <span class="keywordflow">else</span>
<a name="l08186"></a>08186       {
<a name="l08187"></a>08187          <span class="keywordflow">switch</span> ($this-&gt;data[$this-&gt;position])
<a name="l08188"></a>08188          {
<a name="l08189"></a>08189             <span class="keywordflow">case</span> <span class="charliteral">&#39;&quot;&#39;</span>:
<a name="l08190"></a>08190                $this-&gt;position++;
<a name="l08191"></a>08191                $this-&gt;state = <span class="stringliteral">&#39;quote&#39;</span>;
<a name="l08192"></a>08192                <span class="keywordflow">break</span>;
<a name="l08193"></a>08193 
<a name="l08194"></a>08194             <span class="keywordflow">case</span> <span class="stringliteral">&quot;\x0A&quot;</span>:
<a name="l08195"></a>08195                $this-&gt;position++;
<a name="l08196"></a>08196                $this-&gt;state = <span class="stringliteral">&#39;new_line&#39;</span>;
<a name="l08197"></a>08197                <span class="keywordflow">break</span>;
<a name="l08198"></a>08198 
<a name="l08199"></a>08199             <span class="keywordflow">default</span>:
<a name="l08200"></a>08200                $this-&gt;state = <span class="stringliteral">&#39;value_char&#39;</span>;
<a name="l08201"></a>08201                <span class="keywordflow">break</span>;
<a name="l08202"></a>08202          }
<a name="l08203"></a>08203       }
<a name="l08204"></a>08204    }
<a name="l08205"></a>08205 <span class="comment"></span>
<a name="l08206"></a>08206 <span class="comment">   /**</span>
<a name="l08207"></a>08207 <span class="comment">    * Parse a header value while outside quotes</span>
<a name="l08208"></a>08208 <span class="comment">    *</span>
<a name="l08209"></a>08209 <span class="comment">    * @access private</span>
<a name="l08210"></a>08210 <span class="comment">    */</span>
<a name="l08211"></a><a class="code" href="class_simple_pie___h_t_t_p___parser.html#a2b3b1ab6485bf98d518a287990c70301">08211</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie___h_t_t_p___parser.html#a2b3b1ab6485bf98d518a287990c70301">value_char</a>()
<a name="l08212"></a>08212    {
<a name="l08213"></a>08213       $len = strcspn($this-&gt;data, <span class="stringliteral">&quot;\x09\x20\x0A\&quot;&quot;</span>, $this-&gt;position);
<a name="l08214"></a>08214       $this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#aefbfa229f1c9e1fc967bff724a010f9e">value</a> .= substr($this-&gt;data, $this-&gt;position, $len);
<a name="l08215"></a>08215       $this-&gt;position += $len;
<a name="l08216"></a>08216       $this-&gt;state = <span class="stringliteral">&#39;value&#39;</span>;
<a name="l08217"></a>08217    }
<a name="l08218"></a>08218 <span class="comment"></span>
<a name="l08219"></a>08219 <span class="comment">   /**</span>
<a name="l08220"></a>08220 <span class="comment">    * See what state to move to while within quoted header values</span>
<a name="l08221"></a>08221 <span class="comment">    *</span>
<a name="l08222"></a>08222 <span class="comment">    * @access private</span>
<a name="l08223"></a>08223 <span class="comment">    */</span>
<a name="l08224"></a><a class="code" href="class_simple_pie___h_t_t_p___parser.html#a5aac41bd4bee6ee8cf4cfff33840d478">08224</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie___h_t_t_p___parser.html#a5aac41bd4bee6ee8cf4cfff33840d478">quote</a>()
<a name="l08225"></a>08225    {
<a name="l08226"></a>08226       <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#a6e891898695f6a9b4f795b7d4a4e767c">is_linear_whitespace</a>())
<a name="l08227"></a>08227       {
<a name="l08228"></a>08228          $this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#acdc092743e82635472f589f632734e86">linear_whitespace</a>();
<a name="l08229"></a>08229       }
<a name="l08230"></a>08230       <span class="keywordflow">else</span>
<a name="l08231"></a>08231       {
<a name="l08232"></a>08232          <span class="keywordflow">switch</span> ($this-&gt;data[$this-&gt;position])
<a name="l08233"></a>08233          {
<a name="l08234"></a>08234             <span class="keywordflow">case</span> <span class="charliteral">&#39;&quot;&#39;</span>:
<a name="l08235"></a>08235                $this-&gt;position++;
<a name="l08236"></a>08236                $this-&gt;state = <span class="stringliteral">&#39;value&#39;</span>;
<a name="l08237"></a>08237                <span class="keywordflow">break</span>;
<a name="l08238"></a>08238 
<a name="l08239"></a>08239             <span class="keywordflow">case</span> <span class="stringliteral">&quot;\x0A&quot;</span>:
<a name="l08240"></a>08240                $this-&gt;position++;
<a name="l08241"></a>08241                $this-&gt;state = <span class="stringliteral">&#39;new_line&#39;</span>;
<a name="l08242"></a>08242                <span class="keywordflow">break</span>;
<a name="l08243"></a>08243 
<a name="l08244"></a>08244             <span class="keywordflow">case</span> <span class="charliteral">&#39;\\&#39;</span>:
<a name="l08245"></a>08245                $this-&gt;position++;
<a name="l08246"></a>08246                $this-&gt;state = <span class="stringliteral">&#39;quote_escaped&#39;</span>;
<a name="l08247"></a>08247                <span class="keywordflow">break</span>;
<a name="l08248"></a>08248 
<a name="l08249"></a>08249             <span class="keywordflow">default</span>:
<a name="l08250"></a>08250                $this-&gt;state = <span class="stringliteral">&#39;quote_char&#39;</span>;
<a name="l08251"></a>08251                <span class="keywordflow">break</span>;
<a name="l08252"></a>08252          }
<a name="l08253"></a>08253       }
<a name="l08254"></a>08254    }
<a name="l08255"></a>08255 <span class="comment"></span>
<a name="l08256"></a>08256 <span class="comment">   /**</span>
<a name="l08257"></a>08257 <span class="comment">    * Parse a header value while within quotes</span>
<a name="l08258"></a>08258 <span class="comment">    *</span>
<a name="l08259"></a>08259 <span class="comment">    * @access private</span>
<a name="l08260"></a>08260 <span class="comment">    */</span>
<a name="l08261"></a><a class="code" href="class_simple_pie___h_t_t_p___parser.html#a707562be1346fb38d561d2d4aec6b7b1">08261</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie___h_t_t_p___parser.html#a707562be1346fb38d561d2d4aec6b7b1">quote_char</a>()
<a name="l08262"></a>08262    {
<a name="l08263"></a>08263       $len = strcspn($this-&gt;data, <span class="stringliteral">&quot;\x09\x20\x0A\&quot;\\&quot;</span>, $this-&gt;position);
<a name="l08264"></a>08264       $this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#aefbfa229f1c9e1fc967bff724a010f9e">value</a> .= substr($this-&gt;data, $this-&gt;position, $len);
<a name="l08265"></a>08265       $this-&gt;position += $len;
<a name="l08266"></a>08266       $this-&gt;state = <span class="stringliteral">&#39;value&#39;</span>;
<a name="l08267"></a>08267    }
<a name="l08268"></a>08268 <span class="comment"></span>
<a name="l08269"></a>08269 <span class="comment">   /**</span>
<a name="l08270"></a>08270 <span class="comment">    * Parse an escaped character within quotes</span>
<a name="l08271"></a>08271 <span class="comment">    *</span>
<a name="l08272"></a>08272 <span class="comment">    * @access private</span>
<a name="l08273"></a>08273 <span class="comment">    */</span>
<a name="l08274"></a><a class="code" href="class_simple_pie___h_t_t_p___parser.html#abee68060f4729aa3ffcf562b04688905">08274</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie___h_t_t_p___parser.html#abee68060f4729aa3ffcf562b04688905">quote_escaped</a>()
<a name="l08275"></a>08275    {
<a name="l08276"></a>08276       $this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#aefbfa229f1c9e1fc967bff724a010f9e">value</a> .= $this-&gt;data[$this-&gt;position];
<a name="l08277"></a>08277       $this-&gt;position++;
<a name="l08278"></a>08278       $this-&gt;state = <span class="stringliteral">&#39;quote&#39;</span>;
<a name="l08279"></a>08279    }
<a name="l08280"></a>08280 <span class="comment"></span>
<a name="l08281"></a>08281 <span class="comment">   /**</span>
<a name="l08282"></a>08282 <span class="comment">    * Parse the body</span>
<a name="l08283"></a>08283 <span class="comment">    *</span>
<a name="l08284"></a>08284 <span class="comment">    * @access private</span>
<a name="l08285"></a>08285 <span class="comment">    */</span>
<a name="l08286"></a><a class="code" href="class_simple_pie___h_t_t_p___parser.html#a88c61c5f59a3f950b502f07325de2f87">08286</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie___h_t_t_p___parser.html#a88c61c5f59a3f950b502f07325de2f87">body</a>()
<a name="l08287"></a>08287    {
<a name="l08288"></a>08288       $this-&gt;<a class="code" href="class_simple_pie___h_t_t_p___parser.html#a88c61c5f59a3f950b502f07325de2f87">body</a> = substr($this-&gt;data, $this-&gt;position);
<a name="l08289"></a>08289       $this-&gt;state = <span class="stringliteral">&#39;emit&#39;</span>;
<a name="l08290"></a>08290    }
<a name="l08291"></a>08291 }
<a name="l08292"></a>08292 <span class="comment"></span>
<a name="l08293"></a>08293 <span class="comment">/**</span>
<a name="l08294"></a>08294 <span class="comment"> * gzdecode</span>
<a name="l08295"></a>08295 <span class="comment"> *</span>
<a name="l08296"></a>08296 <span class="comment"> * @package SimplePie</span>
<a name="l08297"></a>08297 <span class="comment"> */</span>
<a name="l08298"></a><a class="code" href="class_simple_pie__gzdecode.html">08298</a> <span class="keyword">class </span><a class="code" href="class_simple_pie__gzdecode.html">SimplePie_gzdecode</a>
<a name="l08299"></a>08299 {<span class="comment"></span>
<a name="l08300"></a>08300 <span class="comment">   /**</span>
<a name="l08301"></a>08301 <span class="comment">    * Compressed data</span>
<a name="l08302"></a>08302 <span class="comment">    *</span>
<a name="l08303"></a>08303 <span class="comment">    * @access private</span>
<a name="l08304"></a>08304 <span class="comment">    * @see gzdecode::$data</span>
<a name="l08305"></a>08305 <span class="comment">    */</span>
<a name="l08306"></a><a class="code" href="class_simple_pie__gzdecode.html#a77d9f9e747fa35f4ecc61223fb095c8c">08306</a>    var <a class="code" href="class_simple_pie__gzdecode.html#a77d9f9e747fa35f4ecc61223fb095c8c">$compressed_data</a>;
<a name="l08307"></a>08307 <span class="comment"></span>
<a name="l08308"></a>08308 <span class="comment">   /**</span>
<a name="l08309"></a>08309 <span class="comment">    * Size of compressed data</span>
<a name="l08310"></a>08310 <span class="comment">    *</span>
<a name="l08311"></a>08311 <span class="comment">    * @access private</span>
<a name="l08312"></a>08312 <span class="comment">    */</span>
<a name="l08313"></a><a class="code" href="class_simple_pie__gzdecode.html#a345775ec90d5b8f9512ee91823c16bc2">08313</a>    var <a class="code" href="class_simple_pie__gzdecode.html#a345775ec90d5b8f9512ee91823c16bc2">$compressed_size</a>;
<a name="l08314"></a>08314 <span class="comment"></span>
<a name="l08315"></a>08315 <span class="comment">   /**</span>
<a name="l08316"></a>08316 <span class="comment">    * Minimum size of a valid gzip string</span>
<a name="l08317"></a>08317 <span class="comment">    *</span>
<a name="l08318"></a>08318 <span class="comment">    * @access private</span>
<a name="l08319"></a>08319 <span class="comment">    */</span>
<a name="l08320"></a><a class="code" href="class_simple_pie__gzdecode.html#a86810501f128e7947d7f7c268a1664ec">08320</a>    var <a class="code" href="class_simple_pie__gzdecode.html#a86810501f128e7947d7f7c268a1664ec">$min_compressed_size</a> = 18;
<a name="l08321"></a>08321 <span class="comment"></span>
<a name="l08322"></a>08322 <span class="comment">   /**</span>
<a name="l08323"></a>08323 <span class="comment">    * Current position of pointer</span>
<a name="l08324"></a>08324 <span class="comment">    *</span>
<a name="l08325"></a>08325 <span class="comment">    * @access private</span>
<a name="l08326"></a>08326 <span class="comment">    */</span>
<a name="l08327"></a><a class="code" href="class_simple_pie__gzdecode.html#a6e88dcb746884d18f6c89eb9b9c14a42">08327</a>    var <a class="code" href="class_simple_pie__gzdecode.html#a6e88dcb746884d18f6c89eb9b9c14a42">$position</a> = 0;
<a name="l08328"></a>08328 <span class="comment"></span>
<a name="l08329"></a>08329 <span class="comment">   /**</span>
<a name="l08330"></a>08330 <span class="comment">    * Flags (FLG)</span>
<a name="l08331"></a>08331 <span class="comment">    *</span>
<a name="l08332"></a>08332 <span class="comment">    * @access private</span>
<a name="l08333"></a>08333 <span class="comment">    */</span>
<a name="l08334"></a><a class="code" href="class_simple_pie__gzdecode.html#a78556f0dc6bf3c1adae410a73d632caf">08334</a>    var <a class="code" href="class_simple_pie__gzdecode.html#a78556f0dc6bf3c1adae410a73d632caf">$flags</a>;
<a name="l08335"></a>08335 <span class="comment"></span>
<a name="l08336"></a>08336 <span class="comment">   /**</span>
<a name="l08337"></a>08337 <span class="comment">    * Uncompressed data</span>
<a name="l08338"></a>08338 <span class="comment">    *</span>
<a name="l08339"></a>08339 <span class="comment">    * @access public</span>
<a name="l08340"></a>08340 <span class="comment">    * @see gzdecode::$compressed_data</span>
<a name="l08341"></a>08341 <span class="comment">    */</span>
<a name="l08342"></a><a class="code" href="class_simple_pie__gzdecode.html#a6efc15b5a2314dd4b5aaa556a375c6d6">08342</a>    var <a class="code" href="class_simple_pie__gzdecode.html#a6efc15b5a2314dd4b5aaa556a375c6d6">$data</a>;
<a name="l08343"></a>08343 <span class="comment"></span>
<a name="l08344"></a>08344 <span class="comment">   /**</span>
<a name="l08345"></a>08345 <span class="comment">    * Modified time</span>
<a name="l08346"></a>08346 <span class="comment">    *</span>
<a name="l08347"></a>08347 <span class="comment">    * @access public</span>
<a name="l08348"></a>08348 <span class="comment">    */</span>
<a name="l08349"></a><a class="code" href="class_simple_pie__gzdecode.html#a78c37992932b8d7f3944e516bdaf1036">08349</a>    var <a class="code" href="class_simple_pie__gzdecode.html#a78c37992932b8d7f3944e516bdaf1036">$MTIME</a>;
<a name="l08350"></a>08350 <span class="comment"></span>
<a name="l08351"></a>08351 <span class="comment">   /**</span>
<a name="l08352"></a>08352 <span class="comment">    * Extra Flags</span>
<a name="l08353"></a>08353 <span class="comment">    *</span>
<a name="l08354"></a>08354 <span class="comment">    * @access public</span>
<a name="l08355"></a>08355 <span class="comment">    */</span>
<a name="l08356"></a><a class="code" href="class_simple_pie__gzdecode.html#a63ede6a39a1b18a7f4207d7a227d38e0">08356</a>    var <a class="code" href="class_simple_pie__gzdecode.html#a63ede6a39a1b18a7f4207d7a227d38e0">$XFL</a>;
<a name="l08357"></a>08357 <span class="comment"></span>
<a name="l08358"></a>08358 <span class="comment">   /**</span>
<a name="l08359"></a>08359 <span class="comment">    * Operating System</span>
<a name="l08360"></a>08360 <span class="comment">    *</span>
<a name="l08361"></a>08361 <span class="comment">    * @access public</span>
<a name="l08362"></a>08362 <span class="comment">    */</span>
<a name="l08363"></a><a class="code" href="class_simple_pie__gzdecode.html#a1c579bf7213f60d27a8757551b6d4980">08363</a>    var <a class="code" href="class_simple_pie__gzdecode.html#a1c579bf7213f60d27a8757551b6d4980">$OS</a>;
<a name="l08364"></a>08364 <span class="comment"></span>
<a name="l08365"></a>08365 <span class="comment">   /**</span>
<a name="l08366"></a>08366 <span class="comment">    * Subfield ID 1</span>
<a name="l08367"></a>08367 <span class="comment">    *</span>
<a name="l08368"></a>08368 <span class="comment">    * @access public</span>
<a name="l08369"></a>08369 <span class="comment">    * @see gzdecode::$extra_field</span>
<a name="l08370"></a>08370 <span class="comment">    * @see gzdecode::$SI2</span>
<a name="l08371"></a>08371 <span class="comment">    */</span>
<a name="l08372"></a><a class="code" href="class_simple_pie__gzdecode.html#a06c407f4889f6ead0ce4ac8a7ada459a">08372</a>    var <a class="code" href="class_simple_pie__gzdecode.html#a06c407f4889f6ead0ce4ac8a7ada459a">$SI1</a>;
<a name="l08373"></a>08373 <span class="comment"></span>
<a name="l08374"></a>08374 <span class="comment">   /**</span>
<a name="l08375"></a>08375 <span class="comment">    * Subfield ID 2</span>
<a name="l08376"></a>08376 <span class="comment">    *</span>
<a name="l08377"></a>08377 <span class="comment">    * @access public</span>
<a name="l08378"></a>08378 <span class="comment">    * @see gzdecode::$extra_field</span>
<a name="l08379"></a>08379 <span class="comment">    * @see gzdecode::$SI1</span>
<a name="l08380"></a>08380 <span class="comment">    */</span>
<a name="l08381"></a><a class="code" href="class_simple_pie__gzdecode.html#a6084249af4a3537e8bb2a010a0f6a817">08381</a>    var <a class="code" href="class_simple_pie__gzdecode.html#a6084249af4a3537e8bb2a010a0f6a817">$SI2</a>;
<a name="l08382"></a>08382 <span class="comment"></span>
<a name="l08383"></a>08383 <span class="comment">   /**</span>
<a name="l08384"></a>08384 <span class="comment">    * Extra field content</span>
<a name="l08385"></a>08385 <span class="comment">    *</span>
<a name="l08386"></a>08386 <span class="comment">    * @access public</span>
<a name="l08387"></a>08387 <span class="comment">    * @see gzdecode::$SI1</span>
<a name="l08388"></a>08388 <span class="comment">    * @see gzdecode::$SI2</span>
<a name="l08389"></a>08389 <span class="comment">    */</span>
<a name="l08390"></a><a class="code" href="class_simple_pie__gzdecode.html#a1dfa45bd7463812cd092ffa6e9b3b24c">08390</a>    var <a class="code" href="class_simple_pie__gzdecode.html#a1dfa45bd7463812cd092ffa6e9b3b24c">$extra_field</a>;
<a name="l08391"></a>08391 <span class="comment"></span>
<a name="l08392"></a>08392 <span class="comment">   /**</span>
<a name="l08393"></a>08393 <span class="comment">    * Original filename</span>
<a name="l08394"></a>08394 <span class="comment">    *</span>
<a name="l08395"></a>08395 <span class="comment">    * @access public</span>
<a name="l08396"></a>08396 <span class="comment">    */</span>
<a name="l08397"></a><a class="code" href="class_simple_pie__gzdecode.html#a0722441477f957078ee2437054556cbc">08397</a>    var <a class="code" href="class_simple_pie__gzdecode.html#a0722441477f957078ee2437054556cbc">$filename</a>;
<a name="l08398"></a>08398 <span class="comment"></span>
<a name="l08399"></a>08399 <span class="comment">   /**</span>
<a name="l08400"></a>08400 <span class="comment">    * Human readable comment</span>
<a name="l08401"></a>08401 <span class="comment">    *</span>
<a name="l08402"></a>08402 <span class="comment">    * @access public</span>
<a name="l08403"></a>08403 <span class="comment">    */</span>
<a name="l08404"></a><a class="code" href="class_simple_pie__gzdecode.html#a536677acc0163c53c067316a97456e6c">08404</a>    var <a class="code" href="class_simple_pie__gzdecode.html#a536677acc0163c53c067316a97456e6c">$comment</a>;
<a name="l08405"></a>08405 <span class="comment"></span>
<a name="l08406"></a>08406 <span class="comment">   /**</span>
<a name="l08407"></a>08407 <span class="comment">    * Don&#39;t allow anything to be set</span>
<a name="l08408"></a>08408 <span class="comment">    *</span>
<a name="l08409"></a>08409 <span class="comment">    * @access public</span>
<a name="l08410"></a>08410 <span class="comment">    */</span>
<a name="l08411"></a><a class="code" href="class_simple_pie__gzdecode.html#a83c2703c91959192f759992ad5640b67">08411</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie__gzdecode.html#a83c2703c91959192f759992ad5640b67">__set</a>($name, $value)
<a name="l08412"></a>08412    {
<a name="l08413"></a>08413       trigger_error(<span class="stringliteral">&quot;Cannot write property $name&quot;</span>, E_USER_ERROR);
<a name="l08414"></a>08414    }
<a name="l08415"></a>08415 <span class="comment"></span>
<a name="l08416"></a>08416 <span class="comment">   /**</span>
<a name="l08417"></a>08417 <span class="comment">    * Set the compressed string and related properties</span>
<a name="l08418"></a>08418 <span class="comment">    *</span>
<a name="l08419"></a>08419 <span class="comment">    * @access public</span>
<a name="l08420"></a>08420 <span class="comment">    */</span>
<a name="l08421"></a><a class="code" href="class_simple_pie__gzdecode.html#a32cea3310e2275e21ba95f487544692d">08421</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie__gzdecode.html#a32cea3310e2275e21ba95f487544692d">SimplePie_gzdecode</a>(<a class="code" href="class_simple_pie__gzdecode.html#a6efc15b5a2314dd4b5aaa556a375c6d6">$data</a>)
<a name="l08422"></a>08422    {
<a name="l08423"></a>08423       $this-&gt;compressed_data = <a class="code" href="class_simple_pie__gzdecode.html#a6efc15b5a2314dd4b5aaa556a375c6d6">$data</a>;
<a name="l08424"></a>08424       $this-&gt;compressed_size = strlen(<a class="code" href="class_simple_pie__gzdecode.html#a6efc15b5a2314dd4b5aaa556a375c6d6">$data</a>);
<a name="l08425"></a>08425    }
<a name="l08426"></a>08426 <span class="comment"></span>
<a name="l08427"></a>08427 <span class="comment">   /**</span>
<a name="l08428"></a>08428 <span class="comment">    * Decode the GZIP stream</span>
<a name="l08429"></a>08429 <span class="comment">    *</span>
<a name="l08430"></a>08430 <span class="comment">    * @access public</span>
<a name="l08431"></a>08431 <span class="comment">    */</span>
<a name="l08432"></a><a class="code" href="class_simple_pie__gzdecode.html#a38d99acc70a1d8fd8f94455743b2d237">08432</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie__gzdecode.html#a38d99acc70a1d8fd8f94455743b2d237">parse</a>()
<a name="l08433"></a>08433    {
<a name="l08434"></a>08434       <span class="keywordflow">if</span> ($this-&gt;compressed_size &gt;= $this-&gt;min_compressed_size)
<a name="l08435"></a>08435       {
<a name="l08436"></a>08436          <span class="comment">// Check ID1, ID2, and CM</span>
<a name="l08437"></a>08437          <span class="keywordflow">if</span> (substr($this-&gt;compressed_data, 0, 3) !== <span class="stringliteral">&quot;\x1F\x8B\x08&quot;</span>)
<a name="l08438"></a>08438          {
<a name="l08439"></a>08439             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l08440"></a>08440          }
<a name="l08441"></a>08441 
<a name="l08442"></a>08442          <span class="comment">// Get the FLG (FLaGs)</span>
<a name="l08443"></a>08443          $this-&gt;flags = ord($this-&gt;compressed_data[3]);
<a name="l08444"></a>08444 
<a name="l08445"></a>08445          <span class="comment">// FLG bits above (1 &lt;&lt; 4) are reserved</span>
<a name="l08446"></a>08446          <span class="keywordflow">if</span> ($this-&gt;flags &gt; 0x1F)
<a name="l08447"></a>08447          {
<a name="l08448"></a>08448             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l08449"></a>08449          }
<a name="l08450"></a>08450 
<a name="l08451"></a>08451          <span class="comment">// Advance the pointer after the above</span>
<a name="l08452"></a>08452          $this-&gt;position += 4;
<a name="l08453"></a>08453 
<a name="l08454"></a>08454          <span class="comment">// MTIME</span>
<a name="l08455"></a>08455          $mtime = substr($this-&gt;compressed_data, $this-&gt;position, 4);
<a name="l08456"></a>08456          <span class="comment">// Reverse the string if we&#39;re on a big-endian arch because l is the only signed long and is machine endianness</span>
<a name="l08457"></a>08457          <span class="keywordflow">if</span> (current(unpack(<span class="charliteral">&#39;S&#39;</span>, <span class="stringliteral">&quot;\x00\x01&quot;</span>)) === 1)
<a name="l08458"></a>08458          {
<a name="l08459"></a>08459             $mtime = strrev($mtime);
<a name="l08460"></a>08460          }
<a name="l08461"></a>08461          $this-&gt;MTIME = current(unpack(<span class="charliteral">&#39;l&#39;</span>, $mtime));
<a name="l08462"></a>08462          $this-&gt;position += 4;
<a name="l08463"></a>08463 
<a name="l08464"></a>08464          <span class="comment">// Get the XFL (eXtra FLags)</span>
<a name="l08465"></a>08465          $this-&gt;XFL = ord($this-&gt;compressed_data[$this-&gt;position++]);
<a name="l08466"></a>08466 
<a name="l08467"></a>08467          <span class="comment">// Get the OS (Operating System)</span>
<a name="l08468"></a>08468          $this-&gt;OS = ord($this-&gt;compressed_data[$this-&gt;position++]);
<a name="l08469"></a>08469 
<a name="l08470"></a>08470          <span class="comment">// Parse the FEXTRA</span>
<a name="l08471"></a>08471          <span class="keywordflow">if</span> ($this-&gt;flags &amp; 4)
<a name="l08472"></a>08472          {
<a name="l08473"></a>08473             <span class="comment">// Read subfield IDs</span>
<a name="l08474"></a>08474             $this-&gt;SI1 = $this-&gt;compressed_data[$this-&gt;position++];
<a name="l08475"></a>08475             $this-&gt;SI2 = $this-&gt;compressed_data[$this-&gt;position++];
<a name="l08476"></a>08476 
<a name="l08477"></a>08477             <span class="comment">// SI2 set to zero is reserved for future use</span>
<a name="l08478"></a>08478             <span class="keywordflow">if</span> ($this-&gt;SI2 === <span class="stringliteral">&quot;\x00&quot;</span>)
<a name="l08479"></a>08479             {
<a name="l08480"></a>08480                <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l08481"></a>08481             }
<a name="l08482"></a>08482 
<a name="l08483"></a>08483             <span class="comment">// Get the length of the extra field</span>
<a name="l08484"></a>08484             $len = current(unpack(<span class="charliteral">&#39;v&#39;</span>, substr($this-&gt;compressed_data, $this-&gt;position, 2)));
<a name="l08485"></a>08485             <a class="code" href="class_simple_pie__gzdecode.html#a6e88dcb746884d18f6c89eb9b9c14a42">$position</a> += 2;
<a name="l08486"></a>08486 
<a name="l08487"></a>08487             <span class="comment">// Check the length of the string is still valid</span>
<a name="l08488"></a>08488             $this-&gt;min_compressed_size += $len + 4;
<a name="l08489"></a>08489             <span class="keywordflow">if</span> ($this-&gt;compressed_size &gt;= $this-&gt;min_compressed_size)
<a name="l08490"></a>08490             {
<a name="l08491"></a>08491                <span class="comment">// Set the extra field to the given data</span>
<a name="l08492"></a>08492                $this-&gt;extra_field = substr($this-&gt;compressed_data, $this-&gt;position, $len);
<a name="l08493"></a>08493                $this-&gt;position += $len;
<a name="l08494"></a>08494             }
<a name="l08495"></a>08495             <span class="keywordflow">else</span>
<a name="l08496"></a>08496             {
<a name="l08497"></a>08497                <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l08498"></a>08498             }
<a name="l08499"></a>08499          }
<a name="l08500"></a>08500 
<a name="l08501"></a>08501          <span class="comment">// Parse the FNAME</span>
<a name="l08502"></a>08502          <span class="keywordflow">if</span> ($this-&gt;flags &amp; 8)
<a name="l08503"></a>08503          {
<a name="l08504"></a>08504             <span class="comment">// Get the length of the filename</span>
<a name="l08505"></a>08505             $len = strcspn($this-&gt;compressed_data, <span class="stringliteral">&quot;\x00&quot;</span>, $this-&gt;position);
<a name="l08506"></a>08506 
<a name="l08507"></a>08507             <span class="comment">// Check the length of the string is still valid</span>
<a name="l08508"></a>08508             $this-&gt;min_compressed_size += $len + 1;
<a name="l08509"></a>08509             <span class="keywordflow">if</span> ($this-&gt;compressed_size &gt;= $this-&gt;min_compressed_size)
<a name="l08510"></a>08510             {
<a name="l08511"></a>08511                <span class="comment">// Set the original filename to the given string</span>
<a name="l08512"></a>08512                $this-&gt;filename = substr($this-&gt;compressed_data, $this-&gt;position, $len);
<a name="l08513"></a>08513                $this-&gt;position += $len + 1;
<a name="l08514"></a>08514             }
<a name="l08515"></a>08515             <span class="keywordflow">else</span>
<a name="l08516"></a>08516             {
<a name="l08517"></a>08517                <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l08518"></a>08518             }
<a name="l08519"></a>08519          }
<a name="l08520"></a>08520 
<a name="l08521"></a>08521          <span class="comment">// Parse the FCOMMENT</span>
<a name="l08522"></a>08522          <span class="keywordflow">if</span> ($this-&gt;flags &amp; 16)
<a name="l08523"></a>08523          {
<a name="l08524"></a>08524             <span class="comment">// Get the length of the comment</span>
<a name="l08525"></a>08525             $len = strcspn($this-&gt;compressed_data, <span class="stringliteral">&quot;\x00&quot;</span>, $this-&gt;position);
<a name="l08526"></a>08526 
<a name="l08527"></a>08527             <span class="comment">// Check the length of the string is still valid</span>
<a name="l08528"></a>08528             $this-&gt;min_compressed_size += $len + 1;
<a name="l08529"></a>08529             <span class="keywordflow">if</span> ($this-&gt;compressed_size &gt;= $this-&gt;min_compressed_size)
<a name="l08530"></a>08530             {
<a name="l08531"></a>08531                <span class="comment">// Set the original comment to the given string</span>
<a name="l08532"></a>08532                $this-&gt;comment = substr($this-&gt;compressed_data, $this-&gt;position, $len);
<a name="l08533"></a>08533                $this-&gt;position += $len + 1;
<a name="l08534"></a>08534             }
<a name="l08535"></a>08535             <span class="keywordflow">else</span>
<a name="l08536"></a>08536             {
<a name="l08537"></a>08537                <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l08538"></a>08538             }
<a name="l08539"></a>08539          }
<a name="l08540"></a>08540 
<a name="l08541"></a>08541          <span class="comment">// Parse the FHCRC</span>
<a name="l08542"></a>08542          <span class="keywordflow">if</span> ($this-&gt;flags &amp; 2)
<a name="l08543"></a>08543          {
<a name="l08544"></a>08544             <span class="comment">// Check the length of the string is still valid</span>
<a name="l08545"></a>08545             $this-&gt;min_compressed_size += $len + 2;
<a name="l08546"></a>08546             <span class="keywordflow">if</span> ($this-&gt;compressed_size &gt;= $this-&gt;min_compressed_size)
<a name="l08547"></a>08547             {
<a name="l08548"></a>08548                <span class="comment">// Read the CRC</span>
<a name="l08549"></a>08549                $crc = current(unpack(<span class="charliteral">&#39;v&#39;</span>, substr($this-&gt;compressed_data, $this-&gt;position, 2)));
<a name="l08550"></a>08550 
<a name="l08551"></a>08551                <span class="comment">// Check the CRC matches</span>
<a name="l08552"></a>08552                <span class="keywordflow">if</span> ((crc32(substr($this-&gt;compressed_data, 0, $this-&gt;position)) &amp; 0xFFFF) === $crc)
<a name="l08553"></a>08553                {
<a name="l08554"></a>08554                   $this-&gt;position += 2;
<a name="l08555"></a>08555                }
<a name="l08556"></a>08556                <span class="keywordflow">else</span>
<a name="l08557"></a>08557                {
<a name="l08558"></a>08558                   <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l08559"></a>08559                }
<a name="l08560"></a>08560             }
<a name="l08561"></a>08561             <span class="keywordflow">else</span>
<a name="l08562"></a>08562             {
<a name="l08563"></a>08563                <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l08564"></a>08564             }
<a name="l08565"></a>08565          }
<a name="l08566"></a>08566 
<a name="l08567"></a>08567          <span class="comment">// Decompress the actual data</span>
<a name="l08568"></a>08568          <span class="keywordflow">if</span> (($this-&gt;data = gzinflate(substr($this-&gt;compressed_data, $this-&gt;position, -8))) === <span class="keyword">false</span>)
<a name="l08569"></a>08569          {
<a name="l08570"></a>08570             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l08571"></a>08571          }
<a name="l08572"></a>08572          <span class="keywordflow">else</span>
<a name="l08573"></a>08573          {
<a name="l08574"></a>08574             $this-&gt;position = $this-&gt;compressed_size - 8;
<a name="l08575"></a>08575          }
<a name="l08576"></a>08576 
<a name="l08577"></a>08577          <span class="comment">// Check CRC of data</span>
<a name="l08578"></a>08578          $crc = current(unpack(<span class="charliteral">&#39;V&#39;</span>, substr($this-&gt;compressed_data, $this-&gt;position, 4)));
<a name="l08579"></a>08579          $this-&gt;position += 4;
<a name="l08580"></a>08580          <span class="comment">/*if (extension_loaded(&#39;hash&#39;) &amp;&amp; sprintf(&#39;%u&#39;, current(unpack(&#39;V&#39;, hash(&#39;crc32b&#39;, $this-&gt;data)))) !== sprintf(&#39;%u&#39;, $crc))</span>
<a name="l08581"></a>08581 <span class="comment">         {</span>
<a name="l08582"></a>08582 <span class="comment">            return false;</span>
<a name="l08583"></a>08583 <span class="comment">         }*/</span>
<a name="l08584"></a>08584 
<a name="l08585"></a>08585          <span class="comment">// Check ISIZE of data</span>
<a name="l08586"></a>08586          $isize = current(unpack(<span class="charliteral">&#39;V&#39;</span>, substr($this-&gt;compressed_data, $this-&gt;position, 4)));
<a name="l08587"></a>08587          $this-&gt;position += 4;
<a name="l08588"></a>08588          <span class="keywordflow">if</span> (sprintf(<span class="stringliteral">&#39;%u&#39;</span>, strlen($this-&gt;data) &amp; 0xFFFFFFFF) !== sprintf(<span class="stringliteral">&#39;%u&#39;</span>, $isize))
<a name="l08589"></a>08589          {
<a name="l08590"></a>08590             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l08591"></a>08591          }
<a name="l08592"></a>08592 
<a name="l08593"></a>08593          <span class="comment">// Wow, against all odds, we&#39;ve actually got a valid gzip string</span>
<a name="l08594"></a>08594          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l08595"></a>08595       }
<a name="l08596"></a>08596       <span class="keywordflow">else</span>
<a name="l08597"></a>08597       {
<a name="l08598"></a>08598          <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l08599"></a>08599       }
<a name="l08600"></a>08600    }
<a name="l08601"></a>08601 }
<a name="l08602"></a>08602 
<a name="l08603"></a><a class="code" href="class_simple_pie___cache.html">08603</a> <span class="keyword">class </span><a class="code" href="class_simple_pie___cache.html">SimplePie_Cache</a>
<a name="l08604"></a>08604 {<span class="comment"></span>
<a name="l08605"></a>08605 <span class="comment">   /**</span>
<a name="l08606"></a>08606 <span class="comment">    * Don&#39;t call the constructor. Please.</span>
<a name="l08607"></a>08607 <span class="comment">    *</span>
<a name="l08608"></a>08608 <span class="comment">    * @access private</span>
<a name="l08609"></a>08609 <span class="comment">    */</span>
<a name="l08610"></a><a class="code" href="class_simple_pie___cache.html#a6ed12c77cf5cf2aa5940f2dfb2fb04d5">08610</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie___cache.html#a6ed12c77cf5cf2aa5940f2dfb2fb04d5">SimplePie_Cache</a>()
<a name="l08611"></a>08611    {
<a name="l08612"></a>08612       trigger_error(<span class="stringliteral">&#39;Please call SimplePie_Cache::create() instead of the constructor&#39;</span>, E_USER_ERROR);
<a name="l08613"></a>08613    }
<a name="l08614"></a>08614 <span class="comment"></span>
<a name="l08615"></a>08615 <span class="comment">   /**</span>
<a name="l08616"></a>08616 <span class="comment">    * Create a new SimplePie_Cache object</span>
<a name="l08617"></a>08617 <span class="comment">    *</span>
<a name="l08618"></a>08618 <span class="comment">    * @static</span>
<a name="l08619"></a>08619 <span class="comment">    * @access public</span>
<a name="l08620"></a>08620 <span class="comment">    */</span>
<a name="l08621"></a><a class="code" href="class_simple_pie___cache.html#a53e2db879d0165ae9d628382b5338718">08621</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie___cache.html#a53e2db879d0165ae9d628382b5338718">create</a>($location, $filename, $extension)
<a name="l08622"></a>08622    {
<a name="l08623"></a>08623       $location_iri =&amp; <span class="keyword">new</span> <a class="code" href="class_simple_pie___i_r_i.html">SimplePie_IRI</a>($location);
<a name="l08624"></a>08624       <span class="keywordflow">switch</span> ($location_iri-&gt;get_scheme())
<a name="l08625"></a>08625       {
<a name="l08626"></a>08626          <span class="keywordflow">case</span> <span class="stringliteral">&#39;mysql&#39;</span>:
<a name="l08627"></a>08627             <span class="keywordflow">if</span> (extension_loaded(<span class="stringliteral">&#39;mysql&#39;</span>))
<a name="l08628"></a>08628             {
<a name="l08629"></a>08629                <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="class_simple_pie___cache___my_s_q_l.html">SimplePie_Cache_MySQL</a>($location_iri, $filename, $extension);
<a name="l08630"></a>08630             }
<a name="l08631"></a>08631             <span class="keywordflow">break</span>;
<a name="l08632"></a>08632 
<a name="l08633"></a>08633          <span class="keywordflow">default</span>:
<a name="l08634"></a>08634             <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="class_simple_pie___cache___file.html">SimplePie_Cache_File</a>($location, $filename, $extension);
<a name="l08635"></a>08635       }
<a name="l08636"></a>08636    }
<a name="l08637"></a>08637 }
<a name="l08638"></a>08638 
<a name="l08639"></a><a class="code" href="class_simple_pie___cache___file.html">08639</a> <span class="keyword">class </span><a class="code" href="class_simple_pie___cache___file.html">SimplePie_Cache_File</a>
<a name="l08640"></a>08640 {
<a name="l08641"></a>08641    var $location;
<a name="l08642"></a>08642    var $filename;
<a name="l08643"></a>08643    var $extension;
<a name="l08644"></a>08644    var $name;
<a name="l08645"></a>08645 
<a name="l08646"></a>08646    <span class="keyword">function</span> <a class="code" href="class_simple_pie___cache___file.html">SimplePie_Cache_File</a>($location, $filename, $extension)
<a name="l08647"></a>08647    {
<a name="l08648"></a>08648       $this-&gt;location = $location;
<a name="l08649"></a>08649       $this-&gt;filename = $filename;
<a name="l08650"></a>08650       $this-&gt;extension = $extension;
<a name="l08651"></a>08651       $this-&gt;name = <span class="stringliteral">&quot;$this-&gt;location/$this-&gt;filename.$this-&gt;extension&quot;</span>;
<a name="l08652"></a>08652    }
<a name="l08653"></a>08653 
<a name="l08654"></a>08654    <span class="keyword">function</span> save($data)
<a name="l08655"></a>08655    {
<a name="l08656"></a>08656       <span class="keywordflow">if</span> (file_exists($this-&gt;name) &amp;&amp; is_writeable($this-&gt;name) || file_exists($this-&gt;location) &amp;&amp; is_writeable($this-&gt;location))
<a name="l08657"></a>08657       {
<a name="l08658"></a>08658          <span class="keywordflow">if</span> (is_a($data, <span class="stringliteral">&#39;SimplePie&#39;</span>))
<a name="l08659"></a>08659          {
<a name="l08660"></a>08660             $data = $data-&gt;data;
<a name="l08661"></a>08661          }
<a name="l08662"></a>08662 
<a name="l08663"></a>08663          $data = serialize($data);
<a name="l08664"></a>08664 
<a name="l08665"></a>08665          <span class="keywordflow">if</span> (function_exists(<span class="stringliteral">&#39;file_put_contents&#39;</span>))
<a name="l08666"></a>08666          {
<a name="l08667"></a>08667             <span class="keywordflow">return</span> (<span class="keywordtype">bool</span>) file_put_contents($this-&gt;name, $data);
<a name="l08668"></a>08668          }
<a name="l08669"></a>08669          <span class="keywordflow">else</span>
<a name="l08670"></a>08670          {
<a name="l08671"></a>08671             $fp = fopen($this-&gt;name, <span class="stringliteral">&#39;wb&#39;</span>);
<a name="l08672"></a>08672             <span class="keywordflow">if</span> ($fp)
<a name="l08673"></a>08673             {
<a name="l08674"></a>08674                fwrite($fp, $data);
<a name="l08675"></a>08675                fclose($fp);
<a name="l08676"></a>08676                <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l08677"></a>08677             }
<a name="l08678"></a>08678          }
<a name="l08679"></a>08679       }
<a name="l08680"></a>08680       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l08681"></a>08681    }
<a name="l08682"></a>08682 
<a name="l08683"></a>08683    <span class="keyword">function</span> load()
<a name="l08684"></a>08684    {
<a name="l08685"></a>08685       <span class="keywordflow">if</span> (file_exists($this-&gt;name) &amp;&amp; is_readable($this-&gt;name))
<a name="l08686"></a>08686       {
<a name="l08687"></a>08687          <span class="keywordflow">return</span> unserialize(file_get_contents($this-&gt;name));
<a name="l08688"></a>08688       }
<a name="l08689"></a>08689       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l08690"></a>08690    }
<a name="l08691"></a>08691 
<a name="l08692"></a>08692    <span class="keyword">function</span> mtime()
<a name="l08693"></a>08693    {
<a name="l08694"></a>08694       <span class="keywordflow">if</span> (file_exists($this-&gt;name))
<a name="l08695"></a>08695       {
<a name="l08696"></a>08696          <span class="keywordflow">return</span> filemtime($this-&gt;name);
<a name="l08697"></a>08697       }
<a name="l08698"></a>08698       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l08699"></a>08699    }
<a name="l08700"></a>08700 
<a name="l08701"></a>08701    <span class="keyword">function</span> touch()
<a name="l08702"></a>08702    {
<a name="l08703"></a>08703       <span class="keywordflow">if</span> (file_exists($this-&gt;name))
<a name="l08704"></a>08704       {
<a name="l08705"></a>08705          <span class="keywordflow">return</span> touch($this-&gt;name);
<a name="l08706"></a>08706       }
<a name="l08707"></a>08707       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l08708"></a>08708    }
<a name="l08709"></a>08709 
<a name="l08710"></a>08710    <span class="keyword">function</span> unlink()
<a name="l08711"></a>08711    {
<a name="l08712"></a>08712       <span class="keywordflow">if</span> (file_exists($this-&gt;name))
<a name="l08713"></a>08713       {
<a name="l08714"></a>08714          <span class="keywordflow">return</span> unlink($this-&gt;name);
<a name="l08715"></a>08715       }
<a name="l08716"></a>08716       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l08717"></a>08717    }
<a name="l08718"></a>08718 }
<a name="l08719"></a>08719 
<a name="l08720"></a><a class="code" href="class_simple_pie___cache___d_b.html">08720</a> <span class="keyword">class </span><a class="code" href="class_simple_pie___cache___d_b.html">SimplePie_Cache_DB</a>
<a name="l08721"></a>08721 {
<a name="l08722"></a>08722    <span class="keyword">function</span> prepare_simplepie_object_for_cache($data)
<a name="l08723"></a>08723    {
<a name="l08724"></a>08724       $items = $data-&gt;get_items();
<a name="l08725"></a>08725       $items_by_id = array();
<a name="l08726"></a>08726 
<a name="l08727"></a>08727       <span class="keywordflow">if</span> (!empty($items))
<a name="l08728"></a>08728       {
<a name="l08729"></a>08729          <span class="keywordflow">foreach</span> ($items as $item)
<a name="l08730"></a>08730          {
<a name="l08731"></a>08731             $items_by_id[$item-&gt;get_id()] = $item;
<a name="l08732"></a>08732          }
<a name="l08733"></a>08733 
<a name="l08734"></a>08734          <span class="keywordflow">if</span> (count($items_by_id) !== count($items))
<a name="l08735"></a>08735          {
<a name="l08736"></a>08736             $items_by_id = array();
<a name="l08737"></a>08737             <span class="keywordflow">foreach</span> ($items as $item)
<a name="l08738"></a>08738             {
<a name="l08739"></a>08739                $items_by_id[$item-&gt;get_id(<span class="keyword">true</span>)] = $item;
<a name="l08740"></a>08740             }
<a name="l08741"></a>08741          }
<a name="l08742"></a>08742 
<a name="l08743"></a>08743          <span class="keywordflow">if</span> (isset($data-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;feed&#39;</span>][0]))
<a name="l08744"></a>08744          {
<a name="l08745"></a>08745             $channel =&amp; $data-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;feed&#39;</span>][0];
<a name="l08746"></a>08746          }
<a name="l08747"></a>08747          elseif (isset($data-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;feed&#39;</span>][0]))
<a name="l08748"></a>08748          {
<a name="l08749"></a>08749             $channel =&amp; $data-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;feed&#39;</span>][0];
<a name="l08750"></a>08750          }
<a name="l08751"></a>08751          elseif (isset($data-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RDF][<span class="stringliteral">&#39;RDF&#39;</span>][0]))
<a name="l08752"></a>08752          {
<a name="l08753"></a>08753             $channel =&amp; $data-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RDF][<span class="stringliteral">&#39;RDF&#39;</span>][0];
<a name="l08754"></a>08754          }
<a name="l08755"></a>08755          elseif (isset($data-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RSS_20][<span class="stringliteral">&#39;rss&#39;</span>][0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RSS_20][<span class="stringliteral">&#39;channel&#39;</span>][0]))
<a name="l08756"></a>08756          {
<a name="l08757"></a>08757             $channel =&amp; $data-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RSS_20][<span class="stringliteral">&#39;rss&#39;</span>][0][<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RSS_20][<span class="stringliteral">&#39;channel&#39;</span>][0];
<a name="l08758"></a>08758          }
<a name="l08759"></a>08759          <span class="keywordflow">else</span>
<a name="l08760"></a>08760          {
<a name="l08761"></a>08761             $channel = null;
<a name="l08762"></a>08762          }
<a name="l08763"></a>08763 
<a name="l08764"></a>08764          <span class="keywordflow">if</span> ($channel !== null)
<a name="l08765"></a>08765          {
<a name="l08766"></a>08766             <span class="keywordflow">if</span> (isset($channel[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;entry&#39;</span>]))
<a name="l08767"></a>08767             {
<a name="l08768"></a>08768                unset($channel[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;entry&#39;</span>]);
<a name="l08769"></a>08769             }
<a name="l08770"></a>08770             <span class="keywordflow">if</span> (isset($channel[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;entry&#39;</span>]))
<a name="l08771"></a>08771             {
<a name="l08772"></a>08772                unset($channel[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;entry&#39;</span>]);
<a name="l08773"></a>08773             }
<a name="l08774"></a>08774             <span class="keywordflow">if</span> (isset($channel[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RSS_10][<span class="stringliteral">&#39;item&#39;</span>]))
<a name="l08775"></a>08775             {
<a name="l08776"></a>08776                unset($channel[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RSS_10][<span class="stringliteral">&#39;item&#39;</span>]);
<a name="l08777"></a>08777             }
<a name="l08778"></a>08778             <span class="keywordflow">if</span> (isset($channel[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RSS_090][<span class="stringliteral">&#39;item&#39;</span>]))
<a name="l08779"></a>08779             {
<a name="l08780"></a>08780                unset($channel[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RSS_090][<span class="stringliteral">&#39;item&#39;</span>]);
<a name="l08781"></a>08781             }
<a name="l08782"></a>08782             <span class="keywordflow">if</span> (isset($channel[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RSS_20][<span class="stringliteral">&#39;item&#39;</span>]))
<a name="l08783"></a>08783             {
<a name="l08784"></a>08784                unset($channel[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RSS_20][<span class="stringliteral">&#39;item&#39;</span>]);
<a name="l08785"></a>08785             }
<a name="l08786"></a>08786          }
<a name="l08787"></a>08787          <span class="keywordflow">if</span> (isset($data-&gt;data[<span class="stringliteral">&#39;items&#39;</span>]))
<a name="l08788"></a>08788          {
<a name="l08789"></a>08789             unset($data-&gt;data[<span class="stringliteral">&#39;items&#39;</span>]);
<a name="l08790"></a>08790          }
<a name="l08791"></a>08791          <span class="keywordflow">if</span> (isset($data-&gt;data[<span class="stringliteral">&#39;ordered_items&#39;</span>]))
<a name="l08792"></a>08792          {
<a name="l08793"></a>08793             unset($data-&gt;data[<span class="stringliteral">&#39;ordered_items&#39;</span>]);
<a name="l08794"></a>08794          }
<a name="l08795"></a>08795       }
<a name="l08796"></a>08796       <span class="keywordflow">return</span> array(serialize($data-&gt;data), $items_by_id);
<a name="l08797"></a>08797    }
<a name="l08798"></a>08798 }
<a name="l08799"></a>08799 
<a name="l08800"></a><a class="code" href="class_simple_pie___cache___my_s_q_l.html">08800</a> <span class="keyword">class </span><a class="code" href="class_simple_pie___cache___my_s_q_l.html">SimplePie_Cache_MySQL</a> <span class="keyword">extends</span> <a class="code" href="class_simple_pie___cache___d_b.html">SimplePie_Cache_DB</a>
<a name="l08801"></a>08801 {
<a name="l08802"></a>08802    var $mysql;
<a name="l08803"></a>08803    var $options;
<a name="l08804"></a>08804    var $id;
<a name="l08805"></a>08805 
<a name="l08806"></a>08806    <span class="keyword">function</span> <a class="code" href="class_simple_pie___cache___my_s_q_l.html">SimplePie_Cache_MySQL</a>($mysql_location, $name, $extension)
<a name="l08807"></a>08807    {
<a name="l08808"></a>08808       $host = $mysql_location-&gt;get_host();
<a name="l08809"></a>08809       <span class="keywordflow">if</span> (<a class="code" href="class_simple_pie___misc.html#aa0297b92e96759a576d3aa8caa22b10d">SimplePie_Misc::stripos</a>($host, <span class="stringliteral">&#39;unix(&#39;</span>) === 0 &amp;&amp; substr($host, -1) === <span class="charliteral">&#39;)&#39;</span>)
<a name="l08810"></a>08810       {
<a name="l08811"></a>08811          $server = <span class="charliteral">&#39;:&#39;</span> . substr($host, 5, -1);
<a name="l08812"></a>08812       }
<a name="l08813"></a>08813       <span class="keywordflow">else</span>
<a name="l08814"></a>08814       {
<a name="l08815"></a>08815          $server = $host;
<a name="l08816"></a>08816          <span class="keywordflow">if</span> ($mysql_location-&gt;get_port() !== null)
<a name="l08817"></a>08817          {
<a name="l08818"></a>08818             $server .= <span class="charliteral">&#39;:&#39;</span> . $mysql_location-&gt;get_port();
<a name="l08819"></a>08819          }
<a name="l08820"></a>08820       }
<a name="l08821"></a>08821 
<a name="l08822"></a>08822       <span class="keywordflow">if</span> (strpos($mysql_location-&gt;get_userinfo(), <span class="charliteral">&#39;:&#39;</span>) !== <span class="keyword">false</span>)
<a name="l08823"></a>08823       {
<a name="l08824"></a>08824          list($username, $password) = explode(<span class="charliteral">&#39;:&#39;</span>, $mysql_location-&gt;get_userinfo(), 2);
<a name="l08825"></a>08825       }
<a name="l08826"></a>08826       <span class="keywordflow">else</span>
<a name="l08827"></a>08827       {
<a name="l08828"></a>08828          $username = $mysql_location-&gt;get_userinfo();
<a name="l08829"></a>08829          $password = null;
<a name="l08830"></a>08830       }
<a name="l08831"></a>08831 
<a name="l08832"></a>08832       <span class="keywordflow">if</span> ($this-&gt;mysql = mysql_connect($server, $username, $password))
<a name="l08833"></a>08833       {
<a name="l08834"></a>08834          $this-&gt;<span class="keywordtype">id</span> = $name . $extension;
<a name="l08835"></a>08835          $this-&gt;options = <a class="code" href="class_simple_pie___misc.html#a4cc5f71ef4340237dec4615927549c86">SimplePie_Misc::parse_str</a>($mysql_location-&gt;get_query());
<a name="l08836"></a>08836          <span class="keywordflow">if</span> (!isset($this-&gt;options[<span class="stringliteral">&#39;prefix&#39;</span>][0]))
<a name="l08837"></a>08837          {
<a name="l08838"></a>08838             $this-&gt;options[<span class="stringliteral">&#39;prefix&#39;</span>][0] = <span class="stringliteral">&#39;&#39;</span>;
<a name="l08839"></a>08839          }
<a name="l08840"></a>08840 
<a name="l08841"></a>08841          <span class="keywordflow">if</span> (mysql_select_db(ltrim($mysql_location-&gt;get_path(), <span class="charliteral">&#39;/&#39;</span>))
<a name="l08842"></a>08842             &amp;&amp; mysql_query(<span class="stringliteral">&#39;SET NAMES utf8&#39;</span>)
<a name="l08843"></a>08843             &amp;&amp; ($query = mysql_unbuffered_query(<span class="stringliteral">&#39;SHOW TABLES&#39;</span>)))
<a name="l08844"></a>08844          {
<a name="l08845"></a>08845             $db = array();
<a name="l08846"></a>08846             <span class="keywordflow">while</span> ($row = mysql_fetch_row($query))
<a name="l08847"></a>08847             {
<a name="l08848"></a>08848                $db[] = $row[0];
<a name="l08849"></a>08849             }
<a name="l08850"></a>08850 
<a name="l08851"></a>08851             <span class="keywordflow">if</span> (!in_array($this-&gt;options[<span class="stringliteral">&#39;prefix&#39;</span>][0] . <span class="stringliteral">&#39;cache_data&#39;</span>, $db))
<a name="l08852"></a>08852             {
<a name="l08853"></a>08853                <span class="keywordflow">if</span> (!mysql_query(<span class="stringliteral">&#39;CREATE TABLE `&#39;</span> . $this-&gt;options[<span class="stringliteral">&#39;prefix&#39;</span>][0] . <span class="stringliteral">&#39;cache_data` (`id` TEXT CHARACTER SET utf8 NOT NULL, `items` SMALLINT NOT NULL DEFAULT 0, `data` BLOB NOT NULL, `mtime` INT UNSIGNED NOT NULL, UNIQUE (`id`(125)))&#39;</span>))
<a name="l08854"></a>08854                {
<a name="l08855"></a>08855                   $this-&gt;mysql = null;
<a name="l08856"></a>08856                }
<a name="l08857"></a>08857             }
<a name="l08858"></a>08858 
<a name="l08859"></a>08859             <span class="keywordflow">if</span> (!in_array($this-&gt;options[<span class="stringliteral">&#39;prefix&#39;</span>][0] . <span class="stringliteral">&#39;items&#39;</span>, $db))
<a name="l08860"></a>08860             {
<a name="l08861"></a>08861                <span class="keywordflow">if</span> (!mysql_query(<span class="stringliteral">&#39;CREATE TABLE `&#39;</span> . $this-&gt;options[<span class="stringliteral">&#39;prefix&#39;</span>][0] . <span class="stringliteral">&#39;items` (`feed_id` TEXT CHARACTER SET utf8 NOT NULL, `id` TEXT CHARACTER SET utf8 NOT NULL, `data` TEXT CHARACTER SET utf8 NOT NULL, `posted` INT UNSIGNED NOT NULL, INDEX `feed_id` (`feed_id`(125)))&#39;</span>))
<a name="l08862"></a>08862                {
<a name="l08863"></a>08863                   $this-&gt;mysql = null;
<a name="l08864"></a>08864                }
<a name="l08865"></a>08865             }
<a name="l08866"></a>08866          }
<a name="l08867"></a>08867          <span class="keywordflow">else</span>
<a name="l08868"></a>08868          {
<a name="l08869"></a>08869             $this-&gt;mysql = null;
<a name="l08870"></a>08870          }
<a name="l08871"></a>08871       }
<a name="l08872"></a>08872    }
<a name="l08873"></a>08873 
<a name="l08874"></a>08874    <span class="keyword">function</span> save($data)
<a name="l08875"></a>08875    {
<a name="l08876"></a>08876       <span class="keywordflow">if</span> ($this-&gt;mysql)
<a name="l08877"></a>08877       {
<a name="l08878"></a>08878          $feed_id = <span class="stringliteral">&quot;&#39;&quot;</span> . mysql_real_escape_string($this-&gt;<span class="keywordtype">id</span>) . <span class="stringliteral">&quot;&#39;&quot;</span>;
<a name="l08879"></a>08879 
<a name="l08880"></a>08880          <span class="keywordflow">if</span> (is_a($data, <span class="stringliteral">&#39;SimplePie&#39;</span>))
<a name="l08881"></a>08881          {
<a name="l08882"></a>08882             <span class="keywordflow">if</span> (SIMPLEPIE_PHP5)
<a name="l08883"></a>08883             {
<a name="l08884"></a>08884                <span class="comment">// This keyword needs to defy coding standards for PHP4 compatibility</span>
<a name="l08885"></a>08885                $data = clone($data);
<a name="l08886"></a>08886             }
<a name="l08887"></a>08887 
<a name="l08888"></a>08888             $prepared = $this-&gt;prepare_simplepie_object_for_cache($data);
<a name="l08889"></a>08889 
<a name="l08890"></a>08890             <span class="keywordflow">if</span> ($query = mysql_query(<span class="stringliteral">&#39;SELECT `id` FROM `&#39;</span> . $this-&gt;options[<span class="stringliteral">&#39;prefix&#39;</span>][0] . <span class="stringliteral">&#39;cache_data` WHERE `id` = &#39;</span> . $feed_id, $this-&gt;mysql))
<a name="l08891"></a>08891             {
<a name="l08892"></a>08892                <span class="keywordflow">if</span> (mysql_num_rows($query))
<a name="l08893"></a>08893                {
<a name="l08894"></a>08894                   $items = count($prepared[1]);
<a name="l08895"></a>08895                   <span class="keywordflow">if</span> ($items)
<a name="l08896"></a>08896                   {
<a name="l08897"></a>08897                      $sql = <span class="stringliteral">&#39;UPDATE `&#39;</span> . $this-&gt;options[<span class="stringliteral">&#39;prefix&#39;</span>][0] . <span class="stringliteral">&#39;cache_data` SET `items` = &#39;</span> . $items . <span class="stringliteral">&#39;, `data` = \&#39;&#39;</span> . mysql_real_escape_string($prepared[0]) . <span class="charliteral">&#39;\&#39;</span>, `mtime` = <span class="stringliteral">&#39; . time() . &#39;</span> WHERE `<span class="keywordtype">id</span>` = <span class="stringliteral">&#39; . $feed_id;</span>
<a name="l08898"></a>08898 <span class="stringliteral">                  }</span>
<a name="l08899"></a>08899 <span class="stringliteral">                  else</span>
<a name="l08900"></a>08900 <span class="stringliteral">                  {</span>
<a name="l08901"></a>08901 <span class="stringliteral">                     $sql = &#39;</span>UPDATE `<span class="stringliteral">&#39; . $this-&gt;options[&#39;</span>prefix<span class="stringliteral">&#39;][0] . &#39;</span>cache_data` SET `data` = \<span class="stringliteral">&#39;&#39;</span> . mysql_real_escape_string($prepared[0]) . <span class="charliteral">&#39;\&#39;</span>, `mtime` = <span class="stringliteral">&#39; . time() . &#39;</span> WHERE `<span class="keywordtype">id</span>` = <span class="stringliteral">&#39; . $feed_id;</span>
<a name="l08902"></a>08902 <span class="stringliteral">                  }</span>
<a name="l08903"></a>08903 <span class="stringliteral"></span>
<a name="l08904"></a>08904 <span class="stringliteral">                  if (!mysql_query($sql, $this-&gt;mysql))</span>
<a name="l08905"></a>08905 <span class="stringliteral">                  {</span>
<a name="l08906"></a>08906 <span class="stringliteral">                     return false;</span>
<a name="l08907"></a>08907 <span class="stringliteral">                  }</span>
<a name="l08908"></a>08908 <span class="stringliteral">               }</span>
<a name="l08909"></a>08909 <span class="stringliteral">               elseif (!mysql_query(&#39;</span>INSERT INTO `<span class="stringliteral">&#39; . $this-&gt;options[&#39;</span>prefix<span class="stringliteral">&#39;][0] . &#39;</span>cache_data` (`<span class="keywordtype">id</span>`, `items`, `data`, `mtime`) VALUES(<span class="stringliteral">&#39; . $feed_id . &#39;</span>, <span class="stringliteral">&#39; . count($prepared[1]) . &#39;</span>, \<span class="stringliteral">&#39;&#39;</span> . mysql_real_escape_string($prepared[0]) . <span class="charliteral">&#39;\&#39;</span>, <span class="stringliteral">&#39; . time() . &#39;</span>)<span class="stringliteral">&#39;, $this-&gt;mysql))</span>
<a name="l08910"></a>08910 <span class="stringliteral">               {</span>
<a name="l08911"></a>08911 <span class="stringliteral">                  return false;</span>
<a name="l08912"></a>08912 <span class="stringliteral">               }</span>
<a name="l08913"></a>08913 <span class="stringliteral"></span>
<a name="l08914"></a>08914 <span class="stringliteral">               $ids = array_keys($prepared[1]);</span>
<a name="l08915"></a>08915 <span class="stringliteral">               if (!empty($ids))</span>
<a name="l08916"></a>08916 <span class="stringliteral">               {</span>
<a name="l08917"></a>08917 <span class="stringliteral">                  foreach ($ids as $id)</span>
<a name="l08918"></a>08918 <span class="stringliteral">                  {</span>
<a name="l08919"></a>08919 <span class="stringliteral">                     $database_ids[] = mysql_real_escape_string($id);</span>
<a name="l08920"></a>08920 <span class="stringliteral">                  }</span>
<a name="l08921"></a>08921 <span class="stringliteral"></span>
<a name="l08922"></a>08922 <span class="stringliteral">                  if ($query = mysql_unbuffered_query(&#39;</span>SELECT `<span class="keywordtype">id</span>` FROM `<span class="stringliteral">&#39; . $this-&gt;options[&#39;</span>prefix<span class="stringliteral">&#39;][0] . &#39;</span>items` WHERE `<span class="keywordtype">id</span>` = \<span class="stringliteral">&#39;&#39;</span> . implode(<span class="charliteral">&#39;\&#39;</span> OR `<span class="keywordtype">id</span>` = \<span class="stringliteral">&#39;&#39;</span>, $database_ids) . <span class="charliteral">&#39;\&#39;</span> AND `feed_id` = <span class="stringliteral">&#39; . $feed_id, $this-&gt;mysql))</span>
<a name="l08923"></a>08923 <span class="stringliteral">                  {</span>
<a name="l08924"></a>08924 <span class="stringliteral">                     $existing_ids = array();</span>
<a name="l08925"></a>08925 <span class="stringliteral">                     while ($row = mysql_fetch_row($query))</span>
<a name="l08926"></a>08926 <span class="stringliteral">                     {</span>
<a name="l08927"></a>08927 <span class="stringliteral">                        $existing_ids[] = $row[0];</span>
<a name="l08928"></a>08928 <span class="stringliteral">                     }</span>
<a name="l08929"></a>08929 <span class="stringliteral"></span>
<a name="l08930"></a>08930 <span class="stringliteral">                     $new_ids = array_diff($ids, $existing_ids);</span>
<a name="l08931"></a>08931 <span class="stringliteral"></span>
<a name="l08932"></a>08932 <span class="stringliteral">                     foreach ($new_ids as $new_id)</span>
<a name="l08933"></a>08933 <span class="stringliteral">                     {</span>
<a name="l08934"></a>08934 <span class="stringliteral">                        if (!($date = $prepared[1][$new_id]-&gt;get_date(&#39;</span>U<span class="stringliteral">&#39;)))</span>
<a name="l08935"></a>08935 <span class="stringliteral">                        {</span>
<a name="l08936"></a>08936 <span class="stringliteral">                           $date = time();</span>
<a name="l08937"></a>08937 <span class="stringliteral">                        }</span>
<a name="l08938"></a>08938 <span class="stringliteral"></span>
<a name="l08939"></a>08939 <span class="stringliteral">                        if (!mysql_query(&#39;</span>INSERT INTO `<span class="stringliteral">&#39; . $this-&gt;options[&#39;</span>prefix<span class="stringliteral">&#39;][0] . &#39;</span>items` (`feed_id`, `<span class="keywordtype">id</span>`, `data`, `posted`) VALUES(<span class="stringliteral">&#39; . $feed_id . &#39;</span>, \<span class="stringliteral">&#39;&#39;</span> . mysql_real_escape_string($new_id) . <span class="charliteral">&#39;\&#39;</span>, \<span class="stringliteral">&#39;&#39;</span> . mysql_real_escape_string(serialize($prepared[1][$new_id]-&gt;data)) . <span class="charliteral">&#39;\&#39;</span>, <span class="stringliteral">&#39; . $date . &#39;</span>)<span class="stringliteral">&#39;, $this-&gt;mysql))</span>
<a name="l08940"></a>08940 <span class="stringliteral">                        {</span>
<a name="l08941"></a>08941 <span class="stringliteral">                           return false;</span>
<a name="l08942"></a>08942 <span class="stringliteral">                        }</span>
<a name="l08943"></a>08943 <span class="stringliteral">                     }</span>
<a name="l08944"></a>08944 <span class="stringliteral">                     return true;</span>
<a name="l08945"></a>08945 <span class="stringliteral">                  }</span>
<a name="l08946"></a>08946 <span class="stringliteral">               }</span>
<a name="l08947"></a>08947 <span class="stringliteral">               else</span>
<a name="l08948"></a>08948 <span class="stringliteral">               {</span>
<a name="l08949"></a>08949 <span class="stringliteral">                  return true;</span>
<a name="l08950"></a>08950 <span class="stringliteral">               }</span>
<a name="l08951"></a>08951 <span class="stringliteral">            }</span>
<a name="l08952"></a>08952 <span class="stringliteral">         }</span>
<a name="l08953"></a>08953 <span class="stringliteral">         elseif ($query = mysql_query(&#39;</span>SELECT `<span class="keywordtype">id</span>` FROM `<span class="stringliteral">&#39; . $this-&gt;options[&#39;</span>prefix<span class="stringliteral">&#39;][0] . &#39;</span>cache_data` WHERE `<span class="keywordtype">id</span>` = <span class="stringliteral">&#39; . $feed_id, $this-&gt;mysql))</span>
<a name="l08954"></a>08954 <span class="stringliteral">         {</span>
<a name="l08955"></a>08955 <span class="stringliteral">            if (mysql_num_rows($query))</span>
<a name="l08956"></a>08956 <span class="stringliteral">            {</span>
<a name="l08957"></a>08957 <span class="stringliteral">               if (mysql_query(&#39;</span>UPDATE `<span class="stringliteral">&#39; . $this-&gt;options[&#39;</span>prefix<span class="stringliteral">&#39;][0] . &#39;</span>cache_data` SET `items` = 0, `data` = \<span class="stringliteral">&#39;&#39;</span> . mysql_real_escape_string(serialize($data)) . <span class="charliteral">&#39;\&#39;</span>, `mtime` = <span class="stringliteral">&#39; . time() . &#39;</span> WHERE `<span class="keywordtype">id</span>` = <span class="stringliteral">&#39; . $feed_id, $this-&gt;mysql))</span>
<a name="l08958"></a>08958 <span class="stringliteral">               {</span>
<a name="l08959"></a>08959 <span class="stringliteral">                  return true;</span>
<a name="l08960"></a>08960 <span class="stringliteral">               }</span>
<a name="l08961"></a>08961 <span class="stringliteral">            }</span>
<a name="l08962"></a>08962 <span class="stringliteral">            elseif (mysql_query(&#39;</span>INSERT INTO `<span class="stringliteral">&#39; . $this-&gt;options[&#39;</span>prefix<span class="stringliteral">&#39;][0] . &#39;</span>cache_data` (`<span class="keywordtype">id</span>`, `items`, `data`, `mtime`) VALUES(\<span class="stringliteral">&#39;&#39;</span> . mysql_real_escape_string($this-&gt;<span class="keywordtype">id</span>) . <span class="charliteral">&#39;\&#39;</span>, 0, \<span class="stringliteral">&#39;&#39;</span> . mysql_real_escape_string(serialize($data)) . <span class="charliteral">&#39;\&#39;</span>, <span class="stringliteral">&#39; . time() . &#39;</span>)<span class="stringliteral">&#39;, $this-&gt;mysql))</span>
<a name="l08963"></a>08963 <span class="stringliteral">            {</span>
<a name="l08964"></a>08964 <span class="stringliteral">               return true;</span>
<a name="l08965"></a>08965 <span class="stringliteral">            }</span>
<a name="l08966"></a>08966 <span class="stringliteral">         }</span>
<a name="l08967"></a>08967 <span class="stringliteral">      }</span>
<a name="l08968"></a>08968 <span class="stringliteral">      return false;</span>
<a name="l08969"></a>08969 <span class="stringliteral">   }</span>
<a name="l08970"></a>08970 <span class="stringliteral"></span>
<a name="l08971"></a>08971 <span class="stringliteral">   function load()</span>
<a name="l08972"></a>08972 <span class="stringliteral">   {</span>
<a name="l08973"></a>08973 <span class="stringliteral">      if ($this-&gt;mysql &amp;&amp; ($query = mysql_query(&#39;</span>SELECT `items`, `data` FROM `<span class="stringliteral">&#39; . $this-&gt;options[&#39;</span>prefix<span class="stringliteral">&#39;][0] . &#39;</span>cache_data` WHERE `<span class="keywordtype">id</span>` = \<span class="stringliteral">&#39;&#39;</span> . mysql_real_escape_string($this-&gt;<span class="keywordtype">id</span>) . <span class="stringliteral">&quot;&#39;&quot;</span>, $this-&gt;mysql)) &amp;&amp; ($row = mysql_fetch_row($query)))
<a name="l08974"></a>08974       {
<a name="l08975"></a>08975          $data = unserialize($row[1]);
<a name="l08976"></a>08976 
<a name="l08977"></a>08977          <span class="keywordflow">if</span> (isset($this-&gt;options[<span class="stringliteral">&#39;items&#39;</span>][0]))
<a name="l08978"></a>08978          {
<a name="l08979"></a>08979             $items = (int) $this-&gt;options[<span class="stringliteral">&#39;items&#39;</span>][0];
<a name="l08980"></a>08980          }
<a name="l08981"></a>08981          <span class="keywordflow">else</span>
<a name="l08982"></a>08982          {
<a name="l08983"></a>08983             $items = (int) $row[0];
<a name="l08984"></a>08984          }
<a name="l08985"></a>08985 
<a name="l08986"></a>08986          <span class="keywordflow">if</span> ($items !== 0)
<a name="l08987"></a>08987          {
<a name="l08988"></a>08988             <span class="keywordflow">if</span> (isset($data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;feed&#39;</span>][0]))
<a name="l08989"></a>08989             {
<a name="l08990"></a>08990                $feed =&amp; $data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_10][<span class="stringliteral">&#39;feed&#39;</span>][0];
<a name="l08991"></a>08991             }
<a name="l08992"></a>08992             elseif (isset($data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;feed&#39;</span>][0]))
<a name="l08993"></a>08993             {
<a name="l08994"></a>08994                $feed =&amp; $data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_ATOM_03][<span class="stringliteral">&#39;feed&#39;</span>][0];
<a name="l08995"></a>08995             }
<a name="l08996"></a>08996             elseif (isset($data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RDF][<span class="stringliteral">&#39;RDF&#39;</span>][0]))
<a name="l08997"></a>08997             {
<a name="l08998"></a>08998                $feed =&amp; $data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RDF][<span class="stringliteral">&#39;RDF&#39;</span>][0];
<a name="l08999"></a>08999             }
<a name="l09000"></a>09000             elseif (isset($data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RSS_20][<span class="stringliteral">&#39;rss&#39;</span>][0]))
<a name="l09001"></a>09001             {
<a name="l09002"></a>09002                $feed =&amp; $data[<span class="stringliteral">&#39;child&#39;</span>][SIMPLEPIE_NAMESPACE_RSS_20][<span class="stringliteral">&#39;rss&#39;</span>][0];
<a name="l09003"></a>09003             }
<a name="l09004"></a>09004             <span class="keywordflow">else</span>
<a name="l09005"></a>09005             {
<a name="l09006"></a>09006                $feed = null;
<a name="l09007"></a>09007             }
<a name="l09008"></a>09008 
<a name="l09009"></a>09009             <span class="keywordflow">if</span> ($feed !== null)
<a name="l09010"></a>09010             {
<a name="l09011"></a>09011                $sql = <span class="stringliteral">&#39;SELECT `data` FROM `&#39;</span> . $this-&gt;options[<span class="stringliteral">&#39;prefix&#39;</span>][0] . <span class="stringliteral">&#39;items` WHERE `feed_id` = \&#39;&#39;</span> . mysql_real_escape_string($this-&gt;<span class="keywordtype">id</span>) . <span class="charliteral">&#39;\&#39;</span> ORDER BY `posted` DESC<span class="stringliteral">&#39;;</span>
<a name="l09012"></a>09012 <span class="stringliteral">               if ($items &gt; 0)</span>
<a name="l09013"></a>09013 <span class="stringliteral">               {</span>
<a name="l09014"></a>09014 <span class="stringliteral">                  $sql .= &#39;</span> LIMIT <span class="stringliteral">&#39; . $items;</span>
<a name="l09015"></a>09015 <span class="stringliteral">               }</span>
<a name="l09016"></a>09016 <span class="stringliteral"></span>
<a name="l09017"></a>09017 <span class="stringliteral">               if ($query = mysql_unbuffered_query($sql, $this-&gt;mysql))</span>
<a name="l09018"></a>09018 <span class="stringliteral">               {</span>
<a name="l09019"></a>09019 <span class="stringliteral">                  while ($row = mysql_fetch_row($query))</span>
<a name="l09020"></a>09020 <span class="stringliteral">                  {</span>
<a name="l09021"></a>09021 <span class="stringliteral">                     $feed[&#39;</span>child<span class="stringliteral">&#39;][SIMPLEPIE_NAMESPACE_ATOM_10][&#39;</span>entry<span class="stringliteral">&#39;][] = unserialize($row[0]);</span>
<a name="l09022"></a>09022 <span class="stringliteral">                  }</span>
<a name="l09023"></a>09023 <span class="stringliteral">               }</span>
<a name="l09024"></a>09024 <span class="stringliteral">               else</span>
<a name="l09025"></a>09025 <span class="stringliteral">               {</span>
<a name="l09026"></a>09026 <span class="stringliteral">                  return false;</span>
<a name="l09027"></a>09027 <span class="stringliteral">               }</span>
<a name="l09028"></a>09028 <span class="stringliteral">            }</span>
<a name="l09029"></a>09029 <span class="stringliteral">         }</span>
<a name="l09030"></a>09030 <span class="stringliteral">         return $data;</span>
<a name="l09031"></a>09031 <span class="stringliteral">      }</span>
<a name="l09032"></a>09032 <span class="stringliteral">      return false;</span>
<a name="l09033"></a>09033 <span class="stringliteral">   }</span>
<a name="l09034"></a>09034 <span class="stringliteral"></span>
<a name="l09035"></a>09035 <span class="stringliteral">   function mtime()</span>
<a name="l09036"></a>09036 <span class="stringliteral">   {</span>
<a name="l09037"></a>09037 <span class="stringliteral">      if ($this-&gt;mysql &amp;&amp; ($query = mysql_query(&#39;</span>SELECT `mtime` FROM `<span class="stringliteral">&#39; . $this-&gt;options[&#39;</span>prefix<span class="stringliteral">&#39;][0] . &#39;</span>cache_data` WHERE `<span class="keywordtype">id</span>` = \<span class="stringliteral">&#39;&#39;</span> . mysql_real_escape_string($this-&gt;<span class="keywordtype">id</span>) . <span class="stringliteral">&quot;&#39;&quot;</span>, $this-&gt;mysql)) &amp;&amp; ($row = mysql_fetch_row($query)))
<a name="l09038"></a>09038       {
<a name="l09039"></a>09039          <span class="keywordflow">return</span> $row[0];
<a name="l09040"></a>09040       }
<a name="l09041"></a>09041       <span class="keywordflow">else</span>
<a name="l09042"></a>09042       {
<a name="l09043"></a>09043          <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l09044"></a>09044       }
<a name="l09045"></a>09045    }
<a name="l09046"></a>09046 
<a name="l09047"></a>09047    <span class="keyword">function</span> touch()
<a name="l09048"></a>09048    {
<a name="l09049"></a>09049       <span class="keywordflow">if</span> ($this-&gt;mysql &amp;&amp; ($query = mysql_query(<span class="stringliteral">&#39;UPDATE `&#39;</span> . $this-&gt;options[<span class="stringliteral">&#39;prefix&#39;</span>][0] . <span class="stringliteral">&#39;cache_data` SET `mtime` = &#39;</span> . time() . <span class="stringliteral">&#39; WHERE `id` = \&#39;&#39;</span> . mysql_real_escape_string($this-&gt;<span class="keywordtype">id</span>) . <span class="stringliteral">&quot;&#39;&quot;</span>, $this-&gt;mysql)) &amp;&amp; mysql_affected_rows($this-&gt;mysql))
<a name="l09050"></a>09050       {
<a name="l09051"></a>09051          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l09052"></a>09052       }
<a name="l09053"></a>09053       <span class="keywordflow">else</span>
<a name="l09054"></a>09054       {
<a name="l09055"></a>09055          <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l09056"></a>09056       }
<a name="l09057"></a>09057    }
<a name="l09058"></a>09058 
<a name="l09059"></a>09059    <span class="keyword">function</span> unlink()
<a name="l09060"></a>09060    {
<a name="l09061"></a>09061       <span class="keywordflow">if</span> ($this-&gt;mysql &amp;&amp; ($query = mysql_query(<span class="stringliteral">&#39;DELETE FROM `&#39;</span> . $this-&gt;options[<span class="stringliteral">&#39;prefix&#39;</span>][0] . <span class="stringliteral">&#39;cache_data` WHERE `id` = \&#39;&#39;</span> . mysql_real_escape_string($this-&gt;<span class="keywordtype">id</span>) . <span class="stringliteral">&quot;&#39;&quot;</span>, $this-&gt;mysql)) &amp;&amp; ($query2 = mysql_query(<span class="stringliteral">&#39;DELETE FROM `&#39;</span> . $this-&gt;options[<span class="stringliteral">&#39;prefix&#39;</span>][0] . <span class="stringliteral">&#39;items` WHERE `feed_id` = \&#39;&#39;</span> . mysql_real_escape_string($this-&gt;<span class="keywordtype">id</span>) . <span class="stringliteral">&quot;&#39;&quot;</span>, $this-&gt;mysql)))
<a name="l09062"></a>09062       {
<a name="l09063"></a>09063          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l09064"></a>09064       }
<a name="l09065"></a>09065       <span class="keywordflow">else</span>
<a name="l09066"></a>09066       {
<a name="l09067"></a>09067          <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l09068"></a>09068       }
<a name="l09069"></a>09069    }
<a name="l09070"></a>09070 }
<a name="l09071"></a>09071 
<a name="l09072"></a><a class="code" href="class_simple_pie___misc.html">09072</a> <span class="keyword">class </span><a class="code" href="class_simple_pie___misc.html">SimplePie_Misc</a>
<a name="l09073"></a>09073 {
<a name="l09074"></a>09074    <span class="keyword">function</span> time_hms($seconds)
<a name="l09075"></a>09075    {
<a name="l09076"></a>09076       $time = <span class="stringliteral">&#39;&#39;</span>;
<a name="l09077"></a>09077 
<a name="l09078"></a>09078       $hours = floor($seconds / 3600);
<a name="l09079"></a>09079       $remainder = $seconds % 3600;
<a name="l09080"></a>09080       <span class="keywordflow">if</span> ($hours &gt; 0)
<a name="l09081"></a>09081       {
<a name="l09082"></a>09082          $time .= $hours.<span class="charliteral">&#39;:&#39;</span>;
<a name="l09083"></a>09083       }
<a name="l09084"></a>09084 
<a name="l09085"></a>09085       $minutes = floor($remainder / 60);
<a name="l09086"></a>09086       $seconds = $remainder % 60;
<a name="l09087"></a>09087       <span class="keywordflow">if</span> ($minutes &lt; 10 &amp;&amp; $hours &gt; 0)
<a name="l09088"></a>09088       {
<a name="l09089"></a>09089          $minutes = <span class="charliteral">&#39;0&#39;</span> . $minutes;
<a name="l09090"></a>09090       }
<a name="l09091"></a>09091       <span class="keywordflow">if</span> ($seconds &lt; 10)
<a name="l09092"></a>09092       {
<a name="l09093"></a>09093          $seconds = <span class="charliteral">&#39;0&#39;</span> . $seconds;
<a name="l09094"></a>09094       }
<a name="l09095"></a>09095 
<a name="l09096"></a>09096       $time .= $minutes.<span class="charliteral">&#39;:&#39;</span>;
<a name="l09097"></a>09097       $time .= $seconds;
<a name="l09098"></a>09098 
<a name="l09099"></a>09099       <span class="keywordflow">return</span> $time;
<a name="l09100"></a>09100    }
<a name="l09101"></a>09101 
<a name="l09102"></a>09102    <span class="keyword">function</span> absolutize_url($relative, $base)
<a name="l09103"></a>09103    {
<a name="l09104"></a>09104       $iri = <a class="code" href="class_simple_pie___i_r_i.html#af678b05c44b60fbc76a29230f59609b2">SimplePie_IRI::absolutize</a>(<span class="keyword">new</span> <a class="code" href="class_simple_pie___i_r_i.html">SimplePie_IRI</a>($base), $relative);
<a name="l09105"></a>09105       <span class="keywordflow">return</span> $iri-&gt;get_iri();
<a name="l09106"></a>09106    }
<a name="l09107"></a>09107 
<a name="l09108"></a>09108    <span class="keyword">function</span> remove_dot_segments($input)
<a name="l09109"></a>09109    {
<a name="l09110"></a>09110       $output = <span class="stringliteral">&#39;&#39;</span>;
<a name="l09111"></a>09111       <span class="keywordflow">while</span> (strpos($input, <span class="stringliteral">&#39;./&#39;</span>) !== <span class="keyword">false</span> || strpos($input, <span class="stringliteral">&#39;/.&#39;</span>) !== <span class="keyword">false</span> || $input === <span class="charliteral">&#39;.&#39;</span> || $input === <span class="stringliteral">&#39;..&#39;</span>)
<a name="l09112"></a>09112       {
<a name="l09113"></a>09113          <span class="comment">// A: If the input buffer begins with a prefix of &quot;../&quot; or &quot;./&quot;, then remove that prefix from the input buffer; otherwise,</span>
<a name="l09114"></a>09114          <span class="keywordflow">if</span> (strpos($input, <span class="stringliteral">&#39;../&#39;</span>) === 0)
<a name="l09115"></a>09115          {
<a name="l09116"></a>09116             $input = substr($input, 3);
<a name="l09117"></a>09117          }
<a name="l09118"></a>09118          elseif (strpos($input, <span class="stringliteral">&#39;./&#39;</span>) === 0)
<a name="l09119"></a>09119          {
<a name="l09120"></a>09120             $input = substr($input, 2);
<a name="l09121"></a>09121          }
<a name="l09122"></a>09122          <span class="comment">// B: if the input buffer begins with a prefix of &quot;/./&quot; or &quot;/.&quot;, where &quot;.&quot; is a complete path segment, then replace that prefix with &quot;/&quot; in the input buffer; otherwise,</span>
<a name="l09123"></a>09123          elseif (strpos($input, <span class="stringliteral">&#39;/./&#39;</span>) === 0)
<a name="l09124"></a>09124          {
<a name="l09125"></a>09125             $input = substr_replace($input, <span class="charliteral">&#39;/&#39;</span>, 0, 3);
<a name="l09126"></a>09126          }
<a name="l09127"></a>09127          elseif ($input === <span class="stringliteral">&#39;/.&#39;</span>)
<a name="l09128"></a>09128          {
<a name="l09129"></a>09129             $input = <span class="charliteral">&#39;/&#39;</span>;
<a name="l09130"></a>09130          }
<a name="l09131"></a>09131          <span class="comment">// C: if the input buffer begins with a prefix of &quot;/../&quot; or &quot;/..&quot;, where &quot;..&quot; is a complete path segment, then replace that prefix with &quot;/&quot; in the input buffer and remove the last segment and its preceding &quot;/&quot; (if any) from the output buffer; otherwise,</span>
<a name="l09132"></a>09132          elseif (strpos($input, <span class="stringliteral">&#39;/../&#39;</span>) === 0)
<a name="l09133"></a>09133          {
<a name="l09134"></a>09134             $input = substr_replace($input, <span class="charliteral">&#39;/&#39;</span>, 0, 4);
<a name="l09135"></a>09135             $output = substr_replace($output, <span class="stringliteral">&#39;&#39;</span>, strrpos($output, <span class="charliteral">&#39;/&#39;</span>));
<a name="l09136"></a>09136          }
<a name="l09137"></a>09137          elseif ($input === <span class="stringliteral">&#39;/..&#39;</span>)
<a name="l09138"></a>09138          {
<a name="l09139"></a>09139             $input = <span class="charliteral">&#39;/&#39;</span>;
<a name="l09140"></a>09140             $output = substr_replace($output, <span class="stringliteral">&#39;&#39;</span>, strrpos($output, <span class="charliteral">&#39;/&#39;</span>));
<a name="l09141"></a>09141          }
<a name="l09142"></a>09142          <span class="comment">// D: if the input buffer consists only of &quot;.&quot; or &quot;..&quot;, then remove that from the input buffer; otherwise,</span>
<a name="l09143"></a>09143          elseif ($input === <span class="charliteral">&#39;.&#39;</span> || $input === <span class="stringliteral">&#39;..&#39;</span>)
<a name="l09144"></a>09144          {
<a name="l09145"></a>09145             $input = <span class="stringliteral">&#39;&#39;</span>;
<a name="l09146"></a>09146          }
<a name="l09147"></a>09147          <span class="comment">// E: move the first path segment in the input buffer to the end of the output buffer, including the initial &quot;/&quot; character (if any) and any subsequent characters up to, but not including, the next &quot;/&quot; character or the end of the input buffer</span>
<a name="l09148"></a>09148          elseif (($pos = strpos($input, <span class="charliteral">&#39;/&#39;</span>, 1)) !== <span class="keyword">false</span>)
<a name="l09149"></a>09149          {
<a name="l09150"></a>09150             $output .= substr($input, 0, $pos);
<a name="l09151"></a>09151             $input = substr_replace($input, <span class="stringliteral">&#39;&#39;</span>, 0, $pos);
<a name="l09152"></a>09152          }
<a name="l09153"></a>09153          <span class="keywordflow">else</span>
<a name="l09154"></a>09154          {
<a name="l09155"></a>09155             $output .= $input;
<a name="l09156"></a>09156             $input = <span class="stringliteral">&#39;&#39;</span>;
<a name="l09157"></a>09157          }
<a name="l09158"></a>09158       }
<a name="l09159"></a>09159       <span class="keywordflow">return</span> $output . $input;
<a name="l09160"></a>09160    }
<a name="l09161"></a>09161 
<a name="l09162"></a>09162    <span class="keyword">function</span> get_element($realname, $string)
<a name="l09163"></a>09163    {
<a name="l09164"></a>09164       $return = array();
<a name="l09165"></a>09165       $name = preg_quote($realname, <span class="charliteral">&#39;/&#39;</span>);
<a name="l09166"></a>09166       <span class="keywordflow">if</span> (preg_match_all(<span class="stringliteral">&quot;/&lt;($name)&quot;</span> . SIMPLEPIE_PCRE_HTML_ATTRIBUTE . <span class="stringliteral">&quot;(&gt;(.*)&lt;\/$name&gt;|(\/)?&gt;)/siU&quot;</span>, $string, $matches, PREG_SET_ORDER | PREG_OFFSET_CAPTURE))
<a name="l09167"></a>09167       {
<a name="l09168"></a>09168          <span class="keywordflow">for</span> ($i = 0, $total_matches = count($matches); $i &lt; $total_matches; $i++)
<a name="l09169"></a>09169          {
<a name="l09170"></a>09170             $return[$i][<span class="stringliteral">&#39;tag&#39;</span>] = $realname;
<a name="l09171"></a>09171             $return[$i][<span class="stringliteral">&#39;full&#39;</span>] = $matches[$i][0][0];
<a name="l09172"></a>09172             $return[$i][<span class="stringliteral">&#39;offset&#39;</span>] = $matches[$i][0][1];
<a name="l09173"></a>09173             <span class="keywordflow">if</span> (strlen($matches[$i][3][0]) &lt;= 2)
<a name="l09174"></a>09174             {
<a name="l09175"></a>09175                $return[$i][<span class="stringliteral">&#39;self_closing&#39;</span>] = <span class="keyword">true</span>;
<a name="l09176"></a>09176             }
<a name="l09177"></a>09177             <span class="keywordflow">else</span>
<a name="l09178"></a>09178             {
<a name="l09179"></a>09179                $return[$i][<span class="stringliteral">&#39;self_closing&#39;</span>] = <span class="keyword">false</span>;
<a name="l09180"></a>09180                $return[$i][<span class="stringliteral">&#39;content&#39;</span>] = $matches[$i][4][0];
<a name="l09181"></a>09181             }
<a name="l09182"></a>09182             $return[$i][<span class="stringliteral">&#39;attribs&#39;</span>] = array();
<a name="l09183"></a>09183             <span class="keywordflow">if</span> (isset($matches[$i][2][0]) &amp;&amp; preg_match_all(<span class="stringliteral">&#39;/[\x09\x0A\x0B\x0C\x0D\x20]+([^\x09\x0A\x0B\x0C\x0D\x20\x2F\x3E][^\x09\x0A\x0B\x0C\x0D\x20\x2F\x3D\x3E]*)(?:[\x09\x0A\x0B\x0C\x0D\x20]*=[\x09\x0A\x0B\x0C\x0D\x20]*(?:&quot;([^&quot;]*)&quot;|\&#39;([^\&#39;]*)\&#39;|([^\x09\x0A\x0B\x0C\x0D\x20\x22\x27\x3E][^\x09\x0A\x0B\x0C\x0D\x20\x3E]*)?))?/&#39;</span>, <span class="charliteral">&#39; &#39;</span> . $matches[$i][2][0] . <span class="charliteral">&#39; &#39;</span>, $attribs, PREG_SET_ORDER))
<a name="l09184"></a>09184             {
<a name="l09185"></a>09185                <span class="keywordflow">for</span> ($j = 0, $total_attribs = count($attribs); $j &lt; $total_attribs; $j++)
<a name="l09186"></a>09186                {
<a name="l09187"></a>09187                   <span class="keywordflow">if</span> (count($attribs[$j]) === 2)
<a name="l09188"></a>09188                   {
<a name="l09189"></a>09189                      $attribs[$j][2] = $attribs[$j][1];
<a name="l09190"></a>09190                   }
<a name="l09191"></a>09191                   $return[$i][<span class="stringliteral">&#39;attribs&#39;</span>][strtolower($attribs[$j][1])][<span class="stringliteral">&#39;data&#39;</span>] = <a class="code" href="class_simple_pie___misc.html#a0059877abeb2a9ab92cd6402a21a9728">SimplePie_Misc::entities_decode</a>(end($attribs[$j]), <span class="stringliteral">&#39;UTF-8&#39;</span>);
<a name="l09192"></a>09192                }
<a name="l09193"></a>09193             }
<a name="l09194"></a>09194          }
<a name="l09195"></a>09195       }
<a name="l09196"></a>09196       <span class="keywordflow">return</span> $return;
<a name="l09197"></a>09197    }
<a name="l09198"></a>09198 
<a name="l09199"></a>09199    <span class="keyword">function</span> element_implode($element)
<a name="l09200"></a>09200    {
<a name="l09201"></a>09201       $full = <span class="stringliteral">&quot;&lt;$element[tag]&quot;</span>;
<a name="l09202"></a>09202       <span class="keywordflow">foreach</span> ($element[<span class="stringliteral">&#39;attribs&#39;</span>] as $key =&gt; $value)
<a name="l09203"></a>09203       {
<a name="l09204"></a>09204          $key = strtolower($key);
<a name="l09205"></a>09205          $full .= <span class="stringliteral">&quot; $key=\&quot;&quot;</span> . htmlspecialchars($value[<span class="stringliteral">&#39;data&#39;</span>]) . <span class="charliteral">&#39;&quot;&#39;</span>;
<a name="l09206"></a>09206       }
<a name="l09207"></a>09207       <span class="keywordflow">if</span> ($element[<span class="stringliteral">&#39;self_closing&#39;</span>])
<a name="l09208"></a>09208       {
<a name="l09209"></a>09209          $full .= <span class="stringliteral">&#39; /&gt;&#39;</span>;
<a name="l09210"></a>09210       }
<a name="l09211"></a>09211       <span class="keywordflow">else</span>
<a name="l09212"></a>09212       {
<a name="l09213"></a>09213          $full .= <span class="stringliteral">&quot;&gt;$element[content]&lt;/$element[tag]&gt;&quot;</span>;
<a name="l09214"></a>09214       }
<a name="l09215"></a>09215       <span class="keywordflow">return</span> $full;
<a name="l09216"></a>09216    }
<a name="l09217"></a>09217 
<a name="l09218"></a>09218    <span class="keyword">function</span> error($message, $level, $file, $line)
<a name="l09219"></a>09219    {
<a name="l09220"></a>09220       <span class="keywordflow">if</span> ((ini_get(<span class="stringliteral">&#39;error_reporting&#39;</span>) &amp; $level) &gt; 0)
<a name="l09221"></a>09221       {
<a name="l09222"></a>09222          <span class="keywordflow">switch</span> ($level)
<a name="l09223"></a>09223          {
<a name="l09224"></a>09224             <span class="keywordflow">case</span> E_USER_ERROR:
<a name="l09225"></a>09225                $note = <span class="stringliteral">&#39;PHP Error&#39;</span>;
<a name="l09226"></a>09226                <span class="keywordflow">break</span>;
<a name="l09227"></a>09227             <span class="keywordflow">case</span> E_USER_WARNING:
<a name="l09228"></a>09228                $note = <span class="stringliteral">&#39;PHP Warning&#39;</span>;
<a name="l09229"></a>09229                <span class="keywordflow">break</span>;
<a name="l09230"></a>09230             <span class="keywordflow">case</span> E_USER_NOTICE:
<a name="l09231"></a>09231                $note = <span class="stringliteral">&#39;PHP Notice&#39;</span>;
<a name="l09232"></a>09232                <span class="keywordflow">break</span>;
<a name="l09233"></a>09233             <span class="keywordflow">default</span>:
<a name="l09234"></a>09234                $note = <span class="stringliteral">&#39;Unknown Error&#39;</span>;
<a name="l09235"></a>09235                <span class="keywordflow">break</span>;
<a name="l09236"></a>09236          }
<a name="l09237"></a>09237          error_log(<span class="stringliteral">&quot;$note: $message in $file on line $line&quot;</span>, 0);
<a name="l09238"></a>09238       }
<a name="l09239"></a>09239       <span class="keywordflow">return</span> $message;
<a name="l09240"></a>09240    }
<a name="l09241"></a>09241 <span class="comment"></span>
<a name="l09242"></a>09242 <span class="comment">   /**</span>
<a name="l09243"></a>09243 <span class="comment">    * If a file has been cached, retrieve and display it.</span>
<a name="l09244"></a>09244 <span class="comment">    *</span>
<a name="l09245"></a>09245 <span class="comment">    * This is most useful for caching images (get_favicon(), etc.),</span>
<a name="l09246"></a>09246 <span class="comment">    * however it works for all cached files.  This WILL NOT display ANY</span>
<a name="l09247"></a>09247 <span class="comment">    * file/image/page/whatever, but rather only display what has already</span>
<a name="l09248"></a>09248 <span class="comment">    * been cached by SimplePie.</span>
<a name="l09249"></a>09249 <span class="comment">    *</span>
<a name="l09250"></a>09250 <span class="comment">    * @access public</span>
<a name="l09251"></a>09251 <span class="comment">    * @see SimplePie::get_favicon()</span>
<a name="l09252"></a>09252 <span class="comment">    * @param str $identifier_url URL that is used to identify the content.</span>
<a name="l09253"></a>09253 <span class="comment">    * This may or may not be the actual URL of the live content.</span>
<a name="l09254"></a>09254 <span class="comment">    * @param str $cache_location Location of SimplePie&#39;s cache.  Defaults</span>
<a name="l09255"></a>09255 <span class="comment">    * to &#39;./cache&#39;.</span>
<a name="l09256"></a>09256 <span class="comment">    * @param str $cache_extension The file extension that the file was</span>
<a name="l09257"></a>09257 <span class="comment">    * cached with.  Defaults to &#39;spc&#39;.</span>
<a name="l09258"></a>09258 <span class="comment">    * @param str $cache_class Name of the cache-handling class being used</span>
<a name="l09259"></a>09259 <span class="comment">    * in SimplePie.  Defaults to &#39;SimplePie_Cache&#39;, and should be left</span>
<a name="l09260"></a>09260 <span class="comment">    * as-is unless you&#39;ve overloaded the class.</span>
<a name="l09261"></a>09261 <span class="comment">    * @param str $cache_name_function Obsolete. Exists for backwards</span>
<a name="l09262"></a>09262 <span class="comment">    * compatibility reasons only.</span>
<a name="l09263"></a>09263 <span class="comment">    */</span>
<a name="l09264"></a><a class="code" href="class_simple_pie___misc.html#ac72acfeb5a019f2a2908c70e1652701e">09264</a>    <span class="keyword">function</span> display_cached_file($identifier_url, $cache_location = <span class="stringliteral">&#39;./cache&#39;</span>, $cache_extension = <span class="stringliteral">&#39;spc&#39;</span>, $cache_class = <span class="stringliteral">&#39;SimplePie_Cache&#39;</span>, $cache_name_function = <span class="stringliteral">&#39;md5&#39;</span>)
<a name="l09265"></a>09265    {
<a name="l09266"></a>09266       $cache = call_user_func(array($cache_class, <span class="stringliteral">&#39;create&#39;</span>), $cache_location, $identifier_url, $cache_extension);
<a name="l09267"></a>09267 
<a name="l09268"></a>09268       <span class="keywordflow">if</span> ($file = $cache-&gt;load())
<a name="l09269"></a>09269       {
<a name="l09270"></a>09270          <span class="keywordflow">if</span> (isset($file[<span class="stringliteral">&#39;headers&#39;</span>][<span class="stringliteral">&#39;content-type&#39;</span>]))
<a name="l09271"></a>09271          {
<a name="l09272"></a>09272             header(<span class="stringliteral">&#39;Content-type:&#39;</span> . $file[<span class="stringliteral">&#39;headers&#39;</span>][<span class="stringliteral">&#39;content-type&#39;</span>]);
<a name="l09273"></a>09273          }
<a name="l09274"></a>09274          <span class="keywordflow">else</span>
<a name="l09275"></a>09275          {
<a name="l09276"></a>09276             header(<span class="stringliteral">&#39;Content-type: application/octet-stream&#39;</span>);
<a name="l09277"></a>09277          }
<a name="l09278"></a>09278          header(<span class="stringliteral">&#39;Expires: &#39;</span> . gmdate(<span class="stringliteral">&#39;D, d M Y H:i:s&#39;</span>, time() + 604800) . <span class="stringliteral">&#39; GMT&#39;</span>); <span class="comment">// 7 days</span>
<a name="l09279"></a>09279          echo $file[<span class="stringliteral">&#39;body&#39;</span>];
<a name="l09280"></a>09280          exit;
<a name="l09281"></a>09281       }
<a name="l09282"></a>09282 
<a name="l09283"></a>09283       die(<span class="stringliteral">&#39;Cached file for &#39;</span> . $identifier_url . <span class="stringliteral">&#39; cannot be found.&#39;</span>);
<a name="l09284"></a>09284    }
<a name="l09285"></a>09285 
<a name="l09286"></a>09286    <span class="keyword">function</span> fix_protocol($url, $http = 1)
<a name="l09287"></a>09287    {
<a name="l09288"></a>09288       $url = SimplePie_Misc::normalize_url($url);
<a name="l09289"></a>09289       $parsed = SimplePie_Misc::parse_url($url);
<a name="l09290"></a>09290       <span class="keywordflow">if</span> ($parsed[<span class="stringliteral">&#39;scheme&#39;</span>] !== <span class="stringliteral">&#39;&#39;</span> &amp;&amp; $parsed[<span class="stringliteral">&#39;scheme&#39;</span>] !== <span class="stringliteral">&#39;http&#39;</span> &amp;&amp; $parsed[<span class="stringliteral">&#39;scheme&#39;</span>] !== <span class="stringliteral">&#39;https&#39;</span>)
<a name="l09291"></a>09291       {
<a name="l09292"></a>09292          <span class="keywordflow">return</span> SimplePie_Misc::fix_protocol(SimplePie_Misc::compress_parse_url(<span class="stringliteral">&#39;http&#39;</span>, $parsed[<span class="stringliteral">&#39;authority&#39;</span>], $parsed[<span class="stringliteral">&#39;path&#39;</span>], $parsed[<span class="stringliteral">&#39;query&#39;</span>], $parsed[<span class="stringliteral">&#39;fragment&#39;</span>]), $http);
<a name="l09293"></a>09293       }
<a name="l09294"></a>09294 
<a name="l09295"></a>09295       <span class="keywordflow">if</span> ($parsed[<span class="stringliteral">&#39;scheme&#39;</span>] === <span class="stringliteral">&#39;&#39;</span> &amp;&amp; $parsed[<span class="stringliteral">&#39;authority&#39;</span>] === <span class="stringliteral">&#39;&#39;</span> &amp;&amp; !file_exists($url))
<a name="l09296"></a>09296       {
<a name="l09297"></a>09297          <span class="keywordflow">return</span> SimplePie_Misc::fix_protocol(SimplePie_Misc::compress_parse_url(<span class="stringliteral">&#39;http&#39;</span>, $parsed[<span class="stringliteral">&#39;path&#39;</span>], <span class="stringliteral">&#39;&#39;</span>, $parsed[<span class="stringliteral">&#39;query&#39;</span>], $parsed[<span class="stringliteral">&#39;fragment&#39;</span>]), $http);
<a name="l09298"></a>09298       }
<a name="l09299"></a>09299 
<a name="l09300"></a>09300       <span class="keywordflow">if</span> ($http === 2 &amp;&amp; $parsed[<span class="stringliteral">&#39;scheme&#39;</span>] !== <span class="stringliteral">&#39;&#39;</span>)
<a name="l09301"></a>09301       {
<a name="l09302"></a>09302          <span class="keywordflow">return</span> <span class="stringliteral">&quot;feed:$url&quot;</span>;
<a name="l09303"></a>09303       }
<a name="l09304"></a>09304       elseif ($http === 3 &amp;&amp; strtolower($parsed[<span class="stringliteral">&#39;scheme&#39;</span>]) === <span class="stringliteral">&#39;http&#39;</span>)
<a name="l09305"></a>09305       {
<a name="l09306"></a>09306          <span class="keywordflow">return</span> substr_replace($url, <span class="stringliteral">&#39;podcast&#39;</span>, 0, 4);
<a name="l09307"></a>09307       }
<a name="l09308"></a>09308       elseif ($http === 4 &amp;&amp; strtolower($parsed[<span class="stringliteral">&#39;scheme&#39;</span>]) === <span class="stringliteral">&#39;http&#39;</span>)
<a name="l09309"></a>09309       {
<a name="l09310"></a>09310          <span class="keywordflow">return</span> substr_replace($url, <span class="stringliteral">&#39;itpc&#39;</span>, 0, 4);
<a name="l09311"></a>09311       }
<a name="l09312"></a>09312       <span class="keywordflow">else</span>
<a name="l09313"></a>09313       {
<a name="l09314"></a>09314          <span class="keywordflow">return</span> $url;
<a name="l09315"></a>09315       }
<a name="l09316"></a>09316    }
<a name="l09317"></a>09317 
<a name="l09318"></a>09318    <span class="keyword">function</span> parse_url($url)
<a name="l09319"></a>09319    {
<a name="l09320"></a>09320       $iri =&amp; <span class="keyword">new</span> <a class="code" href="class_simple_pie___i_r_i.html">SimplePie_IRI</a>($url);
<a name="l09321"></a>09321       <span class="keywordflow">return</span> array(
<a name="l09322"></a>09322          <span class="stringliteral">&#39;scheme&#39;</span> =&gt; (<span class="keywordtype">string</span>) $iri-&gt;get_scheme(),
<a name="l09323"></a>09323          <span class="stringliteral">&#39;authority&#39;</span> =&gt; (string) $iri-&gt;get_authority(),
<a name="l09324"></a>09324          <span class="stringliteral">&#39;path&#39;</span> =&gt; (string) $iri-&gt;get_path(),
<a name="l09325"></a>09325          <span class="stringliteral">&#39;query&#39;</span> =&gt; (string) $iri-&gt;get_query(),
<a name="l09326"></a>09326          <span class="stringliteral">&#39;fragment&#39;</span> =&gt; (string) $iri-&gt;get_fragment()
<a name="l09327"></a>09327       );
<a name="l09328"></a>09328    }
<a name="l09329"></a>09329 
<a name="l09330"></a>09330    <span class="keyword">function</span> compress_parse_url($scheme = <span class="stringliteral">&#39;&#39;</span>, $authority = <span class="stringliteral">&#39;&#39;</span>, $path = <span class="stringliteral">&#39;&#39;</span>, $query = <span class="stringliteral">&#39;&#39;</span>, $fragment = <span class="stringliteral">&#39;&#39;</span>)
<a name="l09331"></a>09331    {
<a name="l09332"></a>09332       $iri =&amp; <span class="keyword">new</span> <a class="code" href="class_simple_pie___i_r_i.html">SimplePie_IRI</a>(<span class="stringliteral">&#39;&#39;</span>);
<a name="l09333"></a>09333       $iri-&gt;set_scheme($scheme);
<a name="l09334"></a>09334       $iri-&gt;set_authority($authority);
<a name="l09335"></a>09335       $iri-&gt;set_path($path);
<a name="l09336"></a>09336       $iri-&gt;set_query($query);
<a name="l09337"></a>09337       $iri-&gt;set_fragment($fragment);
<a name="l09338"></a>09338       <span class="keywordflow">return</span> $iri-&gt;get_iri();
<a name="l09339"></a>09339    }
<a name="l09340"></a>09340 
<a name="l09341"></a>09341    <span class="keyword">function</span> normalize_url($url)
<a name="l09342"></a>09342    {
<a name="l09343"></a>09343       $iri =&amp; <span class="keyword">new</span> <a class="code" href="class_simple_pie___i_r_i.html">SimplePie_IRI</a>($url);
<a name="l09344"></a>09344       <span class="keywordflow">return</span> $iri-&gt;get_iri();
<a name="l09345"></a>09345    }
<a name="l09346"></a>09346 
<a name="l09347"></a>09347    <span class="keyword">function</span> percent_encoding_normalization($match)
<a name="l09348"></a>09348    {
<a name="l09349"></a>09349       $integer = hexdec($match[1]);
<a name="l09350"></a>09350       <span class="keywordflow">if</span> ($integer &gt;= 0x41 &amp;&amp; $integer &lt;= 0x5A || $integer &gt;= 0x61 &amp;&amp; $integer &lt;= 0x7A || $integer &gt;= 0x30 &amp;&amp; $integer &lt;= 0x39 || $integer === 0x2D || $integer === 0x2E || $integer === 0x5F || $integer === 0x7E)
<a name="l09351"></a>09351       {
<a name="l09352"></a>09352          <span class="keywordflow">return</span> chr($integer);
<a name="l09353"></a>09353       }
<a name="l09354"></a>09354       <span class="keywordflow">else</span>
<a name="l09355"></a>09355       {
<a name="l09356"></a>09356          <span class="keywordflow">return</span> strtoupper($match[0]);
<a name="l09357"></a>09357       }
<a name="l09358"></a>09358    }
<a name="l09359"></a>09359 <span class="comment"></span>
<a name="l09360"></a>09360 <span class="comment">   /**</span>
<a name="l09361"></a>09361 <span class="comment">    * Remove bad UTF-8 bytes</span>
<a name="l09362"></a>09362 <span class="comment">    *</span>
<a name="l09363"></a>09363 <span class="comment">    * PCRE Pattern to locate bad bytes in a UTF-8 string comes from W3C</span>
<a name="l09364"></a>09364 <span class="comment">    * FAQ: Multilingual Forms (modified to include full ASCII range)</span>
<a name="l09365"></a>09365 <span class="comment">    *</span>
<a name="l09366"></a>09366 <span class="comment">    * @author Geoffrey Sneddon</span>
<a name="l09367"></a>09367 <span class="comment">    * @see http://www.w3.org/International/questions/qa-forms-utf-8</span>
<a name="l09368"></a>09368 <span class="comment">    * @param string $str String to remove bad UTF-8 bytes from</span>
<a name="l09369"></a>09369 <span class="comment">    * @return string UTF-8 string</span>
<a name="l09370"></a>09370 <span class="comment">    */</span>
<a name="l09371"></a><a class="code" href="class_simple_pie___misc.html#a0bdc07c5faa13d1a6dc313c40ea9b726">09371</a>    <span class="keyword">function</span> utf8_bad_replace($str)
<a name="l09372"></a>09372    {
<a name="l09373"></a>09373       <span class="keywordflow">if</span> (function_exists(<span class="stringliteral">&#39;iconv&#39;</span>) &amp;&amp; ($return = @iconv(<span class="stringliteral">&#39;UTF-8&#39;</span>, <span class="stringliteral">&#39;UTF-8//IGNORE&#39;</span>, $str)))
<a name="l09374"></a>09374       {
<a name="l09375"></a>09375          <span class="keywordflow">return</span> $return;
<a name="l09376"></a>09376       }
<a name="l09377"></a>09377       elseif (function_exists(<span class="stringliteral">&#39;mb_convert_encoding&#39;</span>) &amp;&amp; ($return = @mb_convert_encoding($str, <span class="stringliteral">&#39;UTF-8&#39;</span>, <span class="stringliteral">&#39;UTF-8&#39;</span>)))
<a name="l09378"></a>09378       {
<a name="l09379"></a>09379          <span class="keywordflow">return</span> $return;
<a name="l09380"></a>09380       }
<a name="l09381"></a>09381       elseif (preg_match_all(<span class="stringliteral">&#39;/(?:[\x00-\x7F]|[\xC2-\xDF][\x80-\xBF]|\xE0[\xA0-\xBF][\x80-\xBF]|[\xE1-\xEC\xEE\xEF][\x80-\xBF]{2}|\xED[\x80-\x9F][\x80-\xBF]|\xF0[\x90-\xBF][\x80-\xBF]{2}|[\xF1-\xF3][\x80-\xBF]{3}|\xF4[\x80-\x8F][\x80-\xBF]{2})+/&#39;</span>, $str, $matches))
<a name="l09382"></a>09382       {
<a name="l09383"></a>09383          <span class="keywordflow">return</span> implode(<span class="stringliteral">&quot;\xEF\xBF\xBD&quot;</span>, $matches[0]);
<a name="l09384"></a>09384       }
<a name="l09385"></a>09385       elseif ($str !== <span class="stringliteral">&#39;&#39;</span>)
<a name="l09386"></a>09386       {
<a name="l09387"></a>09387          <span class="keywordflow">return</span> <span class="stringliteral">&quot;\xEF\xBF\xBD&quot;</span>;
<a name="l09388"></a>09388       }
<a name="l09389"></a>09389       <span class="keywordflow">else</span>
<a name="l09390"></a>09390       {
<a name="l09391"></a>09391          <span class="keywordflow">return</span> <span class="stringliteral">&#39;&#39;</span>;
<a name="l09392"></a>09392       }
<a name="l09393"></a>09393    }
<a name="l09394"></a>09394 <span class="comment"></span>
<a name="l09395"></a>09395 <span class="comment">   /**</span>
<a name="l09396"></a>09396 <span class="comment">    * Converts a Windows-1252 encoded string to a UTF-8 encoded string</span>
<a name="l09397"></a>09397 <span class="comment">    *</span>
<a name="l09398"></a>09398 <span class="comment">    * @static</span>
<a name="l09399"></a>09399 <span class="comment">    * @access public</span>
<a name="l09400"></a>09400 <span class="comment">    * @param string $string Windows-1252 encoded string</span>
<a name="l09401"></a>09401 <span class="comment">    * @return string UTF-8 encoded string</span>
<a name="l09402"></a>09402 <span class="comment">    */</span>
<a name="l09403"></a><a class="code" href="class_simple_pie___misc.html#a634dcc26344a1c902b8f3637bc7331db">09403</a>    <span class="keyword">function</span> windows_1252_to_utf8($string)
<a name="l09404"></a>09404    {
<a name="l09405"></a>09405       <span class="keyword">static</span> $convert_table = array(<span class="stringliteral">&quot;\x80&quot;</span> =&gt; <span class="stringliteral">&quot;\xE2\x82\xAC&quot;</span>, <span class="stringliteral">&quot;\x81&quot;</span> =&gt; <span class="stringliteral">&quot;\xEF\xBF\xBD&quot;</span>, <span class="stringliteral">&quot;\x82&quot;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\x9A&quot;</span>, <span class="stringliteral">&quot;\x83&quot;</span> =&gt; <span class="stringliteral">&quot;\xC6\x92&quot;</span>, <span class="stringliteral">&quot;\x84&quot;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\x9E&quot;</span>, <span class="stringliteral">&quot;\x85&quot;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\xA6&quot;</span>, <span class="stringliteral">&quot;\x86&quot;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\xA0&quot;</span>, <span class="stringliteral">&quot;\x87&quot;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\xA1&quot;</span>, <span class="stringliteral">&quot;\x88&quot;</span> =&gt; <span class="stringliteral">&quot;\xCB\x86&quot;</span>, <span class="stringliteral">&quot;\x89&quot;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\xB0&quot;</span>, <span class="stringliteral">&quot;\x8A&quot;</span> =&gt; <span class="stringliteral">&quot;\xC5\xA0&quot;</span>, <span class="stringliteral">&quot;\x8B&quot;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\xB9&quot;</span>, <span class="stringliteral">&quot;\x8C&quot;</span> =&gt; <span class="stringliteral">&quot;\xC5\x92&quot;</span>, <span class="stringliteral">&quot;\x8D&quot;</span> =&gt; <span class="stringliteral">&quot;\xEF\xBF\xBD&quot;</span>, <span class="stringliteral">&quot;\x8E&quot;</span> =&gt; <span class="stringliteral">&quot;\xC5\xBD&quot;</span>, <span class="stringliteral">&quot;\x8F&quot;</span> =&gt; <span class="stringliteral">&quot;\xEF\xBF\xBD&quot;</span>, <span class="stringliteral">&quot;\x90&quot;</span> =&gt; <span class="stringliteral">&quot;\xEF\xBF\xBD&quot;</span>, <span class="stringliteral">&quot;\x91&quot;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\x98&quot;</span>, <span class="stringliteral">&quot;\x92&quot;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\x99&quot;</span>, <span class="stringliteral">&quot;\x93&quot;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\x9C&quot;</span>, <span class="stringliteral">&quot;\x94&quot;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\x9D&quot;</span>, <span class="stringliteral">&quot;\x95&quot;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\xA2&quot;</span>, <span class="stringliteral">&quot;\x96&quot;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\x93&quot;</span>, <span class="stringliteral">&quot;\x97&quot;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\x94&quot;</span>, <span class="stringliteral">&quot;\x98&quot;</span> =&gt; <span class="stringliteral">&quot;\xCB\x9C&quot;</span>, <span class="stringliteral">&quot;\x99&quot;</span> =&gt; <span class="stringliteral">&quot;\xE2\x84\xA2&quot;</span>, <span class="stringliteral">&quot;\x9A&quot;</span> =&gt; <span class="stringliteral">&quot;\xC5\xA1&quot;</span>, <span class="stringliteral">&quot;\x9B&quot;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\xBA&quot;</span>, <span class="stringliteral">&quot;\x9C&quot;</span> =&gt; <span class="stringliteral">&quot;\xC5\x93&quot;</span>, <span class="stringliteral">&quot;\x9D&quot;</span> =&gt; <span class="stringliteral">&quot;\xEF\xBF\xBD&quot;</span>, <span class="stringliteral">&quot;\x9E&quot;</span> =&gt; <span class="stringliteral">&quot;\xC5\xBE&quot;</span>, <span class="stringliteral">&quot;\x9F&quot;</span> =&gt; <span class="stringliteral">&quot;\xC5\xB8&quot;</span>, <span class="stringliteral">&quot;\xA0&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA0&quot;</span>, <span class="stringliteral">&quot;\xA1&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA1&quot;</span>, <span class="stringliteral">&quot;\xA2&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA2&quot;</span>, <span class="stringliteral">&quot;\xA3&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA3&quot;</span>, <span class="stringliteral">&quot;\xA4&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA4&quot;</span>, <span class="stringliteral">&quot;\xA5&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA5&quot;</span>, <span class="stringliteral">&quot;\xA6&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA6&quot;</span>, <span class="stringliteral">&quot;\xA7&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA7&quot;</span>, <span class="stringliteral">&quot;\xA8&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA8&quot;</span>, <span class="stringliteral">&quot;\xA9&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA9&quot;</span>, <span class="stringliteral">&quot;\xAA&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xAA&quot;</span>, <span class="stringliteral">&quot;\xAB&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xAB&quot;</span>, <span class="stringliteral">&quot;\xAC&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xAC&quot;</span>, <span class="stringliteral">&quot;\xAD&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xAD&quot;</span>, <span class="stringliteral">&quot;\xAE&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xAE&quot;</span>, <span class="stringliteral">&quot;\xAF&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xAF&quot;</span>, <span class="stringliteral">&quot;\xB0&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xB0&quot;</span>, <span class="stringliteral">&quot;\xB1&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xB1&quot;</span>, <span class="stringliteral">&quot;\xB2&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xB2&quot;</span>, <span class="stringliteral">&quot;\xB3&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xB3&quot;</span>, <span class="stringliteral">&quot;\xB4&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xB4&quot;</span>, <span class="stringliteral">&quot;\xB5&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xB5&quot;</span>, <span class="stringliteral">&quot;\xB6&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xB6&quot;</span>, <span class="stringliteral">&quot;\xB7&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xB7&quot;</span>, <span class="stringliteral">&quot;\xB8&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xB8&quot;</span>, <span class="stringliteral">&quot;\xB9&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xB9&quot;</span>, <span class="stringliteral">&quot;\xBA&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xBA&quot;</span>, <span class="stringliteral">&quot;\xBB&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xBB&quot;</span>, <span class="stringliteral">&quot;\xBC&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xBC&quot;</span>, <span class="stringliteral">&quot;\xBD&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xBD&quot;</span>, <span class="stringliteral">&quot;\xBE&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xBE&quot;</span>, <span class="stringliteral">&quot;\xBF&quot;</span> =&gt; <span class="stringliteral">&quot;\xC2\xBF&quot;</span>, <span class="stringliteral">&quot;\xC0&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x80&quot;</span>, <span class="stringliteral">&quot;\xC1&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x81&quot;</span>, <span class="stringliteral">&quot;\xC2&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x82&quot;</span>, <span class="stringliteral">&quot;\xC3&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x83&quot;</span>, <span class="stringliteral">&quot;\xC4&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x84&quot;</span>, <span class="stringliteral">&quot;\xC5&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x85&quot;</span>, <span class="stringliteral">&quot;\xC6&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x86&quot;</span>, <span class="stringliteral">&quot;\xC7&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x87&quot;</span>, <span class="stringliteral">&quot;\xC8&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x88&quot;</span>, <span class="stringliteral">&quot;\xC9&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x89&quot;</span>, <span class="stringliteral">&quot;\xCA&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x8A&quot;</span>, <span class="stringliteral">&quot;\xCB&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x8B&quot;</span>, <span class="stringliteral">&quot;\xCC&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x8C&quot;</span>, <span class="stringliteral">&quot;\xCD&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x8D&quot;</span>, <span class="stringliteral">&quot;\xCE&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x8E&quot;</span>, <span class="stringliteral">&quot;\xCF&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x8F&quot;</span>, <span class="stringliteral">&quot;\xD0&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x90&quot;</span>, <span class="stringliteral">&quot;\xD1&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x91&quot;</span>, <span class="stringliteral">&quot;\xD2&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x92&quot;</span>, <span class="stringliteral">&quot;\xD3&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x93&quot;</span>, <span class="stringliteral">&quot;\xD4&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x94&quot;</span>, <span class="stringliteral">&quot;\xD5&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x95&quot;</span>, <span class="stringliteral">&quot;\xD6&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x96&quot;</span>, <span class="stringliteral">&quot;\xD7&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x97&quot;</span>, <span class="stringliteral">&quot;\xD8&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x98&quot;</span>, <span class="stringliteral">&quot;\xD9&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x99&quot;</span>, <span class="stringliteral">&quot;\xDA&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x9A&quot;</span>, <span class="stringliteral">&quot;\xDB&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x9B&quot;</span>, <span class="stringliteral">&quot;\xDC&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x9C&quot;</span>, <span class="stringliteral">&quot;\xDD&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x9D&quot;</span>, <span class="stringliteral">&quot;\xDE&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x9E&quot;</span>, <span class="stringliteral">&quot;\xDF&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\x9F&quot;</span>, <span class="stringliteral">&quot;\xE0&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xA0&quot;</span>, <span class="stringliteral">&quot;\xE1&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xA1&quot;</span>, <span class="stringliteral">&quot;\xE2&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xA2&quot;</span>, <span class="stringliteral">&quot;\xE3&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xA3&quot;</span>, <span class="stringliteral">&quot;\xE4&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xA4&quot;</span>, <span class="stringliteral">&quot;\xE5&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xA5&quot;</span>, <span class="stringliteral">&quot;\xE6&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xA6&quot;</span>, <span class="stringliteral">&quot;\xE7&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xA7&quot;</span>, <span class="stringliteral">&quot;\xE8&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xA8&quot;</span>, <span class="stringliteral">&quot;\xE9&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xA9&quot;</span>, <span class="stringliteral">&quot;\xEA&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xAA&quot;</span>, <span class="stringliteral">&quot;\xEB&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xAB&quot;</span>, <span class="stringliteral">&quot;\xEC&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xAC&quot;</span>, <span class="stringliteral">&quot;\xED&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xAD&quot;</span>, <span class="stringliteral">&quot;\xEE&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xAE&quot;</span>, <span class="stringliteral">&quot;\xEF&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xAF&quot;</span>, <span class="stringliteral">&quot;\xF0&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xB0&quot;</span>, <span class="stringliteral">&quot;\xF1&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xB1&quot;</span>, <span class="stringliteral">&quot;\xF2&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xB2&quot;</span>, <span class="stringliteral">&quot;\xF3&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xB3&quot;</span>, <span class="stringliteral">&quot;\xF4&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xB4&quot;</span>, <span class="stringliteral">&quot;\xF5&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xB5&quot;</span>, <span class="stringliteral">&quot;\xF6&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xB6&quot;</span>, <span class="stringliteral">&quot;\xF7&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xB7&quot;</span>, <span class="stringliteral">&quot;\xF8&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xB8&quot;</span>, <span class="stringliteral">&quot;\xF9&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xB9&quot;</span>, <span class="stringliteral">&quot;\xFA&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xBA&quot;</span>, <span class="stringliteral">&quot;\xFB&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xBB&quot;</span>, <span class="stringliteral">&quot;\xFC&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xBC&quot;</span>, <span class="stringliteral">&quot;\xFD&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xBD&quot;</span>, <span class="stringliteral">&quot;\xFE&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xBE&quot;</span>, <span class="stringliteral">&quot;\xFF&quot;</span> =&gt; <span class="stringliteral">&quot;\xC3\xBF&quot;</span>);
<a name="l09406"></a>09406 
<a name="l09407"></a>09407       <span class="keywordflow">return</span> strtr($string, $convert_table);
<a name="l09408"></a>09408    }
<a name="l09409"></a>09409 
<a name="l09410"></a>09410    <span class="keyword">function</span> change_encoding($data, $input, $output)
<a name="l09411"></a>09411    {
<a name="l09412"></a>09412       $input = SimplePie_Misc::encoding($input);
<a name="l09413"></a>09413       $output = SimplePie_Misc::encoding($output);
<a name="l09414"></a>09414 
<a name="l09415"></a>09415       <span class="comment">// We fail to fail on non US-ASCII bytes</span>
<a name="l09416"></a>09416       <span class="keywordflow">if</span> ($input === <span class="stringliteral">&#39;US-ASCII&#39;</span>)
<a name="l09417"></a>09417       {
<a name="l09418"></a>09418          <span class="keyword">static</span> $non_ascii_octects = <span class="stringliteral">&#39;&#39;</span>;
<a name="l09419"></a>09419          <span class="keywordflow">if</span> (!$non_ascii_octects)
<a name="l09420"></a>09420          {
<a name="l09421"></a>09421             <span class="keywordflow">for</span> ($i = 0x80; $i &lt;= 0xFF; $i++)
<a name="l09422"></a>09422             {
<a name="l09423"></a>09423                $non_ascii_octects .= chr($i);
<a name="l09424"></a>09424             }
<a name="l09425"></a>09425          }
<a name="l09426"></a>09426          $data = substr($data, 0, strcspn($data, $non_ascii_octects));
<a name="l09427"></a>09427       }
<a name="l09428"></a>09428 
<a name="l09429"></a>09429       <span class="comment">// This is first, as behaviour of this is completely predictable</span>
<a name="l09430"></a>09430       <span class="keywordflow">if</span> ($input === <span class="stringliteral">&#39;Windows-1252&#39;</span> &amp;&amp; $output === <span class="stringliteral">&#39;UTF-8&#39;</span>)
<a name="l09431"></a>09431       {
<a name="l09432"></a>09432          <span class="keywordflow">return</span> <a class="code" href="class_simple_pie___misc.html#a634dcc26344a1c902b8f3637bc7331db">SimplePie_Misc::windows_1252_to_utf8</a>($data);
<a name="l09433"></a>09433       }
<a name="l09434"></a>09434       <span class="comment">// This is second, as behaviour of this varies only with PHP version (the middle part of this expression checks the encoding is supported).</span>
<a name="l09435"></a>09435       elseif (function_exists(<span class="stringliteral">&#39;mb_convert_encoding&#39;</span>) &amp;&amp; @mb_convert_encoding(<span class="stringliteral">&quot;\x80&quot;</span>, <span class="stringliteral">&#39;UTF-16BE&#39;</span>, $input) !== <span class="stringliteral">&quot;\x00\x80&quot;</span> &amp;&amp; ($return = @mb_convert_encoding($data, $output, $input)))
<a name="l09436"></a>09436       {
<a name="l09437"></a>09437          <span class="keywordflow">return</span> $return;
<a name="l09438"></a>09438       }
<a name="l09439"></a>09439       <span class="comment">// This is last, as behaviour of this varies with OS userland and PHP version</span>
<a name="l09440"></a>09440       elseif (function_exists(<span class="stringliteral">&#39;iconv&#39;</span>) &amp;&amp; ($return = @iconv($input, $output, $data)))
<a name="l09441"></a>09441       {
<a name="l09442"></a>09442          <span class="keywordflow">return</span> $return;
<a name="l09443"></a>09443       }
<a name="l09444"></a>09444       <span class="comment">// If we can&#39;t do anything, just fail</span>
<a name="l09445"></a>09445       <span class="keywordflow">else</span>
<a name="l09446"></a>09446       {
<a name="l09447"></a>09447          <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l09448"></a>09448       }
<a name="l09449"></a>09449    }
<a name="l09450"></a>09450 
<a name="l09451"></a>09451    <span class="keyword">function</span> encoding($charset)
<a name="l09452"></a>09452    {
<a name="l09453"></a>09453       <span class="comment">// Normalization from UTS #22</span>
<a name="l09454"></a>09454       <span class="keywordflow">switch</span> (strtolower(preg_replace(<span class="stringliteral">&#39;/(?:[^a-zA-Z0-9]+|([^0-9])0+)/&#39;</span>, <span class="charliteral">&#39;\1&#39;</span>, $charset)))
<a name="l09455"></a>09455       {
<a name="l09456"></a>09456          <span class="keywordflow">case</span> <span class="stringliteral">&#39;adobestandardencoding&#39;</span>:
<a name="l09457"></a>09457          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csadobestandardencoding&#39;</span>:
<a name="l09458"></a>09458             <span class="keywordflow">return</span> <span class="stringliteral">&#39;Adobe-Standard-Encoding&#39;</span>;
<a name="l09459"></a>09459 
<a name="l09460"></a>09460          <span class="keywordflow">case</span> <span class="stringliteral">&#39;adobesymbolencoding&#39;</span>:
<a name="l09461"></a>09461          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cshppsmath&#39;</span>:
<a name="l09462"></a>09462             <span class="keywordflow">return</span> <span class="stringliteral">&#39;Adobe-Symbol-Encoding&#39;</span>;
<a name="l09463"></a>09463 
<a name="l09464"></a>09464          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ami1251&#39;</span>:
<a name="l09465"></a>09465          <span class="keywordflow">case</span> <span class="stringliteral">&#39;amiga1251&#39;</span>:
<a name="l09466"></a>09466             <span class="keywordflow">return</span> <span class="stringliteral">&#39;Amiga-1251&#39;</span>;
<a name="l09467"></a>09467 
<a name="l09468"></a>09468          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ansix31101983&#39;</span>:
<a name="l09469"></a>09469          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csat5001983&#39;</span>:
<a name="l09470"></a>09470          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso99naplps&#39;</span>:
<a name="l09471"></a>09471          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir99&#39;</span>:
<a name="l09472"></a>09472          <span class="keywordflow">case</span> <span class="stringliteral">&#39;naplps&#39;</span>:
<a name="l09473"></a>09473             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ANSI_X3.110-1983&#39;</span>;
<a name="l09474"></a>09474 
<a name="l09475"></a>09475          <span class="keywordflow">case</span> <span class="stringliteral">&#39;arabic7&#39;</span>:
<a name="l09476"></a>09476          <span class="keywordflow">case</span> <span class="stringliteral">&#39;asmo449&#39;</span>:
<a name="l09477"></a>09477          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso89asmo449&#39;</span>:
<a name="l09478"></a>09478          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso9036&#39;</span>:
<a name="l09479"></a>09479          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir89&#39;</span>:
<a name="l09480"></a>09480             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ASMO_449&#39;</span>;
<a name="l09481"></a>09481 
<a name="l09482"></a>09482          <span class="keywordflow">case</span> <span class="stringliteral">&#39;big5&#39;</span>:
<a name="l09483"></a>09483          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csbig5&#39;</span>:
<a name="l09484"></a>09484          <span class="keywordflow">case</span> <span class="stringliteral">&#39;xxbig5&#39;</span>:
<a name="l09485"></a>09485             <span class="keywordflow">return</span> <span class="stringliteral">&#39;Big5&#39;</span>;
<a name="l09486"></a>09486 
<a name="l09487"></a>09487          <span class="keywordflow">case</span> <span class="stringliteral">&#39;big5hkscs&#39;</span>:
<a name="l09488"></a>09488             <span class="keywordflow">return</span> <span class="stringliteral">&#39;Big5-HKSCS&#39;</span>;
<a name="l09489"></a>09489 
<a name="l09490"></a>09490          <span class="keywordflow">case</span> <span class="stringliteral">&#39;bocu1&#39;</span>:
<a name="l09491"></a>09491          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csbocu1&#39;</span>:
<a name="l09492"></a>09492             <span class="keywordflow">return</span> <span class="stringliteral">&#39;BOCU-1&#39;</span>;
<a name="l09493"></a>09493 
<a name="l09494"></a>09494          <span class="keywordflow">case</span> <span class="stringliteral">&#39;brf&#39;</span>:
<a name="l09495"></a>09495          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csbrf&#39;</span>:
<a name="l09496"></a>09496             <span class="keywordflow">return</span> <span class="stringliteral">&#39;BRF&#39;</span>;
<a name="l09497"></a>09497 
<a name="l09498"></a>09498          <span class="keywordflow">case</span> <span class="stringliteral">&#39;bs4730&#39;</span>:
<a name="l09499"></a>09499          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso4unitedkingdom&#39;</span>:
<a name="l09500"></a>09500          <span class="keywordflow">case</span> <span class="stringliteral">&#39;gb&#39;</span>:
<a name="l09501"></a>09501          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso646gb&#39;</span>:
<a name="l09502"></a>09502          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir4&#39;</span>:
<a name="l09503"></a>09503          <span class="keywordflow">case</span> <span class="stringliteral">&#39;uk&#39;</span>:
<a name="l09504"></a>09504             <span class="keywordflow">return</span> <span class="stringliteral">&#39;BS_4730&#39;</span>;
<a name="l09505"></a>09505 
<a name="l09506"></a>09506          <span class="keywordflow">case</span> <span class="stringliteral">&#39;bsviewdata&#39;</span>:
<a name="l09507"></a>09507          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso47bsviewdata&#39;</span>:
<a name="l09508"></a>09508          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir47&#39;</span>:
<a name="l09509"></a>09509             <span class="keywordflow">return</span> <span class="stringliteral">&#39;BS_viewdata&#39;</span>;
<a name="l09510"></a>09510 
<a name="l09511"></a>09511          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cesu8&#39;</span>:
<a name="l09512"></a>09512          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cscesu8&#39;</span>:
<a name="l09513"></a>09513             <span class="keywordflow">return</span> <span class="stringliteral">&#39;CESU-8&#39;</span>;
<a name="l09514"></a>09514 
<a name="l09515"></a>09515          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ca&#39;</span>:
<a name="l09516"></a>09516          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csa71&#39;</span>:
<a name="l09517"></a>09517          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csaz243419851&#39;</span>:
<a name="l09518"></a>09518          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso121canadian1&#39;</span>:
<a name="l09519"></a>09519          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso646ca&#39;</span>:
<a name="l09520"></a>09520          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir121&#39;</span>:
<a name="l09521"></a>09521             <span class="keywordflow">return</span> <span class="stringliteral">&#39;CSA_Z243.4-1985-1&#39;</span>;
<a name="l09522"></a>09522 
<a name="l09523"></a>09523          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csa72&#39;</span>:
<a name="l09524"></a>09524          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csaz243419852&#39;</span>:
<a name="l09525"></a>09525          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso122canadian2&#39;</span>:
<a name="l09526"></a>09526          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso646ca2&#39;</span>:
<a name="l09527"></a>09527          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir122&#39;</span>:
<a name="l09528"></a>09528             <span class="keywordflow">return</span> <span class="stringliteral">&#39;CSA_Z243.4-1985-2&#39;</span>;
<a name="l09529"></a>09529 
<a name="l09530"></a>09530          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csaz24341985gr&#39;</span>:
<a name="l09531"></a>09531          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso123csaz24341985gr&#39;</span>:
<a name="l09532"></a>09532          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir123&#39;</span>:
<a name="l09533"></a>09533             <span class="keywordflow">return</span> <span class="stringliteral">&#39;CSA_Z243.4-1985-gr&#39;</span>;
<a name="l09534"></a>09534 
<a name="l09535"></a>09535          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso139csn369103&#39;</span>:
<a name="l09536"></a>09536          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csn369103&#39;</span>:
<a name="l09537"></a>09537          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir139&#39;</span>:
<a name="l09538"></a>09538             <span class="keywordflow">return</span> <span class="stringliteral">&#39;CSN_369103&#39;</span>;
<a name="l09539"></a>09539 
<a name="l09540"></a>09540          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csdecmcs&#39;</span>:
<a name="l09541"></a>09541          <span class="keywordflow">case</span> <span class="stringliteral">&#39;dec&#39;</span>:
<a name="l09542"></a>09542          <span class="keywordflow">case</span> <span class="stringliteral">&#39;decmcs&#39;</span>:
<a name="l09543"></a>09543             <span class="keywordflow">return</span> <span class="stringliteral">&#39;DEC-MCS&#39;</span>;
<a name="l09544"></a>09544 
<a name="l09545"></a>09545          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso21german&#39;</span>:
<a name="l09546"></a>09546          <span class="keywordflow">case</span> <span class="stringliteral">&#39;de&#39;</span>:
<a name="l09547"></a>09547          <span class="keywordflow">case</span> <span class="stringliteral">&#39;din66003&#39;</span>:
<a name="l09548"></a>09548          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso646de&#39;</span>:
<a name="l09549"></a>09549          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir21&#39;</span>:
<a name="l09550"></a>09550             <span class="keywordflow">return</span> <span class="stringliteral">&#39;DIN_66003&#39;</span>;
<a name="l09551"></a>09551 
<a name="l09552"></a>09552          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csdkus&#39;</span>:
<a name="l09553"></a>09553          <span class="keywordflow">case</span> <span class="stringliteral">&#39;dkus&#39;</span>:
<a name="l09554"></a>09554             <span class="keywordflow">return</span> <span class="stringliteral">&#39;dk-us&#39;</span>;
<a name="l09555"></a>09555 
<a name="l09556"></a>09556          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso646danish&#39;</span>:
<a name="l09557"></a>09557          <span class="keywordflow">case</span> <span class="stringliteral">&#39;dk&#39;</span>:
<a name="l09558"></a>09558          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ds2089&#39;</span>:
<a name="l09559"></a>09559          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso646dk&#39;</span>:
<a name="l09560"></a>09560             <span class="keywordflow">return</span> <span class="stringliteral">&#39;DS_2089&#39;</span>;
<a name="l09561"></a>09561 
<a name="l09562"></a>09562          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibmebcdicatde&#39;</span>:
<a name="l09563"></a>09563          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdicatde&#39;</span>:
<a name="l09564"></a>09564             <span class="keywordflow">return</span> <span class="stringliteral">&#39;EBCDIC-AT-DE&#39;</span>;
<a name="l09565"></a>09565 
<a name="l09566"></a>09566          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csebcdicatdea&#39;</span>:
<a name="l09567"></a>09567          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdicatdea&#39;</span>:
<a name="l09568"></a>09568             <span class="keywordflow">return</span> <span class="stringliteral">&#39;EBCDIC-AT-DE-A&#39;</span>;
<a name="l09569"></a>09569 
<a name="l09570"></a>09570          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csebcdiccafr&#39;</span>:
<a name="l09571"></a>09571          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdiccafr&#39;</span>:
<a name="l09572"></a>09572             <span class="keywordflow">return</span> <span class="stringliteral">&#39;EBCDIC-CA-FR&#39;</span>;
<a name="l09573"></a>09573 
<a name="l09574"></a>09574          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csebcdicdkno&#39;</span>:
<a name="l09575"></a>09575          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdicdkno&#39;</span>:
<a name="l09576"></a>09576             <span class="keywordflow">return</span> <span class="stringliteral">&#39;EBCDIC-DK-NO&#39;</span>;
<a name="l09577"></a>09577 
<a name="l09578"></a>09578          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csebcdicdknoa&#39;</span>:
<a name="l09579"></a>09579          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdicdknoa&#39;</span>:
<a name="l09580"></a>09580             <span class="keywordflow">return</span> <span class="stringliteral">&#39;EBCDIC-DK-NO-A&#39;</span>;
<a name="l09581"></a>09581 
<a name="l09582"></a>09582          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csebcdices&#39;</span>:
<a name="l09583"></a>09583          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdices&#39;</span>:
<a name="l09584"></a>09584             <span class="keywordflow">return</span> <span class="stringliteral">&#39;EBCDIC-ES&#39;</span>;
<a name="l09585"></a>09585 
<a name="l09586"></a>09586          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csebcdicesa&#39;</span>:
<a name="l09587"></a>09587          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdicesa&#39;</span>:
<a name="l09588"></a>09588             <span class="keywordflow">return</span> <span class="stringliteral">&#39;EBCDIC-ES-A&#39;</span>;
<a name="l09589"></a>09589 
<a name="l09590"></a>09590          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csebcdicess&#39;</span>:
<a name="l09591"></a>09591          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdicess&#39;</span>:
<a name="l09592"></a>09592             <span class="keywordflow">return</span> <span class="stringliteral">&#39;EBCDIC-ES-S&#39;</span>;
<a name="l09593"></a>09593 
<a name="l09594"></a>09594          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csebcdicfise&#39;</span>:
<a name="l09595"></a>09595          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdicfise&#39;</span>:
<a name="l09596"></a>09596             <span class="keywordflow">return</span> <span class="stringliteral">&#39;EBCDIC-FI-SE&#39;</span>;
<a name="l09597"></a>09597 
<a name="l09598"></a>09598          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csebcdicfisea&#39;</span>:
<a name="l09599"></a>09599          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdicfisea&#39;</span>:
<a name="l09600"></a>09600             <span class="keywordflow">return</span> <span class="stringliteral">&#39;EBCDIC-FI-SE-A&#39;</span>;
<a name="l09601"></a>09601 
<a name="l09602"></a>09602          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csebcdicfr&#39;</span>:
<a name="l09603"></a>09603          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdicfr&#39;</span>:
<a name="l09604"></a>09604             <span class="keywordflow">return</span> <span class="stringliteral">&#39;EBCDIC-FR&#39;</span>;
<a name="l09605"></a>09605 
<a name="l09606"></a>09606          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csebcdicit&#39;</span>:
<a name="l09607"></a>09607          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdicit&#39;</span>:
<a name="l09608"></a>09608             <span class="keywordflow">return</span> <span class="stringliteral">&#39;EBCDIC-IT&#39;</span>;
<a name="l09609"></a>09609 
<a name="l09610"></a>09610          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csebcdicpt&#39;</span>:
<a name="l09611"></a>09611          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdicpt&#39;</span>:
<a name="l09612"></a>09612             <span class="keywordflow">return</span> <span class="stringliteral">&#39;EBCDIC-PT&#39;</span>;
<a name="l09613"></a>09613 
<a name="l09614"></a>09614          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csebcdicuk&#39;</span>:
<a name="l09615"></a>09615          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdicuk&#39;</span>:
<a name="l09616"></a>09616             <span class="keywordflow">return</span> <span class="stringliteral">&#39;EBCDIC-UK&#39;</span>;
<a name="l09617"></a>09617 
<a name="l09618"></a>09618          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csebcdicus&#39;</span>:
<a name="l09619"></a>09619          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdicus&#39;</span>:
<a name="l09620"></a>09620             <span class="keywordflow">return</span> <span class="stringliteral">&#39;EBCDIC-US&#39;</span>;
<a name="l09621"></a>09621 
<a name="l09622"></a>09622          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso111ecmacyrillic&#39;</span>:
<a name="l09623"></a>09623          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ecmacyrillic&#39;</span>:
<a name="l09624"></a>09624          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir111&#39;</span>:
<a name="l09625"></a>09625          <span class="keywordflow">case</span> <span class="stringliteral">&#39;koi8e&#39;</span>:
<a name="l09626"></a>09626             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ECMA-cyrillic&#39;</span>;
<a name="l09627"></a>09627 
<a name="l09628"></a>09628          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso17spanish&#39;</span>:
<a name="l09629"></a>09629          <span class="keywordflow">case</span> <span class="stringliteral">&#39;es&#39;</span>:
<a name="l09630"></a>09630          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso646es&#39;</span>:
<a name="l09631"></a>09631          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir17&#39;</span>:
<a name="l09632"></a>09632             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ES&#39;</span>;
<a name="l09633"></a>09633 
<a name="l09634"></a>09634          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso85spanish2&#39;</span>:
<a name="l09635"></a>09635          <span class="keywordflow">case</span> <span class="stringliteral">&#39;es2&#39;</span>:
<a name="l09636"></a>09636          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso646es2&#39;</span>:
<a name="l09637"></a>09637          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir85&#39;</span>:
<a name="l09638"></a>09638             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ES2&#39;</span>;
<a name="l09639"></a>09639 
<a name="l09640"></a>09640          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cseucfixwidjapanese&#39;</span>:
<a name="l09641"></a>09641          <span class="keywordflow">case</span> <span class="stringliteral">&#39;extendedunixcodefixedwidthforjapanese&#39;</span>:
<a name="l09642"></a>09642             <span class="keywordflow">return</span> <span class="stringliteral">&#39;Extended_UNIX_Code_Fixed_Width_for_Japanese&#39;</span>;
<a name="l09643"></a>09643 
<a name="l09644"></a>09644          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cseucpkdfmtjapanese&#39;</span>:
<a name="l09645"></a>09645          <span class="keywordflow">case</span> <span class="stringliteral">&#39;eucjp&#39;</span>:
<a name="l09646"></a>09646          <span class="keywordflow">case</span> <span class="stringliteral">&#39;extendedunixcodepackedformatforjapanese&#39;</span>:
<a name="l09647"></a>09647             <span class="keywordflow">return</span> <span class="stringliteral">&#39;Extended_UNIX_Code_Packed_Format_for_Japanese&#39;</span>;
<a name="l09648"></a>09648 
<a name="l09649"></a>09649          <span class="keywordflow">case</span> <span class="stringliteral">&#39;gb18030&#39;</span>:
<a name="l09650"></a>09650             <span class="keywordflow">return</span> <span class="stringliteral">&#39;GB18030&#39;</span>;
<a name="l09651"></a>09651 
<a name="l09652"></a>09652          <span class="keywordflow">case</span> <span class="stringliteral">&#39;chinese&#39;</span>:
<a name="l09653"></a>09653          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp936&#39;</span>:
<a name="l09654"></a>09654          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csgb2312&#39;</span>:
<a name="l09655"></a>09655          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso58gb231280&#39;</span>:
<a name="l09656"></a>09656          <span class="keywordflow">case</span> <span class="stringliteral">&#39;gb2312&#39;</span>:
<a name="l09657"></a>09657          <span class="keywordflow">case</span> <span class="stringliteral">&#39;gb231280&#39;</span>:
<a name="l09658"></a>09658          <span class="keywordflow">case</span> <span class="stringliteral">&#39;gbk&#39;</span>:
<a name="l09659"></a>09659          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir58&#39;</span>:
<a name="l09660"></a>09660          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ms936&#39;</span>:
<a name="l09661"></a>09661          <span class="keywordflow">case</span> <span class="stringliteral">&#39;windows936&#39;</span>:
<a name="l09662"></a>09662             <span class="keywordflow">return</span> <span class="stringliteral">&#39;GBK&#39;</span>;
<a name="l09663"></a>09663 
<a name="l09664"></a>09664          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cn&#39;</span>:
<a name="l09665"></a>09665          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso57gb1988&#39;</span>:
<a name="l09666"></a>09666          <span class="keywordflow">case</span> <span class="stringliteral">&#39;gb198880&#39;</span>:
<a name="l09667"></a>09667          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso646cn&#39;</span>:
<a name="l09668"></a>09668          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir57&#39;</span>:
<a name="l09669"></a>09669             <span class="keywordflow">return</span> <span class="stringliteral">&#39;GB_1988-80&#39;</span>;
<a name="l09670"></a>09670 
<a name="l09671"></a>09671          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso153gost1976874&#39;</span>:
<a name="l09672"></a>09672          <span class="keywordflow">case</span> <span class="stringliteral">&#39;gost1976874&#39;</span>:
<a name="l09673"></a>09673          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir153&#39;</span>:
<a name="l09674"></a>09674          <span class="keywordflow">case</span> <span class="stringliteral">&#39;stsev35888&#39;</span>:
<a name="l09675"></a>09675             <span class="keywordflow">return</span> <span class="stringliteral">&#39;GOST_19768-74&#39;</span>;
<a name="l09676"></a>09676 
<a name="l09677"></a>09677          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso150&#39;</span>:
<a name="l09678"></a>09678          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso150greekccitt&#39;</span>:
<a name="l09679"></a>09679          <span class="keywordflow">case</span> <span class="stringliteral">&#39;greekccitt&#39;</span>:
<a name="l09680"></a>09680          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir150&#39;</span>:
<a name="l09681"></a>09681             <span class="keywordflow">return</span> <span class="stringliteral">&#39;greek-ccitt&#39;</span>;
<a name="l09682"></a>09682 
<a name="l09683"></a>09683          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso88greek7&#39;</span>:
<a name="l09684"></a>09684          <span class="keywordflow">case</span> <span class="stringliteral">&#39;greek7&#39;</span>:
<a name="l09685"></a>09685          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir88&#39;</span>:
<a name="l09686"></a>09686             <span class="keywordflow">return</span> <span class="stringliteral">&#39;greek7&#39;</span>;
<a name="l09687"></a>09687 
<a name="l09688"></a>09688          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso18greek7old&#39;</span>:
<a name="l09689"></a>09689          <span class="keywordflow">case</span> <span class="stringliteral">&#39;greek7old&#39;</span>:
<a name="l09690"></a>09690          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir18&#39;</span>:
<a name="l09691"></a>09691             <span class="keywordflow">return</span> <span class="stringliteral">&#39;greek7-old&#39;</span>;
<a name="l09692"></a>09692 
<a name="l09693"></a>09693          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cshpdesktop&#39;</span>:
<a name="l09694"></a>09694          <span class="keywordflow">case</span> <span class="stringliteral">&#39;hpdesktop&#39;</span>:
<a name="l09695"></a>09695             <span class="keywordflow">return</span> <span class="stringliteral">&#39;HP-DeskTop&#39;</span>;
<a name="l09696"></a>09696 
<a name="l09697"></a>09697          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cshplegal&#39;</span>:
<a name="l09698"></a>09698          <span class="keywordflow">case</span> <span class="stringliteral">&#39;hplegal&#39;</span>:
<a name="l09699"></a>09699             <span class="keywordflow">return</span> <span class="stringliteral">&#39;HP-Legal&#39;</span>;
<a name="l09700"></a>09700 
<a name="l09701"></a>09701          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cshpmath8&#39;</span>:
<a name="l09702"></a>09702          <span class="keywordflow">case</span> <span class="stringliteral">&#39;hpmath8&#39;</span>:
<a name="l09703"></a>09703             <span class="keywordflow">return</span> <span class="stringliteral">&#39;HP-Math8&#39;</span>;
<a name="l09704"></a>09704 
<a name="l09705"></a>09705          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cshppifont&#39;</span>:
<a name="l09706"></a>09706          <span class="keywordflow">case</span> <span class="stringliteral">&#39;hppifont&#39;</span>:
<a name="l09707"></a>09707             <span class="keywordflow">return</span> <span class="stringliteral">&#39;HP-Pi-font&#39;</span>;
<a name="l09708"></a>09708 
<a name="l09709"></a>09709          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cshproman8&#39;</span>:
<a name="l09710"></a>09710          <span class="keywordflow">case</span> <span class="stringliteral">&#39;hproman8&#39;</span>:
<a name="l09711"></a>09711          <span class="keywordflow">case</span> <span class="stringliteral">&#39;r8&#39;</span>:
<a name="l09712"></a>09712          <span class="keywordflow">case</span> <span class="stringliteral">&#39;roman8&#39;</span>:
<a name="l09713"></a>09713             <span class="keywordflow">return</span> <span class="stringliteral">&#39;hp-roman8&#39;</span>;
<a name="l09714"></a>09714 
<a name="l09715"></a>09715          <span class="keywordflow">case</span> <span class="stringliteral">&#39;hzgb2312&#39;</span>:
<a name="l09716"></a>09716             <span class="keywordflow">return</span> <span class="stringliteral">&#39;HZ-GB-2312&#39;</span>;
<a name="l09717"></a>09717 
<a name="l09718"></a>09718          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibmsymbols&#39;</span>:
<a name="l09719"></a>09719          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibmsymbols&#39;</span>:
<a name="l09720"></a>09720             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM-Symbols&#39;</span>;
<a name="l09721"></a>09721 
<a name="l09722"></a>09722          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibmthai&#39;</span>:
<a name="l09723"></a>09723          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibmthai&#39;</span>:
<a name="l09724"></a>09724             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM-Thai&#39;</span>;
<a name="l09725"></a>09725 
<a name="l09726"></a>09726          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ccsid858&#39;</span>:
<a name="l09727"></a>09727          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp858&#39;</span>:
<a name="l09728"></a>09728          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm858&#39;</span>:
<a name="l09729"></a>09729          <span class="keywordflow">case</span> <span class="stringliteral">&#39;pcmultilingual850euro&#39;</span>:
<a name="l09730"></a>09730             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM00858&#39;</span>;
<a name="l09731"></a>09731 
<a name="l09732"></a>09732          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ccsid924&#39;</span>:
<a name="l09733"></a>09733          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp924&#39;</span>:
<a name="l09734"></a>09734          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdiclatin9euro&#39;</span>:
<a name="l09735"></a>09735          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm924&#39;</span>:
<a name="l09736"></a>09736             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM00924&#39;</span>;
<a name="l09737"></a>09737 
<a name="l09738"></a>09738          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ccsid1140&#39;</span>:
<a name="l09739"></a>09739          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp1140&#39;</span>:
<a name="l09740"></a>09740          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdicus37euro&#39;</span>:
<a name="l09741"></a>09741          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm1140&#39;</span>:
<a name="l09742"></a>09742             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM01140&#39;</span>;
<a name="l09743"></a>09743 
<a name="l09744"></a>09744          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ccsid1141&#39;</span>:
<a name="l09745"></a>09745          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp1141&#39;</span>:
<a name="l09746"></a>09746          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdicde273euro&#39;</span>:
<a name="l09747"></a>09747          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm1141&#39;</span>:
<a name="l09748"></a>09748             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM01141&#39;</span>;
<a name="l09749"></a>09749 
<a name="l09750"></a>09750          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ccsid1142&#39;</span>:
<a name="l09751"></a>09751          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp1142&#39;</span>:
<a name="l09752"></a>09752          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdicdk277euro&#39;</span>:
<a name="l09753"></a>09753          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdicno277euro&#39;</span>:
<a name="l09754"></a>09754          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm1142&#39;</span>:
<a name="l09755"></a>09755             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM01142&#39;</span>;
<a name="l09756"></a>09756 
<a name="l09757"></a>09757          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ccsid1143&#39;</span>:
<a name="l09758"></a>09758          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp1143&#39;</span>:
<a name="l09759"></a>09759          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdicfi278euro&#39;</span>:
<a name="l09760"></a>09760          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdicse278euro&#39;</span>:
<a name="l09761"></a>09761          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm1143&#39;</span>:
<a name="l09762"></a>09762             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM01143&#39;</span>;
<a name="l09763"></a>09763 
<a name="l09764"></a>09764          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ccsid1144&#39;</span>:
<a name="l09765"></a>09765          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp1144&#39;</span>:
<a name="l09766"></a>09766          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdicit280euro&#39;</span>:
<a name="l09767"></a>09767          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm1144&#39;</span>:
<a name="l09768"></a>09768             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM01144&#39;</span>;
<a name="l09769"></a>09769 
<a name="l09770"></a>09770          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ccsid1145&#39;</span>:
<a name="l09771"></a>09771          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp1145&#39;</span>:
<a name="l09772"></a>09772          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdices284euro&#39;</span>:
<a name="l09773"></a>09773          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm1145&#39;</span>:
<a name="l09774"></a>09774             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM01145&#39;</span>;
<a name="l09775"></a>09775 
<a name="l09776"></a>09776          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ccsid1146&#39;</span>:
<a name="l09777"></a>09777          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp1146&#39;</span>:
<a name="l09778"></a>09778          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdicgb285euro&#39;</span>:
<a name="l09779"></a>09779          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm1146&#39;</span>:
<a name="l09780"></a>09780             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM01146&#39;</span>;
<a name="l09781"></a>09781 
<a name="l09782"></a>09782          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ccsid1147&#39;</span>:
<a name="l09783"></a>09783          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp1147&#39;</span>:
<a name="l09784"></a>09784          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdicfr297euro&#39;</span>:
<a name="l09785"></a>09785          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm1147&#39;</span>:
<a name="l09786"></a>09786             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM01147&#39;</span>;
<a name="l09787"></a>09787 
<a name="l09788"></a>09788          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ccsid1148&#39;</span>:
<a name="l09789"></a>09789          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp1148&#39;</span>:
<a name="l09790"></a>09790          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdicinternational500euro&#39;</span>:
<a name="l09791"></a>09791          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm1148&#39;</span>:
<a name="l09792"></a>09792             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM01148&#39;</span>;
<a name="l09793"></a>09793 
<a name="l09794"></a>09794          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ccsid1149&#39;</span>:
<a name="l09795"></a>09795          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp1149&#39;</span>:
<a name="l09796"></a>09796          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdicis871euro&#39;</span>:
<a name="l09797"></a>09797          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm1149&#39;</span>:
<a name="l09798"></a>09798             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM01149&#39;</span>;
<a name="l09799"></a>09799 
<a name="l09800"></a>09800          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp37&#39;</span>:
<a name="l09801"></a>09801          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm37&#39;</span>:
<a name="l09802"></a>09802          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdiccpca&#39;</span>:
<a name="l09803"></a>09803          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdiccpnl&#39;</span>:
<a name="l09804"></a>09804          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdiccpus&#39;</span>:
<a name="l09805"></a>09805          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdiccpwt&#39;</span>:
<a name="l09806"></a>09806          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm37&#39;</span>:
<a name="l09807"></a>09807             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM037&#39;</span>;
<a name="l09808"></a>09808 
<a name="l09809"></a>09809          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp38&#39;</span>:
<a name="l09810"></a>09810          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm38&#39;</span>:
<a name="l09811"></a>09811          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdicint&#39;</span>:
<a name="l09812"></a>09812          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm38&#39;</span>:
<a name="l09813"></a>09813             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM038&#39;</span>;
<a name="l09814"></a>09814 
<a name="l09815"></a>09815          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp273&#39;</span>:
<a name="l09816"></a>09816          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm273&#39;</span>:
<a name="l09817"></a>09817          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm273&#39;</span>:
<a name="l09818"></a>09818             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM273&#39;</span>;
<a name="l09819"></a>09819 
<a name="l09820"></a>09820          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp274&#39;</span>:
<a name="l09821"></a>09821          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm274&#39;</span>:
<a name="l09822"></a>09822          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdicbe&#39;</span>:
<a name="l09823"></a>09823          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm274&#39;</span>:
<a name="l09824"></a>09824             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM274&#39;</span>;
<a name="l09825"></a>09825 
<a name="l09826"></a>09826          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp275&#39;</span>:
<a name="l09827"></a>09827          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm275&#39;</span>:
<a name="l09828"></a>09828          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdicbr&#39;</span>:
<a name="l09829"></a>09829          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm275&#39;</span>:
<a name="l09830"></a>09830             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM275&#39;</span>;
<a name="l09831"></a>09831 
<a name="l09832"></a>09832          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm277&#39;</span>:
<a name="l09833"></a>09833          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdiccpdk&#39;</span>:
<a name="l09834"></a>09834          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdiccpno&#39;</span>:
<a name="l09835"></a>09835          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm277&#39;</span>:
<a name="l09836"></a>09836             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM277&#39;</span>;
<a name="l09837"></a>09837 
<a name="l09838"></a>09838          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp278&#39;</span>:
<a name="l09839"></a>09839          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm278&#39;</span>:
<a name="l09840"></a>09840          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdiccpfi&#39;</span>:
<a name="l09841"></a>09841          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdiccpse&#39;</span>:
<a name="l09842"></a>09842          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm278&#39;</span>:
<a name="l09843"></a>09843             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM278&#39;</span>;
<a name="l09844"></a>09844 
<a name="l09845"></a>09845          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp280&#39;</span>:
<a name="l09846"></a>09846          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm280&#39;</span>:
<a name="l09847"></a>09847          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdiccpit&#39;</span>:
<a name="l09848"></a>09848          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm280&#39;</span>:
<a name="l09849"></a>09849             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM280&#39;</span>;
<a name="l09850"></a>09850 
<a name="l09851"></a>09851          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp281&#39;</span>:
<a name="l09852"></a>09852          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm281&#39;</span>:
<a name="l09853"></a>09853          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdicjpe&#39;</span>:
<a name="l09854"></a>09854          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm281&#39;</span>:
<a name="l09855"></a>09855             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM281&#39;</span>;
<a name="l09856"></a>09856 
<a name="l09857"></a>09857          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp284&#39;</span>:
<a name="l09858"></a>09858          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm284&#39;</span>:
<a name="l09859"></a>09859          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdiccpes&#39;</span>:
<a name="l09860"></a>09860          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm284&#39;</span>:
<a name="l09861"></a>09861             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM284&#39;</span>;
<a name="l09862"></a>09862 
<a name="l09863"></a>09863          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp285&#39;</span>:
<a name="l09864"></a>09864          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm285&#39;</span>:
<a name="l09865"></a>09865          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdiccpgb&#39;</span>:
<a name="l09866"></a>09866          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm285&#39;</span>:
<a name="l09867"></a>09867             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM285&#39;</span>;
<a name="l09868"></a>09868 
<a name="l09869"></a>09869          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp290&#39;</span>:
<a name="l09870"></a>09870          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm290&#39;</span>:
<a name="l09871"></a>09871          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdicjpkana&#39;</span>:
<a name="l09872"></a>09872          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm290&#39;</span>:
<a name="l09873"></a>09873             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM290&#39;</span>;
<a name="l09874"></a>09874 
<a name="l09875"></a>09875          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp297&#39;</span>:
<a name="l09876"></a>09876          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm297&#39;</span>:
<a name="l09877"></a>09877          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdiccpfr&#39;</span>:
<a name="l09878"></a>09878          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm297&#39;</span>:
<a name="l09879"></a>09879             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM297&#39;</span>;
<a name="l09880"></a>09880 
<a name="l09881"></a>09881          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp420&#39;</span>:
<a name="l09882"></a>09882          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm420&#39;</span>:
<a name="l09883"></a>09883          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdiccpar1&#39;</span>:
<a name="l09884"></a>09884          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm420&#39;</span>:
<a name="l09885"></a>09885             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM420&#39;</span>;
<a name="l09886"></a>09886 
<a name="l09887"></a>09887          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp423&#39;</span>:
<a name="l09888"></a>09888          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm423&#39;</span>:
<a name="l09889"></a>09889          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdiccpgr&#39;</span>:
<a name="l09890"></a>09890          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm423&#39;</span>:
<a name="l09891"></a>09891             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM423&#39;</span>;
<a name="l09892"></a>09892 
<a name="l09893"></a>09893          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp424&#39;</span>:
<a name="l09894"></a>09894          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm424&#39;</span>:
<a name="l09895"></a>09895          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdiccphe&#39;</span>:
<a name="l09896"></a>09896          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm424&#39;</span>:
<a name="l09897"></a>09897             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM424&#39;</span>;
<a name="l09898"></a>09898 
<a name="l09899"></a>09899          <span class="keywordflow">case</span> <span class="stringliteral">&#39;437&#39;</span>:
<a name="l09900"></a>09900          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp437&#39;</span>:
<a name="l09901"></a>09901          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cspc8codepage437&#39;</span>:
<a name="l09902"></a>09902          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm437&#39;</span>:
<a name="l09903"></a>09903             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM437&#39;</span>;
<a name="l09904"></a>09904 
<a name="l09905"></a>09905          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp500&#39;</span>:
<a name="l09906"></a>09906          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm500&#39;</span>:
<a name="l09907"></a>09907          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdiccpbe&#39;</span>:
<a name="l09908"></a>09908          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdiccpch&#39;</span>:
<a name="l09909"></a>09909          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm500&#39;</span>:
<a name="l09910"></a>09910             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM500&#39;</span>;
<a name="l09911"></a>09911 
<a name="l09912"></a>09912          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp775&#39;</span>:
<a name="l09913"></a>09913          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cspc775baltic&#39;</span>:
<a name="l09914"></a>09914          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm775&#39;</span>:
<a name="l09915"></a>09915             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM775&#39;</span>;
<a name="l09916"></a>09916 
<a name="l09917"></a>09917          <span class="keywordflow">case</span> <span class="stringliteral">&#39;850&#39;</span>:
<a name="l09918"></a>09918          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp850&#39;</span>:
<a name="l09919"></a>09919          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cspc850multilingual&#39;</span>:
<a name="l09920"></a>09920          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm850&#39;</span>:
<a name="l09921"></a>09921             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM850&#39;</span>;
<a name="l09922"></a>09922 
<a name="l09923"></a>09923          <span class="keywordflow">case</span> <span class="stringliteral">&#39;851&#39;</span>:
<a name="l09924"></a>09924          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp851&#39;</span>:
<a name="l09925"></a>09925          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm851&#39;</span>:
<a name="l09926"></a>09926          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm851&#39;</span>:
<a name="l09927"></a>09927             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM851&#39;</span>;
<a name="l09928"></a>09928 
<a name="l09929"></a>09929          <span class="keywordflow">case</span> <span class="stringliteral">&#39;852&#39;</span>:
<a name="l09930"></a>09930          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp852&#39;</span>:
<a name="l09931"></a>09931          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cspcp852&#39;</span>:
<a name="l09932"></a>09932          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm852&#39;</span>:
<a name="l09933"></a>09933             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM852&#39;</span>;
<a name="l09934"></a>09934 
<a name="l09935"></a>09935          <span class="keywordflow">case</span> <span class="stringliteral">&#39;855&#39;</span>:
<a name="l09936"></a>09936          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp855&#39;</span>:
<a name="l09937"></a>09937          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm855&#39;</span>:
<a name="l09938"></a>09938          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm855&#39;</span>:
<a name="l09939"></a>09939             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM855&#39;</span>;
<a name="l09940"></a>09940 
<a name="l09941"></a>09941          <span class="keywordflow">case</span> <span class="stringliteral">&#39;857&#39;</span>:
<a name="l09942"></a>09942          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp857&#39;</span>:
<a name="l09943"></a>09943          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm857&#39;</span>:
<a name="l09944"></a>09944          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm857&#39;</span>:
<a name="l09945"></a>09945             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM857&#39;</span>;
<a name="l09946"></a>09946 
<a name="l09947"></a>09947          <span class="keywordflow">case</span> <span class="stringliteral">&#39;860&#39;</span>:
<a name="l09948"></a>09948          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp860&#39;</span>:
<a name="l09949"></a>09949          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm860&#39;</span>:
<a name="l09950"></a>09950          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm860&#39;</span>:
<a name="l09951"></a>09951             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM860&#39;</span>;
<a name="l09952"></a>09952 
<a name="l09953"></a>09953          <span class="keywordflow">case</span> <span class="stringliteral">&#39;861&#39;</span>:
<a name="l09954"></a>09954          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp861&#39;</span>:
<a name="l09955"></a>09955          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cpis&#39;</span>:
<a name="l09956"></a>09956          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm861&#39;</span>:
<a name="l09957"></a>09957          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm861&#39;</span>:
<a name="l09958"></a>09958             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM861&#39;</span>;
<a name="l09959"></a>09959 
<a name="l09960"></a>09960          <span class="keywordflow">case</span> <span class="stringliteral">&#39;862&#39;</span>:
<a name="l09961"></a>09961          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp862&#39;</span>:
<a name="l09962"></a>09962          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cspc862latinhebrew&#39;</span>:
<a name="l09963"></a>09963          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm862&#39;</span>:
<a name="l09964"></a>09964             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM862&#39;</span>;
<a name="l09965"></a>09965 
<a name="l09966"></a>09966          <span class="keywordflow">case</span> <span class="stringliteral">&#39;863&#39;</span>:
<a name="l09967"></a>09967          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp863&#39;</span>:
<a name="l09968"></a>09968          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm863&#39;</span>:
<a name="l09969"></a>09969          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm863&#39;</span>:
<a name="l09970"></a>09970             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM863&#39;</span>;
<a name="l09971"></a>09971 
<a name="l09972"></a>09972          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp864&#39;</span>:
<a name="l09973"></a>09973          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm864&#39;</span>:
<a name="l09974"></a>09974          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm864&#39;</span>:
<a name="l09975"></a>09975             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM864&#39;</span>;
<a name="l09976"></a>09976 
<a name="l09977"></a>09977          <span class="keywordflow">case</span> <span class="stringliteral">&#39;865&#39;</span>:
<a name="l09978"></a>09978          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp865&#39;</span>:
<a name="l09979"></a>09979          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm865&#39;</span>:
<a name="l09980"></a>09980          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm865&#39;</span>:
<a name="l09981"></a>09981             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM865&#39;</span>;
<a name="l09982"></a>09982 
<a name="l09983"></a>09983          <span class="keywordflow">case</span> <span class="stringliteral">&#39;866&#39;</span>:
<a name="l09984"></a>09984          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp866&#39;</span>:
<a name="l09985"></a>09985          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm866&#39;</span>:
<a name="l09986"></a>09986          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm866&#39;</span>:
<a name="l09987"></a>09987             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM866&#39;</span>;
<a name="l09988"></a>09988 
<a name="l09989"></a>09989          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp868&#39;</span>:
<a name="l09990"></a>09990          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cpar&#39;</span>:
<a name="l09991"></a>09991          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm868&#39;</span>:
<a name="l09992"></a>09992          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm868&#39;</span>:
<a name="l09993"></a>09993             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM868&#39;</span>;
<a name="l09994"></a>09994 
<a name="l09995"></a>09995          <span class="keywordflow">case</span> <span class="stringliteral">&#39;869&#39;</span>:
<a name="l09996"></a>09996          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp869&#39;</span>:
<a name="l09997"></a>09997          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cpgr&#39;</span>:
<a name="l09998"></a>09998          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm869&#39;</span>:
<a name="l09999"></a>09999          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm869&#39;</span>:
<a name="l10000"></a>10000             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM869&#39;</span>;
<a name="l10001"></a>10001 
<a name="l10002"></a>10002          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp870&#39;</span>:
<a name="l10003"></a>10003          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm870&#39;</span>:
<a name="l10004"></a>10004          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdiccproece&#39;</span>:
<a name="l10005"></a>10005          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdiccpyu&#39;</span>:
<a name="l10006"></a>10006          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm870&#39;</span>:
<a name="l10007"></a>10007             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM870&#39;</span>;
<a name="l10008"></a>10008 
<a name="l10009"></a>10009          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp871&#39;</span>:
<a name="l10010"></a>10010          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm871&#39;</span>:
<a name="l10011"></a>10011          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdiccpis&#39;</span>:
<a name="l10012"></a>10012          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm871&#39;</span>:
<a name="l10013"></a>10013             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM871&#39;</span>;
<a name="l10014"></a>10014 
<a name="l10015"></a>10015          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp880&#39;</span>:
<a name="l10016"></a>10016          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm880&#39;</span>:
<a name="l10017"></a>10017          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdiccyrillic&#39;</span>:
<a name="l10018"></a>10018          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm880&#39;</span>:
<a name="l10019"></a>10019             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM880&#39;</span>;
<a name="l10020"></a>10020 
<a name="l10021"></a>10021          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp891&#39;</span>:
<a name="l10022"></a>10022          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm891&#39;</span>:
<a name="l10023"></a>10023          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm891&#39;</span>:
<a name="l10024"></a>10024             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM891&#39;</span>;
<a name="l10025"></a>10025 
<a name="l10026"></a>10026          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp903&#39;</span>:
<a name="l10027"></a>10027          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm903&#39;</span>:
<a name="l10028"></a>10028          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm903&#39;</span>:
<a name="l10029"></a>10029             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM903&#39;</span>;
<a name="l10030"></a>10030 
<a name="l10031"></a>10031          <span class="keywordflow">case</span> <span class="stringliteral">&#39;904&#39;</span>:
<a name="l10032"></a>10032          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp904&#39;</span>:
<a name="l10033"></a>10033          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibbm904&#39;</span>:
<a name="l10034"></a>10034          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm904&#39;</span>:
<a name="l10035"></a>10035             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM904&#39;</span>;
<a name="l10036"></a>10036 
<a name="l10037"></a>10037          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp905&#39;</span>:
<a name="l10038"></a>10038          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm905&#39;</span>:
<a name="l10039"></a>10039          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdiccptr&#39;</span>:
<a name="l10040"></a>10040          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm905&#39;</span>:
<a name="l10041"></a>10041             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM905&#39;</span>;
<a name="l10042"></a>10042 
<a name="l10043"></a>10043          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp918&#39;</span>:
<a name="l10044"></a>10044          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm918&#39;</span>:
<a name="l10045"></a>10045          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ebcdiccpar2&#39;</span>:
<a name="l10046"></a>10046          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm918&#39;</span>:
<a name="l10047"></a>10047             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM918&#39;</span>;
<a name="l10048"></a>10048 
<a name="l10049"></a>10049          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp1026&#39;</span>:
<a name="l10050"></a>10050          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csibm1026&#39;</span>:
<a name="l10051"></a>10051          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm1026&#39;</span>:
<a name="l10052"></a>10052             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM1026&#39;</span>;
<a name="l10053"></a>10053 
<a name="l10054"></a>10054          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm1047&#39;</span>:
<a name="l10055"></a>10055             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IBM1047&#39;</span>;
<a name="l10056"></a>10056 
<a name="l10057"></a>10057          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso143iecp271&#39;</span>:
<a name="l10058"></a>10058          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iecp271&#39;</span>:
<a name="l10059"></a>10059          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir143&#39;</span>:
<a name="l10060"></a>10060             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IEC_P27-1&#39;</span>;
<a name="l10061"></a>10061 
<a name="l10062"></a>10062          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso49inis&#39;</span>:
<a name="l10063"></a>10063          <span class="keywordflow">case</span> <span class="stringliteral">&#39;inis&#39;</span>:
<a name="l10064"></a>10064          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir49&#39;</span>:
<a name="l10065"></a>10065             <span class="keywordflow">return</span> <span class="stringliteral">&#39;INIS&#39;</span>;
<a name="l10066"></a>10066 
<a name="l10067"></a>10067          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso50inis8&#39;</span>:
<a name="l10068"></a>10068          <span class="keywordflow">case</span> <span class="stringliteral">&#39;inis8&#39;</span>:
<a name="l10069"></a>10069          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir50&#39;</span>:
<a name="l10070"></a>10070             <span class="keywordflow">return</span> <span class="stringliteral">&#39;INIS-8&#39;</span>;
<a name="l10071"></a>10071 
<a name="l10072"></a>10072          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso51iniscyrillic&#39;</span>:
<a name="l10073"></a>10073          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iniscyrillic&#39;</span>:
<a name="l10074"></a>10074          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir51&#39;</span>:
<a name="l10075"></a>10075             <span class="keywordflow">return</span> <span class="stringliteral">&#39;INIS-cyrillic&#39;</span>;
<a name="l10076"></a>10076 
<a name="l10077"></a>10077          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csinvariant&#39;</span>:
<a name="l10078"></a>10078          <span class="keywordflow">case</span> <span class="stringliteral">&#39;invariant&#39;</span>:
<a name="l10079"></a>10079             <span class="keywordflow">return</span> <span class="stringliteral">&#39;INVARIANT&#39;</span>;
<a name="l10080"></a>10080 
<a name="l10081"></a>10081          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso2022cn&#39;</span>:
<a name="l10082"></a>10082             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-2022-CN&#39;</span>;
<a name="l10083"></a>10083 
<a name="l10084"></a>10084          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso2022cnext&#39;</span>:
<a name="l10085"></a>10085             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-2022-CN-EXT&#39;</span>;
<a name="l10086"></a>10086 
<a name="l10087"></a>10087          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso2022jp&#39;</span>:
<a name="l10088"></a>10088          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso2022jp&#39;</span>:
<a name="l10089"></a>10089             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-2022-JP&#39;</span>;
<a name="l10090"></a>10090 
<a name="l10091"></a>10091          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso2022jp2&#39;</span>:
<a name="l10092"></a>10092          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso2022jp2&#39;</span>:
<a name="l10093"></a>10093             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-2022-JP-2&#39;</span>;
<a name="l10094"></a>10094 
<a name="l10095"></a>10095          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso2022kr&#39;</span>:
<a name="l10096"></a>10096          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso2022kr&#39;</span>:
<a name="l10097"></a>10097             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-2022-KR&#39;</span>;
<a name="l10098"></a>10098 
<a name="l10099"></a>10099          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cswindows30latin1&#39;</span>:
<a name="l10100"></a>10100          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso88591windows30latin1&#39;</span>:
<a name="l10101"></a>10101             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-8859-1-Windows-3.0-Latin-1&#39;</span>;
<a name="l10102"></a>10102 
<a name="l10103"></a>10103          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cswindows31latin1&#39;</span>:
<a name="l10104"></a>10104          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso88591windows31latin1&#39;</span>:
<a name="l10105"></a>10105             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-8859-1-Windows-3.1-Latin-1&#39;</span>;
<a name="l10106"></a>10106 
<a name="l10107"></a>10107          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csisolatin2&#39;</span>:
<a name="l10108"></a>10108          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso88592&#39;</span>:
<a name="l10109"></a>10109          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso885921987&#39;</span>:
<a name="l10110"></a>10110          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir101&#39;</span>:
<a name="l10111"></a>10111          <span class="keywordflow">case</span> <span class="stringliteral">&#39;l2&#39;</span>:
<a name="l10112"></a>10112          <span class="keywordflow">case</span> <span class="stringliteral">&#39;latin2&#39;</span>:
<a name="l10113"></a>10113             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-8859-2&#39;</span>;
<a name="l10114"></a>10114 
<a name="l10115"></a>10115          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cswindows31latin2&#39;</span>:
<a name="l10116"></a>10116          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso88592windowslatin2&#39;</span>:
<a name="l10117"></a>10117             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-8859-2-Windows-Latin-2&#39;</span>;
<a name="l10118"></a>10118 
<a name="l10119"></a>10119          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csisolatin3&#39;</span>:
<a name="l10120"></a>10120          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso88593&#39;</span>:
<a name="l10121"></a>10121          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso885931988&#39;</span>:
<a name="l10122"></a>10122          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir109&#39;</span>:
<a name="l10123"></a>10123          <span class="keywordflow">case</span> <span class="stringliteral">&#39;l3&#39;</span>:
<a name="l10124"></a>10124          <span class="keywordflow">case</span> <span class="stringliteral">&#39;latin3&#39;</span>:
<a name="l10125"></a>10125             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-8859-3&#39;</span>;
<a name="l10126"></a>10126 
<a name="l10127"></a>10127          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csisolatin4&#39;</span>:
<a name="l10128"></a>10128          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso88594&#39;</span>:
<a name="l10129"></a>10129          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso885941988&#39;</span>:
<a name="l10130"></a>10130          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir110&#39;</span>:
<a name="l10131"></a>10131          <span class="keywordflow">case</span> <span class="stringliteral">&#39;l4&#39;</span>:
<a name="l10132"></a>10132          <span class="keywordflow">case</span> <span class="stringliteral">&#39;latin4&#39;</span>:
<a name="l10133"></a>10133             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-8859-4&#39;</span>;
<a name="l10134"></a>10134 
<a name="l10135"></a>10135          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csisolatincyrillic&#39;</span>:
<a name="l10136"></a>10136          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cyrillic&#39;</span>:
<a name="l10137"></a>10137          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso88595&#39;</span>:
<a name="l10138"></a>10138          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso885951988&#39;</span>:
<a name="l10139"></a>10139          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir144&#39;</span>:
<a name="l10140"></a>10140             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-8859-5&#39;</span>;
<a name="l10141"></a>10141 
<a name="l10142"></a>10142          <span class="keywordflow">case</span> <span class="stringliteral">&#39;arabic&#39;</span>:
<a name="l10143"></a>10143          <span class="keywordflow">case</span> <span class="stringliteral">&#39;asmo708&#39;</span>:
<a name="l10144"></a>10144          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csisolatinarabic&#39;</span>:
<a name="l10145"></a>10145          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ecma114&#39;</span>:
<a name="l10146"></a>10146          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso88596&#39;</span>:
<a name="l10147"></a>10147          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso885961987&#39;</span>:
<a name="l10148"></a>10148          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir127&#39;</span>:
<a name="l10149"></a>10149             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-8859-6&#39;</span>;
<a name="l10150"></a>10150 
<a name="l10151"></a>10151          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso88596e&#39;</span>:
<a name="l10152"></a>10152          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso88596e&#39;</span>:
<a name="l10153"></a>10153             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-8859-6-E&#39;</span>;
<a name="l10154"></a>10154 
<a name="l10155"></a>10155          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso88596i&#39;</span>:
<a name="l10156"></a>10156          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso88596i&#39;</span>:
<a name="l10157"></a>10157             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-8859-6-I&#39;</span>;
<a name="l10158"></a>10158 
<a name="l10159"></a>10159          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csisolatingreek&#39;</span>:
<a name="l10160"></a>10160          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ecma118&#39;</span>:
<a name="l10161"></a>10161          <span class="keywordflow">case</span> <span class="stringliteral">&#39;elot928&#39;</span>:
<a name="l10162"></a>10162          <span class="keywordflow">case</span> <span class="stringliteral">&#39;greek&#39;</span>:
<a name="l10163"></a>10163          <span class="keywordflow">case</span> <span class="stringliteral">&#39;greek8&#39;</span>:
<a name="l10164"></a>10164          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso88597&#39;</span>:
<a name="l10165"></a>10165          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso885971987&#39;</span>:
<a name="l10166"></a>10166          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir126&#39;</span>:
<a name="l10167"></a>10167             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-8859-7&#39;</span>;
<a name="l10168"></a>10168 
<a name="l10169"></a>10169          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csisolatinhebrew&#39;</span>:
<a name="l10170"></a>10170          <span class="keywordflow">case</span> <span class="stringliteral">&#39;hebrew&#39;</span>:
<a name="l10171"></a>10171          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso88598&#39;</span>:
<a name="l10172"></a>10172          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso885981988&#39;</span>:
<a name="l10173"></a>10173          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir138&#39;</span>:
<a name="l10174"></a>10174             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-8859-8&#39;</span>;
<a name="l10175"></a>10175 
<a name="l10176"></a>10176          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso88598e&#39;</span>:
<a name="l10177"></a>10177          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso88598e&#39;</span>:
<a name="l10178"></a>10178             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-8859-8-E&#39;</span>;
<a name="l10179"></a>10179 
<a name="l10180"></a>10180          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso88598i&#39;</span>:
<a name="l10181"></a>10181          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso88598i&#39;</span>:
<a name="l10182"></a>10182             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-8859-8-I&#39;</span>;
<a name="l10183"></a>10183 
<a name="l10184"></a>10184          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cswindows31latin5&#39;</span>:
<a name="l10185"></a>10185          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso88599windowslatin5&#39;</span>:
<a name="l10186"></a>10186             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-8859-9-Windows-Latin-5&#39;</span>;
<a name="l10187"></a>10187 
<a name="l10188"></a>10188          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csisolatin6&#39;</span>:
<a name="l10189"></a>10189          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso885910&#39;</span>:
<a name="l10190"></a>10190          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso8859101992&#39;</span>:
<a name="l10191"></a>10191          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir157&#39;</span>:
<a name="l10192"></a>10192          <span class="keywordflow">case</span> <span class="stringliteral">&#39;l6&#39;</span>:
<a name="l10193"></a>10193          <span class="keywordflow">case</span> <span class="stringliteral">&#39;latin6&#39;</span>:
<a name="l10194"></a>10194             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-8859-10&#39;</span>;
<a name="l10195"></a>10195 
<a name="l10196"></a>10196          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso885913&#39;</span>:
<a name="l10197"></a>10197             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-8859-13&#39;</span>;
<a name="l10198"></a>10198 
<a name="l10199"></a>10199          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso885914&#39;</span>:
<a name="l10200"></a>10200          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso8859141998&#39;</span>:
<a name="l10201"></a>10201          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoceltic&#39;</span>:
<a name="l10202"></a>10202          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir199&#39;</span>:
<a name="l10203"></a>10203          <span class="keywordflow">case</span> <span class="stringliteral">&#39;l8&#39;</span>:
<a name="l10204"></a>10204          <span class="keywordflow">case</span> <span class="stringliteral">&#39;latin8&#39;</span>:
<a name="l10205"></a>10205             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-8859-14&#39;</span>;
<a name="l10206"></a>10206 
<a name="l10207"></a>10207          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso885915&#39;</span>:
<a name="l10208"></a>10208          <span class="keywordflow">case</span> <span class="stringliteral">&#39;latin9&#39;</span>:
<a name="l10209"></a>10209             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-8859-15&#39;</span>;
<a name="l10210"></a>10210 
<a name="l10211"></a>10211          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso885916&#39;</span>:
<a name="l10212"></a>10212          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso8859162001&#39;</span>:
<a name="l10213"></a>10213          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir226&#39;</span>:
<a name="l10214"></a>10214          <span class="keywordflow">case</span> <span class="stringliteral">&#39;l10&#39;</span>:
<a name="l10215"></a>10215          <span class="keywordflow">case</span> <span class="stringliteral">&#39;latin10&#39;</span>:
<a name="l10216"></a>10216             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-8859-16&#39;</span>;
<a name="l10217"></a>10217 
<a name="l10218"></a>10218          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso10646j1&#39;</span>:
<a name="l10219"></a>10219             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-10646-J-1&#39;</span>;
<a name="l10220"></a>10220 
<a name="l10221"></a>10221          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csunicode&#39;</span>:
<a name="l10222"></a>10222          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso10646ucs2&#39;</span>:
<a name="l10223"></a>10223             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-10646-UCS-2&#39;</span>;
<a name="l10224"></a>10224 
<a name="l10225"></a>10225          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csucs4&#39;</span>:
<a name="l10226"></a>10226          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso10646ucs4&#39;</span>:
<a name="l10227"></a>10227             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-10646-UCS-4&#39;</span>;
<a name="l10228"></a>10228 
<a name="l10229"></a>10229          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csunicodeascii&#39;</span>:
<a name="l10230"></a>10230          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso10646ucsbasic&#39;</span>:
<a name="l10231"></a>10231             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-10646-UCS-Basic&#39;</span>;
<a name="l10232"></a>10232 
<a name="l10233"></a>10233          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csunicodelatin1&#39;</span>:
<a name="l10234"></a>10234          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso10646&#39;</span>:
<a name="l10235"></a>10235          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso10646unicodelatin1&#39;</span>:
<a name="l10236"></a>10236             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-10646-Unicode-Latin1&#39;</span>;
<a name="l10237"></a>10237 
<a name="l10238"></a>10238          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso10646utf1&#39;</span>:
<a name="l10239"></a>10239          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso10646utf1&#39;</span>:
<a name="l10240"></a>10240             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-10646-UTF-1&#39;</span>;
<a name="l10241"></a>10241 
<a name="l10242"></a>10242          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso115481&#39;</span>:
<a name="l10243"></a>10243          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso115481&#39;</span>:
<a name="l10244"></a>10244          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isotr115481&#39;</span>:
<a name="l10245"></a>10245             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-11548-1&#39;</span>;
<a name="l10246"></a>10246 
<a name="l10247"></a>10247          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso90&#39;</span>:
<a name="l10248"></a>10248          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir90&#39;</span>:
<a name="l10249"></a>10249             <span class="keywordflow">return</span> <span class="stringliteral">&#39;iso-ir-90&#39;</span>;
<a name="l10250"></a>10250 
<a name="l10251"></a>10251          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csunicodeibm1261&#39;</span>:
<a name="l10252"></a>10252          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isounicodeibm1261&#39;</span>:
<a name="l10253"></a>10253             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-Unicode-IBM-1261&#39;</span>;
<a name="l10254"></a>10254 
<a name="l10255"></a>10255          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csunicodeibm1264&#39;</span>:
<a name="l10256"></a>10256          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isounicodeibm1264&#39;</span>:
<a name="l10257"></a>10257             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-Unicode-IBM-1264&#39;</span>;
<a name="l10258"></a>10258 
<a name="l10259"></a>10259          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csunicodeibm1265&#39;</span>:
<a name="l10260"></a>10260          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isounicodeibm1265&#39;</span>:
<a name="l10261"></a>10261             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-Unicode-IBM-1265&#39;</span>;
<a name="l10262"></a>10262 
<a name="l10263"></a>10263          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csunicodeibm1268&#39;</span>:
<a name="l10264"></a>10264          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isounicodeibm1268&#39;</span>:
<a name="l10265"></a>10265             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-Unicode-IBM-1268&#39;</span>;
<a name="l10266"></a>10266 
<a name="l10267"></a>10267          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csunicodeibm1276&#39;</span>:
<a name="l10268"></a>10268          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isounicodeibm1276&#39;</span>:
<a name="l10269"></a>10269             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO-Unicode-IBM-1276&#39;</span>;
<a name="l10270"></a>10270 
<a name="l10271"></a>10271          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso646basic1983&#39;</span>:
<a name="l10272"></a>10272          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso646basic1983&#39;</span>:
<a name="l10273"></a>10273          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ref&#39;</span>:
<a name="l10274"></a>10274             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO_646.basic:1983&#39;</span>;
<a name="l10275"></a>10275 
<a name="l10276"></a>10276          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso2intlrefversion&#39;</span>:
<a name="l10277"></a>10277          <span class="keywordflow">case</span> <span class="stringliteral">&#39;irv&#39;</span>:
<a name="l10278"></a>10278          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso646irv1983&#39;</span>:
<a name="l10279"></a>10279          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir2&#39;</span>:
<a name="l10280"></a>10280             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO_646.irv:1983&#39;</span>;
<a name="l10281"></a>10281 
<a name="l10282"></a>10282          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso2033&#39;</span>:
<a name="l10283"></a>10283          <span class="keywordflow">case</span> <span class="stringliteral">&#39;e13b&#39;</span>:
<a name="l10284"></a>10284          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso20331983&#39;</span>:
<a name="l10285"></a>10285          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir98&#39;</span>:
<a name="l10286"></a>10286             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO_2033-1983&#39;</span>;
<a name="l10287"></a>10287 
<a name="l10288"></a>10288          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso5427cyrillic&#39;</span>:
<a name="l10289"></a>10289          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso5427&#39;</span>:
<a name="l10290"></a>10290          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir37&#39;</span>:
<a name="l10291"></a>10291             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO_5427&#39;</span>;
<a name="l10292"></a>10292 
<a name="l10293"></a>10293          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso5427cyrillic1981&#39;</span>:
<a name="l10294"></a>10294          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso54271981&#39;</span>:
<a name="l10295"></a>10295          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir54&#39;</span>:
<a name="l10296"></a>10296             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO_5427:1981&#39;</span>;
<a name="l10297"></a>10297 
<a name="l10298"></a>10298          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso5428greek&#39;</span>:
<a name="l10299"></a>10299          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso54281980&#39;</span>:
<a name="l10300"></a>10300          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir55&#39;</span>:
<a name="l10301"></a>10301             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO_5428:1980&#39;</span>;
<a name="l10302"></a>10302 
<a name="l10303"></a>10303          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso6937add&#39;</span>:
<a name="l10304"></a>10304          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso6937225&#39;</span>:
<a name="l10305"></a>10305          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir152&#39;</span>:
<a name="l10306"></a>10306             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO_6937-2-25&#39;</span>;
<a name="l10307"></a>10307 
<a name="l10308"></a>10308          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csisotextcomm&#39;</span>:
<a name="l10309"></a>10309          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso69372add&#39;</span>:
<a name="l10310"></a>10310          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir142&#39;</span>:
<a name="l10311"></a>10311             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO_6937-2-add&#39;</span>;
<a name="l10312"></a>10312 
<a name="l10313"></a>10313          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso8859supp&#39;</span>:
<a name="l10314"></a>10314          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso8859supp&#39;</span>:
<a name="l10315"></a>10315          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir154&#39;</span>:
<a name="l10316"></a>10316          <span class="keywordflow">case</span> <span class="stringliteral">&#39;latin125&#39;</span>:
<a name="l10317"></a>10317             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO_8859-supp&#39;</span>;
<a name="l10318"></a>10318 
<a name="l10319"></a>10319          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso10367box&#39;</span>:
<a name="l10320"></a>10320          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso10367box&#39;</span>:
<a name="l10321"></a>10321          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir155&#39;</span>:
<a name="l10322"></a>10322             <span class="keywordflow">return</span> <span class="stringliteral">&#39;ISO_10367-box&#39;</span>;
<a name="l10323"></a>10323 
<a name="l10324"></a>10324          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso15italian&#39;</span>:
<a name="l10325"></a>10325          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso646it&#39;</span>:
<a name="l10326"></a>10326          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir15&#39;</span>:
<a name="l10327"></a>10327          <span class="keywordflow">case</span> <span class="stringliteral">&#39;it&#39;</span>:
<a name="l10328"></a>10328             <span class="keywordflow">return</span> <span class="stringliteral">&#39;IT&#39;</span>;
<a name="l10329"></a>10329 
<a name="l10330"></a>10330          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso13jisc6220jp&#39;</span>:
<a name="l10331"></a>10331          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir13&#39;</span>:
<a name="l10332"></a>10332          <span class="keywordflow">case</span> <span class="stringliteral">&#39;jisc62201969&#39;</span>:
<a name="l10333"></a>10333          <span class="keywordflow">case</span> <span class="stringliteral">&#39;jisc62201969jp&#39;</span>:
<a name="l10334"></a>10334          <span class="keywordflow">case</span> <span class="stringliteral">&#39;katakana&#39;</span>:
<a name="l10335"></a>10335          <span class="keywordflow">case</span> <span class="stringliteral">&#39;x2017&#39;</span>:
<a name="l10336"></a>10336             <span class="keywordflow">return</span> <span class="stringliteral">&#39;JIS_C6220-1969-jp&#39;</span>;
<a name="l10337"></a>10337 
<a name="l10338"></a>10338          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso14jisc6220ro&#39;</span>:
<a name="l10339"></a>10339          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso646jp&#39;</span>:
<a name="l10340"></a>10340          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir14&#39;</span>:
<a name="l10341"></a>10341          <span class="keywordflow">case</span> <span class="stringliteral">&#39;jisc62201969ro&#39;</span>:
<a name="l10342"></a>10342          <span class="keywordflow">case</span> <span class="stringliteral">&#39;jp&#39;</span>:
<a name="l10343"></a>10343             <span class="keywordflow">return</span> <span class="stringliteral">&#39;JIS_C6220-1969-ro&#39;</span>;
<a name="l10344"></a>10344 
<a name="l10345"></a>10345          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso42jisc62261978&#39;</span>:
<a name="l10346"></a>10346          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir42&#39;</span>:
<a name="l10347"></a>10347          <span class="keywordflow">case</span> <span class="stringliteral">&#39;jisc62261978&#39;</span>:
<a name="l10348"></a>10348             <span class="keywordflow">return</span> <span class="stringliteral">&#39;JIS_C6226-1978&#39;</span>;
<a name="l10349"></a>10349 
<a name="l10350"></a>10350          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso87jisx208&#39;</span>:
<a name="l10351"></a>10351          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir87&#39;</span>:
<a name="l10352"></a>10352          <span class="keywordflow">case</span> <span class="stringliteral">&#39;jisc62261983&#39;</span>:
<a name="l10353"></a>10353          <span class="keywordflow">case</span> <span class="stringliteral">&#39;jisx2081983&#39;</span>:
<a name="l10354"></a>10354          <span class="keywordflow">case</span> <span class="stringliteral">&#39;x208&#39;</span>:
<a name="l10355"></a>10355             <span class="keywordflow">return</span> <span class="stringliteral">&#39;JIS_C6226-1983&#39;</span>;
<a name="l10356"></a>10356 
<a name="l10357"></a>10357          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso91jisc62291984a&#39;</span>:
<a name="l10358"></a>10358          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir91&#39;</span>:
<a name="l10359"></a>10359          <span class="keywordflow">case</span> <span class="stringliteral">&#39;jisc62291984a&#39;</span>:
<a name="l10360"></a>10360          <span class="keywordflow">case</span> <span class="stringliteral">&#39;jpocra&#39;</span>:
<a name="l10361"></a>10361             <span class="keywordflow">return</span> <span class="stringliteral">&#39;JIS_C6229-1984-a&#39;</span>;
<a name="l10362"></a>10362 
<a name="l10363"></a>10363          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso92jisc62991984b&#39;</span>:
<a name="l10364"></a>10364          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso646jpocrb&#39;</span>:
<a name="l10365"></a>10365          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir92&#39;</span>:
<a name="l10366"></a>10366          <span class="keywordflow">case</span> <span class="stringliteral">&#39;jisc62291984b&#39;</span>:
<a name="l10367"></a>10367          <span class="keywordflow">case</span> <span class="stringliteral">&#39;jpocrb&#39;</span>:
<a name="l10368"></a>10368             <span class="keywordflow">return</span> <span class="stringliteral">&#39;JIS_C6229-1984-b&#39;</span>;
<a name="l10369"></a>10369 
<a name="l10370"></a>10370          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso93jis62291984badd&#39;</span>:
<a name="l10371"></a>10371          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir93&#39;</span>:
<a name="l10372"></a>10372          <span class="keywordflow">case</span> <span class="stringliteral">&#39;jisc62291984badd&#39;</span>:
<a name="l10373"></a>10373          <span class="keywordflow">case</span> <span class="stringliteral">&#39;jpocrbadd&#39;</span>:
<a name="l10374"></a>10374             <span class="keywordflow">return</span> <span class="stringliteral">&#39;JIS_C6229-1984-b-add&#39;</span>;
<a name="l10375"></a>10375 
<a name="l10376"></a>10376          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso94jis62291984hand&#39;</span>:
<a name="l10377"></a>10377          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir94&#39;</span>:
<a name="l10378"></a>10378          <span class="keywordflow">case</span> <span class="stringliteral">&#39;jisc62291984hand&#39;</span>:
<a name="l10379"></a>10379          <span class="keywordflow">case</span> <span class="stringliteral">&#39;jpocrhand&#39;</span>:
<a name="l10380"></a>10380             <span class="keywordflow">return</span> <span class="stringliteral">&#39;JIS_C6229-1984-hand&#39;</span>;
<a name="l10381"></a>10381 
<a name="l10382"></a>10382          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso95jis62291984handadd&#39;</span>:
<a name="l10383"></a>10383          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir95&#39;</span>:
<a name="l10384"></a>10384          <span class="keywordflow">case</span> <span class="stringliteral">&#39;jisc62291984handadd&#39;</span>:
<a name="l10385"></a>10385          <span class="keywordflow">case</span> <span class="stringliteral">&#39;jpocrhandadd&#39;</span>:
<a name="l10386"></a>10386             <span class="keywordflow">return</span> <span class="stringliteral">&#39;JIS_C6229-1984-hand-add&#39;</span>;
<a name="l10387"></a>10387 
<a name="l10388"></a>10388          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso96jisc62291984kana&#39;</span>:
<a name="l10389"></a>10389          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir96&#39;</span>:
<a name="l10390"></a>10390          <span class="keywordflow">case</span> <span class="stringliteral">&#39;jisc62291984kana&#39;</span>:
<a name="l10391"></a>10391             <span class="keywordflow">return</span> <span class="stringliteral">&#39;JIS_C6229-1984-kana&#39;</span>;
<a name="l10392"></a>10392 
<a name="l10393"></a>10393          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csjisencoding&#39;</span>:
<a name="l10394"></a>10394          <span class="keywordflow">case</span> <span class="stringliteral">&#39;jisencoding&#39;</span>:
<a name="l10395"></a>10395             <span class="keywordflow">return</span> <span class="stringliteral">&#39;JIS_Encoding&#39;</span>;
<a name="l10396"></a>10396 
<a name="l10397"></a>10397          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cshalfwidthkatakana&#39;</span>:
<a name="l10398"></a>10398          <span class="keywordflow">case</span> <span class="stringliteral">&#39;jisx201&#39;</span>:
<a name="l10399"></a>10399          <span class="keywordflow">case</span> <span class="stringliteral">&#39;x201&#39;</span>:
<a name="l10400"></a>10400             <span class="keywordflow">return</span> <span class="stringliteral">&#39;JIS_X0201&#39;</span>;
<a name="l10401"></a>10401 
<a name="l10402"></a>10402          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso159jisx2121990&#39;</span>:
<a name="l10403"></a>10403          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir159&#39;</span>:
<a name="l10404"></a>10404          <span class="keywordflow">case</span> <span class="stringliteral">&#39;jisx2121990&#39;</span>:
<a name="l10405"></a>10405          <span class="keywordflow">case</span> <span class="stringliteral">&#39;x212&#39;</span>:
<a name="l10406"></a>10406             <span class="keywordflow">return</span> <span class="stringliteral">&#39;JIS_X0212-1990&#39;</span>;
<a name="l10407"></a>10407 
<a name="l10408"></a>10408          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso141jusib1002&#39;</span>:
<a name="l10409"></a>10409          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso646yu&#39;</span>:
<a name="l10410"></a>10410          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir141&#39;</span>:
<a name="l10411"></a>10411          <span class="keywordflow">case</span> <span class="stringliteral">&#39;js&#39;</span>:
<a name="l10412"></a>10412          <span class="keywordflow">case</span> <span class="stringliteral">&#39;jusib1002&#39;</span>:
<a name="l10413"></a>10413          <span class="keywordflow">case</span> <span class="stringliteral">&#39;yu&#39;</span>:
<a name="l10414"></a>10414             <span class="keywordflow">return</span> <span class="stringliteral">&#39;JUS_I.B1.002&#39;</span>;
<a name="l10415"></a>10415 
<a name="l10416"></a>10416          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso147macedonian&#39;</span>:
<a name="l10417"></a>10417          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir147&#39;</span>:
<a name="l10418"></a>10418          <span class="keywordflow">case</span> <span class="stringliteral">&#39;jusib1003mac&#39;</span>:
<a name="l10419"></a>10419          <span class="keywordflow">case</span> <span class="stringliteral">&#39;macedonian&#39;</span>:
<a name="l10420"></a>10420             <span class="keywordflow">return</span> <span class="stringliteral">&#39;JUS_I.B1.003-mac&#39;</span>;
<a name="l10421"></a>10421 
<a name="l10422"></a>10422          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso146serbian&#39;</span>:
<a name="l10423"></a>10423          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir146&#39;</span>:
<a name="l10424"></a>10424          <span class="keywordflow">case</span> <span class="stringliteral">&#39;jusib1003serb&#39;</span>:
<a name="l10425"></a>10425          <span class="keywordflow">case</span> <span class="stringliteral">&#39;serbian&#39;</span>:
<a name="l10426"></a>10426             <span class="keywordflow">return</span> <span class="stringliteral">&#39;JUS_I.B1.003-serb&#39;</span>;
<a name="l10427"></a>10427 
<a name="l10428"></a>10428          <span class="keywordflow">case</span> <span class="stringliteral">&#39;koi7switched&#39;</span>:
<a name="l10429"></a>10429             <span class="keywordflow">return</span> <span class="stringliteral">&#39;KOI7-switched&#39;</span>;
<a name="l10430"></a>10430 
<a name="l10431"></a>10431          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cskoi8r&#39;</span>:
<a name="l10432"></a>10432          <span class="keywordflow">case</span> <span class="stringliteral">&#39;koi8r&#39;</span>:
<a name="l10433"></a>10433             <span class="keywordflow">return</span> <span class="stringliteral">&#39;KOI8-R&#39;</span>;
<a name="l10434"></a>10434 
<a name="l10435"></a>10435          <span class="keywordflow">case</span> <span class="stringliteral">&#39;koi8u&#39;</span>:
<a name="l10436"></a>10436             <span class="keywordflow">return</span> <span class="stringliteral">&#39;KOI8-U&#39;</span>;
<a name="l10437"></a>10437 
<a name="l10438"></a>10438          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csksc5636&#39;</span>:
<a name="l10439"></a>10439          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso646kr&#39;</span>:
<a name="l10440"></a>10440          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ksc5636&#39;</span>:
<a name="l10441"></a>10441             <span class="keywordflow">return</span> <span class="stringliteral">&#39;KSC5636&#39;</span>;
<a name="l10442"></a>10442 
<a name="l10443"></a>10443          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cskz1048&#39;</span>:
<a name="l10444"></a>10444          <span class="keywordflow">case</span> <span class="stringliteral">&#39;kz1048&#39;</span>:
<a name="l10445"></a>10445          <span class="keywordflow">case</span> <span class="stringliteral">&#39;rk1048&#39;</span>:
<a name="l10446"></a>10446          <span class="keywordflow">case</span> <span class="stringliteral">&#39;strk10482002&#39;</span>:
<a name="l10447"></a>10447             <span class="keywordflow">return</span> <span class="stringliteral">&#39;KZ-1048&#39;</span>;
<a name="l10448"></a>10448 
<a name="l10449"></a>10449          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso19latingreek&#39;</span>:
<a name="l10450"></a>10450          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir19&#39;</span>:
<a name="l10451"></a>10451          <span class="keywordflow">case</span> <span class="stringliteral">&#39;latingreek&#39;</span>:
<a name="l10452"></a>10452             <span class="keywordflow">return</span> <span class="stringliteral">&#39;latin-greek&#39;</span>;
<a name="l10453"></a>10453 
<a name="l10454"></a>10454          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso27latingreek1&#39;</span>:
<a name="l10455"></a>10455          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir27&#39;</span>:
<a name="l10456"></a>10456          <span class="keywordflow">case</span> <span class="stringliteral">&#39;latingreek1&#39;</span>:
<a name="l10457"></a>10457             <span class="keywordflow">return</span> <span class="stringliteral">&#39;Latin-greek-1&#39;</span>;
<a name="l10458"></a>10458 
<a name="l10459"></a>10459          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso158lap&#39;</span>:
<a name="l10460"></a>10460          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir158&#39;</span>:
<a name="l10461"></a>10461          <span class="keywordflow">case</span> <span class="stringliteral">&#39;lap&#39;</span>:
<a name="l10462"></a>10462          <span class="keywordflow">case</span> <span class="stringliteral">&#39;latinlap&#39;</span>:
<a name="l10463"></a>10463             <span class="keywordflow">return</span> <span class="stringliteral">&#39;latin-lap&#39;</span>;
<a name="l10464"></a>10464 
<a name="l10465"></a>10465          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csmacintosh&#39;</span>:
<a name="l10466"></a>10466          <span class="keywordflow">case</span> <span class="stringliteral">&#39;mac&#39;</span>:
<a name="l10467"></a>10467          <span class="keywordflow">case</span> <span class="stringliteral">&#39;macintosh&#39;</span>:
<a name="l10468"></a>10468             <span class="keywordflow">return</span> <span class="stringliteral">&#39;macintosh&#39;</span>;
<a name="l10469"></a>10469 
<a name="l10470"></a>10470          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csmicrosoftpublishing&#39;</span>:
<a name="l10471"></a>10471          <span class="keywordflow">case</span> <span class="stringliteral">&#39;microsoftpublishing&#39;</span>:
<a name="l10472"></a>10472             <span class="keywordflow">return</span> <span class="stringliteral">&#39;Microsoft-Publishing&#39;</span>;
<a name="l10473"></a>10473 
<a name="l10474"></a>10474          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csmnem&#39;</span>:
<a name="l10475"></a>10475          <span class="keywordflow">case</span> <span class="stringliteral">&#39;mnem&#39;</span>:
<a name="l10476"></a>10476             <span class="keywordflow">return</span> <span class="stringliteral">&#39;MNEM&#39;</span>;
<a name="l10477"></a>10477 
<a name="l10478"></a>10478          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csmnemonic&#39;</span>:
<a name="l10479"></a>10479          <span class="keywordflow">case</span> <span class="stringliteral">&#39;mnemonic&#39;</span>:
<a name="l10480"></a>10480             <span class="keywordflow">return</span> <span class="stringliteral">&#39;MNEMONIC&#39;</span>;
<a name="l10481"></a>10481 
<a name="l10482"></a>10482          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso86hungarian&#39;</span>:
<a name="l10483"></a>10483          <span class="keywordflow">case</span> <span class="stringliteral">&#39;hu&#39;</span>:
<a name="l10484"></a>10484          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso646hu&#39;</span>:
<a name="l10485"></a>10485          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir86&#39;</span>:
<a name="l10486"></a>10486          <span class="keywordflow">case</span> <span class="stringliteral">&#39;msz77953&#39;</span>:
<a name="l10487"></a>10487             <span class="keywordflow">return</span> <span class="stringliteral">&#39;MSZ_7795.3&#39;</span>;
<a name="l10488"></a>10488 
<a name="l10489"></a>10489          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csnatsdano&#39;</span>:
<a name="l10490"></a>10490          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir91&#39;</span>:
<a name="l10491"></a>10491          <span class="keywordflow">case</span> <span class="stringliteral">&#39;natsdano&#39;</span>:
<a name="l10492"></a>10492             <span class="keywordflow">return</span> <span class="stringliteral">&#39;NATS-DANO&#39;</span>;
<a name="l10493"></a>10493 
<a name="l10494"></a>10494          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csnatsdanoadd&#39;</span>:
<a name="l10495"></a>10495          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir92&#39;</span>:
<a name="l10496"></a>10496          <span class="keywordflow">case</span> <span class="stringliteral">&#39;natsdanoadd&#39;</span>:
<a name="l10497"></a>10497             <span class="keywordflow">return</span> <span class="stringliteral">&#39;NATS-DANO-ADD&#39;</span>;
<a name="l10498"></a>10498 
<a name="l10499"></a>10499          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csnatssefi&#39;</span>:
<a name="l10500"></a>10500          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir81&#39;</span>:
<a name="l10501"></a>10501          <span class="keywordflow">case</span> <span class="stringliteral">&#39;natssefi&#39;</span>:
<a name="l10502"></a>10502             <span class="keywordflow">return</span> <span class="stringliteral">&#39;NATS-SEFI&#39;</span>;
<a name="l10503"></a>10503 
<a name="l10504"></a>10504          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csnatssefiadd&#39;</span>:
<a name="l10505"></a>10505          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir82&#39;</span>:
<a name="l10506"></a>10506          <span class="keywordflow">case</span> <span class="stringliteral">&#39;natssefiadd&#39;</span>:
<a name="l10507"></a>10507             <span class="keywordflow">return</span> <span class="stringliteral">&#39;NATS-SEFI-ADD&#39;</span>;
<a name="l10508"></a>10508 
<a name="l10509"></a>10509          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso151cuba&#39;</span>:
<a name="l10510"></a>10510          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cuba&#39;</span>:
<a name="l10511"></a>10511          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso646cu&#39;</span>:
<a name="l10512"></a>10512          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir151&#39;</span>:
<a name="l10513"></a>10513          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ncnc1081&#39;</span>:
<a name="l10514"></a>10514             <span class="keywordflow">return</span> <span class="stringliteral">&#39;NC_NC00-10:81&#39;</span>;
<a name="l10515"></a>10515 
<a name="l10516"></a>10516          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso69french&#39;</span>:
<a name="l10517"></a>10517          <span class="keywordflow">case</span> <span class="stringliteral">&#39;fr&#39;</span>:
<a name="l10518"></a>10518          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso646fr&#39;</span>:
<a name="l10519"></a>10519          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir69&#39;</span>:
<a name="l10520"></a>10520          <span class="keywordflow">case</span> <span class="stringliteral">&#39;nfz62010&#39;</span>:
<a name="l10521"></a>10521             <span class="keywordflow">return</span> <span class="stringliteral">&#39;NF_Z_62-010&#39;</span>;
<a name="l10522"></a>10522 
<a name="l10523"></a>10523          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso25french&#39;</span>:
<a name="l10524"></a>10524          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso646fr1&#39;</span>:
<a name="l10525"></a>10525          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir25&#39;</span>:
<a name="l10526"></a>10526          <span class="keywordflow">case</span> <span class="stringliteral">&#39;nfz620101973&#39;</span>:
<a name="l10527"></a>10527             <span class="keywordflow">return</span> <span class="stringliteral">&#39;NF_Z_62-010_(1973)&#39;</span>;
<a name="l10528"></a>10528 
<a name="l10529"></a>10529          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso60danishnorwegian&#39;</span>:
<a name="l10530"></a>10530          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso60norwegian1&#39;</span>:
<a name="l10531"></a>10531          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso646no&#39;</span>:
<a name="l10532"></a>10532          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir60&#39;</span>:
<a name="l10533"></a>10533          <span class="keywordflow">case</span> <span class="stringliteral">&#39;no&#39;</span>:
<a name="l10534"></a>10534          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ns45511&#39;</span>:
<a name="l10535"></a>10535             <span class="keywordflow">return</span> <span class="stringliteral">&#39;NS_4551-1&#39;</span>;
<a name="l10536"></a>10536 
<a name="l10537"></a>10537          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso61norwegian2&#39;</span>:
<a name="l10538"></a>10538          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso646no2&#39;</span>:
<a name="l10539"></a>10539          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir61&#39;</span>:
<a name="l10540"></a>10540          <span class="keywordflow">case</span> <span class="stringliteral">&#39;no2&#39;</span>:
<a name="l10541"></a>10541          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ns45512&#39;</span>:
<a name="l10542"></a>10542             <span class="keywordflow">return</span> <span class="stringliteral">&#39;NS_4551-2&#39;</span>;
<a name="l10543"></a>10543 
<a name="l10544"></a>10544          <span class="keywordflow">case</span> <span class="stringliteral">&#39;osdebcdicdf3irv&#39;</span>:
<a name="l10545"></a>10545             <span class="keywordflow">return</span> <span class="stringliteral">&#39;OSD_EBCDIC_DF03_IRV&#39;</span>;
<a name="l10546"></a>10546 
<a name="l10547"></a>10547          <span class="keywordflow">case</span> <span class="stringliteral">&#39;osdebcdicdf41&#39;</span>:
<a name="l10548"></a>10548             <span class="keywordflow">return</span> <span class="stringliteral">&#39;OSD_EBCDIC_DF04_1&#39;</span>;
<a name="l10549"></a>10549 
<a name="l10550"></a>10550          <span class="keywordflow">case</span> <span class="stringliteral">&#39;osdebcdicdf415&#39;</span>:
<a name="l10551"></a>10551             <span class="keywordflow">return</span> <span class="stringliteral">&#39;OSD_EBCDIC_DF04_15&#39;</span>;
<a name="l10552"></a>10552 
<a name="l10553"></a>10553          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cspc8danishnorwegian&#39;</span>:
<a name="l10554"></a>10554          <span class="keywordflow">case</span> <span class="stringliteral">&#39;pc8danishnorwegian&#39;</span>:
<a name="l10555"></a>10555             <span class="keywordflow">return</span> <span class="stringliteral">&#39;PC8-Danish-Norwegian&#39;</span>;
<a name="l10556"></a>10556 
<a name="l10557"></a>10557          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cspc8turkish&#39;</span>:
<a name="l10558"></a>10558          <span class="keywordflow">case</span> <span class="stringliteral">&#39;pc8turkish&#39;</span>:
<a name="l10559"></a>10559             <span class="keywordflow">return</span> <span class="stringliteral">&#39;PC8-Turkish&#39;</span>;
<a name="l10560"></a>10560 
<a name="l10561"></a>10561          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso16portuguese&#39;</span>:
<a name="l10562"></a>10562          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso646pt&#39;</span>:
<a name="l10563"></a>10563          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir16&#39;</span>:
<a name="l10564"></a>10564          <span class="keywordflow">case</span> <span class="stringliteral">&#39;pt&#39;</span>:
<a name="l10565"></a>10565             <span class="keywordflow">return</span> <span class="stringliteral">&#39;PT&#39;</span>;
<a name="l10566"></a>10566 
<a name="l10567"></a>10567          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso84portuguese2&#39;</span>:
<a name="l10568"></a>10568          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso646pt2&#39;</span>:
<a name="l10569"></a>10569          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir84&#39;</span>:
<a name="l10570"></a>10570          <span class="keywordflow">case</span> <span class="stringliteral">&#39;pt2&#39;</span>:
<a name="l10571"></a>10571             <span class="keywordflow">return</span> <span class="stringliteral">&#39;PT2&#39;</span>;
<a name="l10572"></a>10572 
<a name="l10573"></a>10573          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp154&#39;</span>:
<a name="l10574"></a>10574          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csptcp154&#39;</span>:
<a name="l10575"></a>10575          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cyrillicasian&#39;</span>:
<a name="l10576"></a>10576          <span class="keywordflow">case</span> <span class="stringliteral">&#39;pt154&#39;</span>:
<a name="l10577"></a>10577          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ptcp154&#39;</span>:
<a name="l10578"></a>10578             <span class="keywordflow">return</span> <span class="stringliteral">&#39;PTCP154&#39;</span>;
<a name="l10579"></a>10579 
<a name="l10580"></a>10580          <span class="keywordflow">case</span> <span class="stringliteral">&#39;scsu&#39;</span>:
<a name="l10581"></a>10581             <span class="keywordflow">return</span> <span class="stringliteral">&#39;SCSU&#39;</span>;
<a name="l10582"></a>10582 
<a name="l10583"></a>10583          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso10swedish&#39;</span>:
<a name="l10584"></a>10584          <span class="keywordflow">case</span> <span class="stringliteral">&#39;fi&#39;</span>:
<a name="l10585"></a>10585          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso646fi&#39;</span>:
<a name="l10586"></a>10586          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso646se&#39;</span>:
<a name="l10587"></a>10587          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir10&#39;</span>:
<a name="l10588"></a>10588          <span class="keywordflow">case</span> <span class="stringliteral">&#39;se&#39;</span>:
<a name="l10589"></a>10589          <span class="keywordflow">case</span> <span class="stringliteral">&#39;sen850200b&#39;</span>:
<a name="l10590"></a>10590             <span class="keywordflow">return</span> <span class="stringliteral">&#39;SEN_850200_B&#39;</span>;
<a name="l10591"></a>10591 
<a name="l10592"></a>10592          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso11swedishfornames&#39;</span>:
<a name="l10593"></a>10593          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso646se2&#39;</span>:
<a name="l10594"></a>10594          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir11&#39;</span>:
<a name="l10595"></a>10595          <span class="keywordflow">case</span> <span class="stringliteral">&#39;se2&#39;</span>:
<a name="l10596"></a>10596          <span class="keywordflow">case</span> <span class="stringliteral">&#39;sen850200c&#39;</span>:
<a name="l10597"></a>10597             <span class="keywordflow">return</span> <span class="stringliteral">&#39;SEN_850200_C&#39;</span>;
<a name="l10598"></a>10598 
<a name="l10599"></a>10599          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csshiftjis&#39;</span>:
<a name="l10600"></a>10600          <span class="keywordflow">case</span> <span class="stringliteral">&#39;mskanji&#39;</span>:
<a name="l10601"></a>10601          <span class="keywordflow">case</span> <span class="stringliteral">&#39;shiftjis&#39;</span>:
<a name="l10602"></a>10602             <span class="keywordflow">return</span> <span class="stringliteral">&#39;Shift_JIS&#39;</span>;
<a name="l10603"></a>10603 
<a name="l10604"></a>10604          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso102t617bit&#39;</span>:
<a name="l10605"></a>10605          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir102&#39;</span>:
<a name="l10606"></a>10606          <span class="keywordflow">case</span> <span class="stringliteral">&#39;t617bit&#39;</span>:
<a name="l10607"></a>10607             <span class="keywordflow">return</span> <span class="stringliteral">&#39;T.61-7bit&#39;</span>;
<a name="l10608"></a>10608 
<a name="l10609"></a>10609          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso103t618bit&#39;</span>:
<a name="l10610"></a>10610          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir103&#39;</span>:
<a name="l10611"></a>10611          <span class="keywordflow">case</span> <span class="stringliteral">&#39;t61&#39;</span>:
<a name="l10612"></a>10612          <span class="keywordflow">case</span> <span class="stringliteral">&#39;t618bit&#39;</span>:
<a name="l10613"></a>10613             <span class="keywordflow">return</span> <span class="stringliteral">&#39;T.61-8bit&#39;</span>;
<a name="l10614"></a>10614 
<a name="l10615"></a>10615          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso128t101g2&#39;</span>:
<a name="l10616"></a>10616          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir128&#39;</span>:
<a name="l10617"></a>10617          <span class="keywordflow">case</span> <span class="stringliteral">&#39;t101g2&#39;</span>:
<a name="l10618"></a>10618             <span class="keywordflow">return</span> <span class="stringliteral">&#39;T.101-G2&#39;</span>;
<a name="l10619"></a>10619 
<a name="l10620"></a>10620          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cstscii&#39;</span>:
<a name="l10621"></a>10621          <span class="keywordflow">case</span> <span class="stringliteral">&#39;tscii&#39;</span>:
<a name="l10622"></a>10622             <span class="keywordflow">return</span> <span class="stringliteral">&#39;TSCII&#39;</span>;
<a name="l10623"></a>10623 
<a name="l10624"></a>10624          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csunicode11&#39;</span>:
<a name="l10625"></a>10625          <span class="keywordflow">case</span> <span class="stringliteral">&#39;unicode11&#39;</span>:
<a name="l10626"></a>10626             <span class="keywordflow">return</span> <span class="stringliteral">&#39;UNICODE-1-1&#39;</span>;
<a name="l10627"></a>10627 
<a name="l10628"></a>10628          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csunicode11utf7&#39;</span>:
<a name="l10629"></a>10629          <span class="keywordflow">case</span> <span class="stringliteral">&#39;unicode11utf7&#39;</span>:
<a name="l10630"></a>10630             <span class="keywordflow">return</span> <span class="stringliteral">&#39;UNICODE-1-1-UTF-7&#39;</span>;
<a name="l10631"></a>10631 
<a name="l10632"></a>10632          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csunknown8bit&#39;</span>:
<a name="l10633"></a>10633          <span class="keywordflow">case</span> <span class="stringliteral">&#39;unknown8bit&#39;</span>:
<a name="l10634"></a>10634             <span class="keywordflow">return</span> <span class="stringliteral">&#39;UNKNOWN-8BIT&#39;</span>;
<a name="l10635"></a>10635 
<a name="l10636"></a>10636          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ansix341968&#39;</span>:
<a name="l10637"></a>10637          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ansix341986&#39;</span>:
<a name="l10638"></a>10638          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ascii&#39;</span>:
<a name="l10639"></a>10639          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp367&#39;</span>:
<a name="l10640"></a>10640          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csascii&#39;</span>:
<a name="l10641"></a>10641          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm367&#39;</span>:
<a name="l10642"></a>10642          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso646irv1991&#39;</span>:
<a name="l10643"></a>10643          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso646us&#39;</span>:
<a name="l10644"></a>10644          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir6&#39;</span>:
<a name="l10645"></a>10645          <span class="keywordflow">case</span> <span class="stringliteral">&#39;us&#39;</span>:
<a name="l10646"></a>10646          <span class="keywordflow">case</span> <span class="stringliteral">&#39;usascii&#39;</span>:
<a name="l10647"></a>10647             <span class="keywordflow">return</span> <span class="stringliteral">&#39;US-ASCII&#39;</span>;
<a name="l10648"></a>10648 
<a name="l10649"></a>10649          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csusdk&#39;</span>:
<a name="l10650"></a>10650          <span class="keywordflow">case</span> <span class="stringliteral">&#39;usdk&#39;</span>:
<a name="l10651"></a>10651             <span class="keywordflow">return</span> <span class="stringliteral">&#39;us-dk&#39;</span>;
<a name="l10652"></a>10652 
<a name="l10653"></a>10653          <span class="keywordflow">case</span> <span class="stringliteral">&#39;utf7&#39;</span>:
<a name="l10654"></a>10654             <span class="keywordflow">return</span> <span class="stringliteral">&#39;UTF-7&#39;</span>;
<a name="l10655"></a>10655 
<a name="l10656"></a>10656          <span class="keywordflow">case</span> <span class="stringliteral">&#39;utf8&#39;</span>:
<a name="l10657"></a>10657             <span class="keywordflow">return</span> <span class="stringliteral">&#39;UTF-8&#39;</span>;
<a name="l10658"></a>10658 
<a name="l10659"></a>10659          <span class="keywordflow">case</span> <span class="stringliteral">&#39;utf16&#39;</span>:
<a name="l10660"></a>10660             <span class="keywordflow">return</span> <span class="stringliteral">&#39;UTF-16&#39;</span>;
<a name="l10661"></a>10661 
<a name="l10662"></a>10662          <span class="keywordflow">case</span> <span class="stringliteral">&#39;utf16be&#39;</span>:
<a name="l10663"></a>10663             <span class="keywordflow">return</span> <span class="stringliteral">&#39;UTF-16BE&#39;</span>;
<a name="l10664"></a>10664 
<a name="l10665"></a>10665          <span class="keywordflow">case</span> <span class="stringliteral">&#39;utf16le&#39;</span>:
<a name="l10666"></a>10666             <span class="keywordflow">return</span> <span class="stringliteral">&#39;UTF-16LE&#39;</span>;
<a name="l10667"></a>10667 
<a name="l10668"></a>10668          <span class="keywordflow">case</span> <span class="stringliteral">&#39;utf32&#39;</span>:
<a name="l10669"></a>10669             <span class="keywordflow">return</span> <span class="stringliteral">&#39;UTF-32&#39;</span>;
<a name="l10670"></a>10670 
<a name="l10671"></a>10671          <span class="keywordflow">case</span> <span class="stringliteral">&#39;utf32be&#39;</span>:
<a name="l10672"></a>10672             <span class="keywordflow">return</span> <span class="stringliteral">&#39;UTF-32BE&#39;</span>;
<a name="l10673"></a>10673 
<a name="l10674"></a>10674          <span class="keywordflow">case</span> <span class="stringliteral">&#39;utf32le&#39;</span>:
<a name="l10675"></a>10675             <span class="keywordflow">return</span> <span class="stringliteral">&#39;UTF-32LE&#39;</span>;
<a name="l10676"></a>10676 
<a name="l10677"></a>10677          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csventurainternational&#39;</span>:
<a name="l10678"></a>10678          <span class="keywordflow">case</span> <span class="stringliteral">&#39;venturainternational&#39;</span>:
<a name="l10679"></a>10679             <span class="keywordflow">return</span> <span class="stringliteral">&#39;Ventura-International&#39;</span>;
<a name="l10680"></a>10680 
<a name="l10681"></a>10681          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csventuramath&#39;</span>:
<a name="l10682"></a>10682          <span class="keywordflow">case</span> <span class="stringliteral">&#39;venturamath&#39;</span>:
<a name="l10683"></a>10683             <span class="keywordflow">return</span> <span class="stringliteral">&#39;Ventura-Math&#39;</span>;
<a name="l10684"></a>10684 
<a name="l10685"></a>10685          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csventuraus&#39;</span>:
<a name="l10686"></a>10686          <span class="keywordflow">case</span> <span class="stringliteral">&#39;venturaus&#39;</span>:
<a name="l10687"></a>10687             <span class="keywordflow">return</span> <span class="stringliteral">&#39;Ventura-US&#39;</span>;
<a name="l10688"></a>10688 
<a name="l10689"></a>10689          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csiso70videotexsupp1&#39;</span>:
<a name="l10690"></a>10690          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir70&#39;</span>:
<a name="l10691"></a>10691          <span class="keywordflow">case</span> <span class="stringliteral">&#39;videotexsuppl&#39;</span>:
<a name="l10692"></a>10692             <span class="keywordflow">return</span> <span class="stringliteral">&#39;videotex-suppl&#39;</span>;
<a name="l10693"></a>10693 
<a name="l10694"></a>10694          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csviqr&#39;</span>:
<a name="l10695"></a>10695          <span class="keywordflow">case</span> <span class="stringliteral">&#39;viqr&#39;</span>:
<a name="l10696"></a>10696             <span class="keywordflow">return</span> <span class="stringliteral">&#39;VIQR&#39;</span>;
<a name="l10697"></a>10697 
<a name="l10698"></a>10698          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csviscii&#39;</span>:
<a name="l10699"></a>10699          <span class="keywordflow">case</span> <span class="stringliteral">&#39;viscii&#39;</span>:
<a name="l10700"></a>10700             <span class="keywordflow">return</span> <span class="stringliteral">&#39;VISCII&#39;</span>;
<a name="l10701"></a>10701 
<a name="l10702"></a>10702          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cswindows31j&#39;</span>:
<a name="l10703"></a>10703          <span class="keywordflow">case</span> <span class="stringliteral">&#39;windows31j&#39;</span>:
<a name="l10704"></a>10704             <span class="keywordflow">return</span> <span class="stringliteral">&#39;Windows-31J&#39;</span>;
<a name="l10705"></a>10705 
<a name="l10706"></a>10706          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso885911&#39;</span>:
<a name="l10707"></a>10707          <span class="keywordflow">case</span> <span class="stringliteral">&#39;tis620&#39;</span>:
<a name="l10708"></a>10708             <span class="keywordflow">return</span> <span class="stringliteral">&#39;windows-874&#39;</span>;
<a name="l10709"></a>10709 
<a name="l10710"></a>10710          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cseuckr&#39;</span>:
<a name="l10711"></a>10711          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csksc56011987&#39;</span>:
<a name="l10712"></a>10712          <span class="keywordflow">case</span> <span class="stringliteral">&#39;euckr&#39;</span>:
<a name="l10713"></a>10713          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir149&#39;</span>:
<a name="l10714"></a>10714          <span class="keywordflow">case</span> <span class="stringliteral">&#39;korean&#39;</span>:
<a name="l10715"></a>10715          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ksc5601&#39;</span>:
<a name="l10716"></a>10716          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ksc56011987&#39;</span>:
<a name="l10717"></a>10717          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ksc56011989&#39;</span>:
<a name="l10718"></a>10718          <span class="keywordflow">case</span> <span class="stringliteral">&#39;windows949&#39;</span>:
<a name="l10719"></a>10719             <span class="keywordflow">return</span> <span class="stringliteral">&#39;windows-949&#39;</span>;
<a name="l10720"></a>10720 
<a name="l10721"></a>10721          <span class="keywordflow">case</span> <span class="stringliteral">&#39;windows1250&#39;</span>:
<a name="l10722"></a>10722             <span class="keywordflow">return</span> <span class="stringliteral">&#39;windows-1250&#39;</span>;
<a name="l10723"></a>10723 
<a name="l10724"></a>10724          <span class="keywordflow">case</span> <span class="stringliteral">&#39;windows1251&#39;</span>:
<a name="l10725"></a>10725             <span class="keywordflow">return</span> <span class="stringliteral">&#39;windows-1251&#39;</span>;
<a name="l10726"></a>10726 
<a name="l10727"></a>10727          <span class="keywordflow">case</span> <span class="stringliteral">&#39;cp819&#39;</span>:
<a name="l10728"></a>10728          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csisolatin1&#39;</span>:
<a name="l10729"></a>10729          <span class="keywordflow">case</span> <span class="stringliteral">&#39;ibm819&#39;</span>:
<a name="l10730"></a>10730          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso88591&#39;</span>:
<a name="l10731"></a>10731          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso885911987&#39;</span>:
<a name="l10732"></a>10732          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir100&#39;</span>:
<a name="l10733"></a>10733          <span class="keywordflow">case</span> <span class="stringliteral">&#39;l1&#39;</span>:
<a name="l10734"></a>10734          <span class="keywordflow">case</span> <span class="stringliteral">&#39;latin1&#39;</span>:
<a name="l10735"></a>10735          <span class="keywordflow">case</span> <span class="stringliteral">&#39;windows1252&#39;</span>:
<a name="l10736"></a>10736             <span class="keywordflow">return</span> <span class="stringliteral">&#39;windows-1252&#39;</span>;
<a name="l10737"></a>10737 
<a name="l10738"></a>10738          <span class="keywordflow">case</span> <span class="stringliteral">&#39;windows1253&#39;</span>:
<a name="l10739"></a>10739             <span class="keywordflow">return</span> <span class="stringliteral">&#39;windows-1253&#39;</span>;
<a name="l10740"></a>10740 
<a name="l10741"></a>10741          <span class="keywordflow">case</span> <span class="stringliteral">&#39;csisolatin5&#39;</span>:
<a name="l10742"></a>10742          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso88599&#39;</span>:
<a name="l10743"></a>10743          <span class="keywordflow">case</span> <span class="stringliteral">&#39;iso885991989&#39;</span>:
<a name="l10744"></a>10744          <span class="keywordflow">case</span> <span class="stringliteral">&#39;isoir148&#39;</span>:
<a name="l10745"></a>10745          <span class="keywordflow">case</span> <span class="stringliteral">&#39;l5&#39;</span>:
<a name="l10746"></a>10746          <span class="keywordflow">case</span> <span class="stringliteral">&#39;latin5&#39;</span>:
<a name="l10747"></a>10747          <span class="keywordflow">case</span> <span class="stringliteral">&#39;windows1254&#39;</span>:
<a name="l10748"></a>10748             <span class="keywordflow">return</span> <span class="stringliteral">&#39;windows-1254&#39;</span>;
<a name="l10749"></a>10749 
<a name="l10750"></a>10750          <span class="keywordflow">case</span> <span class="stringliteral">&#39;windows1255&#39;</span>:
<a name="l10751"></a>10751             <span class="keywordflow">return</span> <span class="stringliteral">&#39;windows-1255&#39;</span>;
<a name="l10752"></a>10752 
<a name="l10753"></a>10753          <span class="keywordflow">case</span> <span class="stringliteral">&#39;windows1256&#39;</span>:
<a name="l10754"></a>10754             <span class="keywordflow">return</span> <span class="stringliteral">&#39;windows-1256&#39;</span>;
<a name="l10755"></a>10755 
<a name="l10756"></a>10756          <span class="keywordflow">case</span> <span class="stringliteral">&#39;windows1257&#39;</span>:
<a name="l10757"></a>10757             <span class="keywordflow">return</span> <span class="stringliteral">&#39;windows-1257&#39;</span>;
<a name="l10758"></a>10758 
<a name="l10759"></a>10759          <span class="keywordflow">case</span> <span class="stringliteral">&#39;windows1258&#39;</span>:
<a name="l10760"></a>10760             <span class="keywordflow">return</span> <span class="stringliteral">&#39;windows-1258&#39;</span>;
<a name="l10761"></a>10761 
<a name="l10762"></a>10762          <span class="keywordflow">default</span>:
<a name="l10763"></a>10763             <span class="keywordflow">return</span> $charset;
<a name="l10764"></a>10764       }
<a name="l10765"></a>10765    }
<a name="l10766"></a>10766 
<a name="l10767"></a>10767    <span class="keyword">function</span> get_curl_version()
<a name="l10768"></a>10768    {
<a name="l10769"></a>10769       <span class="keywordflow">if</span> (is_array($curl = curl_version()))
<a name="l10770"></a>10770       {
<a name="l10771"></a>10771          $curl = $curl[<span class="stringliteral">&#39;version&#39;</span>];
<a name="l10772"></a>10772       }
<a name="l10773"></a>10773       elseif (substr($curl, 0, 5) === <span class="stringliteral">&#39;curl/&#39;</span>)
<a name="l10774"></a>10774       {
<a name="l10775"></a>10775          $curl = substr($curl, 5, strcspn($curl, <span class="stringliteral">&quot;\x09\x0A\x0B\x0C\x0D&quot;</span>, 5));
<a name="l10776"></a>10776       }
<a name="l10777"></a>10777       elseif (substr($curl, 0, 8) === <span class="stringliteral">&#39;libcurl/&#39;</span>)
<a name="l10778"></a>10778       {
<a name="l10779"></a>10779          $curl = substr($curl, 8, strcspn($curl, <span class="stringliteral">&quot;\x09\x0A\x0B\x0C\x0D&quot;</span>, 8));
<a name="l10780"></a>10780       }
<a name="l10781"></a>10781       <span class="keywordflow">else</span>
<a name="l10782"></a>10782       {
<a name="l10783"></a>10783          $curl = 0;
<a name="l10784"></a>10784       }
<a name="l10785"></a>10785       <span class="keywordflow">return</span> $curl;
<a name="l10786"></a>10786    }
<a name="l10787"></a>10787 
<a name="l10788"></a>10788    <span class="keyword">function</span> is_subclass_of($class1, $class2)
<a name="l10789"></a>10789    {
<a name="l10790"></a>10790       <span class="keywordflow">if</span> (func_num_args() !== 2)
<a name="l10791"></a>10791       {
<a name="l10792"></a>10792          trigger_error(<span class="stringliteral">&#39;Wrong parameter count for SimplePie_Misc::is_subclass_of()&#39;</span>, E_USER_WARNING);
<a name="l10793"></a>10793       }
<a name="l10794"></a>10794       elseif (version_compare(PHP_VERSION, <span class="stringliteral">&#39;5.0.3&#39;</span>, <span class="stringliteral">&#39;&gt;=&#39;</span>) || is_object($class1))
<a name="l10795"></a>10795       {
<a name="l10796"></a>10796          <span class="keywordflow">return</span> is_subclass_of($class1, $class2);
<a name="l10797"></a>10797       }
<a name="l10798"></a>10798       elseif (is_string($class1) &amp;&amp; is_string($class2))
<a name="l10799"></a>10799       {
<a name="l10800"></a>10800          <span class="keywordflow">if</span> (class_exists($class1))
<a name="l10801"></a>10801          {
<a name="l10802"></a>10802             <span class="keywordflow">if</span> (class_exists($class2))
<a name="l10803"></a>10803             {
<a name="l10804"></a>10804                $class2 = strtolower($class2);
<a name="l10805"></a>10805                <span class="keywordflow">while</span> ($class1 = strtolower(get_parent_class($class1)))
<a name="l10806"></a>10806                {
<a name="l10807"></a>10807                   <span class="keywordflow">if</span> ($class1 === $class2)
<a name="l10808"></a>10808                   {
<a name="l10809"></a>10809                      <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l10810"></a>10810                   }
<a name="l10811"></a>10811                }
<a name="l10812"></a>10812             }
<a name="l10813"></a>10813          }
<a name="l10814"></a>10814          <span class="keywordflow">else</span>
<a name="l10815"></a>10815          {
<a name="l10816"></a>10816             trigger_error(<span class="stringliteral">&#39;Unknown class passed as parameter&#39;</span>, E_USER_WARNNG);
<a name="l10817"></a>10817          }
<a name="l10818"></a>10818       }
<a name="l10819"></a>10819       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l10820"></a>10820    }
<a name="l10821"></a>10821 <span class="comment"></span>
<a name="l10822"></a>10822 <span class="comment">   /**</span>
<a name="l10823"></a>10823 <span class="comment">    * Strip HTML comments</span>
<a name="l10824"></a>10824 <span class="comment">    *</span>
<a name="l10825"></a>10825 <span class="comment">    * @access public</span>
<a name="l10826"></a>10826 <span class="comment">    * @param string $data Data to strip comments from</span>
<a name="l10827"></a>10827 <span class="comment">    * @return string Comment stripped string</span>
<a name="l10828"></a>10828 <span class="comment">    */</span>
<a name="l10829"></a><a class="code" href="class_simple_pie___misc.html#a2436650ba85a28e64af9d386c1d600e0">10829</a>    <span class="keyword">function</span> strip_comments($data)
<a name="l10830"></a>10830    {
<a name="l10831"></a>10831       $output = <span class="stringliteral">&#39;&#39;</span>;
<a name="l10832"></a>10832       <span class="keywordflow">while</span> (($start = strpos($data, <span class="stringliteral">&#39;&lt;!--&#39;</span>)) !== <span class="keyword">false</span>)
<a name="l10833"></a>10833       {
<a name="l10834"></a>10834          $output .= substr($data, 0, $start);
<a name="l10835"></a>10835          <span class="keywordflow">if</span> (($end = strpos($data, <span class="stringliteral">&#39;--&gt;&#39;</span>, $start)) !== <span class="keyword">false</span>)
<a name="l10836"></a>10836          {
<a name="l10837"></a>10837             $data = substr_replace($data, <span class="stringliteral">&#39;&#39;</span>, 0, $end + 3);
<a name="l10838"></a>10838          }
<a name="l10839"></a>10839          <span class="keywordflow">else</span>
<a name="l10840"></a>10840          {
<a name="l10841"></a>10841             $data = <span class="stringliteral">&#39;&#39;</span>;
<a name="l10842"></a>10842          }
<a name="l10843"></a>10843       }
<a name="l10844"></a>10844       <span class="keywordflow">return</span> $output . $data;
<a name="l10845"></a>10845    }
<a name="l10846"></a>10846 
<a name="l10847"></a>10847    <span class="keyword">function</span> parse_date($dt)
<a name="l10848"></a>10848    {
<a name="l10849"></a>10849       $parser = <a class="code" href="class_simple_pie___parse___date.html#ac33ee765f5ad9f134540bac393721cfe">SimplePie_Parse_Date::get</a>();
<a name="l10850"></a>10850       <span class="keywordflow">return</span> $parser-&gt;parse($dt);
<a name="l10851"></a>10851    }
<a name="l10852"></a>10852 <span class="comment"></span>
<a name="l10853"></a>10853 <span class="comment">   /**</span>
<a name="l10854"></a>10854 <span class="comment">    * Decode HTML entities</span>
<a name="l10855"></a>10855 <span class="comment">    *</span>
<a name="l10856"></a>10856 <span class="comment">    * @static</span>
<a name="l10857"></a>10857 <span class="comment">    * @access public</span>
<a name="l10858"></a>10858 <span class="comment">    * @param string $data Input data</span>
<a name="l10859"></a>10859 <span class="comment">    * @return string Output data</span>
<a name="l10860"></a>10860 <span class="comment">    */</span>
<a name="l10861"></a><a class="code" href="class_simple_pie___misc.html#a0059877abeb2a9ab92cd6402a21a9728">10861</a>    <span class="keyword">function</span> entities_decode($data)
<a name="l10862"></a>10862    {
<a name="l10863"></a>10863       $decoder =&amp; <span class="keyword">new</span> <a class="code" href="class_simple_pie___decode___h_t_m_l___entities.html">SimplePie_Decode_HTML_Entities</a>($data);
<a name="l10864"></a>10864       <span class="keywordflow">return</span> $decoder-&gt;parse();
<a name="l10865"></a>10865    }
<a name="l10866"></a>10866 <span class="comment"></span>
<a name="l10867"></a>10867 <span class="comment">   /**</span>
<a name="l10868"></a>10868 <span class="comment">    * Remove RFC822 comments</span>
<a name="l10869"></a>10869 <span class="comment">    *</span>
<a name="l10870"></a>10870 <span class="comment">    * @access public</span>
<a name="l10871"></a>10871 <span class="comment">    * @param string $data Data to strip comments from</span>
<a name="l10872"></a>10872 <span class="comment">    * @return string Comment stripped string</span>
<a name="l10873"></a>10873 <span class="comment">    */</span>
<a name="l10874"></a><a class="code" href="class_simple_pie___misc.html#ab0ba597f23fafab60135ff79eca67223">10874</a>    <span class="keyword">function</span> uncomment_rfc822($string)
<a name="l10875"></a>10875    {
<a name="l10876"></a>10876       $string = (string) $string;
<a name="l10877"></a>10877       $position = 0;
<a name="l10878"></a>10878       $length = strlen($string);
<a name="l10879"></a>10879       $depth = 0;
<a name="l10880"></a>10880 
<a name="l10881"></a>10881       $output = <span class="stringliteral">&#39;&#39;</span>;
<a name="l10882"></a>10882 
<a name="l10883"></a>10883       <span class="keywordflow">while</span> ($position &lt; $length &amp;&amp; ($pos = strpos($string, <span class="charliteral">&#39;(&#39;</span>, $position)) !== <span class="keyword">false</span>)
<a name="l10884"></a>10884       {
<a name="l10885"></a>10885          $output .= substr($string, $position, $pos - $position);
<a name="l10886"></a>10886          $position = $pos + 1;
<a name="l10887"></a>10887          <span class="keywordflow">if</span> ($string[$pos - 1] !== <span class="charliteral">&#39;\\&#39;</span>)
<a name="l10888"></a>10888          {
<a name="l10889"></a>10889             $depth++;
<a name="l10890"></a>10890             <span class="keywordflow">while</span> ($depth &amp;&amp; $position &lt; $length)
<a name="l10891"></a>10891             {
<a name="l10892"></a>10892                $position += strcspn($string, <span class="stringliteral">&#39;()&#39;</span>, $position);
<a name="l10893"></a>10893                <span class="keywordflow">if</span> ($string[$position - 1] === <span class="charliteral">&#39;\\&#39;</span>)
<a name="l10894"></a>10894                {
<a name="l10895"></a>10895                   $position++;
<a name="l10896"></a>10896                   <span class="keywordflow">continue</span>;
<a name="l10897"></a>10897                }
<a name="l10898"></a>10898                elseif (isset($string[$position]))
<a name="l10899"></a>10899                {
<a name="l10900"></a>10900                   <span class="keywordflow">switch</span> ($string[$position])
<a name="l10901"></a>10901                   {
<a name="l10902"></a>10902                      <span class="keywordflow">case</span> <span class="charliteral">&#39;(&#39;</span>:
<a name="l10903"></a>10903                         $depth++;
<a name="l10904"></a>10904                         <span class="keywordflow">break</span>;
<a name="l10905"></a>10905 
<a name="l10906"></a>10906                      <span class="keywordflow">case</span> <span class="charliteral">&#39;)&#39;</span>:
<a name="l10907"></a>10907                         $depth--;
<a name="l10908"></a>10908                         <span class="keywordflow">break</span>;
<a name="l10909"></a>10909                   }
<a name="l10910"></a>10910                   $position++;
<a name="l10911"></a>10911                }
<a name="l10912"></a>10912                <span class="keywordflow">else</span>
<a name="l10913"></a>10913                {
<a name="l10914"></a>10914                   <span class="keywordflow">break</span>;
<a name="l10915"></a>10915                }
<a name="l10916"></a>10916             }
<a name="l10917"></a>10917          }
<a name="l10918"></a>10918          <span class="keywordflow">else</span>
<a name="l10919"></a>10919          {
<a name="l10920"></a>10920             $output .= <span class="charliteral">&#39;(&#39;</span>;
<a name="l10921"></a>10921          }
<a name="l10922"></a>10922       }
<a name="l10923"></a>10923       $output .= substr($string, $position);
<a name="l10924"></a>10924 
<a name="l10925"></a>10925       <span class="keywordflow">return</span> $output;
<a name="l10926"></a>10926    }
<a name="l10927"></a>10927 
<a name="l10928"></a>10928    <span class="keyword">function</span> parse_mime($mime)
<a name="l10929"></a>10929    {
<a name="l10930"></a>10930       <span class="keywordflow">if</span> (($pos = strpos($mime, <span class="charliteral">&#39;;&#39;</span>)) === <span class="keyword">false</span>)
<a name="l10931"></a>10931       {
<a name="l10932"></a>10932          <span class="keywordflow">return</span> trim($mime);
<a name="l10933"></a>10933       }
<a name="l10934"></a>10934       <span class="keywordflow">else</span>
<a name="l10935"></a>10935       {
<a name="l10936"></a>10936          <span class="keywordflow">return</span> trim(substr($mime, 0, $pos));
<a name="l10937"></a>10937       }
<a name="l10938"></a>10938    }
<a name="l10939"></a>10939 
<a name="l10940"></a>10940    <span class="keyword">function</span> htmlspecialchars_decode($string, $quote_style)
<a name="l10941"></a>10941    {
<a name="l10942"></a>10942       <span class="keywordflow">if</span> (function_exists(<span class="stringliteral">&#39;htmlspecialchars_decode&#39;</span>))
<a name="l10943"></a>10943       {
<a name="l10944"></a>10944          <span class="keywordflow">return</span> htmlspecialchars_decode($string, $quote_style);
<a name="l10945"></a>10945       }
<a name="l10946"></a>10946       <span class="keywordflow">else</span>
<a name="l10947"></a>10947       {
<a name="l10948"></a>10948          <span class="keywordflow">return</span> strtr($string, array_flip(get_html_translation_table(HTML_SPECIALCHARS, $quote_style)));
<a name="l10949"></a>10949       }
<a name="l10950"></a>10950    }
<a name="l10951"></a>10951 
<a name="l10952"></a>10952    <span class="keyword">function</span> atom_03_construct_type($attribs)
<a name="l10953"></a>10953    {
<a name="l10954"></a>10954       <span class="keywordflow">if</span> (isset($attribs[<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;mode&#39;</span>]) &amp;&amp; strtolower(trim($attribs[<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;mode&#39;</span>]) === <span class="stringliteral">&#39;base64&#39;</span>))
<a name="l10955"></a>10955       {
<a name="l10956"></a>10956          $mode = SIMPLEPIE_CONSTRUCT_BASE64;
<a name="l10957"></a>10957       }
<a name="l10958"></a>10958       <span class="keywordflow">else</span>
<a name="l10959"></a>10959       {
<a name="l10960"></a>10960          $mode = SIMPLEPIE_CONSTRUCT_NONE;
<a name="l10961"></a>10961       }
<a name="l10962"></a>10962       <span class="keywordflow">if</span> (isset($attribs[<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>]))
<a name="l10963"></a>10963       {
<a name="l10964"></a>10964          <span class="keywordflow">switch</span> (strtolower(trim($attribs[<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>])))
<a name="l10965"></a>10965          {
<a name="l10966"></a>10966             <span class="keywordflow">case</span> <span class="stringliteral">&#39;text&#39;</span>:
<a name="l10967"></a>10967             <span class="keywordflow">case</span> <span class="stringliteral">&#39;text/plain&#39;</span>:
<a name="l10968"></a>10968                <span class="keywordflow">return</span> SIMPLEPIE_CONSTRUCT_TEXT | $mode;
<a name="l10969"></a>10969 
<a name="l10970"></a>10970             <span class="keywordflow">case</span> <span class="stringliteral">&#39;html&#39;</span>:
<a name="l10971"></a>10971             <span class="keywordflow">case</span> <span class="stringliteral">&#39;text/html&#39;</span>:
<a name="l10972"></a>10972                <span class="keywordflow">return</span> SIMPLEPIE_CONSTRUCT_HTML | $mode;
<a name="l10973"></a>10973 
<a name="l10974"></a>10974             <span class="keywordflow">case</span> <span class="stringliteral">&#39;xhtml&#39;</span>:
<a name="l10975"></a>10975             <span class="keywordflow">case</span> <span class="stringliteral">&#39;application/xhtml+xml&#39;</span>:
<a name="l10976"></a>10976                <span class="keywordflow">return</span> SIMPLEPIE_CONSTRUCT_XHTML | $mode;
<a name="l10977"></a>10977 
<a name="l10978"></a>10978             <span class="keywordflow">default</span>:
<a name="l10979"></a>10979                <span class="keywordflow">return</span> SIMPLEPIE_CONSTRUCT_NONE | $mode;
<a name="l10980"></a>10980          }
<a name="l10981"></a>10981       }
<a name="l10982"></a>10982       <span class="keywordflow">else</span>
<a name="l10983"></a>10983       {
<a name="l10984"></a>10984          <span class="keywordflow">return</span> SIMPLEPIE_CONSTRUCT_TEXT | $mode;
<a name="l10985"></a>10985       }
<a name="l10986"></a>10986    }
<a name="l10987"></a>10987 
<a name="l10988"></a>10988    <span class="keyword">function</span> atom_10_construct_type($attribs)
<a name="l10989"></a>10989    {
<a name="l10990"></a>10990       <span class="keywordflow">if</span> (isset($attribs[<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>]))
<a name="l10991"></a>10991       {
<a name="l10992"></a>10992          <span class="keywordflow">switch</span> (strtolower(trim($attribs[<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>])))
<a name="l10993"></a>10993          {
<a name="l10994"></a>10994             <span class="keywordflow">case</span> <span class="stringliteral">&#39;text&#39;</span>:
<a name="l10995"></a>10995                <span class="keywordflow">return</span> SIMPLEPIE_CONSTRUCT_TEXT;
<a name="l10996"></a>10996 
<a name="l10997"></a>10997             <span class="keywordflow">case</span> <span class="stringliteral">&#39;html&#39;</span>:
<a name="l10998"></a>10998                <span class="keywordflow">return</span> SIMPLEPIE_CONSTRUCT_HTML;
<a name="l10999"></a>10999 
<a name="l11000"></a>11000             <span class="keywordflow">case</span> <span class="stringliteral">&#39;xhtml&#39;</span>:
<a name="l11001"></a>11001                <span class="keywordflow">return</span> SIMPLEPIE_CONSTRUCT_XHTML;
<a name="l11002"></a>11002 
<a name="l11003"></a>11003             <span class="keywordflow">default</span>:
<a name="l11004"></a>11004                <span class="keywordflow">return</span> SIMPLEPIE_CONSTRUCT_NONE;
<a name="l11005"></a>11005          }
<a name="l11006"></a>11006       }
<a name="l11007"></a>11007       <span class="keywordflow">return</span> SIMPLEPIE_CONSTRUCT_TEXT;
<a name="l11008"></a>11008    }
<a name="l11009"></a>11009 
<a name="l11010"></a>11010    <span class="keyword">function</span> atom_10_content_construct_type($attribs)
<a name="l11011"></a>11011    {
<a name="l11012"></a>11012       <span class="keywordflow">if</span> (isset($attribs[<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>]))
<a name="l11013"></a>11013       {
<a name="l11014"></a>11014          $type = strtolower(trim($attribs[<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>]));
<a name="l11015"></a>11015          <span class="keywordflow">switch</span> ($type)
<a name="l11016"></a>11016          {
<a name="l11017"></a>11017             <span class="keywordflow">case</span> <span class="stringliteral">&#39;text&#39;</span>:
<a name="l11018"></a>11018                <span class="keywordflow">return</span> SIMPLEPIE_CONSTRUCT_TEXT;
<a name="l11019"></a>11019 
<a name="l11020"></a>11020             <span class="keywordflow">case</span> <span class="stringliteral">&#39;html&#39;</span>:
<a name="l11021"></a>11021                <span class="keywordflow">return</span> SIMPLEPIE_CONSTRUCT_HTML;
<a name="l11022"></a>11022 
<a name="l11023"></a>11023             <span class="keywordflow">case</span> <span class="stringliteral">&#39;xhtml&#39;</span>:
<a name="l11024"></a>11024                <span class="keywordflow">return</span> SIMPLEPIE_CONSTRUCT_XHTML;
<a name="l11025"></a>11025          }
<a name="l11026"></a>11026          <span class="keywordflow">if</span> (in_array(substr($type, -4), array(<span class="stringliteral">&#39;+xml&#39;</span>, <span class="stringliteral">&#39;/xml&#39;</span>)) || substr($type, 0, 5) === <span class="stringliteral">&#39;text/&#39;</span>)
<a name="l11027"></a>11027          {
<a name="l11028"></a>11028             <span class="keywordflow">return</span> SIMPLEPIE_CONSTRUCT_NONE;
<a name="l11029"></a>11029          }
<a name="l11030"></a>11030          <span class="keywordflow">else</span>
<a name="l11031"></a>11031          {
<a name="l11032"></a>11032             <span class="keywordflow">return</span> SIMPLEPIE_CONSTRUCT_BASE64;
<a name="l11033"></a>11033          }
<a name="l11034"></a>11034       }
<a name="l11035"></a>11035       <span class="keywordflow">else</span>
<a name="l11036"></a>11036       {
<a name="l11037"></a>11037          <span class="keywordflow">return</span> SIMPLEPIE_CONSTRUCT_TEXT;
<a name="l11038"></a>11038       }
<a name="l11039"></a>11039    }
<a name="l11040"></a>11040 
<a name="l11041"></a>11041    <span class="keyword">function</span> is_isegment_nz_nc($string)
<a name="l11042"></a>11042    {
<a name="l11043"></a>11043       <span class="keywordflow">return</span> (<span class="keywordtype">bool</span>) preg_match(<span class="stringliteral">&#39;/^([A-Za-z0-9\-._~\x{A0}-\x{D7FF}\x{F900}-\x{FDCF}\x{FDF0}-\x{FFEF}\x{10000}-\x{1FFFD}\x{20000}-\x{2FFFD}\x{30000}-\x{3FFFD}\x{40000}-\x{4FFFD}\x{50000}-\x{5FFFD}\x{60000}-\x{6FFFD}\x{70000}-\x{7FFFD}\x{80000}-\x{8FFFD}\x{90000}-\x{9FFFD}\x{A0000}-\x{AFFFD}\x{B0000}-\x{BFFFD}\x{C0000}-\x{CFFFD}\x{D0000}-\x{DFFFD}\x{E1000}-\x{EFFFD}!$&amp;\&#39;()*+,;=@]|(%[0-9ABCDEF]{2}))+$/u&#39;</span>, $string);
<a name="l11044"></a>11044    }
<a name="l11045"></a>11045 
<a name="l11046"></a>11046    <span class="keyword">function</span> space_seperated_tokens($string)
<a name="l11047"></a>11047    {
<a name="l11048"></a>11048       $space_characters = <span class="stringliteral">&quot;\x20\x09\x0A\x0B\x0C\x0D&quot;</span>;
<a name="l11049"></a>11049       $string_length = strlen($string);
<a name="l11050"></a>11050 
<a name="l11051"></a>11051       $position = strspn($string, $space_characters);
<a name="l11052"></a>11052       $tokens = array();
<a name="l11053"></a>11053 
<a name="l11054"></a>11054       <span class="keywordflow">while</span> ($position &lt; $string_length)
<a name="l11055"></a>11055       {
<a name="l11056"></a>11056          $len = strcspn($string, $space_characters, $position);
<a name="l11057"></a>11057          $tokens[] = substr($string, $position, $len);
<a name="l11058"></a>11058          $position += $len;
<a name="l11059"></a>11059          $position += strspn($string, $space_characters, $position);
<a name="l11060"></a>11060       }
<a name="l11061"></a>11061 
<a name="l11062"></a>11062       <span class="keywordflow">return</span> $tokens;
<a name="l11063"></a>11063    }
<a name="l11064"></a>11064 
<a name="l11065"></a>11065    <span class="keyword">function</span> array_unique($array)
<a name="l11066"></a>11066    {
<a name="l11067"></a>11067       <span class="keywordflow">if</span> (version_compare(PHP_VERSION, <span class="stringliteral">&#39;5.2&#39;</span>, <span class="stringliteral">&#39;&gt;=&#39;</span>))
<a name="l11068"></a>11068       {
<a name="l11069"></a>11069          <span class="keywordflow">return</span> array_unique($array);
<a name="l11070"></a>11070       }
<a name="l11071"></a>11071       <span class="keywordflow">else</span>
<a name="l11072"></a>11072       {
<a name="l11073"></a>11073          $array = (array) $array;
<a name="l11074"></a>11074          $new_array = array();
<a name="l11075"></a>11075          $new_array_strings = array();
<a name="l11076"></a>11076          <span class="keywordflow">foreach</span> ($array as $key =&gt; $value)
<a name="l11077"></a>11077          {
<a name="l11078"></a>11078             <span class="keywordflow">if</span> (is_object($value))
<a name="l11079"></a>11079             {
<a name="l11080"></a>11080                <span class="keywordflow">if</span> (method_exists($value, <span class="stringliteral">&#39;__toString&#39;</span>))
<a name="l11081"></a>11081                {
<a name="l11082"></a>11082                   $cmp = $value-&gt;__toString();
<a name="l11083"></a>11083                }
<a name="l11084"></a>11084                <span class="keywordflow">else</span>
<a name="l11085"></a>11085                {
<a name="l11086"></a>11086                   trigger_error(<span class="stringliteral">&#39;Object of class &#39;</span> . get_class($value) . <span class="stringliteral">&#39; could not be converted to string&#39;</span>, E_USER_ERROR);
<a name="l11087"></a>11087                }
<a name="l11088"></a>11088             }
<a name="l11089"></a>11089             elseif (is_array($value))
<a name="l11090"></a>11090             {
<a name="l11091"></a>11091                $cmp = (string) reset($value);
<a name="l11092"></a>11092             }
<a name="l11093"></a>11093             <span class="keywordflow">else</span>
<a name="l11094"></a>11094             {
<a name="l11095"></a>11095                $cmp = (string) $value;
<a name="l11096"></a>11096             }
<a name="l11097"></a>11097             <span class="keywordflow">if</span> (!in_array($cmp, $new_array_strings))
<a name="l11098"></a>11098             {
<a name="l11099"></a>11099                $new_array[$key] = $value;
<a name="l11100"></a>11100                $new_array_strings[] = $cmp;
<a name="l11101"></a>11101             }
<a name="l11102"></a>11102          }
<a name="l11103"></a>11103          <span class="keywordflow">return</span> $new_array;
<a name="l11104"></a>11104       }
<a name="l11105"></a>11105    }
<a name="l11106"></a>11106 <span class="comment"></span>
<a name="l11107"></a>11107 <span class="comment">   /**</span>
<a name="l11108"></a>11108 <span class="comment">    * Converts a unicode codepoint to a UTF-8 character</span>
<a name="l11109"></a>11109 <span class="comment">    *</span>
<a name="l11110"></a>11110 <span class="comment">    * @static</span>
<a name="l11111"></a>11111 <span class="comment">    * @access public</span>
<a name="l11112"></a>11112 <span class="comment">    * @param int $codepoint Unicode codepoint</span>
<a name="l11113"></a>11113 <span class="comment">    * @return string UTF-8 character</span>
<a name="l11114"></a>11114 <span class="comment">    */</span>
<a name="l11115"></a><a class="code" href="class_simple_pie___misc.html#a45e6efe124e0b868015586853edadd5e">11115</a>    <span class="keyword">function</span> codepoint_to_utf8($codepoint)
<a name="l11116"></a>11116    {
<a name="l11117"></a>11117       $codepoint = (int) $codepoint;
<a name="l11118"></a>11118       <span class="keywordflow">if</span> ($codepoint &lt; 0)
<a name="l11119"></a>11119       {
<a name="l11120"></a>11120          <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l11121"></a>11121       }
<a name="l11122"></a>11122       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($codepoint &lt;= 0x7f)
<a name="l11123"></a>11123       {
<a name="l11124"></a>11124          <span class="keywordflow">return</span> chr($codepoint);
<a name="l11125"></a>11125       }
<a name="l11126"></a>11126       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($codepoint &lt;= 0x7ff)
<a name="l11127"></a>11127       {
<a name="l11128"></a>11128          <span class="keywordflow">return</span> chr(0xc0 | ($codepoint &gt;&gt; 6)) . chr(0x80 | ($codepoint &amp; 0x3f));
<a name="l11129"></a>11129       }
<a name="l11130"></a>11130       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($codepoint &lt;= 0xffff)
<a name="l11131"></a>11131       {
<a name="l11132"></a>11132          <span class="keywordflow">return</span> chr(0xe0 | ($codepoint &gt;&gt; 12)) . chr(0x80 | (($codepoint &gt;&gt; 6) &amp; 0x3f)) . chr(0x80 | ($codepoint &amp; 0x3f));
<a name="l11133"></a>11133       }
<a name="l11134"></a>11134       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($codepoint &lt;= 0x10ffff)
<a name="l11135"></a>11135       {
<a name="l11136"></a>11136          <span class="keywordflow">return</span> chr(0xf0 | ($codepoint &gt;&gt; 18)) . chr(0x80 | (($codepoint &gt;&gt; 12) &amp; 0x3f)) . chr(0x80 | (($codepoint &gt;&gt; 6) &amp; 0x3f)) . chr(0x80 | ($codepoint &amp; 0x3f));
<a name="l11137"></a>11137       }
<a name="l11138"></a>11138       <span class="keywordflow">else</span>
<a name="l11139"></a>11139       {
<a name="l11140"></a>11140          <span class="comment">// U+FFFD REPLACEMENT CHARACTER</span>
<a name="l11141"></a>11141          <span class="keywordflow">return</span> <span class="stringliteral">&quot;\xEF\xBF\xBD&quot;</span>;
<a name="l11142"></a>11142       }
<a name="l11143"></a>11143    }
<a name="l11144"></a>11144 <span class="comment"></span>
<a name="l11145"></a>11145 <span class="comment">   /**</span>
<a name="l11146"></a>11146 <span class="comment">    * Re-implementation of PHP 5&#39;s stripos()</span>
<a name="l11147"></a>11147 <span class="comment">    *</span>
<a name="l11148"></a>11148 <span class="comment">    * Returns the numeric position of the first occurrence of needle in the</span>
<a name="l11149"></a>11149 <span class="comment">    * haystack string.</span>
<a name="l11150"></a>11150 <span class="comment">    *</span>
<a name="l11151"></a>11151 <span class="comment">    * @static</span>
<a name="l11152"></a>11152 <span class="comment">    * @access string</span>
<a name="l11153"></a>11153 <span class="comment">    * @param object $haystack</span>
<a name="l11154"></a>11154 <span class="comment">    * @param string $needle Note that the needle may be a string of one or more</span>
<a name="l11155"></a>11155 <span class="comment">    *     characters. If needle is not a string, it is converted to an integer</span>
<a name="l11156"></a>11156 <span class="comment">    *     and applied as the ordinal value of a character.</span>
<a name="l11157"></a>11157 <span class="comment">    * @param int $offset The optional offset parameter allows you to specify which</span>
<a name="l11158"></a>11158 <span class="comment">    *     character in haystack to start searching. The position returned is still</span>
<a name="l11159"></a>11159 <span class="comment">    *     relative to the beginning of haystack.</span>
<a name="l11160"></a>11160 <span class="comment">    * @return bool If needle is not found, stripos() will return boolean false.</span>
<a name="l11161"></a>11161 <span class="comment">    */</span>
<a name="l11162"></a><a class="code" href="class_simple_pie___misc.html#aa0297b92e96759a576d3aa8caa22b10d">11162</a>    <span class="keyword">function</span> stripos($haystack, $needle, $offset = 0)
<a name="l11163"></a>11163    {
<a name="l11164"></a>11164       <span class="keywordflow">if</span> (function_exists(<span class="stringliteral">&#39;stripos&#39;</span>))
<a name="l11165"></a>11165       {
<a name="l11166"></a>11166          <span class="keywordflow">return</span> stripos($haystack, $needle, $offset);
<a name="l11167"></a>11167       }
<a name="l11168"></a>11168       <span class="keywordflow">else</span>
<a name="l11169"></a>11169       {
<a name="l11170"></a>11170          <span class="keywordflow">if</span> (is_string($needle))
<a name="l11171"></a>11171          {
<a name="l11172"></a>11172             $needle = strtolower($needle);
<a name="l11173"></a>11173          }
<a name="l11174"></a>11174          elseif (is_int($needle) || is_bool($needle) || is_double($needle))
<a name="l11175"></a>11175          {
<a name="l11176"></a>11176             $needle = strtolower(chr($needle));
<a name="l11177"></a>11177          }
<a name="l11178"></a>11178          <span class="keywordflow">else</span>
<a name="l11179"></a>11179          {
<a name="l11180"></a>11180             trigger_error(<span class="stringliteral">&#39;needle is not a string or an integer&#39;</span>, E_USER_WARNING);
<a name="l11181"></a>11181             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l11182"></a>11182          }
<a name="l11183"></a>11183 
<a name="l11184"></a>11184          <span class="keywordflow">return</span> strpos(strtolower($haystack), $needle, $offset);
<a name="l11185"></a>11185       }
<a name="l11186"></a>11186    }
<a name="l11187"></a>11187 <span class="comment"></span>
<a name="l11188"></a>11188 <span class="comment">   /**</span>
<a name="l11189"></a>11189 <span class="comment">    * Similar to parse_str()</span>
<a name="l11190"></a>11190 <span class="comment">    *</span>
<a name="l11191"></a>11191 <span class="comment">    * Returns an associative array of name/value pairs, where the value is an</span>
<a name="l11192"></a>11192 <span class="comment">    * array of values that have used the same name</span>
<a name="l11193"></a>11193 <span class="comment">    *</span>
<a name="l11194"></a>11194 <span class="comment">    * @static</span>
<a name="l11195"></a>11195 <span class="comment">    * @access string</span>
<a name="l11196"></a>11196 <span class="comment">    * @param string $str The input string.</span>
<a name="l11197"></a>11197 <span class="comment">    * @return array</span>
<a name="l11198"></a>11198 <span class="comment">    */</span>
<a name="l11199"></a><a class="code" href="class_simple_pie___misc.html#a4cc5f71ef4340237dec4615927549c86">11199</a>    <span class="keyword">function</span> parse_str($str)
<a name="l11200"></a>11200    {
<a name="l11201"></a>11201       $return = array();
<a name="l11202"></a>11202       $str = explode(<span class="charliteral">&#39;&amp;&#39;</span>, $str);
<a name="l11203"></a>11203 
<a name="l11204"></a>11204       <span class="keywordflow">foreach</span> ($str as $section)
<a name="l11205"></a>11205       {
<a name="l11206"></a>11206          <span class="keywordflow">if</span> (strpos($section, <span class="charliteral">&#39;=&#39;</span>) !== <span class="keyword">false</span>)
<a name="l11207"></a>11207          {
<a name="l11208"></a>11208             list($name, $value) = explode(<span class="charliteral">&#39;=&#39;</span>, $section, 2);
<a name="l11209"></a>11209             $return[urldecode($name)][] = urldecode($value);
<a name="l11210"></a>11210          }
<a name="l11211"></a>11211          <span class="keywordflow">else</span>
<a name="l11212"></a>11212          {
<a name="l11213"></a>11213             $return[urldecode($section)][] = null;
<a name="l11214"></a>11214          }
<a name="l11215"></a>11215       }
<a name="l11216"></a>11216 
<a name="l11217"></a>11217       <span class="keywordflow">return</span> $return;
<a name="l11218"></a>11218    }
<a name="l11219"></a>11219 <span class="comment"></span>
<a name="l11220"></a>11220 <span class="comment">   /**</span>
<a name="l11221"></a>11221 <span class="comment">    * Detect XML encoding, as per XML 1.0 Appendix F.1</span>
<a name="l11222"></a>11222 <span class="comment">    *</span>
<a name="l11223"></a>11223 <span class="comment">    * @todo Add support for EBCDIC</span>
<a name="l11224"></a>11224 <span class="comment">    * @param string $data XML data</span>
<a name="l11225"></a>11225 <span class="comment">    * @return array Possible encodings</span>
<a name="l11226"></a>11226 <span class="comment">    */</span>
<a name="l11227"></a><a class="code" href="class_simple_pie___misc.html#a94433500e38862793bfda81fdb3c6751">11227</a>    <span class="keyword">function</span> xml_encoding($data)
<a name="l11228"></a>11228    {
<a name="l11229"></a>11229       <span class="comment">// UTF-32 Big Endian BOM</span>
<a name="l11230"></a>11230       <span class="keywordflow">if</span> (substr($data, 0, 4) === <span class="stringliteral">&quot;\x00\x00\xFE\xFF&quot;</span>)
<a name="l11231"></a>11231       {
<a name="l11232"></a>11232          $encoding[] = <span class="stringliteral">&#39;UTF-32BE&#39;</span>;
<a name="l11233"></a>11233       }
<a name="l11234"></a>11234       <span class="comment">// UTF-32 Little Endian BOM</span>
<a name="l11235"></a>11235       elseif (substr($data, 0, 4) === <span class="stringliteral">&quot;\xFF\xFE\x00\x00&quot;</span>)
<a name="l11236"></a>11236       {
<a name="l11237"></a>11237          $encoding[] = <span class="stringliteral">&#39;UTF-32LE&#39;</span>;
<a name="l11238"></a>11238       }
<a name="l11239"></a>11239       <span class="comment">// UTF-16 Big Endian BOM</span>
<a name="l11240"></a>11240       elseif (substr($data, 0, 2) === <span class="stringliteral">&quot;\xFE\xFF&quot;</span>)
<a name="l11241"></a>11241       {
<a name="l11242"></a>11242          $encoding[] = <span class="stringliteral">&#39;UTF-16BE&#39;</span>;
<a name="l11243"></a>11243       }
<a name="l11244"></a>11244       <span class="comment">// UTF-16 Little Endian BOM</span>
<a name="l11245"></a>11245       elseif (substr($data, 0, 2) === <span class="stringliteral">&quot;\xFF\xFE&quot;</span>)
<a name="l11246"></a>11246       {
<a name="l11247"></a>11247          $encoding[] = <span class="stringliteral">&#39;UTF-16LE&#39;</span>;
<a name="l11248"></a>11248       }
<a name="l11249"></a>11249       <span class="comment">// UTF-8 BOM</span>
<a name="l11250"></a>11250       elseif (substr($data, 0, 3) === <span class="stringliteral">&quot;\xEF\xBB\xBF&quot;</span>)
<a name="l11251"></a>11251       {
<a name="l11252"></a>11252          $encoding[] = <span class="stringliteral">&#39;UTF-8&#39;</span>;
<a name="l11253"></a>11253       }
<a name="l11254"></a>11254       <span class="comment">// UTF-32 Big Endian Without BOM</span>
<a name="l11255"></a>11255       elseif (substr($data, 0, 20) === <span class="stringliteral">&quot;\x00\x00\x00\x3C\x00\x00\x00\x3F\x00\x00\x00\x78\x00\x00\x00\x6D\x00\x00\x00\x6C&quot;</span>)
<a name="l11256"></a>11256       {
<a name="l11257"></a>11257          <span class="keywordflow">if</span> ($pos = strpos($data, <span class="stringliteral">&quot;\x00\x00\x00\x3F\x00\x00\x00\x3E&quot;</span>))
<a name="l11258"></a>11258          {
<a name="l11259"></a>11259             $parser =&amp; <span class="keyword">new</span> <a class="code" href="class_simple_pie___x_m_l___declaration___parser.html">SimplePie_XML_Declaration_Parser</a>(SimplePie_Misc::change_encoding(substr($data, 20, $pos - 20), <span class="stringliteral">&#39;UTF-32BE&#39;</span>, <span class="stringliteral">&#39;UTF-8&#39;</span>));
<a name="l11260"></a>11260             <span class="keywordflow">if</span> ($parser-&gt;parse())
<a name="l11261"></a>11261             {
<a name="l11262"></a>11262                $encoding[] = $parser-&gt;encoding;
<a name="l11263"></a>11263             }
<a name="l11264"></a>11264          }
<a name="l11265"></a>11265          $encoding[] = <span class="stringliteral">&#39;UTF-32BE&#39;</span>;
<a name="l11266"></a>11266       }
<a name="l11267"></a>11267       <span class="comment">// UTF-32 Little Endian Without BOM</span>
<a name="l11268"></a>11268       elseif (substr($data, 0, 20) === <span class="stringliteral">&quot;\x3C\x00\x00\x00\x3F\x00\x00\x00\x78\x00\x00\x00\x6D\x00\x00\x00\x6C\x00\x00\x00&quot;</span>)
<a name="l11269"></a>11269       {
<a name="l11270"></a>11270          <span class="keywordflow">if</span> ($pos = strpos($data, <span class="stringliteral">&quot;\x3F\x00\x00\x00\x3E\x00\x00\x00&quot;</span>))
<a name="l11271"></a>11271          {
<a name="l11272"></a>11272             $parser =&amp; <span class="keyword">new</span> <a class="code" href="class_simple_pie___x_m_l___declaration___parser.html">SimplePie_XML_Declaration_Parser</a>(SimplePie_Misc::change_encoding(substr($data, 20, $pos - 20), <span class="stringliteral">&#39;UTF-32LE&#39;</span>, <span class="stringliteral">&#39;UTF-8&#39;</span>));
<a name="l11273"></a>11273             <span class="keywordflow">if</span> ($parser-&gt;parse())
<a name="l11274"></a>11274             {
<a name="l11275"></a>11275                $encoding[] = $parser-&gt;encoding;
<a name="l11276"></a>11276             }
<a name="l11277"></a>11277          }
<a name="l11278"></a>11278          $encoding[] = <span class="stringliteral">&#39;UTF-32LE&#39;</span>;
<a name="l11279"></a>11279       }
<a name="l11280"></a>11280       <span class="comment">// UTF-16 Big Endian Without BOM</span>
<a name="l11281"></a>11281       elseif (substr($data, 0, 10) === <span class="stringliteral">&quot;\x00\x3C\x00\x3F\x00\x78\x00\x6D\x00\x6C&quot;</span>)
<a name="l11282"></a>11282       {
<a name="l11283"></a>11283          <span class="keywordflow">if</span> ($pos = strpos($data, <span class="stringliteral">&quot;\x00\x3F\x00\x3E&quot;</span>))
<a name="l11284"></a>11284          {
<a name="l11285"></a>11285             $parser =&amp; <span class="keyword">new</span> <a class="code" href="class_simple_pie___x_m_l___declaration___parser.html">SimplePie_XML_Declaration_Parser</a>(SimplePie_Misc::change_encoding(substr($data, 20, $pos - 10), <span class="stringliteral">&#39;UTF-16BE&#39;</span>, <span class="stringliteral">&#39;UTF-8&#39;</span>));
<a name="l11286"></a>11286             <span class="keywordflow">if</span> ($parser-&gt;parse())
<a name="l11287"></a>11287             {
<a name="l11288"></a>11288                $encoding[] = $parser-&gt;encoding;
<a name="l11289"></a>11289             }
<a name="l11290"></a>11290          }
<a name="l11291"></a>11291          $encoding[] = <span class="stringliteral">&#39;UTF-16BE&#39;</span>;
<a name="l11292"></a>11292       }
<a name="l11293"></a>11293       <span class="comment">// UTF-16 Little Endian Without BOM</span>
<a name="l11294"></a>11294       elseif (substr($data, 0, 10) === <span class="stringliteral">&quot;\x3C\x00\x3F\x00\x78\x00\x6D\x00\x6C\x00&quot;</span>)
<a name="l11295"></a>11295       {
<a name="l11296"></a>11296          <span class="keywordflow">if</span> ($pos = strpos($data, <span class="stringliteral">&quot;\x3F\x00\x3E\x00&quot;</span>))
<a name="l11297"></a>11297          {
<a name="l11298"></a>11298             $parser =&amp; <span class="keyword">new</span> <a class="code" href="class_simple_pie___x_m_l___declaration___parser.html">SimplePie_XML_Declaration_Parser</a>(SimplePie_Misc::change_encoding(substr($data, 20, $pos - 10), <span class="stringliteral">&#39;UTF-16LE&#39;</span>, <span class="stringliteral">&#39;UTF-8&#39;</span>));
<a name="l11299"></a>11299             <span class="keywordflow">if</span> ($parser-&gt;parse())
<a name="l11300"></a>11300             {
<a name="l11301"></a>11301                $encoding[] = $parser-&gt;encoding;
<a name="l11302"></a>11302             }
<a name="l11303"></a>11303          }
<a name="l11304"></a>11304          $encoding[] = <span class="stringliteral">&#39;UTF-16LE&#39;</span>;
<a name="l11305"></a>11305       }
<a name="l11306"></a>11306       <span class="comment">// US-ASCII (or superset)</span>
<a name="l11307"></a>11307       elseif (substr($data, 0, 5) === <span class="stringliteral">&quot;\x3C\x3F\x78\x6D\x6C&quot;</span>)
<a name="l11308"></a>11308       {
<a name="l11309"></a>11309          <span class="keywordflow">if</span> ($pos = strpos($data, <span class="stringliteral">&quot;\x3F\x3E&quot;</span>))
<a name="l11310"></a>11310          {
<a name="l11311"></a>11311             $parser =&amp; <span class="keyword">new</span> <a class="code" href="class_simple_pie___x_m_l___declaration___parser.html">SimplePie_XML_Declaration_Parser</a>(substr($data, 5, $pos - 5));
<a name="l11312"></a>11312             <span class="keywordflow">if</span> ($parser-&gt;parse())
<a name="l11313"></a>11313             {
<a name="l11314"></a>11314                $encoding[] = $parser-&gt;encoding;
<a name="l11315"></a>11315             }
<a name="l11316"></a>11316          }
<a name="l11317"></a>11317          $encoding[] = <span class="stringliteral">&#39;UTF-8&#39;</span>;
<a name="l11318"></a>11318       }
<a name="l11319"></a>11319       <span class="comment">// Fallback to UTF-8</span>
<a name="l11320"></a>11320       <span class="keywordflow">else</span>
<a name="l11321"></a>11321       {
<a name="l11322"></a>11322          $encoding[] = <span class="stringliteral">&#39;UTF-8&#39;</span>;
<a name="l11323"></a>11323       }
<a name="l11324"></a>11324       <span class="keywordflow">return</span> $encoding;
<a name="l11325"></a>11325    }
<a name="l11326"></a>11326 
<a name="l11327"></a>11327    <span class="keyword">function</span> output_javascript()
<a name="l11328"></a>11328    {
<a name="l11329"></a>11329       <span class="keywordflow">if</span> (function_exists(<span class="stringliteral">&#39;ob_gzhandler&#39;</span>))
<a name="l11330"></a>11330       {
<a name="l11331"></a>11331          ob_start(<span class="stringliteral">&#39;ob_gzhandler&#39;</span>);
<a name="l11332"></a>11332       }
<a name="l11333"></a>11333       header(<span class="stringliteral">&#39;Content-type: text/javascript; charset: UTF-8&#39;</span>);
<a name="l11334"></a>11334       header(<span class="stringliteral">&#39;Cache-Control: must-revalidate&#39;</span>);
<a name="l11335"></a>11335       header(<span class="stringliteral">&#39;Expires: &#39;</span> . gmdate(<span class="stringliteral">&#39;D, d M Y H:i:s&#39;</span>, time() + 604800) . <span class="stringliteral">&#39; GMT&#39;</span>); <span class="comment">// 7 days</span>
<a name="l11336"></a>11336       ?&gt;
<a name="l11337"></a>11337 <span class="keyword">function</span> embed_odeo(link) {
<a name="l11338"></a>11338    document.writeln(<span class="stringliteral">&#39;&lt;embed src=&quot;http://odeo.com/flash/audio_player_fullsize.swf&quot; pluginspage=&quot;http://www.macromedia.com/go/getflashplayer&quot; type=&quot;application/x-shockwave-flash&quot; quality=&quot;high&quot; width=&quot;440&quot; height=&quot;80&quot; wmode=&quot;transparent&quot; allowScriptAccess=&quot;any&quot; flashvars=&quot;valid_sample_rate=true&amp;external_url=&#39;</span>+link+<span class="stringliteral">&#39;&quot;&gt;&lt;/embed&gt;&#39;</span>);
<a name="l11339"></a>11339 }
<a name="l11340"></a>11340 
<a name="l11341"></a>11341 <span class="keyword">function</span> embed_quicktime(type, bgcolor, width, height, link, placeholder, loop) {
<a name="l11342"></a>11342    <span class="keywordflow">if</span> (placeholder != <span class="stringliteral">&#39;&#39;</span>) {
<a name="l11343"></a>11343       document.writeln(<span class="stringliteral">&#39;&lt;embed type=&quot;&#39;</span>+type+<span class="stringliteral">&#39;&quot; style=&quot;cursor:hand; cursor:pointer;&quot; href=&quot;&#39;</span>+link+<span class="stringliteral">&#39;&quot; src=&quot;&#39;</span>+placeholder+<span class="stringliteral">&#39;&quot; width=&quot;&#39;</span>+width+<span class="stringliteral">&#39;&quot; height=&quot;&#39;</span>+height+<span class="stringliteral">&#39;&quot; autoplay=&quot;false&quot; target=&quot;myself&quot; controller=&quot;false&quot; loop=&quot;&#39;</span>+loop+<span class="stringliteral">&#39;&quot; scale=&quot;aspect&quot; bgcolor=&quot;&#39;</span>+bgcolor+<span class="stringliteral">&#39;&quot; pluginspage=&quot;http://www.apple.com/quicktime/download/&quot;&gt;&lt;/embed&gt;&#39;</span>);
<a name="l11344"></a>11344    }
<a name="l11345"></a>11345    <span class="keywordflow">else</span> {
<a name="l11346"></a>11346       document.writeln(<span class="stringliteral">&#39;&lt;embed type=&quot;&#39;</span>+type+<span class="stringliteral">&#39;&quot; style=&quot;cursor:hand; cursor:pointer;&quot; src=&quot;&#39;</span>+link+<span class="stringliteral">&#39;&quot; width=&quot;&#39;</span>+width+<span class="stringliteral">&#39;&quot; height=&quot;&#39;</span>+height+<span class="stringliteral">&#39;&quot; autoplay=&quot;false&quot; target=&quot;myself&quot; controller=&quot;true&quot; loop=&quot;&#39;</span>+loop+<span class="stringliteral">&#39;&quot; scale=&quot;aspect&quot; bgcolor=&quot;&#39;</span>+bgcolor+<span class="stringliteral">&#39;&quot; pluginspage=&quot;http://www.apple.com/quicktime/download/&quot;&gt;&lt;/embed&gt;&#39;</span>);
<a name="l11347"></a>11347    }
<a name="l11348"></a>11348 }
<a name="l11349"></a>11349 
<a name="l11350"></a>11350 <span class="keyword">function</span> embed_flash(bgcolor, width, height, link, loop, type) {
<a name="l11351"></a>11351    document.writeln(<span class="stringliteral">&#39;&lt;embed src=&quot;&#39;</span>+link+<span class="stringliteral">&#39;&quot; pluginspage=&quot;http://www.macromedia.com/go/getflashplayer&quot; type=&quot;&#39;</span>+type+<span class="stringliteral">&#39;&quot; quality=&quot;high&quot; width=&quot;&#39;</span>+width+<span class="stringliteral">&#39;&quot; height=&quot;&#39;</span>+height+<span class="stringliteral">&#39;&quot; bgcolor=&quot;&#39;</span>+bgcolor+<span class="stringliteral">&#39;&quot; loop=&quot;&#39;</span>+loop+<span class="stringliteral">&#39;&quot;&gt;&lt;/embed&gt;&#39;</span>);
<a name="l11352"></a>11352 }
<a name="l11353"></a>11353 
<a name="l11354"></a>11354 <span class="keyword">function</span> embed_flv(width, height, link, placeholder, loop, player) {
<a name="l11355"></a>11355    document.writeln(<span class="stringliteral">&#39;&lt;embed src=&quot;&#39;</span>+player+<span class="stringliteral">&#39;&quot; pluginspage=&quot;http://www.macromedia.com/go/getflashplayer&quot; type=&quot;application/x-shockwave-flash&quot; quality=&quot;high&quot; width=&quot;&#39;</span>+width+<span class="stringliteral">&#39;&quot; height=&quot;&#39;</span>+height+<span class="stringliteral">&#39;&quot; wmode=&quot;transparent&quot; flashvars=&quot;file=&#39;</span>+link+<span class="stringliteral">&#39;&amp;autostart=false&amp;repeat=&#39;</span>+loop+<span class="stringliteral">&#39;&amp;showdigits=true&amp;showfsbutton=false&quot;&gt;&lt;/embed&gt;&#39;</span>);
<a name="l11356"></a>11356 }
<a name="l11357"></a>11357 
<a name="l11358"></a>11358 <span class="keyword">function</span> embed_wmedia(width, height, link) {
<a name="l11359"></a>11359    document.writeln(<span class="stringliteral">&#39;&lt;embed type=&quot;application/x-mplayer2&quot; src=&quot;&#39;</span>+link+<span class="stringliteral">&#39;&quot; autosize=&quot;1&quot; width=&quot;&#39;</span>+width+<span class="stringliteral">&#39;&quot; height=&quot;&#39;</span>+height+<span class="stringliteral">&#39;&quot; showcontrols=&quot;1&quot; showstatusbar=&quot;0&quot; showdisplay=&quot;0&quot; autostart=&quot;0&quot;&gt;&lt;/embed&gt;&#39;</span>);
<a name="l11360"></a>11360 }
<a name="l11361"></a>11361       &lt;?php
<a name="l11362"></a>11362    }
<a name="l11363"></a>11363 }
<a name="l11364"></a>11364 <span class="comment"></span>
<a name="l11365"></a>11365 <span class="comment">/**</span>
<a name="l11366"></a>11366 <span class="comment"> * Decode HTML Entities</span>
<a name="l11367"></a>11367 <span class="comment"> *</span>
<a name="l11368"></a>11368 <span class="comment"> * This implements HTML5 as of revision 967 (2007-06-28)</span>
<a name="l11369"></a>11369 <span class="comment"> *</span>
<a name="l11370"></a>11370 <span class="comment"> * @package SimplePie</span>
<a name="l11371"></a>11371 <span class="comment"> */</span>
<a name="l11372"></a><a class="code" href="class_simple_pie___decode___h_t_m_l___entities.html">11372</a> <span class="keyword">class </span><a class="code" href="class_simple_pie___decode___h_t_m_l___entities.html">SimplePie_Decode_HTML_Entities</a>
<a name="l11373"></a>11373 {<span class="comment"></span>
<a name="l11374"></a>11374 <span class="comment">   /**</span>
<a name="l11375"></a>11375 <span class="comment">    * Data to be parsed</span>
<a name="l11376"></a>11376 <span class="comment">    *</span>
<a name="l11377"></a>11377 <span class="comment">    * @access private</span>
<a name="l11378"></a>11378 <span class="comment">    * @var string</span>
<a name="l11379"></a>11379 <span class="comment">    */</span>
<a name="l11380"></a>11380    var $data = <span class="stringliteral">&#39;&#39;</span>;
<a name="l11381"></a>11381 <span class="comment"></span>
<a name="l11382"></a>11382 <span class="comment">   /**</span>
<a name="l11383"></a>11383 <span class="comment">    * Currently consumed bytes</span>
<a name="l11384"></a>11384 <span class="comment">    *</span>
<a name="l11385"></a>11385 <span class="comment">    * @access private</span>
<a name="l11386"></a>11386 <span class="comment">    * @var string</span>
<a name="l11387"></a>11387 <span class="comment">    */</span>
<a name="l11388"></a>11388    var $consumed = <span class="stringliteral">&#39;&#39;</span>;
<a name="l11389"></a>11389 <span class="comment"></span>
<a name="l11390"></a>11390 <span class="comment">   /**</span>
<a name="l11391"></a>11391 <span class="comment">    * Position of the current byte being parsed</span>
<a name="l11392"></a>11392 <span class="comment">    *</span>
<a name="l11393"></a>11393 <span class="comment">    * @access private</span>
<a name="l11394"></a>11394 <span class="comment">    * @var int</span>
<a name="l11395"></a>11395 <span class="comment">    */</span>
<a name="l11396"></a>11396    var $position = 0;
<a name="l11397"></a>11397 <span class="comment"></span>
<a name="l11398"></a>11398 <span class="comment">   /**</span>
<a name="l11399"></a>11399 <span class="comment">    * Create an instance of the class with the input data</span>
<a name="l11400"></a>11400 <span class="comment">    *</span>
<a name="l11401"></a>11401 <span class="comment">    * @access public</span>
<a name="l11402"></a>11402 <span class="comment">    * @param string $data Input data</span>
<a name="l11403"></a>11403 <span class="comment">    */</span>
<a name="l11404"></a><a class="code" href="class_simple_pie___decode___h_t_m_l___entities.html#a8a10d5e4b0cdf2f89b9d2a1ca9858fef">11404</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie___decode___h_t_m_l___entities.html">SimplePie_Decode_HTML_Entities</a>($data)
<a name="l11405"></a>11405    {
<a name="l11406"></a>11406       $this-&gt;data = $data;
<a name="l11407"></a>11407    }
<a name="l11408"></a>11408 <span class="comment"></span>
<a name="l11409"></a>11409 <span class="comment">   /**</span>
<a name="l11410"></a>11410 <span class="comment">    * Parse the input data</span>
<a name="l11411"></a>11411 <span class="comment">    *</span>
<a name="l11412"></a>11412 <span class="comment">    * @access public</span>
<a name="l11413"></a>11413 <span class="comment">    * @return string Output data</span>
<a name="l11414"></a>11414 <span class="comment">    */</span>
<a name="l11415"></a><a class="code" href="class_simple_pie___decode___h_t_m_l___entities.html#a38d99acc70a1d8fd8f94455743b2d237">11415</a>    <span class="keyword">function</span> parse()
<a name="l11416"></a>11416    {
<a name="l11417"></a>11417       <span class="keywordflow">while</span> (($this-&gt;position = strpos($this-&gt;data, <span class="charliteral">&#39;&amp;&#39;</span>, $this-&gt;position)) !== <span class="keyword">false</span>)
<a name="l11418"></a>11418       {
<a name="l11419"></a>11419          $this-&gt;consume();
<a name="l11420"></a>11420          $this-&gt;entity();
<a name="l11421"></a>11421          $this-&gt;consumed = <span class="stringliteral">&#39;&#39;</span>;
<a name="l11422"></a>11422       }
<a name="l11423"></a>11423       <span class="keywordflow">return</span> $this-&gt;data;
<a name="l11424"></a>11424    }
<a name="l11425"></a>11425 <span class="comment"></span>
<a name="l11426"></a>11426 <span class="comment">   /**</span>
<a name="l11427"></a>11427 <span class="comment">    * Consume the next byte</span>
<a name="l11428"></a>11428 <span class="comment">    *</span>
<a name="l11429"></a>11429 <span class="comment">    * @access private</span>
<a name="l11430"></a>11430 <span class="comment">    * @return mixed The next byte, or false, if there is no more data</span>
<a name="l11431"></a>11431 <span class="comment">    */</span>
<a name="l11432"></a><a class="code" href="class_simple_pie___decode___h_t_m_l___entities.html#a99f4179eb8b6e69a30901b0b77efa4e1">11432</a>    <span class="keyword">function</span> consume()
<a name="l11433"></a>11433    {
<a name="l11434"></a>11434       <span class="keywordflow">if</span> (isset($this-&gt;data[$this-&gt;position]))
<a name="l11435"></a>11435       {
<a name="l11436"></a>11436          $this-&gt;consumed .= $this-&gt;data[$this-&gt;position];
<a name="l11437"></a>11437          <span class="keywordflow">return</span> $this-&gt;data[$this-&gt;position++];
<a name="l11438"></a>11438       }
<a name="l11439"></a>11439       <span class="keywordflow">else</span>
<a name="l11440"></a>11440       {
<a name="l11441"></a>11441          <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l11442"></a>11442       }
<a name="l11443"></a>11443    }
<a name="l11444"></a>11444 <span class="comment"></span>
<a name="l11445"></a>11445 <span class="comment">   /**</span>
<a name="l11446"></a>11446 <span class="comment">    * Consume a range of characters</span>
<a name="l11447"></a>11447 <span class="comment">    *</span>
<a name="l11448"></a>11448 <span class="comment">    * @access private</span>
<a name="l11449"></a>11449 <span class="comment">    * @param string $chars Characters to consume</span>
<a name="l11450"></a>11450 <span class="comment">    * @return mixed A series of characters that match the range, or false</span>
<a name="l11451"></a>11451 <span class="comment">    */</span>
<a name="l11452"></a><a class="code" href="class_simple_pie___decode___h_t_m_l___entities.html#a3a0843596aa22b040abe99cfd715d4c6">11452</a>    <span class="keyword">function</span> consume_range($chars)
<a name="l11453"></a>11453    {
<a name="l11454"></a>11454       <span class="keywordflow">if</span> ($len = strspn($this-&gt;data, $chars, $this-&gt;position))
<a name="l11455"></a>11455       {
<a name="l11456"></a>11456          $data = substr($this-&gt;data, $this-&gt;position, $len);
<a name="l11457"></a>11457          $this-&gt;consumed .= $data;
<a name="l11458"></a>11458          $this-&gt;position += $len;
<a name="l11459"></a>11459          <span class="keywordflow">return</span> $data;
<a name="l11460"></a>11460       }
<a name="l11461"></a>11461       <span class="keywordflow">else</span>
<a name="l11462"></a>11462       {
<a name="l11463"></a>11463          <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l11464"></a>11464       }
<a name="l11465"></a>11465    }
<a name="l11466"></a>11466 <span class="comment"></span>
<a name="l11467"></a>11467 <span class="comment">   /**</span>
<a name="l11468"></a>11468 <span class="comment">    * Unconsume one byte</span>
<a name="l11469"></a>11469 <span class="comment">    *</span>
<a name="l11470"></a>11470 <span class="comment">    * @access private</span>
<a name="l11471"></a>11471 <span class="comment">    */</span>
<a name="l11472"></a><a class="code" href="class_simple_pie___decode___h_t_m_l___entities.html#a730496f99e2406dc28d80fed99fa091a">11472</a>    <span class="keyword">function</span> unconsume()
<a name="l11473"></a>11473    {
<a name="l11474"></a>11474       $this-&gt;consumed = substr($this-&gt;consumed, 0, -1);
<a name="l11475"></a>11475       $this-&gt;position--;
<a name="l11476"></a>11476    }
<a name="l11477"></a>11477 <span class="comment"></span>
<a name="l11478"></a>11478 <span class="comment">   /**</span>
<a name="l11479"></a>11479 <span class="comment">    * Decode an entity</span>
<a name="l11480"></a>11480 <span class="comment">    *</span>
<a name="l11481"></a>11481 <span class="comment">    * @access private</span>
<a name="l11482"></a>11482 <span class="comment">    */</span>
<a name="l11483"></a><a class="code" href="class_simple_pie___decode___h_t_m_l___entities.html#a8c152f6ef1c779ffd79d5c7ee4d37721">11483</a>    <span class="keyword">function</span> entity()
<a name="l11484"></a>11484    {
<a name="l11485"></a>11485       <span class="keywordflow">switch</span> ($this-&gt;consume())
<a name="l11486"></a>11486       {
<a name="l11487"></a>11487          <span class="keywordflow">case</span> <span class="stringliteral">&quot;\x09&quot;</span>:
<a name="l11488"></a>11488          <span class="keywordflow">case</span> <span class="stringliteral">&quot;\x0A&quot;</span>:
<a name="l11489"></a>11489          <span class="keywordflow">case</span> <span class="stringliteral">&quot;\x0B&quot;</span>:
<a name="l11490"></a>11490          <span class="keywordflow">case</span> <span class="stringliteral">&quot;\x0B&quot;</span>:
<a name="l11491"></a>11491          <span class="keywordflow">case</span> <span class="stringliteral">&quot;\x0C&quot;</span>:
<a name="l11492"></a>11492          <span class="keywordflow">case</span> <span class="stringliteral">&quot;\x20&quot;</span>:
<a name="l11493"></a>11493          <span class="keywordflow">case</span> <span class="stringliteral">&quot;\x3C&quot;</span>:
<a name="l11494"></a>11494          <span class="keywordflow">case</span> <span class="stringliteral">&quot;\x26&quot;</span>:
<a name="l11495"></a>11495          <span class="keywordflow">case</span> <span class="keyword">false</span>:
<a name="l11496"></a>11496             <span class="keywordflow">break</span>;
<a name="l11497"></a>11497 
<a name="l11498"></a>11498          <span class="keywordflow">case</span> <span class="stringliteral">&quot;\x23&quot;</span>:
<a name="l11499"></a>11499             <span class="keywordflow">switch</span> ($this-&gt;consume())
<a name="l11500"></a>11500             {
<a name="l11501"></a>11501                <span class="keywordflow">case</span> <span class="stringliteral">&quot;\x78&quot;</span>:
<a name="l11502"></a>11502                <span class="keywordflow">case</span> <span class="stringliteral">&quot;\x58&quot;</span>:
<a name="l11503"></a>11503                   $range = <span class="stringliteral">&#39;0123456789ABCDEFabcdef&#39;</span>;
<a name="l11504"></a>11504                   $hex = <span class="keyword">true</span>;
<a name="l11505"></a>11505                   <span class="keywordflow">break</span>;
<a name="l11506"></a>11506 
<a name="l11507"></a>11507                <span class="keywordflow">default</span>:
<a name="l11508"></a>11508                   $range = <span class="stringliteral">&#39;0123456789&#39;</span>;
<a name="l11509"></a>11509                   $hex = <span class="keyword">false</span>;
<a name="l11510"></a>11510                   $this-&gt;unconsume();
<a name="l11511"></a>11511                   <span class="keywordflow">break</span>;
<a name="l11512"></a>11512             }
<a name="l11513"></a>11513 
<a name="l11514"></a>11514             <span class="keywordflow">if</span> ($codepoint = $this-&gt;consume_range($range))
<a name="l11515"></a>11515             {
<a name="l11516"></a>11516                <span class="keyword">static</span> $windows_1252_specials = array(0x0D =&gt; <span class="stringliteral">&quot;\x0A&quot;</span>, 0x80 =&gt; <span class="stringliteral">&quot;\xE2\x82\xAC&quot;</span>, 0x81 =&gt; <span class="stringliteral">&quot;\xEF\xBF\xBD&quot;</span>, 0x82 =&gt; <span class="stringliteral">&quot;\xE2\x80\x9A&quot;</span>, 0x83 =&gt; <span class="stringliteral">&quot;\xC6\x92&quot;</span>, 0x84 =&gt; <span class="stringliteral">&quot;\xE2\x80\x9E&quot;</span>, 0x85 =&gt; <span class="stringliteral">&quot;\xE2\x80\xA6&quot;</span>, 0x86 =&gt; <span class="stringliteral">&quot;\xE2\x80\xA0&quot;</span>, 0x87 =&gt; <span class="stringliteral">&quot;\xE2\x80\xA1&quot;</span>, 0x88 =&gt; <span class="stringliteral">&quot;\xCB\x86&quot;</span>, 0x89 =&gt; <span class="stringliteral">&quot;\xE2\x80\xB0&quot;</span>, 0x8A =&gt; <span class="stringliteral">&quot;\xC5\xA0&quot;</span>, 0x8B =&gt; <span class="stringliteral">&quot;\xE2\x80\xB9&quot;</span>, 0x8C =&gt; <span class="stringliteral">&quot;\xC5\x92&quot;</span>, 0x8D =&gt; <span class="stringliteral">&quot;\xEF\xBF\xBD&quot;</span>, 0x8E =&gt; <span class="stringliteral">&quot;\xC5\xBD&quot;</span>, 0x8F =&gt; <span class="stringliteral">&quot;\xEF\xBF\xBD&quot;</span>, 0x90 =&gt; <span class="stringliteral">&quot;\xEF\xBF\xBD&quot;</span>, 0x91 =&gt; <span class="stringliteral">&quot;\xE2\x80\x98&quot;</span>, 0x92 =&gt; <span class="stringliteral">&quot;\xE2\x80\x99&quot;</span>, 0x93 =&gt; <span class="stringliteral">&quot;\xE2\x80\x9C&quot;</span>, 0x94 =&gt; <span class="stringliteral">&quot;\xE2\x80\x9D&quot;</span>, 0x95 =&gt; <span class="stringliteral">&quot;\xE2\x80\xA2&quot;</span>, 0x96 =&gt; <span class="stringliteral">&quot;\xE2\x80\x93&quot;</span>, 0x97 =&gt; <span class="stringliteral">&quot;\xE2\x80\x94&quot;</span>, 0x98 =&gt; <span class="stringliteral">&quot;\xCB\x9C&quot;</span>, 0x99 =&gt; <span class="stringliteral">&quot;\xE2\x84\xA2&quot;</span>, 0x9A =&gt; <span class="stringliteral">&quot;\xC5\xA1&quot;</span>, 0x9B =&gt; <span class="stringliteral">&quot;\xE2\x80\xBA&quot;</span>, 0x9C =&gt; <span class="stringliteral">&quot;\xC5\x93&quot;</span>, 0x9D =&gt; <span class="stringliteral">&quot;\xEF\xBF\xBD&quot;</span>, 0x9E =&gt; <span class="stringliteral">&quot;\xC5\xBE&quot;</span>, 0x9F =&gt; <span class="stringliteral">&quot;\xC5\xB8&quot;</span>);
<a name="l11517"></a>11517 
<a name="l11518"></a>11518                <span class="keywordflow">if</span> ($hex)
<a name="l11519"></a>11519                {
<a name="l11520"></a>11520                   $codepoint = hexdec($codepoint);
<a name="l11521"></a>11521                }
<a name="l11522"></a>11522                <span class="keywordflow">else</span>
<a name="l11523"></a>11523                {
<a name="l11524"></a>11524                   $codepoint = intval($codepoint);
<a name="l11525"></a>11525                }
<a name="l11526"></a>11526 
<a name="l11527"></a>11527                <span class="keywordflow">if</span> (isset($windows_1252_specials[$codepoint]))
<a name="l11528"></a>11528                {
<a name="l11529"></a>11529                   $replacement = $windows_1252_specials[$codepoint];
<a name="l11530"></a>11530                }
<a name="l11531"></a>11531                <span class="keywordflow">else</span>
<a name="l11532"></a>11532                {
<a name="l11533"></a>11533                   $replacement = <a class="code" href="class_simple_pie___misc.html#a45e6efe124e0b868015586853edadd5e">SimplePie_Misc::codepoint_to_utf8</a>($codepoint);
<a name="l11534"></a>11534                }
<a name="l11535"></a>11535 
<a name="l11536"></a>11536                <span class="keywordflow">if</span> (!in_array($this-&gt;consume(), array(<span class="charliteral">&#39;;&#39;</span>, <span class="keyword">false</span>), <span class="keyword">true</span>))
<a name="l11537"></a>11537                {
<a name="l11538"></a>11538                   $this-&gt;unconsume();
<a name="l11539"></a>11539                }
<a name="l11540"></a>11540 
<a name="l11541"></a>11541                $consumed_length = strlen($this-&gt;consumed);
<a name="l11542"></a>11542                $this-&gt;data = substr_replace($this-&gt;data, $replacement, $this-&gt;position - $consumed_length, $consumed_length);
<a name="l11543"></a>11543                $this-&gt;position += strlen($replacement) - $consumed_length;
<a name="l11544"></a>11544             }
<a name="l11545"></a>11545             <span class="keywordflow">break</span>;
<a name="l11546"></a>11546 
<a name="l11547"></a>11547          <span class="keywordflow">default</span>:
<a name="l11548"></a>11548             <span class="keyword">static</span> $entities = array(<span class="stringliteral">&#39;Aacute&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x81&quot;</span>, <span class="stringliteral">&#39;aacute&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xA1&quot;</span>, <span class="stringliteral">&#39;Aacute;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x81&quot;</span>, <span class="stringliteral">&#39;aacute;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xA1&quot;</span>, <span class="stringliteral">&#39;Acirc&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x82&quot;</span>, <span class="stringliteral">&#39;acirc&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xA2&quot;</span>, <span class="stringliteral">&#39;Acirc;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x82&quot;</span>, <span class="stringliteral">&#39;acirc;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xA2&quot;</span>, <span class="stringliteral">&#39;acute&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xB4&quot;</span>, <span class="stringliteral">&#39;acute;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xB4&quot;</span>, <span class="stringliteral">&#39;AElig&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x86&quot;</span>, <span class="stringliteral">&#39;aelig&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xA6&quot;</span>, <span class="stringliteral">&#39;AElig;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x86&quot;</span>, <span class="stringliteral">&#39;aelig;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xA6&quot;</span>, <span class="stringliteral">&#39;Agrave&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x80&quot;</span>, <span class="stringliteral">&#39;agrave&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xA0&quot;</span>, <span class="stringliteral">&#39;Agrave;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x80&quot;</span>, <span class="stringliteral">&#39;agrave;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xA0&quot;</span>, <span class="stringliteral">&#39;alefsym;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x84\xB5&quot;</span>, <span class="stringliteral">&#39;Alpha;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\x91&quot;</span>, <span class="stringliteral">&#39;alpha;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\xB1&quot;</span>, <span class="stringliteral">&#39;AMP&#39;</span> =&gt; <span class="stringliteral">&quot;\x26&quot;</span>, <span class="stringliteral">&#39;amp&#39;</span> =&gt; <span class="stringliteral">&quot;\x26&quot;</span>, <span class="stringliteral">&#39;AMP;&#39;</span> =&gt; <span class="stringliteral">&quot;\x26&quot;</span>, <span class="stringliteral">&#39;amp;&#39;</span> =&gt; <span class="stringliteral">&quot;\x26&quot;</span>, <span class="stringliteral">&#39;and;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x88\xA7&quot;</span>, <span class="stringliteral">&#39;ang;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x88\xA0&quot;</span>, <span class="stringliteral">&#39;apos;&#39;</span> =&gt; <span class="stringliteral">&quot;\x27&quot;</span>, <span class="stringliteral">&#39;Aring&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x85&quot;</span>, <span class="stringliteral">&#39;aring&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xA5&quot;</span>, <span class="stringliteral">&#39;Aring;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x85&quot;</span>, <span class="stringliteral">&#39;aring;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xA5&quot;</span>, <span class="stringliteral">&#39;asymp;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x89\x88&quot;</span>, <span class="stringliteral">&#39;Atilde&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x83&quot;</span>, <span class="stringliteral">&#39;atilde&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xA3&quot;</span>, <span class="stringliteral">&#39;Atilde;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x83&quot;</span>, <span class="stringliteral">&#39;atilde;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xA3&quot;</span>, <span class="stringliteral">&#39;Auml&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x84&quot;</span>, <span class="stringliteral">&#39;auml&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xA4&quot;</span>, <span class="stringliteral">&#39;Auml;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x84&quot;</span>, <span class="stringliteral">&#39;auml;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xA4&quot;</span>, <span class="stringliteral">&#39;bdquo;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\x9E&quot;</span>, <span class="stringliteral">&#39;Beta;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\x92&quot;</span>, <span class="stringliteral">&#39;beta;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\xB2&quot;</span>, <span class="stringliteral">&#39;brvbar&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA6&quot;</span>, <span class="stringliteral">&#39;brvbar;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA6&quot;</span>, <span class="stringliteral">&#39;bull;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\xA2&quot;</span>, <span class="stringliteral">&#39;cap;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x88\xA9&quot;</span>, <span class="stringliteral">&#39;Ccedil&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x87&quot;</span>, <span class="stringliteral">&#39;ccedil&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xA7&quot;</span>, <span class="stringliteral">&#39;Ccedil;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x87&quot;</span>, <span class="stringliteral">&#39;ccedil;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xA7&quot;</span>, <span class="stringliteral">&#39;cedil&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xB8&quot;</span>, <span class="stringliteral">&#39;cedil;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xB8&quot;</span>, <span class="stringliteral">&#39;cent&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA2&quot;</span>, <span class="stringliteral">&#39;cent;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA2&quot;</span>, <span class="stringliteral">&#39;Chi;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\xA7&quot;</span>, <span class="stringliteral">&#39;chi;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCF\x87&quot;</span>, <span class="stringliteral">&#39;circ;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCB\x86&quot;</span>, <span class="stringliteral">&#39;clubs;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x99\xA3&quot;</span>, <span class="stringliteral">&#39;cong;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x89\x85&quot;</span>, <span class="stringliteral">&#39;COPY&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA9&quot;</span>, <span class="stringliteral">&#39;copy&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA9&quot;</span>, <span class="stringliteral">&#39;COPY;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA9&quot;</span>, <span class="stringliteral">&#39;copy;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA9&quot;</span>, <span class="stringliteral">&#39;crarr;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x86\xB5&quot;</span>, <span class="stringliteral">&#39;cup;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x88\xAA&quot;</span>, <span class="stringliteral">&#39;curren&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA4&quot;</span>, <span class="stringliteral">&#39;curren;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA4&quot;</span>, <span class="stringliteral">&#39;Dagger;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\xA1&quot;</span>, <span class="stringliteral">&#39;dagger;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\xA0&quot;</span>, <span class="stringliteral">&#39;dArr;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x87\x93&quot;</span>, <span class="stringliteral">&#39;darr;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x86\x93&quot;</span>, <span class="stringliteral">&#39;deg&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xB0&quot;</span>, <span class="stringliteral">&#39;deg;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xB0&quot;</span>, <span class="stringliteral">&#39;Delta;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\x94&quot;</span>, <span class="stringliteral">&#39;delta;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\xB4&quot;</span>, <span class="stringliteral">&#39;diams;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x99\xA6&quot;</span>, <span class="stringliteral">&#39;divide&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xB7&quot;</span>, <span class="stringliteral">&#39;divide;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xB7&quot;</span>, <span class="stringliteral">&#39;Eacute&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x89&quot;</span>, <span class="stringliteral">&#39;eacute&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xA9&quot;</span>, <span class="stringliteral">&#39;Eacute;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x89&quot;</span>, <span class="stringliteral">&#39;eacute;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xA9&quot;</span>, <span class="stringliteral">&#39;Ecirc&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x8A&quot;</span>, <span class="stringliteral">&#39;ecirc&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xAA&quot;</span>, <span class="stringliteral">&#39;Ecirc;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x8A&quot;</span>, <span class="stringliteral">&#39;ecirc;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xAA&quot;</span>, <span class="stringliteral">&#39;Egrave&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x88&quot;</span>, <span class="stringliteral">&#39;egrave&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xA8&quot;</span>, <span class="stringliteral">&#39;Egrave;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x88&quot;</span>, <span class="stringliteral">&#39;egrave;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xA8&quot;</span>, <span class="stringliteral">&#39;empty;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x88\x85&quot;</span>, <span class="stringliteral">&#39;emsp;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\x83&quot;</span>, <span class="stringliteral">&#39;ensp;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\x82&quot;</span>, <span class="stringliteral">&#39;Epsilon;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\x95&quot;</span>, <span class="stringliteral">&#39;epsilon;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\xB5&quot;</span>, <span class="stringliteral">&#39;equiv;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x89\xA1&quot;</span>, <span class="stringliteral">&#39;Eta;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\x97&quot;</span>, <span class="stringliteral">&#39;eta;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\xB7&quot;</span>, <span class="stringliteral">&#39;ETH&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x90&quot;</span>, <span class="stringliteral">&#39;eth&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xB0&quot;</span>, <span class="stringliteral">&#39;ETH;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x90&quot;</span>, <span class="stringliteral">&#39;eth;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xB0&quot;</span>, <span class="stringliteral">&#39;Euml&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x8B&quot;</span>, <span class="stringliteral">&#39;euml&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xAB&quot;</span>, <span class="stringliteral">&#39;Euml;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x8B&quot;</span>, <span class="stringliteral">&#39;euml;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xAB&quot;</span>, <span class="stringliteral">&#39;euro;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x82\xAC&quot;</span>, <span class="stringliteral">&#39;exist;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x88\x83&quot;</span>, <span class="stringliteral">&#39;fnof;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC6\x92&quot;</span>, <span class="stringliteral">&#39;forall;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x88\x80&quot;</span>, <span class="stringliteral">&#39;frac12&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xBD&quot;</span>, <span class="stringliteral">&#39;frac12;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xBD&quot;</span>, <span class="stringliteral">&#39;frac14&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xBC&quot;</span>, <span class="stringliteral">&#39;frac14;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xBC&quot;</span>, <span class="stringliteral">&#39;frac34&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xBE&quot;</span>, <span class="stringliteral">&#39;frac34;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xBE&quot;</span>, <span class="stringliteral">&#39;frasl;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x81\x84&quot;</span>, <span class="stringliteral">&#39;Gamma;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\x93&quot;</span>, <span class="stringliteral">&#39;gamma;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\xB3&quot;</span>, <span class="stringliteral">&#39;ge;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x89\xA5&quot;</span>, <span class="stringliteral">&#39;GT&#39;</span> =&gt; <span class="stringliteral">&quot;\x3E&quot;</span>, <span class="stringliteral">&#39;gt&#39;</span> =&gt; <span class="stringliteral">&quot;\x3E&quot;</span>, <span class="stringliteral">&#39;GT;&#39;</span> =&gt; <span class="stringliteral">&quot;\x3E&quot;</span>, <span class="stringliteral">&#39;gt;&#39;</span> =&gt; <span class="stringliteral">&quot;\x3E&quot;</span>, <span class="stringliteral">&#39;hArr;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x87\x94&quot;</span>, <span class="stringliteral">&#39;harr;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x86\x94&quot;</span>, <span class="stringliteral">&#39;hearts;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x99\xA5&quot;</span>, <span class="stringliteral">&#39;hellip;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\xA6&quot;</span>, <span class="stringliteral">&#39;Iacute&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x8D&quot;</span>, <span class="stringliteral">&#39;iacute&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xAD&quot;</span>, <span class="stringliteral">&#39;Iacute;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x8D&quot;</span>, <span class="stringliteral">&#39;iacute;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xAD&quot;</span>, <span class="stringliteral">&#39;Icirc&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x8E&quot;</span>, <span class="stringliteral">&#39;icirc&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xAE&quot;</span>, <span class="stringliteral">&#39;Icirc;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x8E&quot;</span>, <span class="stringliteral">&#39;icirc;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xAE&quot;</span>, <span class="stringliteral">&#39;iexcl&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA1&quot;</span>, <span class="stringliteral">&#39;iexcl;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA1&quot;</span>, <span class="stringliteral">&#39;Igrave&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x8C&quot;</span>, <span class="stringliteral">&#39;igrave&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xAC&quot;</span>, <span class="stringliteral">&#39;Igrave;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x8C&quot;</span>, <span class="stringliteral">&#39;igrave;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xAC&quot;</span>, <span class="stringliteral">&#39;image;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x84\x91&quot;</span>, <span class="stringliteral">&#39;infin;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x88\x9E&quot;</span>, <span class="stringliteral">&#39;int;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x88\xAB&quot;</span>, <span class="stringliteral">&#39;Iota;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\x99&quot;</span>, <span class="stringliteral">&#39;iota;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\xB9&quot;</span>, <span class="stringliteral">&#39;iquest&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xBF&quot;</span>, <span class="stringliteral">&#39;iquest;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xBF&quot;</span>, <span class="stringliteral">&#39;isin;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x88\x88&quot;</span>, <span class="stringliteral">&#39;Iuml&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x8F&quot;</span>, <span class="stringliteral">&#39;iuml&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xAF&quot;</span>, <span class="stringliteral">&#39;Iuml;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x8F&quot;</span>, <span class="stringliteral">&#39;iuml;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xAF&quot;</span>, <span class="stringliteral">&#39;Kappa;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\x9A&quot;</span>, <span class="stringliteral">&#39;kappa;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\xBA&quot;</span>, <span class="stringliteral">&#39;Lambda;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\x9B&quot;</span>, <span class="stringliteral">&#39;lambda;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\xBB&quot;</span>, <span class="stringliteral">&#39;lang;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE3\x80\x88&quot;</span>, <span class="stringliteral">&#39;laquo&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xAB&quot;</span>, <span class="stringliteral">&#39;laquo;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xAB&quot;</span>, <span class="stringliteral">&#39;lArr;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x87\x90&quot;</span>, <span class="stringliteral">&#39;larr;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x86\x90&quot;</span>, <span class="stringliteral">&#39;lceil;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x8C\x88&quot;</span>, <span class="stringliteral">&#39;ldquo;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\x9C&quot;</span>, <span class="stringliteral">&#39;le;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x89\xA4&quot;</span>, <span class="stringliteral">&#39;lfloor;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x8C\x8A&quot;</span>, <span class="stringliteral">&#39;lowast;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x88\x97&quot;</span>, <span class="stringliteral">&#39;loz;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x97\x8A&quot;</span>, <span class="stringliteral">&#39;lrm;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\x8E&quot;</span>, <span class="stringliteral">&#39;lsaquo;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\xB9&quot;</span>, <span class="stringliteral">&#39;lsquo;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\x98&quot;</span>, <span class="stringliteral">&#39;LT&#39;</span> =&gt; <span class="stringliteral">&quot;\x3C&quot;</span>, <span class="stringliteral">&#39;lt&#39;</span> =&gt; <span class="stringliteral">&quot;\x3C&quot;</span>, <span class="stringliteral">&#39;LT;&#39;</span> =&gt; <span class="stringliteral">&quot;\x3C&quot;</span>, <span class="stringliteral">&#39;lt;&#39;</span> =&gt; <span class="stringliteral">&quot;\x3C&quot;</span>, <span class="stringliteral">&#39;macr&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xAF&quot;</span>, <span class="stringliteral">&#39;macr;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xAF&quot;</span>, <span class="stringliteral">&#39;mdash;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\x94&quot;</span>, <span class="stringliteral">&#39;micro&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xB5&quot;</span>, <span class="stringliteral">&#39;micro;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xB5&quot;</span>, <span class="stringliteral">&#39;middot&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xB7&quot;</span>, <span class="stringliteral">&#39;middot;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xB7&quot;</span>, <span class="stringliteral">&#39;minus;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x88\x92&quot;</span>, <span class="stringliteral">&#39;Mu;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\x9C&quot;</span>, <span class="stringliteral">&#39;mu;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\xBC&quot;</span>, <span class="stringliteral">&#39;nabla;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x88\x87&quot;</span>, <span class="stringliteral">&#39;nbsp&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA0&quot;</span>, <span class="stringliteral">&#39;nbsp;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA0&quot;</span>, <span class="stringliteral">&#39;ndash;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\x93&quot;</span>, <span class="stringliteral">&#39;ne;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x89\xA0&quot;</span>, <span class="stringliteral">&#39;ni;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x88\x8B&quot;</span>, <span class="stringliteral">&#39;not&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xAC&quot;</span>, <span class="stringliteral">&#39;not;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xAC&quot;</span>, <span class="stringliteral">&#39;notin;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x88\x89&quot;</span>, <span class="stringliteral">&#39;nsub;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x8A\x84&quot;</span>, <span class="stringliteral">&#39;Ntilde&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x91&quot;</span>, <span class="stringliteral">&#39;ntilde&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xB1&quot;</span>, <span class="stringliteral">&#39;Ntilde;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x91&quot;</span>, <span class="stringliteral">&#39;ntilde;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xB1&quot;</span>, <span class="stringliteral">&#39;Nu;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\x9D&quot;</span>, <span class="stringliteral">&#39;nu;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\xBD&quot;</span>, <span class="stringliteral">&#39;Oacute&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x93&quot;</span>, <span class="stringliteral">&#39;oacute&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xB3&quot;</span>, <span class="stringliteral">&#39;Oacute;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x93&quot;</span>, <span class="stringliteral">&#39;oacute;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xB3&quot;</span>, <span class="stringliteral">&#39;Ocirc&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x94&quot;</span>, <span class="stringliteral">&#39;ocirc&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xB4&quot;</span>, <span class="stringliteral">&#39;Ocirc;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x94&quot;</span>, <span class="stringliteral">&#39;ocirc;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xB4&quot;</span>, <span class="stringliteral">&#39;OElig;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC5\x92&quot;</span>, <span class="stringliteral">&#39;oelig;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC5\x93&quot;</span>, <span class="stringliteral">&#39;Ograve&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x92&quot;</span>, <span class="stringliteral">&#39;ograve&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xB2&quot;</span>, <span class="stringliteral">&#39;Ograve;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x92&quot;</span>, <span class="stringliteral">&#39;ograve;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xB2&quot;</span>, <span class="stringliteral">&#39;oline;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\xBE&quot;</span>, <span class="stringliteral">&#39;Omega;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\xA9&quot;</span>, <span class="stringliteral">&#39;omega;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCF\x89&quot;</span>, <span class="stringliteral">&#39;Omicron;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\x9F&quot;</span>, <span class="stringliteral">&#39;omicron;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\xBF&quot;</span>, <span class="stringliteral">&#39;oplus;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x8A\x95&quot;</span>, <span class="stringliteral">&#39;or;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x88\xA8&quot;</span>, <span class="stringliteral">&#39;ordf&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xAA&quot;</span>, <span class="stringliteral">&#39;ordf;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xAA&quot;</span>, <span class="stringliteral">&#39;ordm&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xBA&quot;</span>, <span class="stringliteral">&#39;ordm;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xBA&quot;</span>, <span class="stringliteral">&#39;Oslash&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x98&quot;</span>, <span class="stringliteral">&#39;oslash&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xB8&quot;</span>, <span class="stringliteral">&#39;Oslash;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x98&quot;</span>, <span class="stringliteral">&#39;oslash;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xB8&quot;</span>, <span class="stringliteral">&#39;Otilde&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x95&quot;</span>, <span class="stringliteral">&#39;otilde&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xB5&quot;</span>, <span class="stringliteral">&#39;Otilde;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x95&quot;</span>, <span class="stringliteral">&#39;otilde;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xB5&quot;</span>, <span class="stringliteral">&#39;otimes;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x8A\x97&quot;</span>, <span class="stringliteral">&#39;Ouml&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x96&quot;</span>, <span class="stringliteral">&#39;ouml&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xB6&quot;</span>, <span class="stringliteral">&#39;Ouml;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x96&quot;</span>, <span class="stringliteral">&#39;ouml;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xB6&quot;</span>, <span class="stringliteral">&#39;para&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xB6&quot;</span>, <span class="stringliteral">&#39;para;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xB6&quot;</span>, <span class="stringliteral">&#39;part;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x88\x82&quot;</span>, <span class="stringliteral">&#39;permil;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\xB0&quot;</span>, <span class="stringliteral">&#39;perp;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x8A\xA5&quot;</span>, <span class="stringliteral">&#39;Phi;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\xA6&quot;</span>, <span class="stringliteral">&#39;phi;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCF\x86&quot;</span>, <span class="stringliteral">&#39;Pi;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\xA0&quot;</span>, <span class="stringliteral">&#39;pi;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCF\x80&quot;</span>, <span class="stringliteral">&#39;piv;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCF\x96&quot;</span>, <span class="stringliteral">&#39;plusmn&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xB1&quot;</span>, <span class="stringliteral">&#39;plusmn;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xB1&quot;</span>, <span class="stringliteral">&#39;pound&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA3&quot;</span>, <span class="stringliteral">&#39;pound;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA3&quot;</span>, <span class="stringliteral">&#39;Prime;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\xB3&quot;</span>, <span class="stringliteral">&#39;prime;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\xB2&quot;</span>, <span class="stringliteral">&#39;prod;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x88\x8F&quot;</span>, <span class="stringliteral">&#39;prop;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x88\x9D&quot;</span>, <span class="stringliteral">&#39;Psi;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\xA8&quot;</span>, <span class="stringliteral">&#39;psi;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCF\x88&quot;</span>, <span class="stringliteral">&#39;QUOT&#39;</span> =&gt; <span class="stringliteral">&quot;\x22&quot;</span>, <span class="stringliteral">&#39;quot&#39;</span> =&gt; <span class="stringliteral">&quot;\x22&quot;</span>, <span class="stringliteral">&#39;QUOT;&#39;</span> =&gt; <span class="stringliteral">&quot;\x22&quot;</span>, <span class="stringliteral">&#39;quot;&#39;</span> =&gt; <span class="stringliteral">&quot;\x22&quot;</span>, <span class="stringliteral">&#39;radic;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x88\x9A&quot;</span>, <span class="stringliteral">&#39;rang;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE3\x80\x89&quot;</span>, <span class="stringliteral">&#39;raquo&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xBB&quot;</span>, <span class="stringliteral">&#39;raquo;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xBB&quot;</span>, <span class="stringliteral">&#39;rArr;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x87\x92&quot;</span>, <span class="stringliteral">&#39;rarr;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x86\x92&quot;</span>, <span class="stringliteral">&#39;rceil;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x8C\x89&quot;</span>, <span class="stringliteral">&#39;rdquo;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\x9D&quot;</span>, <span class="stringliteral">&#39;real;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x84\x9C&quot;</span>, <span class="stringliteral">&#39;REG&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xAE&quot;</span>, <span class="stringliteral">&#39;reg&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xAE&quot;</span>, <span class="stringliteral">&#39;REG;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xAE&quot;</span>, <span class="stringliteral">&#39;reg;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xAE&quot;</span>, <span class="stringliteral">&#39;rfloor;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x8C\x8B&quot;</span>, <span class="stringliteral">&#39;Rho;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\xA1&quot;</span>, <span class="stringliteral">&#39;rho;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCF\x81&quot;</span>, <span class="stringliteral">&#39;rlm;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\x8F&quot;</span>, <span class="stringliteral">&#39;rsaquo;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\xBA&quot;</span>, <span class="stringliteral">&#39;rsquo;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\x99&quot;</span>, <span class="stringliteral">&#39;sbquo;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\x9A&quot;</span>, <span class="stringliteral">&#39;Scaron;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC5\xA0&quot;</span>, <span class="stringliteral">&#39;scaron;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC5\xA1&quot;</span>, <span class="stringliteral">&#39;sdot;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x8B\x85&quot;</span>, <span class="stringliteral">&#39;sect&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA7&quot;</span>, <span class="stringliteral">&#39;sect;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA7&quot;</span>, <span class="stringliteral">&#39;shy&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xAD&quot;</span>, <span class="stringliteral">&#39;shy;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xAD&quot;</span>, <span class="stringliteral">&#39;Sigma;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\xA3&quot;</span>, <span class="stringliteral">&#39;sigma;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCF\x83&quot;</span>, <span class="stringliteral">&#39;sigmaf;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCF\x82&quot;</span>, <span class="stringliteral">&#39;sim;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x88\xBC&quot;</span>, <span class="stringliteral">&#39;spades;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x99\xA0&quot;</span>, <span class="stringliteral">&#39;sub;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x8A\x82&quot;</span>, <span class="stringliteral">&#39;sube;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x8A\x86&quot;</span>, <span class="stringliteral">&#39;sum;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x88\x91&quot;</span>, <span class="stringliteral">&#39;sup;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x8A\x83&quot;</span>, <span class="stringliteral">&#39;sup1&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xB9&quot;</span>, <span class="stringliteral">&#39;sup1;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xB9&quot;</span>, <span class="stringliteral">&#39;sup2&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xB2&quot;</span>, <span class="stringliteral">&#39;sup2;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xB2&quot;</span>, <span class="stringliteral">&#39;sup3&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xB3&quot;</span>, <span class="stringliteral">&#39;sup3;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xB3&quot;</span>, <span class="stringliteral">&#39;supe;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x8A\x87&quot;</span>, <span class="stringliteral">&#39;szlig&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x9F&quot;</span>, <span class="stringliteral">&#39;szlig;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x9F&quot;</span>, <span class="stringliteral">&#39;Tau;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\xA4&quot;</span>, <span class="stringliteral">&#39;tau;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCF\x84&quot;</span>, <span class="stringliteral">&#39;there4;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x88\xB4&quot;</span>, <span class="stringliteral">&#39;Theta;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\x98&quot;</span>, <span class="stringliteral">&#39;theta;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\xB8&quot;</span>, <span class="stringliteral">&#39;thetasym;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCF\x91&quot;</span>, <span class="stringliteral">&#39;thinsp;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\x89&quot;</span>, <span class="stringliteral">&#39;THORN&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x9E&quot;</span>, <span class="stringliteral">&#39;thorn&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xBE&quot;</span>, <span class="stringliteral">&#39;THORN;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x9E&quot;</span>, <span class="stringliteral">&#39;thorn;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xBE&quot;</span>, <span class="stringliteral">&#39;tilde;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCB\x9C&quot;</span>, <span class="stringliteral">&#39;times&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x97&quot;</span>, <span class="stringliteral">&#39;times;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x97&quot;</span>, <span class="stringliteral">&#39;TRADE;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x84\xA2&quot;</span>, <span class="stringliteral">&#39;trade;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x84\xA2&quot;</span>, <span class="stringliteral">&#39;Uacute&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x9A&quot;</span>, <span class="stringliteral">&#39;uacute&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xBA&quot;</span>, <span class="stringliteral">&#39;Uacute;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x9A&quot;</span>, <span class="stringliteral">&#39;uacute;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xBA&quot;</span>, <span class="stringliteral">&#39;uArr;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x87\x91&quot;</span>, <span class="stringliteral">&#39;uarr;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x86\x91&quot;</span>, <span class="stringliteral">&#39;Ucirc&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x9B&quot;</span>, <span class="stringliteral">&#39;ucirc&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xBB&quot;</span>, <span class="stringliteral">&#39;Ucirc;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x9B&quot;</span>, <span class="stringliteral">&#39;ucirc;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xBB&quot;</span>, <span class="stringliteral">&#39;Ugrave&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x99&quot;</span>, <span class="stringliteral">&#39;ugrave&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xB9&quot;</span>, <span class="stringliteral">&#39;Ugrave;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x99&quot;</span>, <span class="stringliteral">&#39;ugrave;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xB9&quot;</span>, <span class="stringliteral">&#39;uml&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA8&quot;</span>, <span class="stringliteral">&#39;uml;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA8&quot;</span>, <span class="stringliteral">&#39;upsih;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCF\x92&quot;</span>, <span class="stringliteral">&#39;Upsilon;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\xA5&quot;</span>, <span class="stringliteral">&#39;upsilon;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCF\x85&quot;</span>, <span class="stringliteral">&#39;Uuml&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x9C&quot;</span>, <span class="stringliteral">&#39;uuml&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xBC&quot;</span>, <span class="stringliteral">&#39;Uuml;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x9C&quot;</span>, <span class="stringliteral">&#39;uuml;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xBC&quot;</span>, <span class="stringliteral">&#39;weierp;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x84\x98&quot;</span>, <span class="stringliteral">&#39;Xi;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\x9E&quot;</span>, <span class="stringliteral">&#39;xi;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\xBE&quot;</span>, <span class="stringliteral">&#39;Yacute&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x9D&quot;</span>, <span class="stringliteral">&#39;yacute&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xBD&quot;</span>, <span class="stringliteral">&#39;Yacute;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\x9D&quot;</span>, <span class="stringliteral">&#39;yacute;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xBD&quot;</span>, <span class="stringliteral">&#39;yen&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA5&quot;</span>, <span class="stringliteral">&#39;yen;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC2\xA5&quot;</span>, <span class="stringliteral">&#39;yuml&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xBF&quot;</span>, <span class="stringliteral">&#39;Yuml;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC5\xB8&quot;</span>, <span class="stringliteral">&#39;yuml;&#39;</span> =&gt; <span class="stringliteral">&quot;\xC3\xBF&quot;</span>, <span class="stringliteral">&#39;Zeta;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\x96&quot;</span>, <span class="stringliteral">&#39;zeta;&#39;</span> =&gt; <span class="stringliteral">&quot;\xCE\xB6&quot;</span>, <span class="stringliteral">&#39;zwj;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\x8D&quot;</span>, <span class="stringliteral">&#39;zwnj;&#39;</span> =&gt; <span class="stringliteral">&quot;\xE2\x80\x8C&quot;</span>);
<a name="l11549"></a>11549 
<a name="l11550"></a>11550             <span class="keywordflow">for</span> ($i = 0, $match = null; $i &lt; 9 &amp;&amp; $this-&gt;consume() !== <span class="keyword">false</span>; $i++)
<a name="l11551"></a>11551             {
<a name="l11552"></a>11552                $consumed = substr($this-&gt;consumed, 1);
<a name="l11553"></a>11553                <span class="keywordflow">if</span> (isset($entities[$consumed]))
<a name="l11554"></a>11554                {
<a name="l11555"></a>11555                   $match = $consumed;
<a name="l11556"></a>11556                }
<a name="l11557"></a>11557             }
<a name="l11558"></a>11558 
<a name="l11559"></a>11559             <span class="keywordflow">if</span> ($match !== null)
<a name="l11560"></a>11560             {
<a name="l11561"></a>11561                $this-&gt;data = substr_replace($this-&gt;data, $entities[$match], $this-&gt;position - strlen($consumed) - 1, strlen($match) + 1);
<a name="l11562"></a>11562                $this-&gt;position += strlen($entities[$match]) - strlen($consumed) - 1;
<a name="l11563"></a>11563             }
<a name="l11564"></a>11564             <span class="keywordflow">break</span>;
<a name="l11565"></a>11565       }
<a name="l11566"></a>11566    }
<a name="l11567"></a>11567 }
<a name="l11568"></a>11568 <span class="comment"></span>
<a name="l11569"></a>11569 <span class="comment">/**</span>
<a name="l11570"></a>11570 <span class="comment"> * IRI parser/serialiser</span>
<a name="l11571"></a>11571 <span class="comment"> *</span>
<a name="l11572"></a>11572 <span class="comment"> * @package SimplePie</span>
<a name="l11573"></a>11573 <span class="comment"> */</span>
<a name="l11574"></a><a class="code" href="class_simple_pie___i_r_i.html">11574</a> <span class="keyword">class </span><a class="code" href="class_simple_pie___i_r_i.html">SimplePie_IRI</a>
<a name="l11575"></a>11575 {<span class="comment"></span>
<a name="l11576"></a>11576 <span class="comment">   /**</span>
<a name="l11577"></a>11577 <span class="comment">    * Scheme</span>
<a name="l11578"></a>11578 <span class="comment">    *</span>
<a name="l11579"></a>11579 <span class="comment">    * @access private</span>
<a name="l11580"></a>11580 <span class="comment">    * @var string</span>
<a name="l11581"></a>11581 <span class="comment">    */</span>
<a name="l11582"></a>11582    var $scheme;
<a name="l11583"></a>11583 <span class="comment"></span>
<a name="l11584"></a>11584 <span class="comment">   /**</span>
<a name="l11585"></a>11585 <span class="comment">    * User Information</span>
<a name="l11586"></a>11586 <span class="comment">    *</span>
<a name="l11587"></a>11587 <span class="comment">    * @access private</span>
<a name="l11588"></a>11588 <span class="comment">    * @var string</span>
<a name="l11589"></a>11589 <span class="comment">    */</span>
<a name="l11590"></a>11590    var $userinfo;
<a name="l11591"></a>11591 <span class="comment"></span>
<a name="l11592"></a>11592 <span class="comment">   /**</span>
<a name="l11593"></a>11593 <span class="comment">    * Host</span>
<a name="l11594"></a>11594 <span class="comment">    *</span>
<a name="l11595"></a>11595 <span class="comment">    * @access private</span>
<a name="l11596"></a>11596 <span class="comment">    * @var string</span>
<a name="l11597"></a>11597 <span class="comment">    */</span>
<a name="l11598"></a>11598    var $host;
<a name="l11599"></a>11599 <span class="comment"></span>
<a name="l11600"></a>11600 <span class="comment">   /**</span>
<a name="l11601"></a>11601 <span class="comment">    * Port</span>
<a name="l11602"></a>11602 <span class="comment">    *</span>
<a name="l11603"></a>11603 <span class="comment">    * @access private</span>
<a name="l11604"></a>11604 <span class="comment">    * @var string</span>
<a name="l11605"></a>11605 <span class="comment">    */</span>
<a name="l11606"></a>11606    var $port;
<a name="l11607"></a>11607 <span class="comment"></span>
<a name="l11608"></a>11608 <span class="comment">   /**</span>
<a name="l11609"></a>11609 <span class="comment">    * Path</span>
<a name="l11610"></a>11610 <span class="comment">    *</span>
<a name="l11611"></a>11611 <span class="comment">    * @access private</span>
<a name="l11612"></a>11612 <span class="comment">    * @var string</span>
<a name="l11613"></a>11613 <span class="comment">    */</span>
<a name="l11614"></a>11614    var $path;
<a name="l11615"></a>11615 <span class="comment"></span>
<a name="l11616"></a>11616 <span class="comment">   /**</span>
<a name="l11617"></a>11617 <span class="comment">    * Query</span>
<a name="l11618"></a>11618 <span class="comment">    *</span>
<a name="l11619"></a>11619 <span class="comment">    * @access private</span>
<a name="l11620"></a>11620 <span class="comment">    * @var string</span>
<a name="l11621"></a>11621 <span class="comment">    */</span>
<a name="l11622"></a>11622    var $query;
<a name="l11623"></a>11623 <span class="comment"></span>
<a name="l11624"></a>11624 <span class="comment">   /**</span>
<a name="l11625"></a>11625 <span class="comment">    * Fragment</span>
<a name="l11626"></a>11626 <span class="comment">    *</span>
<a name="l11627"></a>11627 <span class="comment">    * @access private</span>
<a name="l11628"></a>11628 <span class="comment">    * @var string</span>
<a name="l11629"></a>11629 <span class="comment">    */</span>
<a name="l11630"></a>11630    var $fragment;
<a name="l11631"></a>11631 <span class="comment"></span>
<a name="l11632"></a>11632 <span class="comment">   /**</span>
<a name="l11633"></a>11633 <span class="comment">    * Whether the object represents a valid IRI</span>
<a name="l11634"></a>11634 <span class="comment">    *</span>
<a name="l11635"></a>11635 <span class="comment">    * @access private</span>
<a name="l11636"></a>11636 <span class="comment">    * @var array</span>
<a name="l11637"></a>11637 <span class="comment">    */</span>
<a name="l11638"></a>11638    var $valid = array();
<a name="l11639"></a>11639 <span class="comment"></span>
<a name="l11640"></a>11640 <span class="comment">   /**</span>
<a name="l11641"></a>11641 <span class="comment">    * Return the entire IRI when you try and read the object as a string</span>
<a name="l11642"></a>11642 <span class="comment">    *</span>
<a name="l11643"></a>11643 <span class="comment">    * @access public</span>
<a name="l11644"></a>11644 <span class="comment">    * @return string</span>
<a name="l11645"></a>11645 <span class="comment">    */</span>
<a name="l11646"></a><a class="code" href="class_simple_pie___i_r_i.html#a7516ca30af0db3cdbf9a7739b48ce91d">11646</a>    <span class="keyword">function</span> __toString()
<a name="l11647"></a>11647    {
<a name="l11648"></a>11648       <span class="keywordflow">return</span> $this-&gt;get_iri();
<a name="l11649"></a>11649    }
<a name="l11650"></a>11650 <span class="comment"></span>
<a name="l11651"></a>11651 <span class="comment">   /**</span>
<a name="l11652"></a>11652 <span class="comment">    * Create a new IRI object, from a specified string</span>
<a name="l11653"></a>11653 <span class="comment">    *</span>
<a name="l11654"></a>11654 <span class="comment">    * @access public</span>
<a name="l11655"></a>11655 <span class="comment">    * @param string $iri</span>
<a name="l11656"></a>11656 <span class="comment">    * @return SimplePie_IRI</span>
<a name="l11657"></a>11657 <span class="comment">    */</span>
<a name="l11658"></a><a class="code" href="class_simple_pie___i_r_i.html#af9b7d93cadf30dc8a4f029a9f95f22f7">11658</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie___i_r_i.html">SimplePie_IRI</a>($iri)
<a name="l11659"></a>11659    {
<a name="l11660"></a>11660       $iri = (string) $iri;
<a name="l11661"></a>11661       <span class="keywordflow">if</span> ($iri !== <span class="stringliteral">&#39;&#39;</span>)
<a name="l11662"></a>11662       {
<a name="l11663"></a>11663          $parsed = $this-&gt;parse_iri($iri);
<a name="l11664"></a>11664          $this-&gt;set_scheme($parsed[<span class="stringliteral">&#39;scheme&#39;</span>]);
<a name="l11665"></a>11665          $this-&gt;set_authority($parsed[<span class="stringliteral">&#39;authority&#39;</span>]);
<a name="l11666"></a>11666          $this-&gt;set_path($parsed[<span class="stringliteral">&#39;path&#39;</span>]);
<a name="l11667"></a>11667          $this-&gt;set_query($parsed[<span class="stringliteral">&#39;query&#39;</span>]);
<a name="l11668"></a>11668          $this-&gt;set_fragment($parsed[<span class="stringliteral">&#39;fragment&#39;</span>]);
<a name="l11669"></a>11669       }
<a name="l11670"></a>11670    }
<a name="l11671"></a>11671 <span class="comment"></span>
<a name="l11672"></a>11672 <span class="comment">   /**</span>
<a name="l11673"></a>11673 <span class="comment">    * Create a new IRI object by resolving a relative IRI</span>
<a name="l11674"></a>11674 <span class="comment">    *</span>
<a name="l11675"></a>11675 <span class="comment">    * @static</span>
<a name="l11676"></a>11676 <span class="comment">    * @access public</span>
<a name="l11677"></a>11677 <span class="comment">    * @param SimplePie_IRI $base Base IRI</span>
<a name="l11678"></a>11678 <span class="comment">    * @param string $relative Relative IRI</span>
<a name="l11679"></a>11679 <span class="comment">    * @return SimplePie_IRI</span>
<a name="l11680"></a>11680 <span class="comment">    */</span>
<a name="l11681"></a><a class="code" href="class_simple_pie___i_r_i.html#af678b05c44b60fbc76a29230f59609b2">11681</a>    <span class="keyword">function</span> absolutize($base, $relative)
<a name="l11682"></a>11682    {
<a name="l11683"></a>11683       $relative = (string) $relative;
<a name="l11684"></a>11684       <span class="keywordflow">if</span> ($relative !== <span class="stringliteral">&#39;&#39;</span>)
<a name="l11685"></a>11685       {
<a name="l11686"></a>11686          $relative =&amp; <span class="keyword">new</span> <a class="code" href="class_simple_pie___i_r_i.html">SimplePie_IRI</a>($relative);
<a name="l11687"></a>11687          <span class="keywordflow">if</span> ($relative-&gt;get_scheme() !== null)
<a name="l11688"></a>11688          {
<a name="l11689"></a>11689             $target = $relative;
<a name="l11690"></a>11690          }
<a name="l11691"></a>11691          elseif ($base-&gt;get_iri() !== null)
<a name="l11692"></a>11692          {
<a name="l11693"></a>11693             <span class="keywordflow">if</span> ($relative-&gt;get_authority() !== null)
<a name="l11694"></a>11694             {
<a name="l11695"></a>11695                $target = $relative;
<a name="l11696"></a>11696                $target-&gt;set_scheme($base-&gt;get_scheme());
<a name="l11697"></a>11697             }
<a name="l11698"></a>11698             <span class="keywordflow">else</span>
<a name="l11699"></a>11699             {
<a name="l11700"></a>11700                $target =&amp; <span class="keyword">new</span> <a class="code" href="class_simple_pie___i_r_i.html">SimplePie_IRI</a>(<span class="stringliteral">&#39;&#39;</span>);
<a name="l11701"></a>11701                $target-&gt;set_scheme($base-&gt;get_scheme());
<a name="l11702"></a>11702                $target-&gt;set_userinfo($base-&gt;get_userinfo());
<a name="l11703"></a>11703                $target-&gt;set_host($base-&gt;get_host());
<a name="l11704"></a>11704                $target-&gt;set_port($base-&gt;get_port());
<a name="l11705"></a>11705                <span class="keywordflow">if</span> ($relative-&gt;get_path() !== null)
<a name="l11706"></a>11706                {
<a name="l11707"></a>11707                   <span class="keywordflow">if</span> (strpos($relative-&gt;get_path(), <span class="charliteral">&#39;/&#39;</span>) === 0)
<a name="l11708"></a>11708                   {
<a name="l11709"></a>11709                      $target-&gt;set_path($relative-&gt;get_path());
<a name="l11710"></a>11710                   }
<a name="l11711"></a>11711                   elseif (($base-&gt;get_userinfo() !== null || $base-&gt;get_host() !== null || $base-&gt;get_port() !== null) &amp;&amp; $base-&gt;get_path() === null)
<a name="l11712"></a>11712                   {
<a name="l11713"></a>11713                      $target-&gt;set_path(<span class="charliteral">&#39;/&#39;</span> . $relative-&gt;get_path());
<a name="l11714"></a>11714                   }
<a name="l11715"></a>11715                   elseif (($last_segment = strrpos($base-&gt;get_path(), <span class="charliteral">&#39;/&#39;</span>)) !== <span class="keyword">false</span>)
<a name="l11716"></a>11716                   {
<a name="l11717"></a>11717                      $target-&gt;set_path(substr($base-&gt;get_path(), 0, $last_segment + 1) . $relative-&gt;get_path());
<a name="l11718"></a>11718                   }
<a name="l11719"></a>11719                   <span class="keywordflow">else</span>
<a name="l11720"></a>11720                   {
<a name="l11721"></a>11721                      $target-&gt;set_path($relative-&gt;get_path());
<a name="l11722"></a>11722                   }
<a name="l11723"></a>11723                   $target-&gt;set_query($relative-&gt;get_query());
<a name="l11724"></a>11724                }
<a name="l11725"></a>11725                <span class="keywordflow">else</span>
<a name="l11726"></a>11726                {
<a name="l11727"></a>11727                   $target-&gt;set_path($base-&gt;get_path());
<a name="l11728"></a>11728                   <span class="keywordflow">if</span> ($relative-&gt;get_query() !== null)
<a name="l11729"></a>11729                   {
<a name="l11730"></a>11730                      $target-&gt;set_query($relative-&gt;get_query());
<a name="l11731"></a>11731                   }
<a name="l11732"></a>11732                   elseif ($base-&gt;get_query() !== null)
<a name="l11733"></a>11733                   {
<a name="l11734"></a>11734                      $target-&gt;set_query($base-&gt;get_query());
<a name="l11735"></a>11735                   }
<a name="l11736"></a>11736                }
<a name="l11737"></a>11737             }
<a name="l11738"></a>11738             $target-&gt;set_fragment($relative-&gt;get_fragment());
<a name="l11739"></a>11739          }
<a name="l11740"></a>11740          <span class="keywordflow">else</span>
<a name="l11741"></a>11741          {
<a name="l11742"></a>11742             <span class="comment">// No base URL, just return the relative URL</span>
<a name="l11743"></a>11743             $target = $relative;
<a name="l11744"></a>11744          }
<a name="l11745"></a>11745       }
<a name="l11746"></a>11746       <span class="keywordflow">else</span>
<a name="l11747"></a>11747       {
<a name="l11748"></a>11748          $target = $base;
<a name="l11749"></a>11749       }
<a name="l11750"></a>11750       <span class="keywordflow">return</span> $target;
<a name="l11751"></a>11751    }
<a name="l11752"></a>11752 <span class="comment"></span>
<a name="l11753"></a>11753 <span class="comment">   /**</span>
<a name="l11754"></a>11754 <span class="comment">    * Parse an IRI into scheme/authority/path/query/fragment segments</span>
<a name="l11755"></a>11755 <span class="comment">    *</span>
<a name="l11756"></a>11756 <span class="comment">    * @access private</span>
<a name="l11757"></a>11757 <span class="comment">    * @param string $iri</span>
<a name="l11758"></a>11758 <span class="comment">    * @return array</span>
<a name="l11759"></a>11759 <span class="comment">    */</span>
<a name="l11760"></a><a class="code" href="class_simple_pie___i_r_i.html#a58180e6a37d36ce3ecccf97c7f0d59b6">11760</a>    <span class="keyword">function</span> parse_iri($iri)
<a name="l11761"></a>11761    {
<a name="l11762"></a>11762       preg_match(<span class="stringliteral">&#39;/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/&#39;</span>, $iri, $match);
<a name="l11763"></a>11763       <span class="keywordflow">for</span> ($i = count($match); $i &lt;= 9; $i++)
<a name="l11764"></a>11764       {
<a name="l11765"></a>11765          $match[$i] = <span class="stringliteral">&#39;&#39;</span>;
<a name="l11766"></a>11766       }
<a name="l11767"></a>11767       <span class="keywordflow">return</span> array(<span class="stringliteral">&#39;scheme&#39;</span> =&gt; $match[2], <span class="stringliteral">&#39;authority&#39;</span> =&gt; $match[4], <span class="stringliteral">&#39;path&#39;</span> =&gt; $match[5], <span class="stringliteral">&#39;query&#39;</span> =&gt; $match[7], <span class="stringliteral">&#39;fragment&#39;</span> =&gt; $match[9]);
<a name="l11768"></a>11768    }
<a name="l11769"></a>11769 <span class="comment"></span>
<a name="l11770"></a>11770 <span class="comment">   /**</span>
<a name="l11771"></a>11771 <span class="comment">    * Remove dot segments from a path</span>
<a name="l11772"></a>11772 <span class="comment">    *</span>
<a name="l11773"></a>11773 <span class="comment">    * @access private</span>
<a name="l11774"></a>11774 <span class="comment">    * @param string $input</span>
<a name="l11775"></a>11775 <span class="comment">    * @return string</span>
<a name="l11776"></a>11776 <span class="comment">    */</span>
<a name="l11777"></a><a class="code" href="class_simple_pie___i_r_i.html#a879ab4e58b44a985a31c3a2e6c6f2173">11777</a>    <span class="keyword">function</span> remove_dot_segments($input)
<a name="l11778"></a>11778    {
<a name="l11779"></a>11779       $output = <span class="stringliteral">&#39;&#39;</span>;
<a name="l11780"></a>11780       <span class="keywordflow">while</span> (strpos($input, <span class="stringliteral">&#39;./&#39;</span>) !== <span class="keyword">false</span> || strpos($input, <span class="stringliteral">&#39;/.&#39;</span>) !== <span class="keyword">false</span> || $input === <span class="charliteral">&#39;.&#39;</span> || $input === <span class="stringliteral">&#39;..&#39;</span>)
<a name="l11781"></a>11781       {
<a name="l11782"></a>11782          <span class="comment">// A: If the input buffer begins with a prefix of &quot;../&quot; or &quot;./&quot;, then remove that prefix from the input buffer; otherwise,</span>
<a name="l11783"></a>11783          <span class="keywordflow">if</span> (strpos($input, <span class="stringliteral">&#39;../&#39;</span>) === 0)
<a name="l11784"></a>11784          {
<a name="l11785"></a>11785             $input = substr($input, 3);
<a name="l11786"></a>11786          }
<a name="l11787"></a>11787          elseif (strpos($input, <span class="stringliteral">&#39;./&#39;</span>) === 0)
<a name="l11788"></a>11788          {
<a name="l11789"></a>11789             $input = substr($input, 2);
<a name="l11790"></a>11790          }
<a name="l11791"></a>11791          <span class="comment">// B: if the input buffer begins with a prefix of &quot;/./&quot; or &quot;/.&quot;, where &quot;.&quot; is a complete path segment, then replace that prefix with &quot;/&quot; in the input buffer; otherwise,</span>
<a name="l11792"></a>11792          elseif (strpos($input, <span class="stringliteral">&#39;/./&#39;</span>) === 0)
<a name="l11793"></a>11793          {
<a name="l11794"></a>11794             $input = substr_replace($input, <span class="charliteral">&#39;/&#39;</span>, 0, 3);
<a name="l11795"></a>11795          }
<a name="l11796"></a>11796          elseif ($input === <span class="stringliteral">&#39;/.&#39;</span>)
<a name="l11797"></a>11797          {
<a name="l11798"></a>11798             $input = <span class="charliteral">&#39;/&#39;</span>;
<a name="l11799"></a>11799          }
<a name="l11800"></a>11800          <span class="comment">// C: if the input buffer begins with a prefix of &quot;/../&quot; or &quot;/..&quot;, where &quot;..&quot; is a complete path segment, then replace that prefix with &quot;/&quot; in the input buffer and remove the last segment and its preceding &quot;/&quot; (if any) from the output buffer; otherwise,</span>
<a name="l11801"></a>11801          elseif (strpos($input, <span class="stringliteral">&#39;/../&#39;</span>) === 0)
<a name="l11802"></a>11802          {
<a name="l11803"></a>11803             $input = substr_replace($input, <span class="charliteral">&#39;/&#39;</span>, 0, 4);
<a name="l11804"></a>11804             $output = substr_replace($output, <span class="stringliteral">&#39;&#39;</span>, strrpos($output, <span class="charliteral">&#39;/&#39;</span>));
<a name="l11805"></a>11805          }
<a name="l11806"></a>11806          elseif ($input === <span class="stringliteral">&#39;/..&#39;</span>)
<a name="l11807"></a>11807          {
<a name="l11808"></a>11808             $input = <span class="charliteral">&#39;/&#39;</span>;
<a name="l11809"></a>11809             $output = substr_replace($output, <span class="stringliteral">&#39;&#39;</span>, strrpos($output, <span class="charliteral">&#39;/&#39;</span>));
<a name="l11810"></a>11810          }
<a name="l11811"></a>11811          <span class="comment">// D: if the input buffer consists only of &quot;.&quot; or &quot;..&quot;, then remove that from the input buffer; otherwise,</span>
<a name="l11812"></a>11812          elseif ($input === <span class="charliteral">&#39;.&#39;</span> || $input === <span class="stringliteral">&#39;..&#39;</span>)
<a name="l11813"></a>11813          {
<a name="l11814"></a>11814             $input = <span class="stringliteral">&#39;&#39;</span>;
<a name="l11815"></a>11815          }
<a name="l11816"></a>11816          <span class="comment">// E: move the first path segment in the input buffer to the end of the output buffer, including the initial &quot;/&quot; character (if any) and any subsequent characters up to, but not including, the next &quot;/&quot; character or the end of the input buffer</span>
<a name="l11817"></a>11817          elseif (($pos = strpos($input, <span class="charliteral">&#39;/&#39;</span>, 1)) !== <span class="keyword">false</span>)
<a name="l11818"></a>11818          {
<a name="l11819"></a>11819             $output .= substr($input, 0, $pos);
<a name="l11820"></a>11820             $input = substr_replace($input, <span class="stringliteral">&#39;&#39;</span>, 0, $pos);
<a name="l11821"></a>11821          }
<a name="l11822"></a>11822          <span class="keywordflow">else</span>
<a name="l11823"></a>11823          {
<a name="l11824"></a>11824             $output .= $input;
<a name="l11825"></a>11825             $input = <span class="stringliteral">&#39;&#39;</span>;
<a name="l11826"></a>11826          }
<a name="l11827"></a>11827       }
<a name="l11828"></a>11828       <span class="keywordflow">return</span> $output . $input;
<a name="l11829"></a>11829    }
<a name="l11830"></a>11830 <span class="comment"></span>
<a name="l11831"></a>11831 <span class="comment">   /**</span>
<a name="l11832"></a>11832 <span class="comment">    * Replace invalid character with percent encoding</span>
<a name="l11833"></a>11833 <span class="comment">    *</span>
<a name="l11834"></a>11834 <span class="comment">    * @access private</span>
<a name="l11835"></a>11835 <span class="comment">    * @param string $string Input string</span>
<a name="l11836"></a>11836 <span class="comment">    * @param string $valid_chars Valid characters</span>
<a name="l11837"></a>11837 <span class="comment">    * @param int $case Normalise case</span>
<a name="l11838"></a>11838 <span class="comment">    * @return string</span>
<a name="l11839"></a>11839 <span class="comment">    */</span>
<a name="l11840"></a><a class="code" href="class_simple_pie___i_r_i.html#aa5f8749ce334af595f41eb34f509ee7c">11840</a>    <span class="keyword">function</span> replace_invalid_with_pct_encoding($string, $valid_chars, $case = SIMPLEPIE_SAME_CASE)
<a name="l11841"></a>11841    {
<a name="l11842"></a>11842       <span class="comment">// Normalise case</span>
<a name="l11843"></a>11843       <span class="keywordflow">if</span> ($case &amp; SIMPLEPIE_LOWERCASE)
<a name="l11844"></a>11844       {
<a name="l11845"></a>11845          $string = strtolower($string);
<a name="l11846"></a>11846       }
<a name="l11847"></a>11847       elseif ($case &amp; SIMPLEPIE_UPPERCASE)
<a name="l11848"></a>11848       {
<a name="l11849"></a>11849          $string = strtoupper($string);
<a name="l11850"></a>11850       }
<a name="l11851"></a>11851 
<a name="l11852"></a>11852       <span class="comment">// Store position and string length (to avoid constantly recalculating this)</span>
<a name="l11853"></a>11853       $position = 0;
<a name="l11854"></a>11854       $strlen = strlen($string);
<a name="l11855"></a>11855 
<a name="l11856"></a>11856       <span class="comment">// Loop as long as we have invalid characters, advancing the position to the next invalid character</span>
<a name="l11857"></a>11857       <span class="keywordflow">while</span> (($position += strspn($string, $valid_chars, $position)) &lt; $strlen)
<a name="l11858"></a>11858       {
<a name="l11859"></a>11859          <span class="comment">// If we have a % character</span>
<a name="l11860"></a>11860          <span class="keywordflow">if</span> ($string[$position] === <span class="charliteral">&#39;%&#39;</span>)
<a name="l11861"></a>11861          {
<a name="l11862"></a>11862             <span class="comment">// If we have a pct-encoded section</span>
<a name="l11863"></a>11863             <span class="keywordflow">if</span> ($position + 2 &lt; $strlen &amp;&amp; strspn($string, <span class="stringliteral">&#39;0123456789ABCDEFabcdef&#39;</span>, $position + 1, 2) === 2)
<a name="l11864"></a>11864             {
<a name="l11865"></a>11865                <span class="comment">// Get the the represented character</span>
<a name="l11866"></a>11866                $chr = chr(hexdec(substr($string, $position + 1, 2)));
<a name="l11867"></a>11867 
<a name="l11868"></a>11868                <span class="comment">// If the character is valid, replace the pct-encoded with the actual character while normalising case</span>
<a name="l11869"></a>11869                <span class="keywordflow">if</span> (strpos($valid_chars, $chr) !== <span class="keyword">false</span>)
<a name="l11870"></a>11870                {
<a name="l11871"></a>11871                   <span class="keywordflow">if</span> ($case &amp; SIMPLEPIE_LOWERCASE)
<a name="l11872"></a>11872                   {
<a name="l11873"></a>11873                      $chr = strtolower($chr);
<a name="l11874"></a>11874                   }
<a name="l11875"></a>11875                   elseif ($case &amp; SIMPLEPIE_UPPERCASE)
<a name="l11876"></a>11876                   {
<a name="l11877"></a>11877                      $chr = strtoupper($chr);
<a name="l11878"></a>11878                   }
<a name="l11879"></a>11879                   $string = substr_replace($string, $chr, $position, 3);
<a name="l11880"></a>11880                   $strlen -= 2;
<a name="l11881"></a>11881                   $position++;
<a name="l11882"></a>11882                }
<a name="l11883"></a>11883 
<a name="l11884"></a>11884                <span class="comment">// Otherwise just normalise the pct-encoded to uppercase</span>
<a name="l11885"></a>11885                <span class="keywordflow">else</span>
<a name="l11886"></a>11886                {
<a name="l11887"></a>11887                   $string = substr_replace($string, strtoupper(substr($string, $position + 1, 2)), $position + 1, 2);
<a name="l11888"></a>11888                   $position += 3;
<a name="l11889"></a>11889                }
<a name="l11890"></a>11890             }
<a name="l11891"></a>11891             <span class="comment">// If we don&#39;t have a pct-encoded section, just replace the % with its own esccaped form</span>
<a name="l11892"></a>11892             <span class="keywordflow">else</span>
<a name="l11893"></a>11893             {
<a name="l11894"></a>11894                $string = substr_replace($string, <span class="stringliteral">&#39;%25&#39;</span>, $position, 1);
<a name="l11895"></a>11895                $strlen += 2;
<a name="l11896"></a>11896                $position += 3;
<a name="l11897"></a>11897             }
<a name="l11898"></a>11898          }
<a name="l11899"></a>11899          <span class="comment">// If we have an invalid character, change into its pct-encoded form</span>
<a name="l11900"></a>11900          <span class="keywordflow">else</span>
<a name="l11901"></a>11901          {
<a name="l11902"></a>11902             $replacement = sprintf(<span class="stringliteral">&quot;%%%02X&quot;</span>, ord($string[$position]));
<a name="l11903"></a>11903             $string = str_replace($string[$position], $replacement, $string);
<a name="l11904"></a>11904             $strlen = strlen($string);
<a name="l11905"></a>11905          }
<a name="l11906"></a>11906       }
<a name="l11907"></a>11907       <span class="keywordflow">return</span> $string;
<a name="l11908"></a>11908    }
<a name="l11909"></a>11909 <span class="comment"></span>
<a name="l11910"></a>11910 <span class="comment">   /**</span>
<a name="l11911"></a>11911 <span class="comment">    * Check if the object represents a valid IRI</span>
<a name="l11912"></a>11912 <span class="comment">    *</span>
<a name="l11913"></a>11913 <span class="comment">    * @access public</span>
<a name="l11914"></a>11914 <span class="comment">    * @return bool</span>
<a name="l11915"></a>11915 <span class="comment">    */</span>
<a name="l11916"></a><a class="code" href="class_simple_pie___i_r_i.html#a99a2e93fb647b699371cb19e2d28915b">11916</a>    <span class="keyword">function</span> is_valid()
<a name="l11917"></a>11917    {
<a name="l11918"></a>11918       <span class="keywordflow">return</span> array_sum($this-&gt;valid) === count($this-&gt;valid);
<a name="l11919"></a>11919    }
<a name="l11920"></a>11920 <span class="comment"></span>
<a name="l11921"></a>11921 <span class="comment">   /**</span>
<a name="l11922"></a>11922 <span class="comment">    * Set the scheme. Returns true on success, false on failure (if there are</span>
<a name="l11923"></a>11923 <span class="comment">    * any invalid characters).</span>
<a name="l11924"></a>11924 <span class="comment">    *</span>
<a name="l11925"></a>11925 <span class="comment">    * @access public</span>
<a name="l11926"></a>11926 <span class="comment">    * @param string $scheme</span>
<a name="l11927"></a>11927 <span class="comment">    * @return bool</span>
<a name="l11928"></a>11928 <span class="comment">    */</span>
<a name="l11929"></a><a class="code" href="class_simple_pie___i_r_i.html#a72e8bb868e470b1d563f1b7731a2adc4">11929</a>    <span class="keyword">function</span> set_scheme($scheme)
<a name="l11930"></a>11930    {
<a name="l11931"></a>11931       <span class="keywordflow">if</span> ($scheme === null || $scheme === <span class="stringliteral">&#39;&#39;</span>)
<a name="l11932"></a>11932       {
<a name="l11933"></a>11933          $this-&gt;scheme = null;
<a name="l11934"></a>11934       }
<a name="l11935"></a>11935       <span class="keywordflow">else</span>
<a name="l11936"></a>11936       {
<a name="l11937"></a>11937          $len = strlen($scheme);
<a name="l11938"></a>11938          <span class="keywordflow">switch</span> (<span class="keyword">true</span>)
<a name="l11939"></a>11939          {
<a name="l11940"></a>11940             <span class="keywordflow">case</span> $len &gt; 1:
<a name="l11941"></a>11941                <span class="keywordflow">if</span> (!strspn($scheme, <span class="stringliteral">&#39;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-.&#39;</span>, 1))
<a name="l11942"></a>11942                {
<a name="l11943"></a>11943                   $this-&gt;scheme = null;
<a name="l11944"></a>11944                   $this-&gt;valid[__FUNCTION__] = <span class="keyword">false</span>;
<a name="l11945"></a>11945                   <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l11946"></a>11946                }
<a name="l11947"></a>11947 
<a name="l11948"></a>11948             <span class="keywordflow">case</span> $len &gt; 0:
<a name="l11949"></a>11949                <span class="keywordflow">if</span> (!strspn($scheme, <span class="stringliteral">&#39;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz&#39;</span>, 0, 1))
<a name="l11950"></a>11950                {
<a name="l11951"></a>11951                   $this-&gt;scheme = null;
<a name="l11952"></a>11952                   $this-&gt;valid[__FUNCTION__] = <span class="keyword">false</span>;
<a name="l11953"></a>11953                   <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l11954"></a>11954                }
<a name="l11955"></a>11955          }
<a name="l11956"></a>11956          $this-&gt;scheme = strtolower($scheme);
<a name="l11957"></a>11957       }
<a name="l11958"></a>11958       $this-&gt;valid[__FUNCTION__] = <span class="keyword">true</span>;
<a name="l11959"></a>11959       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l11960"></a>11960    }
<a name="l11961"></a>11961 <span class="comment"></span>
<a name="l11962"></a>11962 <span class="comment">   /**</span>
<a name="l11963"></a>11963 <span class="comment">    * Set the authority. Returns true on success, false on failure (if there are</span>
<a name="l11964"></a>11964 <span class="comment">    * any invalid characters).</span>
<a name="l11965"></a>11965 <span class="comment">    *</span>
<a name="l11966"></a>11966 <span class="comment">    * @access public</span>
<a name="l11967"></a>11967 <span class="comment">    * @param string $authority</span>
<a name="l11968"></a>11968 <span class="comment">    * @return bool</span>
<a name="l11969"></a>11969 <span class="comment">    */</span>
<a name="l11970"></a><a class="code" href="class_simple_pie___i_r_i.html#ab059cbaa30cf99b2ae5a20f0a43c9607">11970</a>    <span class="keyword">function</span> set_authority($authority)
<a name="l11971"></a>11971    {
<a name="l11972"></a>11972       <span class="keywordflow">if</span> (($userinfo_end = strrpos($authority, <span class="charliteral">&#39;@&#39;</span>)) !== <span class="keyword">false</span>)
<a name="l11973"></a>11973       {
<a name="l11974"></a>11974          $userinfo = substr($authority, 0, $userinfo_end);
<a name="l11975"></a>11975          $authority = substr($authority, $userinfo_end + 1);
<a name="l11976"></a>11976       }
<a name="l11977"></a>11977       <span class="keywordflow">else</span>
<a name="l11978"></a>11978       {
<a name="l11979"></a>11979          $userinfo = null;
<a name="l11980"></a>11980       }
<a name="l11981"></a>11981 
<a name="l11982"></a>11982       <span class="keywordflow">if</span> (($port_start = strpos($authority, <span class="charliteral">&#39;:&#39;</span>)) !== <span class="keyword">false</span>)
<a name="l11983"></a>11983       {
<a name="l11984"></a>11984          $port = substr($authority, $port_start + 1);
<a name="l11985"></a>11985          $authority = substr($authority, 0, $port_start);
<a name="l11986"></a>11986       }
<a name="l11987"></a>11987       <span class="keywordflow">else</span>
<a name="l11988"></a>11988       {
<a name="l11989"></a>11989          $port = null;
<a name="l11990"></a>11990       }
<a name="l11991"></a>11991 
<a name="l11992"></a>11992       <span class="keywordflow">return</span> $this-&gt;set_userinfo($userinfo) &amp;&amp; $this-&gt;set_host($authority) &amp;&amp; $this-&gt;set_port($port);
<a name="l11993"></a>11993    }
<a name="l11994"></a>11994 <span class="comment"></span>
<a name="l11995"></a>11995 <span class="comment">   /**</span>
<a name="l11996"></a>11996 <span class="comment">    * Set the userinfo.</span>
<a name="l11997"></a>11997 <span class="comment">    *</span>
<a name="l11998"></a>11998 <span class="comment">    * @access public</span>
<a name="l11999"></a>11999 <span class="comment">    * @param string $userinfo</span>
<a name="l12000"></a>12000 <span class="comment">    * @return bool</span>
<a name="l12001"></a>12001 <span class="comment">    */</span>
<a name="l12002"></a><a class="code" href="class_simple_pie___i_r_i.html#afa7fbdd61e77934b3191f76d3969a262">12002</a>    <span class="keyword">function</span> set_userinfo($userinfo)
<a name="l12003"></a>12003    {
<a name="l12004"></a>12004       <span class="keywordflow">if</span> ($userinfo === null || $userinfo === <span class="stringliteral">&#39;&#39;</span>)
<a name="l12005"></a>12005       {
<a name="l12006"></a>12006          $this-&gt;userinfo = null;
<a name="l12007"></a>12007       }
<a name="l12008"></a>12008       <span class="keywordflow">else</span>
<a name="l12009"></a>12009       {
<a name="l12010"></a>12010          $this-&gt;userinfo = $this-&gt;replace_invalid_with_pct_encoding($userinfo, <span class="stringliteral">&#39;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~!$&amp;\&#39;()*+,;=:&#39;</span>);
<a name="l12011"></a>12011       }
<a name="l12012"></a>12012       $this-&gt;valid[__FUNCTION__] = <span class="keyword">true</span>;
<a name="l12013"></a>12013       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l12014"></a>12014    }
<a name="l12015"></a>12015 <span class="comment"></span>
<a name="l12016"></a>12016 <span class="comment">   /**</span>
<a name="l12017"></a>12017 <span class="comment">    * Set the host. Returns true on success, false on failure (if there are</span>
<a name="l12018"></a>12018 <span class="comment">    * any invalid characters).</span>
<a name="l12019"></a>12019 <span class="comment">    *</span>
<a name="l12020"></a>12020 <span class="comment">    * @access public</span>
<a name="l12021"></a>12021 <span class="comment">    * @param string $host</span>
<a name="l12022"></a>12022 <span class="comment">    * @return bool</span>
<a name="l12023"></a>12023 <span class="comment">    */</span>
<a name="l12024"></a><a class="code" href="class_simple_pie___i_r_i.html#ae887da46a5acc79ace110d65378ecac5">12024</a>    <span class="keyword">function</span> set_host($host)
<a name="l12025"></a>12025    {
<a name="l12026"></a>12026       <span class="keywordflow">if</span> ($host === null || $host === <span class="stringliteral">&#39;&#39;</span>)
<a name="l12027"></a>12027       {
<a name="l12028"></a>12028          $this-&gt;host = null;
<a name="l12029"></a>12029          $this-&gt;valid[__FUNCTION__] = <span class="keyword">true</span>;
<a name="l12030"></a>12030          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l12031"></a>12031       }
<a name="l12032"></a>12032       elseif ($host[0] === <span class="charliteral">&#39;[&#39;</span> &amp;&amp; substr($host, -1) === <span class="charliteral">&#39;]&#39;</span>)
<a name="l12033"></a>12033       {
<a name="l12034"></a>12034          <span class="keywordflow">if</span> (Net_IPv6::checkIPv6(substr($host, 1, -1)))
<a name="l12035"></a>12035          {
<a name="l12036"></a>12036             $this-&gt;host = $host;
<a name="l12037"></a>12037             $this-&gt;valid[__FUNCTION__] = <span class="keyword">true</span>;
<a name="l12038"></a>12038             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l12039"></a>12039          }
<a name="l12040"></a>12040          <span class="keywordflow">else</span>
<a name="l12041"></a>12041          {
<a name="l12042"></a>12042             $this-&gt;host = null;
<a name="l12043"></a>12043             $this-&gt;valid[__FUNCTION__] = <span class="keyword">false</span>;
<a name="l12044"></a>12044             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l12045"></a>12045          }
<a name="l12046"></a>12046       }
<a name="l12047"></a>12047       <span class="keywordflow">else</span>
<a name="l12048"></a>12048       {
<a name="l12049"></a>12049          $this-&gt;host = $this-&gt;replace_invalid_with_pct_encoding($host, <span class="stringliteral">&#39;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~!$&amp;\&#39;()*+,;=&#39;</span>, SIMPLEPIE_LOWERCASE);
<a name="l12050"></a>12050          $this-&gt;valid[__FUNCTION__] = <span class="keyword">true</span>;
<a name="l12051"></a>12051          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l12052"></a>12052       }
<a name="l12053"></a>12053    }
<a name="l12054"></a>12054 <span class="comment"></span>
<a name="l12055"></a>12055 <span class="comment">   /**</span>
<a name="l12056"></a>12056 <span class="comment">    * Set the port. Returns true on success, false on failure (if there are</span>
<a name="l12057"></a>12057 <span class="comment">    * any invalid characters).</span>
<a name="l12058"></a>12058 <span class="comment">    *</span>
<a name="l12059"></a>12059 <span class="comment">    * @access public</span>
<a name="l12060"></a>12060 <span class="comment">    * @param string $port</span>
<a name="l12061"></a>12061 <span class="comment">    * @return bool</span>
<a name="l12062"></a>12062 <span class="comment">    */</span>
<a name="l12063"></a><a class="code" href="class_simple_pie___i_r_i.html#a260d188a1b538330092d9305bc9cab6a">12063</a>    <span class="keyword">function</span> set_port($port)
<a name="l12064"></a>12064    {
<a name="l12065"></a>12065       <span class="keywordflow">if</span> ($port === null || $port === <span class="stringliteral">&#39;&#39;</span>)
<a name="l12066"></a>12066       {
<a name="l12067"></a>12067          $this-&gt;port = null;
<a name="l12068"></a>12068          $this-&gt;valid[__FUNCTION__] = <span class="keyword">true</span>;
<a name="l12069"></a>12069          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l12070"></a>12070       }
<a name="l12071"></a>12071       elseif (strspn($port, <span class="stringliteral">&#39;0123456789&#39;</span>) === strlen($port))
<a name="l12072"></a>12072       {
<a name="l12073"></a>12073          $this-&gt;port = (int) $port;
<a name="l12074"></a>12074          $this-&gt;valid[__FUNCTION__] = <span class="keyword">true</span>;
<a name="l12075"></a>12075          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l12076"></a>12076       }
<a name="l12077"></a>12077       <span class="keywordflow">else</span>
<a name="l12078"></a>12078       {
<a name="l12079"></a>12079          $this-&gt;port = null;
<a name="l12080"></a>12080          $this-&gt;valid[__FUNCTION__] = <span class="keyword">false</span>;
<a name="l12081"></a>12081          <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l12082"></a>12082       }
<a name="l12083"></a>12083    }
<a name="l12084"></a>12084 <span class="comment"></span>
<a name="l12085"></a>12085 <span class="comment">   /**</span>
<a name="l12086"></a>12086 <span class="comment">    * Set the path.</span>
<a name="l12087"></a>12087 <span class="comment">    *</span>
<a name="l12088"></a>12088 <span class="comment">    * @access public</span>
<a name="l12089"></a>12089 <span class="comment">    * @param string $path</span>
<a name="l12090"></a>12090 <span class="comment">    * @return bool</span>
<a name="l12091"></a>12091 <span class="comment">    */</span>
<a name="l12092"></a><a class="code" href="class_simple_pie___i_r_i.html#aeec83277daee78731b7402c3932090fc">12092</a>    <span class="keyword">function</span> set_path($path)
<a name="l12093"></a>12093    {
<a name="l12094"></a>12094       <span class="keywordflow">if</span> ($path === null || $path === <span class="stringliteral">&#39;&#39;</span>)
<a name="l12095"></a>12095       {
<a name="l12096"></a>12096          $this-&gt;path = null;
<a name="l12097"></a>12097          $this-&gt;valid[__FUNCTION__] = <span class="keyword">true</span>;
<a name="l12098"></a>12098          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l12099"></a>12099       }
<a name="l12100"></a>12100       elseif (substr($path, 0, 2) === <span class="stringliteral">&#39;//&#39;</span> &amp;&amp; $this-&gt;userinfo === null &amp;&amp; $this-&gt;host === null &amp;&amp; $this-&gt;port === null)
<a name="l12101"></a>12101       {
<a name="l12102"></a>12102          $this-&gt;path = null;
<a name="l12103"></a>12103          $this-&gt;valid[__FUNCTION__] = <span class="keyword">false</span>;
<a name="l12104"></a>12104          <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l12105"></a>12105       }
<a name="l12106"></a>12106       <span class="keywordflow">else</span>
<a name="l12107"></a>12107       {
<a name="l12108"></a>12108          $this-&gt;path = $this-&gt;replace_invalid_with_pct_encoding($path, <span class="stringliteral">&#39;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~!$&amp;\&#39;()*+,;=@/&#39;</span>);
<a name="l12109"></a>12109          <span class="keywordflow">if</span> ($this-&gt;scheme !== null)
<a name="l12110"></a>12110          {
<a name="l12111"></a>12111             $this-&gt;path = $this-&gt;remove_dot_segments($this-&gt;path);
<a name="l12112"></a>12112          }
<a name="l12113"></a>12113          $this-&gt;valid[__FUNCTION__] = <span class="keyword">true</span>;
<a name="l12114"></a>12114          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l12115"></a>12115       }
<a name="l12116"></a>12116    }
<a name="l12117"></a>12117 <span class="comment"></span>
<a name="l12118"></a>12118 <span class="comment">   /**</span>
<a name="l12119"></a>12119 <span class="comment">    * Set the query.</span>
<a name="l12120"></a>12120 <span class="comment">    *</span>
<a name="l12121"></a>12121 <span class="comment">    * @access public</span>
<a name="l12122"></a>12122 <span class="comment">    * @param string $query</span>
<a name="l12123"></a>12123 <span class="comment">    * @return bool</span>
<a name="l12124"></a>12124 <span class="comment">    */</span>
<a name="l12125"></a><a class="code" href="class_simple_pie___i_r_i.html#ac934883f4c47f2c4cd78dfac6d644da4">12125</a>    <span class="keyword">function</span> set_query($query)
<a name="l12126"></a>12126    {
<a name="l12127"></a>12127       <span class="keywordflow">if</span> ($query === null || $query === <span class="stringliteral">&#39;&#39;</span>)
<a name="l12128"></a>12128       {
<a name="l12129"></a>12129          $this-&gt;query = null;
<a name="l12130"></a>12130       }
<a name="l12131"></a>12131       <span class="keywordflow">else</span>
<a name="l12132"></a>12132       {
<a name="l12133"></a>12133          $this-&gt;query = $this-&gt;replace_invalid_with_pct_encoding($query, <span class="stringliteral">&#39;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~!$&amp;\&#39;()*+,;=:@/?&#39;</span>);
<a name="l12134"></a>12134       }
<a name="l12135"></a>12135       $this-&gt;valid[__FUNCTION__] = <span class="keyword">true</span>;
<a name="l12136"></a>12136       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l12137"></a>12137    }
<a name="l12138"></a>12138 <span class="comment"></span>
<a name="l12139"></a>12139 <span class="comment">   /**</span>
<a name="l12140"></a>12140 <span class="comment">    * Set the fragment.</span>
<a name="l12141"></a>12141 <span class="comment">    *</span>
<a name="l12142"></a>12142 <span class="comment">    * @access public</span>
<a name="l12143"></a>12143 <span class="comment">    * @param string $fragment</span>
<a name="l12144"></a>12144 <span class="comment">    * @return bool</span>
<a name="l12145"></a>12145 <span class="comment">    */</span>
<a name="l12146"></a><a class="code" href="class_simple_pie___i_r_i.html#a0e7009c5375851a4db52c117e50290e6">12146</a>    <span class="keyword">function</span> set_fragment($fragment)
<a name="l12147"></a>12147    {
<a name="l12148"></a>12148       <span class="keywordflow">if</span> ($fragment === null || $fragment === <span class="stringliteral">&#39;&#39;</span>)
<a name="l12149"></a>12149       {
<a name="l12150"></a>12150          $this-&gt;fragment = null;
<a name="l12151"></a>12151       }
<a name="l12152"></a>12152       <span class="keywordflow">else</span>
<a name="l12153"></a>12153       {
<a name="l12154"></a>12154          $this-&gt;fragment = $this-&gt;replace_invalid_with_pct_encoding($fragment, <span class="stringliteral">&#39;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~!$&amp;\&#39;()*+,;=:@/?&#39;</span>);
<a name="l12155"></a>12155       }
<a name="l12156"></a>12156       $this-&gt;valid[__FUNCTION__] = <span class="keyword">true</span>;
<a name="l12157"></a>12157       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l12158"></a>12158    }
<a name="l12159"></a>12159 <span class="comment"></span>
<a name="l12160"></a>12160 <span class="comment">   /**</span>
<a name="l12161"></a>12161 <span class="comment">    * Get the complete IRI</span>
<a name="l12162"></a>12162 <span class="comment">    *</span>
<a name="l12163"></a>12163 <span class="comment">    * @access public</span>
<a name="l12164"></a>12164 <span class="comment">    * @return string</span>
<a name="l12165"></a>12165 <span class="comment">    */</span>
<a name="l12166"></a><a class="code" href="class_simple_pie___i_r_i.html#ad17beb7ef395182ecc127dd112be25de">12166</a>    <span class="keyword">function</span> get_iri()
<a name="l12167"></a>12167    {
<a name="l12168"></a>12168       $iri = <span class="stringliteral">&#39;&#39;</span>;
<a name="l12169"></a>12169       <span class="keywordflow">if</span> ($this-&gt;scheme !== null)
<a name="l12170"></a>12170       {
<a name="l12171"></a>12171          $iri .= $this-&gt;scheme . <span class="charliteral">&#39;:&#39;</span>;
<a name="l12172"></a>12172       }
<a name="l12173"></a>12173       <span class="keywordflow">if</span> (($authority = $this-&gt;get_authority()) !== null)
<a name="l12174"></a>12174       {
<a name="l12175"></a>12175          $iri .= <span class="stringliteral">&#39;//&#39;</span> . $authority;
<a name="l12176"></a>12176       }
<a name="l12177"></a>12177       <span class="keywordflow">if</span> ($this-&gt;path !== null)
<a name="l12178"></a>12178       {
<a name="l12179"></a>12179          $iri .= $this-&gt;path;
<a name="l12180"></a>12180       }
<a name="l12181"></a>12181       <span class="keywordflow">if</span> ($this-&gt;query !== null)
<a name="l12182"></a>12182       {
<a name="l12183"></a>12183          $iri .= <span class="charliteral">&#39;?&#39;</span> . $this-&gt;query;
<a name="l12184"></a>12184       }
<a name="l12185"></a>12185       <span class="keywordflow">if</span> ($this-&gt;fragment !== null)
<a name="l12186"></a>12186       {
<a name="l12187"></a>12187          $iri .= <span class="charliteral">&#39;#&#39;</span> . $this-&gt;fragment;
<a name="l12188"></a>12188       }
<a name="l12189"></a>12189 
<a name="l12190"></a>12190       <span class="keywordflow">if</span> ($iri !== <span class="stringliteral">&#39;&#39;</span>)
<a name="l12191"></a>12191       {
<a name="l12192"></a>12192          <span class="keywordflow">return</span> $iri;
<a name="l12193"></a>12193       }
<a name="l12194"></a>12194       <span class="keywordflow">else</span>
<a name="l12195"></a>12195       {
<a name="l12196"></a>12196          <span class="keywordflow">return</span> null;
<a name="l12197"></a>12197       }
<a name="l12198"></a>12198    }
<a name="l12199"></a>12199 <span class="comment"></span>
<a name="l12200"></a>12200 <span class="comment">   /**</span>
<a name="l12201"></a>12201 <span class="comment">    * Get the scheme</span>
<a name="l12202"></a>12202 <span class="comment">    *</span>
<a name="l12203"></a>12203 <span class="comment">    * @access public</span>
<a name="l12204"></a>12204 <span class="comment">    * @return string</span>
<a name="l12205"></a>12205 <span class="comment">    */</span>
<a name="l12206"></a><a class="code" href="class_simple_pie___i_r_i.html#a9ac15ce731b8cec810aea370e9d21e69">12206</a>    <span class="keyword">function</span> get_scheme()
<a name="l12207"></a>12207    {
<a name="l12208"></a>12208       <span class="keywordflow">return</span> $this-&gt;scheme;
<a name="l12209"></a>12209    }
<a name="l12210"></a>12210 <span class="comment"></span>
<a name="l12211"></a>12211 <span class="comment">   /**</span>
<a name="l12212"></a>12212 <span class="comment">    * Get the complete authority</span>
<a name="l12213"></a>12213 <span class="comment">    *</span>
<a name="l12214"></a>12214 <span class="comment">    * @access public</span>
<a name="l12215"></a>12215 <span class="comment">    * @return string</span>
<a name="l12216"></a>12216 <span class="comment">    */</span>
<a name="l12217"></a><a class="code" href="class_simple_pie___i_r_i.html#a4c1f3d4b96dc73bdf1a0806b2f6ac4c5">12217</a>    <span class="keyword">function</span> get_authority()
<a name="l12218"></a>12218    {
<a name="l12219"></a>12219       $authority = <span class="stringliteral">&#39;&#39;</span>;
<a name="l12220"></a>12220       <span class="keywordflow">if</span> ($this-&gt;userinfo !== null)
<a name="l12221"></a>12221       {
<a name="l12222"></a>12222          $authority .= $this-&gt;userinfo . <span class="charliteral">&#39;@&#39;</span>;
<a name="l12223"></a>12223       }
<a name="l12224"></a>12224       <span class="keywordflow">if</span> ($this-&gt;host !== null)
<a name="l12225"></a>12225       {
<a name="l12226"></a>12226          $authority .= $this-&gt;host;
<a name="l12227"></a>12227       }
<a name="l12228"></a>12228       <span class="keywordflow">if</span> ($this-&gt;port !== null)
<a name="l12229"></a>12229       {
<a name="l12230"></a>12230          $authority .= <span class="charliteral">&#39;:&#39;</span> . $this-&gt;port;
<a name="l12231"></a>12231       }
<a name="l12232"></a>12232 
<a name="l12233"></a>12233       <span class="keywordflow">if</span> ($authority !== <span class="stringliteral">&#39;&#39;</span>)
<a name="l12234"></a>12234       {
<a name="l12235"></a>12235          <span class="keywordflow">return</span> $authority;
<a name="l12236"></a>12236       }
<a name="l12237"></a>12237       <span class="keywordflow">else</span>
<a name="l12238"></a>12238       {
<a name="l12239"></a>12239          <span class="keywordflow">return</span> null;
<a name="l12240"></a>12240       }
<a name="l12241"></a>12241    }
<a name="l12242"></a>12242 <span class="comment"></span>
<a name="l12243"></a>12243 <span class="comment">   /**</span>
<a name="l12244"></a>12244 <span class="comment">    * Get the user information</span>
<a name="l12245"></a>12245 <span class="comment">    *</span>
<a name="l12246"></a>12246 <span class="comment">    * @access public</span>
<a name="l12247"></a>12247 <span class="comment">    * @return string</span>
<a name="l12248"></a>12248 <span class="comment">    */</span>
<a name="l12249"></a><a class="code" href="class_simple_pie___i_r_i.html#a204a691b60a7c4a7db6b656b2ea07f2d">12249</a>    <span class="keyword">function</span> get_userinfo()
<a name="l12250"></a>12250    {
<a name="l12251"></a>12251       <span class="keywordflow">return</span> $this-&gt;userinfo;
<a name="l12252"></a>12252    }
<a name="l12253"></a>12253 <span class="comment"></span>
<a name="l12254"></a>12254 <span class="comment">   /**</span>
<a name="l12255"></a>12255 <span class="comment">    * Get the host</span>
<a name="l12256"></a>12256 <span class="comment">    *</span>
<a name="l12257"></a>12257 <span class="comment">    * @access public</span>
<a name="l12258"></a>12258 <span class="comment">    * @return string</span>
<a name="l12259"></a>12259 <span class="comment">    */</span>
<a name="l12260"></a><a class="code" href="class_simple_pie___i_r_i.html#af4db1526f8ad21cc9635663f68488bb1">12260</a>    <span class="keyword">function</span> get_host()
<a name="l12261"></a>12261    {
<a name="l12262"></a>12262       <span class="keywordflow">return</span> $this-&gt;host;
<a name="l12263"></a>12263    }
<a name="l12264"></a>12264 <span class="comment"></span>
<a name="l12265"></a>12265 <span class="comment">   /**</span>
<a name="l12266"></a>12266 <span class="comment">    * Get the port</span>
<a name="l12267"></a>12267 <span class="comment">    *</span>
<a name="l12268"></a>12268 <span class="comment">    * @access public</span>
<a name="l12269"></a>12269 <span class="comment">    * @return string</span>
<a name="l12270"></a>12270 <span class="comment">    */</span>
<a name="l12271"></a><a class="code" href="class_simple_pie___i_r_i.html#afe5af4069d1866206f81392e0e1f4c64">12271</a>    <span class="keyword">function</span> get_port()
<a name="l12272"></a>12272    {
<a name="l12273"></a>12273       <span class="keywordflow">return</span> $this-&gt;port;
<a name="l12274"></a>12274    }
<a name="l12275"></a>12275 <span class="comment"></span>
<a name="l12276"></a>12276 <span class="comment">   /**</span>
<a name="l12277"></a>12277 <span class="comment">    * Get the path</span>
<a name="l12278"></a>12278 <span class="comment">    *</span>
<a name="l12279"></a>12279 <span class="comment">    * @access public</span>
<a name="l12280"></a>12280 <span class="comment">    * @return string</span>
<a name="l12281"></a>12281 <span class="comment">    */</span>
<a name="l12282"></a><a class="code" href="class_simple_pie___i_r_i.html#a6d091b61c29926464f723d5406a6160e">12282</a>    <span class="keyword">function</span> get_path()
<a name="l12283"></a>12283    {
<a name="l12284"></a>12284       <span class="keywordflow">return</span> $this-&gt;path;
<a name="l12285"></a>12285    }
<a name="l12286"></a>12286 <span class="comment"></span>
<a name="l12287"></a>12287 <span class="comment">   /**</span>
<a name="l12288"></a>12288 <span class="comment">    * Get the query</span>
<a name="l12289"></a>12289 <span class="comment">    *</span>
<a name="l12290"></a>12290 <span class="comment">    * @access public</span>
<a name="l12291"></a>12291 <span class="comment">    * @return string</span>
<a name="l12292"></a>12292 <span class="comment">    */</span>
<a name="l12293"></a><a class="code" href="class_simple_pie___i_r_i.html#aeca228af56a64dc648c2b98f15bc496a">12293</a>    <span class="keyword">function</span> get_query()
<a name="l12294"></a>12294    {
<a name="l12295"></a>12295       <span class="keywordflow">return</span> $this-&gt;query;
<a name="l12296"></a>12296    }
<a name="l12297"></a>12297 <span class="comment"></span>
<a name="l12298"></a>12298 <span class="comment">   /**</span>
<a name="l12299"></a>12299 <span class="comment">    * Get the fragment</span>
<a name="l12300"></a>12300 <span class="comment">    *</span>
<a name="l12301"></a>12301 <span class="comment">    * @access public</span>
<a name="l12302"></a>12302 <span class="comment">    * @return string</span>
<a name="l12303"></a>12303 <span class="comment">    */</span>
<a name="l12304"></a><a class="code" href="class_simple_pie___i_r_i.html#a79f9d53a9640ce4d7d809d17b7d3edc3">12304</a>    <span class="keyword">function</span> get_fragment()
<a name="l12305"></a>12305    {
<a name="l12306"></a>12306       <span class="keywordflow">return</span> $this-&gt;fragment;
<a name="l12307"></a>12307    }
<a name="l12308"></a>12308 }
<a name="l12309"></a>12309 <span class="comment"></span>
<a name="l12310"></a>12310 <span class="comment">/**</span>
<a name="l12311"></a>12311 <span class="comment"> * Class to validate and to work with IPv6 addresses.</span>
<a name="l12312"></a>12312 <span class="comment"> *</span>
<a name="l12313"></a>12313 <span class="comment"> * @package SimplePie</span>
<a name="l12314"></a>12314 <span class="comment"> * @copyright 2003-2005 The PHP Group</span>
<a name="l12315"></a>12315 <span class="comment"> * @license http://www.opensource.org/licenses/bsd-license.php</span>
<a name="l12316"></a>12316 <span class="comment"> * @link http://pear.php.net/package/Net_IPv6</span>
<a name="l12317"></a>12317 <span class="comment"> * @author Alexander Merz &lt;alexander.merz@web.de&gt;</span>
<a name="l12318"></a>12318 <span class="comment"> * @author elfrink at introweb dot nl</span>
<a name="l12319"></a>12319 <span class="comment"> * @author Josh Peck &lt;jmp at joshpeck dot org&gt;</span>
<a name="l12320"></a>12320 <span class="comment"> * @author Geoffrey Sneddon &lt;geoffers@gmail.com&gt;</span>
<a name="l12321"></a>12321 <span class="comment"> */</span>
<a name="l12322"></a><a class="code" href="class_simple_pie___net___i_pv6.html">12322</a> <span class="keyword">class </span><a class="code" href="class_simple_pie___net___i_pv6.html">SimplePie_Net_IPv6</a>
<a name="l12323"></a>12323 {<span class="comment"></span>
<a name="l12324"></a>12324 <span class="comment">   /**</span>
<a name="l12325"></a>12325 <span class="comment">    * Removes a possible existing netmask specification of an IP address.</span>
<a name="l12326"></a>12326 <span class="comment">    *</span>
<a name="l12327"></a>12327 <span class="comment">    * @param string $ip the (compressed) IP as Hex representation</span>
<a name="l12328"></a>12328 <span class="comment">    * @return string the IP the without netmask</span>
<a name="l12329"></a>12329 <span class="comment">    * @since 1.1.0</span>
<a name="l12330"></a>12330 <span class="comment">    * @access public</span>
<a name="l12331"></a>12331 <span class="comment">    * @static</span>
<a name="l12332"></a>12332 <span class="comment">    */</span>
<a name="l12333"></a><a class="code" href="class_simple_pie___net___i_pv6.html#a52f6783515541647753498a19b9af1e5">12333</a>    <span class="keyword">function</span> removeNetmaskSpec($ip)
<a name="l12334"></a>12334    {
<a name="l12335"></a>12335       <span class="keywordflow">if</span> (strpos($ip, <span class="charliteral">&#39;/&#39;</span>) !== <span class="keyword">false</span>)
<a name="l12336"></a>12336       {
<a name="l12337"></a>12337          list($addr, $nm) = explode(<span class="charliteral">&#39;/&#39;</span>, $ip);
<a name="l12338"></a>12338       }
<a name="l12339"></a>12339       <span class="keywordflow">else</span>
<a name="l12340"></a>12340       {
<a name="l12341"></a>12341          $addr = $ip;
<a name="l12342"></a>12342       }
<a name="l12343"></a>12343       <span class="keywordflow">return</span> $addr;
<a name="l12344"></a>12344    }
<a name="l12345"></a>12345 <span class="comment"></span>
<a name="l12346"></a>12346 <span class="comment">   /**</span>
<a name="l12347"></a>12347 <span class="comment">    * Uncompresses an IPv6 address</span>
<a name="l12348"></a>12348 <span class="comment">    *</span>
<a name="l12349"></a>12349 <span class="comment">    * RFC 2373 allows you to compress zeros in an address to &#39;::&#39;. This</span>
<a name="l12350"></a>12350 <span class="comment">    * function expects an valid IPv6 address and expands the &#39;::&#39; to</span>
<a name="l12351"></a>12351 <span class="comment">    * the required zeros.</span>
<a name="l12352"></a>12352 <span class="comment">    *</span>
<a name="l12353"></a>12353 <span class="comment">    * Example:  FF01::101  -&gt; FF01:0:0:0:0:0:0:101</span>
<a name="l12354"></a>12354 <span class="comment">    *        ::1     -&gt; 0:0:0:0:0:0:0:1</span>
<a name="l12355"></a>12355 <span class="comment">    *</span>
<a name="l12356"></a>12356 <span class="comment">    * @access public</span>
<a name="l12357"></a>12357 <span class="comment">    * @static</span>
<a name="l12358"></a>12358 <span class="comment">    * @param string $ip a valid IPv6-address (hex format)</span>
<a name="l12359"></a>12359 <span class="comment">    * @return string the uncompressed IPv6-address (hex format)</span>
<a name="l12360"></a>12360 <span class="comment">    */</span>
<a name="l12361"></a><a class="code" href="class_simple_pie___net___i_pv6.html#a6288e2a72eee15754b8b17d1adff36f8">12361</a>    <span class="keyword">function</span> Uncompress($ip)
<a name="l12362"></a>12362    {
<a name="l12363"></a>12363       $uip = <a class="code" href="class_simple_pie___net___i_pv6.html#a52f6783515541647753498a19b9af1e5">SimplePie_Net_IPv6::removeNetmaskSpec</a>($ip);
<a name="l12364"></a>12364       $c1 = -1;
<a name="l12365"></a>12365       $c2 = -1;
<a name="l12366"></a>12366       <span class="keywordflow">if</span> (strpos($ip, <span class="stringliteral">&#39;::&#39;</span>) !== <span class="keyword">false</span>)
<a name="l12367"></a>12367       {
<a name="l12368"></a>12368          list($ip1, $ip2) = explode(<span class="stringliteral">&#39;::&#39;</span>, $ip);
<a name="l12369"></a>12369          <span class="keywordflow">if</span> ($ip1 === <span class="stringliteral">&#39;&#39;</span>)
<a name="l12370"></a>12370          {
<a name="l12371"></a>12371             $c1 = -1;
<a name="l12372"></a>12372          }
<a name="l12373"></a>12373          <span class="keywordflow">else</span>
<a name="l12374"></a>12374          {
<a name="l12375"></a>12375             $pos = 0;
<a name="l12376"></a>12376             <span class="keywordflow">if</span> (($pos = substr_count($ip1, <span class="charliteral">&#39;:&#39;</span>)) &gt; 0)
<a name="l12377"></a>12377             {
<a name="l12378"></a>12378                $c1 = $pos;
<a name="l12379"></a>12379             }
<a name="l12380"></a>12380             <span class="keywordflow">else</span>
<a name="l12381"></a>12381             {
<a name="l12382"></a>12382                $c1 = 0;
<a name="l12383"></a>12383             }
<a name="l12384"></a>12384          }
<a name="l12385"></a>12385          <span class="keywordflow">if</span> ($ip2 === <span class="stringliteral">&#39;&#39;</span>)
<a name="l12386"></a>12386          {
<a name="l12387"></a>12387             $c2 = -1;
<a name="l12388"></a>12388          }
<a name="l12389"></a>12389          <span class="keywordflow">else</span>
<a name="l12390"></a>12390          {
<a name="l12391"></a>12391             $pos = 0;
<a name="l12392"></a>12392             <span class="keywordflow">if</span> (($pos = substr_count($ip2, <span class="charliteral">&#39;:&#39;</span>)) &gt; 0)
<a name="l12393"></a>12393             {
<a name="l12394"></a>12394                $c2 = $pos;
<a name="l12395"></a>12395             }
<a name="l12396"></a>12396             <span class="keywordflow">else</span>
<a name="l12397"></a>12397             {
<a name="l12398"></a>12398                $c2 = 0;
<a name="l12399"></a>12399             }
<a name="l12400"></a>12400          }
<a name="l12401"></a>12401          <span class="keywordflow">if</span> (strstr($ip2, <span class="charliteral">&#39;.&#39;</span>))
<a name="l12402"></a>12402          {
<a name="l12403"></a>12403             $c2++;
<a name="l12404"></a>12404          }
<a name="l12405"></a>12405          <span class="comment">// ::</span>
<a name="l12406"></a>12406          <span class="keywordflow">if</span> ($c1 === -1 &amp;&amp; $c2 === -1)
<a name="l12407"></a>12407          {
<a name="l12408"></a>12408             $uip = <span class="stringliteral">&#39;0:0:0:0:0:0:0:0&#39;</span>;
<a name="l12409"></a>12409          }
<a name="l12410"></a>12410          <span class="comment">// ::xxx</span>
<a name="l12411"></a>12411          <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($c1 === -1)
<a name="l12412"></a>12412          {
<a name="l12413"></a>12413             $fill = str_repeat(<span class="stringliteral">&#39;0:&#39;</span>, 7 - $c2);
<a name="l12414"></a>12414             $uip =   str_replace(<span class="stringliteral">&#39;::&#39;</span>, $fill, $uip);
<a name="l12415"></a>12415          }
<a name="l12416"></a>12416          <span class="comment">// xxx::</span>
<a name="l12417"></a>12417          <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($c2 === -1)
<a name="l12418"></a>12418          {
<a name="l12419"></a>12419             $fill = str_repeat(<span class="stringliteral">&#39;:0&#39;</span>, 7 - $c1);
<a name="l12420"></a>12420             $uip =   str_replace(<span class="stringliteral">&#39;::&#39;</span>, $fill, $uip);
<a name="l12421"></a>12421          }
<a name="l12422"></a>12422          <span class="comment">// xxx::xxx</span>
<a name="l12423"></a>12423          <span class="keywordflow">else</span>
<a name="l12424"></a>12424          {
<a name="l12425"></a>12425             $fill = str_repeat(<span class="stringliteral">&#39;:0:&#39;</span>, 6 - $c2 - $c1);
<a name="l12426"></a>12426             $uip =   str_replace(<span class="stringliteral">&#39;::&#39;</span>, $fill, $uip);
<a name="l12427"></a>12427             $uip =   str_replace(<span class="stringliteral">&#39;::&#39;</span>, <span class="charliteral">&#39;:&#39;</span>, $uip);
<a name="l12428"></a>12428          }
<a name="l12429"></a>12429       }
<a name="l12430"></a>12430       <span class="keywordflow">return</span> $uip;
<a name="l12431"></a>12431    }
<a name="l12432"></a>12432 <span class="comment"></span>
<a name="l12433"></a>12433 <span class="comment">   /**</span>
<a name="l12434"></a>12434 <span class="comment">    * Splits an IPv6 address into the IPv6 and a possible IPv4 part</span>
<a name="l12435"></a>12435 <span class="comment">    *</span>
<a name="l12436"></a>12436 <span class="comment">    * RFC 2373 allows you to note the last two parts of an IPv6 address as</span>
<a name="l12437"></a>12437 <span class="comment">    * an IPv4 compatible address</span>
<a name="l12438"></a>12438 <span class="comment">    *</span>
<a name="l12439"></a>12439 <span class="comment">    * Example:  0:0:0:0:0:0:13.1.68.3</span>
<a name="l12440"></a>12440 <span class="comment">    *        0:0:0:0:0:FFFF:129.144.52.38</span>
<a name="l12441"></a>12441 <span class="comment">    *</span>
<a name="l12442"></a>12442 <span class="comment">    * @access public</span>
<a name="l12443"></a>12443 <span class="comment">    * @static</span>
<a name="l12444"></a>12444 <span class="comment">    * @param string $ip a valid IPv6-address (hex format)</span>
<a name="l12445"></a>12445 <span class="comment">    * @return array [0] contains the IPv6 part, [1] the IPv4 part (hex format)</span>
<a name="l12446"></a>12446 <span class="comment">    */</span>
<a name="l12447"></a><a class="code" href="class_simple_pie___net___i_pv6.html#aabbf6f417dc461ec39c1755f0f7e889e">12447</a>    <span class="keyword">function</span> SplitV64($ip)
<a name="l12448"></a>12448    {
<a name="l12449"></a>12449       $ip = <a class="code" href="class_simple_pie___net___i_pv6.html#a6288e2a72eee15754b8b17d1adff36f8">SimplePie_Net_IPv6::Uncompress</a>($ip);
<a name="l12450"></a>12450       <span class="keywordflow">if</span> (strstr($ip, <span class="charliteral">&#39;.&#39;</span>))
<a name="l12451"></a>12451       {
<a name="l12452"></a>12452          $pos = strrpos($ip, <span class="charliteral">&#39;:&#39;</span>);
<a name="l12453"></a>12453          $ip[$pos] = <span class="charliteral">&#39;_&#39;</span>;
<a name="l12454"></a>12454          $ipPart = explode(<span class="charliteral">&#39;_&#39;</span>, $ip);
<a name="l12455"></a>12455          <span class="keywordflow">return</span> $ipPart;
<a name="l12456"></a>12456       }
<a name="l12457"></a>12457       <span class="keywordflow">else</span>
<a name="l12458"></a>12458       {
<a name="l12459"></a>12459          <span class="keywordflow">return</span> array($ip, <span class="stringliteral">&#39;&#39;</span>);
<a name="l12460"></a>12460       }
<a name="l12461"></a>12461    }
<a name="l12462"></a>12462 <span class="comment"></span>
<a name="l12463"></a>12463 <span class="comment">   /**</span>
<a name="l12464"></a>12464 <span class="comment">    * Checks an IPv6 address</span>
<a name="l12465"></a>12465 <span class="comment">    *</span>
<a name="l12466"></a>12466 <span class="comment">    * Checks if the given IP is IPv6-compatible</span>
<a name="l12467"></a>12467 <span class="comment">    *</span>
<a name="l12468"></a>12468 <span class="comment">    * @access public</span>
<a name="l12469"></a>12469 <span class="comment">    * @static</span>
<a name="l12470"></a>12470 <span class="comment">    * @param string $ip a valid IPv6-address</span>
<a name="l12471"></a>12471 <span class="comment">    * @return bool true if $ip is an IPv6 address</span>
<a name="l12472"></a>12472 <span class="comment">    */</span>
<a name="l12473"></a><a class="code" href="class_simple_pie___net___i_pv6.html#ab8dc87dac4ad348a26c8177990f5b796">12473</a>    <span class="keyword">function</span> checkIPv6($ip)
<a name="l12474"></a>12474    {
<a name="l12475"></a>12475       $ipPart = <a class="code" href="class_simple_pie___net___i_pv6.html#aabbf6f417dc461ec39c1755f0f7e889e">SimplePie_Net_IPv6::SplitV64</a>($ip);
<a name="l12476"></a>12476       $count = 0;
<a name="l12477"></a>12477       <span class="keywordflow">if</span> (!empty($ipPart[0]))
<a name="l12478"></a>12478       {
<a name="l12479"></a>12479          $ipv6 = explode(<span class="charliteral">&#39;:&#39;</span>, $ipPart[0]);
<a name="l12480"></a>12480          <span class="keywordflow">for</span> ($i = 0; $i &lt; count($ipv6); $i++)
<a name="l12481"></a>12481          {
<a name="l12482"></a>12482             $dec = hexdec($ipv6[$i]);
<a name="l12483"></a>12483             $hex = strtoupper(preg_replace(<span class="stringliteral">&#39;/^[0]{1,3}(.*[0-9a-fA-F])$/&#39;</span>, <span class="stringliteral">&#39;\\1&#39;</span>, $ipv6[$i]));
<a name="l12484"></a>12484             <span class="keywordflow">if</span> ($ipv6[$i] &gt;= 0 &amp;&amp; $dec &lt;= 65535 &amp;&amp; $hex === strtoupper(dechex($dec)))
<a name="l12485"></a>12485             {
<a name="l12486"></a>12486                $count++;
<a name="l12487"></a>12487             }
<a name="l12488"></a>12488          }
<a name="l12489"></a>12489          <span class="keywordflow">if</span> ($count === 8)
<a name="l12490"></a>12490          {
<a name="l12491"></a>12491             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l12492"></a>12492          }
<a name="l12493"></a>12493          elseif ($count === 6 &amp;&amp; !empty($ipPart[1]))
<a name="l12494"></a>12494          {
<a name="l12495"></a>12495             $ipv4 = explode(<span class="charliteral">&#39;.&#39;</span>, $ipPart[1]);
<a name="l12496"></a>12496             $count = 0;
<a name="l12497"></a>12497             <span class="keywordflow">foreach</span> ($ipv4 as $ipv4_part)
<a name="l12498"></a>12498             {
<a name="l12499"></a>12499                <span class="keywordflow">if</span> ($ipv4_part &gt;= 0 &amp;&amp; $ipv4_part &lt;= 255 &amp;&amp; preg_match(<span class="stringliteral">&#39;/^\d{1,3}$/&#39;</span>, $ipv4_part))
<a name="l12500"></a>12500                {
<a name="l12501"></a>12501                   $count++;
<a name="l12502"></a>12502                }
<a name="l12503"></a>12503             }
<a name="l12504"></a>12504             <span class="keywordflow">if</span> ($count === 4)
<a name="l12505"></a>12505             {
<a name="l12506"></a>12506                <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l12507"></a>12507             }
<a name="l12508"></a>12508          }
<a name="l12509"></a>12509          <span class="keywordflow">else</span>
<a name="l12510"></a>12510          {
<a name="l12511"></a>12511             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l12512"></a>12512          }
<a name="l12513"></a>12513 
<a name="l12514"></a>12514       }
<a name="l12515"></a>12515       <span class="keywordflow">else</span>
<a name="l12516"></a>12516       {
<a name="l12517"></a>12517          <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l12518"></a>12518       }
<a name="l12519"></a>12519    }
<a name="l12520"></a>12520 }
<a name="l12521"></a>12521 <span class="comment"></span>
<a name="l12522"></a>12522 <span class="comment">/**</span>
<a name="l12523"></a>12523 <span class="comment"> * Date Parser</span>
<a name="l12524"></a>12524 <span class="comment"> *</span>
<a name="l12525"></a>12525 <span class="comment"> * @package SimplePie</span>
<a name="l12526"></a>12526 <span class="comment"> */</span>
<a name="l12527"></a><a class="code" href="class_simple_pie___parse___date.html">12527</a> <span class="keyword">class </span><a class="code" href="class_simple_pie___parse___date.html">SimplePie_Parse_Date</a>
<a name="l12528"></a>12528 {<span class="comment"></span>
<a name="l12529"></a>12529 <span class="comment">   /**</span>
<a name="l12530"></a>12530 <span class="comment">    * Input data</span>
<a name="l12531"></a>12531 <span class="comment">    *</span>
<a name="l12532"></a>12532 <span class="comment">    * @access protected</span>
<a name="l12533"></a>12533 <span class="comment">    * @var string</span>
<a name="l12534"></a>12534 <span class="comment">    */</span>
<a name="l12535"></a>12535    var $date;
<a name="l12536"></a>12536 <span class="comment"></span>
<a name="l12537"></a>12537 <span class="comment">   /**</span>
<a name="l12538"></a>12538 <span class="comment">    * List of days, calendar day name =&gt; ordinal day number in the week</span>
<a name="l12539"></a>12539 <span class="comment">    *</span>
<a name="l12540"></a>12540 <span class="comment">    * @access protected</span>
<a name="l12541"></a>12541 <span class="comment">    * @var array</span>
<a name="l12542"></a>12542 <span class="comment">    */</span>
<a name="l12543"></a>12543    var $day = array(
<a name="l12544"></a>12544       <span class="comment">// English</span>
<a name="l12545"></a>12545       <span class="stringliteral">&#39;mon&#39;</span> =&gt; 1,
<a name="l12546"></a>12546       <span class="stringliteral">&#39;monday&#39;</span> =&gt; 1,
<a name="l12547"></a>12547       <span class="stringliteral">&#39;tue&#39;</span> =&gt; 2,
<a name="l12548"></a>12548       <span class="stringliteral">&#39;tuesday&#39;</span> =&gt; 2,
<a name="l12549"></a>12549       <span class="stringliteral">&#39;wed&#39;</span> =&gt; 3,
<a name="l12550"></a>12550       <span class="stringliteral">&#39;wednesday&#39;</span> =&gt; 3,
<a name="l12551"></a>12551       <span class="stringliteral">&#39;thu&#39;</span> =&gt; 4,
<a name="l12552"></a>12552       <span class="stringliteral">&#39;thursday&#39;</span> =&gt; 4,
<a name="l12553"></a>12553       <span class="stringliteral">&#39;fri&#39;</span> =&gt; 5,
<a name="l12554"></a>12554       <span class="stringliteral">&#39;friday&#39;</span> =&gt; 5,
<a name="l12555"></a>12555       <span class="stringliteral">&#39;sat&#39;</span> =&gt; 6,
<a name="l12556"></a>12556       <span class="stringliteral">&#39;saturday&#39;</span> =&gt; 6,
<a name="l12557"></a>12557       <span class="stringliteral">&#39;sun&#39;</span> =&gt; 7,
<a name="l12558"></a>12558       <span class="stringliteral">&#39;sunday&#39;</span> =&gt; 7,
<a name="l12559"></a>12559       <span class="comment">// Dutch</span>
<a name="l12560"></a>12560       <span class="stringliteral">&#39;maandag&#39;</span> =&gt; 1,
<a name="l12561"></a>12561       <span class="stringliteral">&#39;dinsdag&#39;</span> =&gt; 2,
<a name="l12562"></a>12562       <span class="stringliteral">&#39;woensdag&#39;</span> =&gt; 3,
<a name="l12563"></a>12563       <span class="stringliteral">&#39;donderdag&#39;</span> =&gt; 4,
<a name="l12564"></a>12564       <span class="stringliteral">&#39;vrijdag&#39;</span> =&gt; 5,
<a name="l12565"></a>12565       <span class="stringliteral">&#39;zaterdag&#39;</span> =&gt; 6,
<a name="l12566"></a>12566       <span class="stringliteral">&#39;zondag&#39;</span> =&gt; 7,
<a name="l12567"></a>12567       <span class="comment">// French</span>
<a name="l12568"></a>12568       <span class="stringliteral">&#39;lundi&#39;</span> =&gt; 1,
<a name="l12569"></a>12569       <span class="stringliteral">&#39;mardi&#39;</span> =&gt; 2,
<a name="l12570"></a>12570       <span class="stringliteral">&#39;mercredi&#39;</span> =&gt; 3,
<a name="l12571"></a>12571       <span class="stringliteral">&#39;jeudi&#39;</span> =&gt; 4,
<a name="l12572"></a>12572       <span class="stringliteral">&#39;vendredi&#39;</span> =&gt; 5,
<a name="l12573"></a>12573       <span class="stringliteral">&#39;samedi&#39;</span> =&gt; 6,
<a name="l12574"></a>12574       <span class="stringliteral">&#39;dimanche&#39;</span> =&gt; 7,
<a name="l12575"></a>12575       <span class="comment">// German</span>
<a name="l12576"></a>12576       <span class="stringliteral">&#39;montag&#39;</span> =&gt; 1,
<a name="l12577"></a>12577       <span class="stringliteral">&#39;dienstag&#39;</span> =&gt; 2,
<a name="l12578"></a>12578       <span class="stringliteral">&#39;mittwoch&#39;</span> =&gt; 3,
<a name="l12579"></a>12579       <span class="stringliteral">&#39;donnerstag&#39;</span> =&gt; 4,
<a name="l12580"></a>12580       <span class="stringliteral">&#39;freitag&#39;</span> =&gt; 5,
<a name="l12581"></a>12581       <span class="stringliteral">&#39;samstag&#39;</span> =&gt; 6,
<a name="l12582"></a>12582       <span class="stringliteral">&#39;sonnabend&#39;</span> =&gt; 6,
<a name="l12583"></a>12583       <span class="stringliteral">&#39;sonntag&#39;</span> =&gt; 7,
<a name="l12584"></a>12584       <span class="comment">// Italian</span>
<a name="l12585"></a>12585       <span class="stringliteral">&#39;luned&#39;</span> =&gt; 1,
<a name="l12586"></a>12586       <span class="stringliteral">&#39;marted&#39;</span> =&gt; 2,
<a name="l12587"></a>12587       <span class="stringliteral">&#39;mercoled&#39;</span> =&gt; 3,
<a name="l12588"></a>12588       <span class="stringliteral">&#39;gioved&#39;</span> =&gt; 4,
<a name="l12589"></a>12589       <span class="stringliteral">&#39;venerd&#39;</span> =&gt; 5,
<a name="l12590"></a>12590       <span class="stringliteral">&#39;sabato&#39;</span> =&gt; 6,
<a name="l12591"></a>12591       <span class="stringliteral">&#39;domenica&#39;</span> =&gt; 7,
<a name="l12592"></a>12592       <span class="comment">// Spanish</span>
<a name="l12593"></a>12593       <span class="stringliteral">&#39;lunes&#39;</span> =&gt; 1,
<a name="l12594"></a>12594       <span class="stringliteral">&#39;martes&#39;</span> =&gt; 2,
<a name="l12595"></a>12595       <span class="stringliteral">&#39;mircoles&#39;</span> =&gt; 3,
<a name="l12596"></a>12596       <span class="stringliteral">&#39;jueves&#39;</span> =&gt; 4,
<a name="l12597"></a>12597       <span class="stringliteral">&#39;viernes&#39;</span> =&gt; 5,
<a name="l12598"></a>12598       <span class="stringliteral">&#39;sbado&#39;</span> =&gt; 6,
<a name="l12599"></a>12599       <span class="stringliteral">&#39;domingo&#39;</span> =&gt; 7,
<a name="l12600"></a>12600       <span class="comment">// Finnish</span>
<a name="l12601"></a>12601       <span class="stringliteral">&#39;maanantai&#39;</span> =&gt; 1,
<a name="l12602"></a>12602       <span class="stringliteral">&#39;tiistai&#39;</span> =&gt; 2,
<a name="l12603"></a>12603       <span class="stringliteral">&#39;keskiviikko&#39;</span> =&gt; 3,
<a name="l12604"></a>12604       <span class="stringliteral">&#39;torstai&#39;</span> =&gt; 4,
<a name="l12605"></a>12605       <span class="stringliteral">&#39;perjantai&#39;</span> =&gt; 5,
<a name="l12606"></a>12606       <span class="stringliteral">&#39;lauantai&#39;</span> =&gt; 6,
<a name="l12607"></a>12607       <span class="stringliteral">&#39;sunnuntai&#39;</span> =&gt; 7,
<a name="l12608"></a>12608       <span class="comment">// Hungarian</span>
<a name="l12609"></a>12609       <span class="stringliteral">&#39;htf&#39;</span> =&gt; 1,
<a name="l12610"></a>12610       <span class="stringliteral">&#39;kedd&#39;</span> =&gt; 2,
<a name="l12611"></a>12611       <span class="stringliteral">&#39;szerda&#39;</span> =&gt; 3,
<a name="l12612"></a>12612       <span class="stringliteral">&#39;cstrtok&#39;</span> =&gt; 4,
<a name="l12613"></a>12613       <span class="stringliteral">&#39;pntek&#39;</span> =&gt; 5,
<a name="l12614"></a>12614       <span class="stringliteral">&#39;szombat&#39;</span> =&gt; 6,
<a name="l12615"></a>12615       <span class="stringliteral">&#39;vasrnap&#39;</span> =&gt; 7,
<a name="l12616"></a>12616       <span class="comment">// Greek</span>
<a name="l12617"></a>12617       <span class="stringliteral">&#39;&#39;</span> =&gt; 1,
<a name="l12618"></a>12618       <span class="stringliteral">&#39;&#39;</span> =&gt; 2,
<a name="l12619"></a>12619       <span class="stringliteral">&#39;&#39;</span> =&gt; 3,
<a name="l12620"></a>12620       <span class="stringliteral">&#39;&#39;</span> =&gt; 4,
<a name="l12621"></a>12621       <span class="stringliteral">&#39;&#39;</span> =&gt; 5,
<a name="l12622"></a>12622       <span class="stringliteral">&#39;&#39;</span> =&gt; 6,
<a name="l12623"></a>12623       <span class="stringliteral">&#39;&#39;</span> =&gt; 7,
<a name="l12624"></a>12624    );
<a name="l12625"></a>12625 <span class="comment"></span>
<a name="l12626"></a>12626 <span class="comment">   /**</span>
<a name="l12627"></a>12627 <span class="comment">    * List of months, calendar month name =&gt; calendar month number</span>
<a name="l12628"></a>12628 <span class="comment">    *</span>
<a name="l12629"></a>12629 <span class="comment">    * @access protected</span>
<a name="l12630"></a>12630 <span class="comment">    * @var array</span>
<a name="l12631"></a>12631 <span class="comment">    */</span>
<a name="l12632"></a>12632    var $month = array(
<a name="l12633"></a>12633       <span class="comment">// English</span>
<a name="l12634"></a>12634       <span class="stringliteral">&#39;jan&#39;</span> =&gt; 1,
<a name="l12635"></a>12635       <span class="stringliteral">&#39;january&#39;</span> =&gt; 1,
<a name="l12636"></a>12636       <span class="stringliteral">&#39;feb&#39;</span> =&gt; 2,
<a name="l12637"></a>12637       <span class="stringliteral">&#39;february&#39;</span> =&gt; 2,
<a name="l12638"></a>12638       <span class="stringliteral">&#39;mar&#39;</span> =&gt; 3,
<a name="l12639"></a>12639       <span class="stringliteral">&#39;march&#39;</span> =&gt; 3,
<a name="l12640"></a>12640       <span class="stringliteral">&#39;apr&#39;</span> =&gt; 4,
<a name="l12641"></a>12641       <span class="stringliteral">&#39;april&#39;</span> =&gt; 4,
<a name="l12642"></a>12642       <span class="stringliteral">&#39;may&#39;</span> =&gt; 5,
<a name="l12643"></a>12643       <span class="comment">// No long form of May</span>
<a name="l12644"></a>12644       <span class="stringliteral">&#39;jun&#39;</span> =&gt; 6,
<a name="l12645"></a>12645       <span class="stringliteral">&#39;june&#39;</span> =&gt; 6,
<a name="l12646"></a>12646       <span class="stringliteral">&#39;jul&#39;</span> =&gt; 7,
<a name="l12647"></a>12647       <span class="stringliteral">&#39;july&#39;</span> =&gt; 7,
<a name="l12648"></a>12648       <span class="stringliteral">&#39;aug&#39;</span> =&gt; 8,
<a name="l12649"></a>12649       <span class="stringliteral">&#39;august&#39;</span> =&gt; 8,
<a name="l12650"></a>12650       <span class="stringliteral">&#39;sep&#39;</span> =&gt; 9,
<a name="l12651"></a>12651       <span class="stringliteral">&#39;september&#39;</span> =&gt; 8,
<a name="l12652"></a>12652       <span class="stringliteral">&#39;oct&#39;</span> =&gt; 10,
<a name="l12653"></a>12653       <span class="stringliteral">&#39;october&#39;</span> =&gt; 10,
<a name="l12654"></a>12654       <span class="stringliteral">&#39;nov&#39;</span> =&gt; 11,
<a name="l12655"></a>12655       <span class="stringliteral">&#39;november&#39;</span> =&gt; 11,
<a name="l12656"></a>12656       <span class="stringliteral">&#39;dec&#39;</span> =&gt; 12,
<a name="l12657"></a>12657       <span class="stringliteral">&#39;december&#39;</span> =&gt; 12,
<a name="l12658"></a>12658       <span class="comment">// Dutch</span>
<a name="l12659"></a>12659       <span class="stringliteral">&#39;januari&#39;</span> =&gt; 1,
<a name="l12660"></a>12660       <span class="stringliteral">&#39;februari&#39;</span> =&gt; 2,
<a name="l12661"></a>12661       <span class="stringliteral">&#39;maart&#39;</span> =&gt; 3,
<a name="l12662"></a>12662       <span class="stringliteral">&#39;april&#39;</span> =&gt; 4,
<a name="l12663"></a>12663       <span class="stringliteral">&#39;mei&#39;</span> =&gt; 5,
<a name="l12664"></a>12664       <span class="stringliteral">&#39;juni&#39;</span> =&gt; 6,
<a name="l12665"></a>12665       <span class="stringliteral">&#39;juli&#39;</span> =&gt; 7,
<a name="l12666"></a>12666       <span class="stringliteral">&#39;augustus&#39;</span> =&gt; 8,
<a name="l12667"></a>12667       <span class="stringliteral">&#39;september&#39;</span> =&gt; 9,
<a name="l12668"></a>12668       <span class="stringliteral">&#39;oktober&#39;</span> =&gt; 10,
<a name="l12669"></a>12669       <span class="stringliteral">&#39;november&#39;</span> =&gt; 11,
<a name="l12670"></a>12670       <span class="stringliteral">&#39;december&#39;</span> =&gt; 12,
<a name="l12671"></a>12671       <span class="comment">// French</span>
<a name="l12672"></a>12672       <span class="stringliteral">&#39;janvier&#39;</span> =&gt; 1,
<a name="l12673"></a>12673       <span class="stringliteral">&#39;fvrier&#39;</span> =&gt; 2,
<a name="l12674"></a>12674       <span class="stringliteral">&#39;mars&#39;</span> =&gt; 3,
<a name="l12675"></a>12675       <span class="stringliteral">&#39;avril&#39;</span> =&gt; 4,
<a name="l12676"></a>12676       <span class="stringliteral">&#39;mai&#39;</span> =&gt; 5,
<a name="l12677"></a>12677       <span class="stringliteral">&#39;juin&#39;</span> =&gt; 6,
<a name="l12678"></a>12678       <span class="stringliteral">&#39;juillet&#39;</span> =&gt; 7,
<a name="l12679"></a>12679       <span class="stringliteral">&#39;aot&#39;</span> =&gt; 8,
<a name="l12680"></a>12680       <span class="stringliteral">&#39;septembre&#39;</span> =&gt; 9,
<a name="l12681"></a>12681       <span class="stringliteral">&#39;octobre&#39;</span> =&gt; 10,
<a name="l12682"></a>12682       <span class="stringliteral">&#39;novembre&#39;</span> =&gt; 11,
<a name="l12683"></a>12683       <span class="stringliteral">&#39;dcembre&#39;</span> =&gt; 12,
<a name="l12684"></a>12684       <span class="comment">// German</span>
<a name="l12685"></a>12685       <span class="stringliteral">&#39;januar&#39;</span> =&gt; 1,
<a name="l12686"></a>12686       <span class="stringliteral">&#39;februar&#39;</span> =&gt; 2,
<a name="l12687"></a>12687       <span class="stringliteral">&#39;mrz&#39;</span> =&gt; 3,
<a name="l12688"></a>12688       <span class="stringliteral">&#39;april&#39;</span> =&gt; 4,
<a name="l12689"></a>12689       <span class="stringliteral">&#39;mai&#39;</span> =&gt; 5,
<a name="l12690"></a>12690       <span class="stringliteral">&#39;juni&#39;</span> =&gt; 6,
<a name="l12691"></a>12691       <span class="stringliteral">&#39;juli&#39;</span> =&gt; 7,
<a name="l12692"></a>12692       <span class="stringliteral">&#39;august&#39;</span> =&gt; 8,
<a name="l12693"></a>12693       <span class="stringliteral">&#39;september&#39;</span> =&gt; 9,
<a name="l12694"></a>12694       <span class="stringliteral">&#39;oktober&#39;</span> =&gt; 10,
<a name="l12695"></a>12695       <span class="stringliteral">&#39;november&#39;</span> =&gt; 11,
<a name="l12696"></a>12696       <span class="stringliteral">&#39;dezember&#39;</span> =&gt; 12,
<a name="l12697"></a>12697       <span class="comment">// Italian</span>
<a name="l12698"></a>12698       <span class="stringliteral">&#39;gennaio&#39;</span> =&gt; 1,
<a name="l12699"></a>12699       <span class="stringliteral">&#39;febbraio&#39;</span> =&gt; 2,
<a name="l12700"></a>12700       <span class="stringliteral">&#39;marzo&#39;</span> =&gt; 3,
<a name="l12701"></a>12701       <span class="stringliteral">&#39;aprile&#39;</span> =&gt; 4,
<a name="l12702"></a>12702       <span class="stringliteral">&#39;maggio&#39;</span> =&gt; 5,
<a name="l12703"></a>12703       <span class="stringliteral">&#39;giugno&#39;</span> =&gt; 6,
<a name="l12704"></a>12704       <span class="stringliteral">&#39;luglio&#39;</span> =&gt; 7,
<a name="l12705"></a>12705       <span class="stringliteral">&#39;agosto&#39;</span> =&gt; 8,
<a name="l12706"></a>12706       <span class="stringliteral">&#39;settembre&#39;</span> =&gt; 9,
<a name="l12707"></a>12707       <span class="stringliteral">&#39;ottobre&#39;</span> =&gt; 10,
<a name="l12708"></a>12708       <span class="stringliteral">&#39;novembre&#39;</span> =&gt; 11,
<a name="l12709"></a>12709       <span class="stringliteral">&#39;dicembre&#39;</span> =&gt; 12,
<a name="l12710"></a>12710       <span class="comment">// Spanish</span>
<a name="l12711"></a>12711       <span class="stringliteral">&#39;enero&#39;</span> =&gt; 1,
<a name="l12712"></a>12712       <span class="stringliteral">&#39;febrero&#39;</span> =&gt; 2,
<a name="l12713"></a>12713       <span class="stringliteral">&#39;marzo&#39;</span> =&gt; 3,
<a name="l12714"></a>12714       <span class="stringliteral">&#39;abril&#39;</span> =&gt; 4,
<a name="l12715"></a>12715       <span class="stringliteral">&#39;mayo&#39;</span> =&gt; 5,
<a name="l12716"></a>12716       <span class="stringliteral">&#39;junio&#39;</span> =&gt; 6,
<a name="l12717"></a>12717       <span class="stringliteral">&#39;julio&#39;</span> =&gt; 7,
<a name="l12718"></a>12718       <span class="stringliteral">&#39;agosto&#39;</span> =&gt; 8,
<a name="l12719"></a>12719       <span class="stringliteral">&#39;septiembre&#39;</span> =&gt; 9,
<a name="l12720"></a>12720       <span class="stringliteral">&#39;setiembre&#39;</span> =&gt; 9,
<a name="l12721"></a>12721       <span class="stringliteral">&#39;octubre&#39;</span> =&gt; 10,
<a name="l12722"></a>12722       <span class="stringliteral">&#39;noviembre&#39;</span> =&gt; 11,
<a name="l12723"></a>12723       <span class="stringliteral">&#39;diciembre&#39;</span> =&gt; 12,
<a name="l12724"></a>12724       <span class="comment">// Finnish</span>
<a name="l12725"></a>12725       <span class="stringliteral">&#39;tammikuu&#39;</span> =&gt; 1,
<a name="l12726"></a>12726       <span class="stringliteral">&#39;helmikuu&#39;</span> =&gt; 2,
<a name="l12727"></a>12727       <span class="stringliteral">&#39;maaliskuu&#39;</span> =&gt; 3,
<a name="l12728"></a>12728       <span class="stringliteral">&#39;huhtikuu&#39;</span> =&gt; 4,
<a name="l12729"></a>12729       <span class="stringliteral">&#39;toukokuu&#39;</span> =&gt; 5,
<a name="l12730"></a>12730       <span class="stringliteral">&#39;keskuu&#39;</span> =&gt; 6,
<a name="l12731"></a>12731       <span class="stringliteral">&#39;heinkuu&#39;</span> =&gt; 7,
<a name="l12732"></a>12732       <span class="stringliteral">&#39;elokuu&#39;</span> =&gt; 8,
<a name="l12733"></a>12733       <span class="stringliteral">&#39;suuskuu&#39;</span> =&gt; 9,
<a name="l12734"></a>12734       <span class="stringliteral">&#39;lokakuu&#39;</span> =&gt; 10,
<a name="l12735"></a>12735       <span class="stringliteral">&#39;marras&#39;</span> =&gt; 11,
<a name="l12736"></a>12736       <span class="stringliteral">&#39;joulukuu&#39;</span> =&gt; 12,
<a name="l12737"></a>12737       <span class="comment">// Hungarian</span>
<a name="l12738"></a>12738       <span class="stringliteral">&#39;janur&#39;</span> =&gt; 1,
<a name="l12739"></a>12739       <span class="stringliteral">&#39;februr&#39;</span> =&gt; 2,
<a name="l12740"></a>12740       <span class="stringliteral">&#39;mrcius&#39;</span> =&gt; 3,
<a name="l12741"></a>12741       <span class="stringliteral">&#39;prilis&#39;</span> =&gt; 4,
<a name="l12742"></a>12742       <span class="stringliteral">&#39;mjus&#39;</span> =&gt; 5,
<a name="l12743"></a>12743       <span class="stringliteral">&#39;jnius&#39;</span> =&gt; 6,
<a name="l12744"></a>12744       <span class="stringliteral">&#39;jlius&#39;</span> =&gt; 7,
<a name="l12745"></a>12745       <span class="stringliteral">&#39;augusztus&#39;</span> =&gt; 8,
<a name="l12746"></a>12746       <span class="stringliteral">&#39;szeptember&#39;</span> =&gt; 9,
<a name="l12747"></a>12747       <span class="stringliteral">&#39;oktber&#39;</span> =&gt; 10,
<a name="l12748"></a>12748       <span class="stringliteral">&#39;november&#39;</span> =&gt; 11,
<a name="l12749"></a>12749       <span class="stringliteral">&#39;december&#39;</span> =&gt; 12,
<a name="l12750"></a>12750       <span class="comment">// Greek</span>
<a name="l12751"></a>12751       <span class="stringliteral">&#39;&#39;</span> =&gt; 1,
<a name="l12752"></a>12752       <span class="stringliteral">&#39;&#39;</span> =&gt; 2,
<a name="l12753"></a>12753       <span class="stringliteral">&#39;&#39;</span> =&gt; 3,
<a name="l12754"></a>12754       <span class="stringliteral">&#39;&#39;</span> =&gt; 3,
<a name="l12755"></a>12755       <span class="stringliteral">&#39;&#39;</span> =&gt; 4,
<a name="l12756"></a>12756       <span class="stringliteral">&#39;&#39;</span> =&gt; 5,
<a name="l12757"></a>12757       <span class="stringliteral">&#39;&#39;</span> =&gt; 5,
<a name="l12758"></a>12758       <span class="stringliteral">&#39;&#39;</span> =&gt; 5,
<a name="l12759"></a>12759       <span class="stringliteral">&#39;&#39;</span> =&gt; 6,
<a name="l12760"></a>12760       <span class="stringliteral">&#39;&#39;</span> =&gt; 6,
<a name="l12761"></a>12761       <span class="stringliteral">&#39;&#39;</span> =&gt; 7,
<a name="l12762"></a>12762       <span class="stringliteral">&#39;&#39;</span> =&gt; 7,
<a name="l12763"></a>12763       <span class="stringliteral">&#39;&#39;</span> =&gt; 8,
<a name="l12764"></a>12764       <span class="stringliteral">&#39;&#39;</span> =&gt; 8,
<a name="l12765"></a>12765       <span class="stringliteral">&#39;&#39;</span> =&gt; 9,
<a name="l12766"></a>12766       <span class="stringliteral">&#39;&#39;</span> =&gt; 10,
<a name="l12767"></a>12767       <span class="stringliteral">&#39;&#39;</span> =&gt; 11,
<a name="l12768"></a>12768       <span class="stringliteral">&#39;&#39;</span> =&gt; 12,
<a name="l12769"></a>12769    );
<a name="l12770"></a>12770 <span class="comment"></span>
<a name="l12771"></a>12771 <span class="comment">   /**</span>
<a name="l12772"></a>12772 <span class="comment">    * List of timezones, abbreviation =&gt; offset from UTC</span>
<a name="l12773"></a>12773 <span class="comment">    *</span>
<a name="l12774"></a>12774 <span class="comment">    * @access protected</span>
<a name="l12775"></a>12775 <span class="comment">    * @var array</span>
<a name="l12776"></a>12776 <span class="comment">    */</span>
<a name="l12777"></a>12777    var $timezone = array(
<a name="l12778"></a>12778       <span class="stringliteral">&#39;ACDT&#39;</span> =&gt; 37800,
<a name="l12779"></a>12779       <span class="stringliteral">&#39;ACIT&#39;</span> =&gt; 28800,
<a name="l12780"></a>12780       <span class="stringliteral">&#39;ACST&#39;</span> =&gt; 34200,
<a name="l12781"></a>12781       <span class="stringliteral">&#39;ACT&#39;</span> =&gt; -18000,
<a name="l12782"></a>12782       <span class="stringliteral">&#39;ACWDT&#39;</span> =&gt; 35100,
<a name="l12783"></a>12783       <span class="stringliteral">&#39;ACWST&#39;</span> =&gt; 31500,
<a name="l12784"></a>12784       <span class="stringliteral">&#39;AEDT&#39;</span> =&gt; 39600,
<a name="l12785"></a>12785       <span class="stringliteral">&#39;AEST&#39;</span> =&gt; 36000,
<a name="l12786"></a>12786       <span class="stringliteral">&#39;AFT&#39;</span> =&gt; 16200,
<a name="l12787"></a>12787       <span class="stringliteral">&#39;AKDT&#39;</span> =&gt; -28800,
<a name="l12788"></a>12788       <span class="stringliteral">&#39;AKST&#39;</span> =&gt; -32400,
<a name="l12789"></a>12789       <span class="stringliteral">&#39;AMDT&#39;</span> =&gt; 18000,
<a name="l12790"></a>12790       <span class="stringliteral">&#39;AMT&#39;</span> =&gt; -14400,
<a name="l12791"></a>12791       <span class="stringliteral">&#39;ANAST&#39;</span> =&gt; 46800,
<a name="l12792"></a>12792       <span class="stringliteral">&#39;ANAT&#39;</span> =&gt; 43200,
<a name="l12793"></a>12793       <span class="stringliteral">&#39;ART&#39;</span> =&gt; -10800,
<a name="l12794"></a>12794       <span class="stringliteral">&#39;AZOST&#39;</span> =&gt; -3600,
<a name="l12795"></a>12795       <span class="stringliteral">&#39;AZST&#39;</span> =&gt; 18000,
<a name="l12796"></a>12796       <span class="stringliteral">&#39;AZT&#39;</span> =&gt; 14400,
<a name="l12797"></a>12797       <span class="stringliteral">&#39;BIOT&#39;</span> =&gt; 21600,
<a name="l12798"></a>12798       <span class="stringliteral">&#39;BIT&#39;</span> =&gt; -43200,
<a name="l12799"></a>12799       <span class="stringliteral">&#39;BOT&#39;</span> =&gt; -14400,
<a name="l12800"></a>12800       <span class="stringliteral">&#39;BRST&#39;</span> =&gt; -7200,
<a name="l12801"></a>12801       <span class="stringliteral">&#39;BRT&#39;</span> =&gt; -10800,
<a name="l12802"></a>12802       <span class="stringliteral">&#39;BST&#39;</span> =&gt; 3600,
<a name="l12803"></a>12803       <span class="stringliteral">&#39;BTT&#39;</span> =&gt; 21600,
<a name="l12804"></a>12804       <span class="stringliteral">&#39;CAST&#39;</span> =&gt; 18000,
<a name="l12805"></a>12805       <span class="stringliteral">&#39;CAT&#39;</span> =&gt; 7200,
<a name="l12806"></a>12806       <span class="stringliteral">&#39;CCT&#39;</span> =&gt; 23400,
<a name="l12807"></a>12807       <span class="stringliteral">&#39;CDT&#39;</span> =&gt; -18000,
<a name="l12808"></a>12808       <span class="stringliteral">&#39;CEDT&#39;</span> =&gt; 7200,
<a name="l12809"></a>12809       <span class="stringliteral">&#39;CET&#39;</span> =&gt; 3600,
<a name="l12810"></a>12810       <span class="stringliteral">&#39;CGST&#39;</span> =&gt; -7200,
<a name="l12811"></a>12811       <span class="stringliteral">&#39;CGT&#39;</span> =&gt; -10800,
<a name="l12812"></a>12812       <span class="stringliteral">&#39;CHADT&#39;</span> =&gt; 49500,
<a name="l12813"></a>12813       <span class="stringliteral">&#39;CHAST&#39;</span> =&gt; 45900,
<a name="l12814"></a>12814       <span class="stringliteral">&#39;CIST&#39;</span> =&gt; -28800,
<a name="l12815"></a>12815       <span class="stringliteral">&#39;CKT&#39;</span> =&gt; -36000,
<a name="l12816"></a>12816       <span class="stringliteral">&#39;CLDT&#39;</span> =&gt; -10800,
<a name="l12817"></a>12817       <span class="stringliteral">&#39;CLST&#39;</span> =&gt; -14400,
<a name="l12818"></a>12818       <span class="stringliteral">&#39;COT&#39;</span> =&gt; -18000,
<a name="l12819"></a>12819       <span class="stringliteral">&#39;CST&#39;</span> =&gt; -21600,
<a name="l12820"></a>12820       <span class="stringliteral">&#39;CVT&#39;</span> =&gt; -3600,
<a name="l12821"></a>12821       <span class="stringliteral">&#39;CXT&#39;</span> =&gt; 25200,
<a name="l12822"></a>12822       <span class="stringliteral">&#39;DAVT&#39;</span> =&gt; 25200,
<a name="l12823"></a>12823       <span class="stringliteral">&#39;DTAT&#39;</span> =&gt; 36000,
<a name="l12824"></a>12824       <span class="stringliteral">&#39;EADT&#39;</span> =&gt; -18000,
<a name="l12825"></a>12825       <span class="stringliteral">&#39;EAST&#39;</span> =&gt; -21600,
<a name="l12826"></a>12826       <span class="stringliteral">&#39;EAT&#39;</span> =&gt; 10800,
<a name="l12827"></a>12827       <span class="stringliteral">&#39;ECT&#39;</span> =&gt; -18000,
<a name="l12828"></a>12828       <span class="stringliteral">&#39;EDT&#39;</span> =&gt; -14400,
<a name="l12829"></a>12829       <span class="stringliteral">&#39;EEST&#39;</span> =&gt; 10800,
<a name="l12830"></a>12830       <span class="stringliteral">&#39;EET&#39;</span> =&gt; 7200,
<a name="l12831"></a>12831       <span class="stringliteral">&#39;EGT&#39;</span> =&gt; -3600,
<a name="l12832"></a>12832       <span class="stringliteral">&#39;EKST&#39;</span> =&gt; 21600,
<a name="l12833"></a>12833       <span class="stringliteral">&#39;EST&#39;</span> =&gt; -18000,
<a name="l12834"></a>12834       <span class="stringliteral">&#39;FJT&#39;</span> =&gt; 43200,
<a name="l12835"></a>12835       <span class="stringliteral">&#39;FKDT&#39;</span> =&gt; -10800,
<a name="l12836"></a>12836       <span class="stringliteral">&#39;FKST&#39;</span> =&gt; -14400,
<a name="l12837"></a>12837       <span class="stringliteral">&#39;FNT&#39;</span> =&gt; -7200,
<a name="l12838"></a>12838       <span class="stringliteral">&#39;GALT&#39;</span> =&gt; -21600,
<a name="l12839"></a>12839       <span class="stringliteral">&#39;GEDT&#39;</span> =&gt; 14400,
<a name="l12840"></a>12840       <span class="stringliteral">&#39;GEST&#39;</span> =&gt; 10800,
<a name="l12841"></a>12841       <span class="stringliteral">&#39;GFT&#39;</span> =&gt; -10800,
<a name="l12842"></a>12842       <span class="stringliteral">&#39;GILT&#39;</span> =&gt; 43200,
<a name="l12843"></a>12843       <span class="stringliteral">&#39;GIT&#39;</span> =&gt; -32400,
<a name="l12844"></a>12844       <span class="stringliteral">&#39;GST&#39;</span> =&gt; 14400,
<a name="l12845"></a>12845       <span class="stringliteral">&#39;GST&#39;</span> =&gt; -7200,
<a name="l12846"></a>12846       <span class="stringliteral">&#39;GYT&#39;</span> =&gt; -14400,
<a name="l12847"></a>12847       <span class="stringliteral">&#39;HAA&#39;</span> =&gt; -10800,
<a name="l12848"></a>12848       <span class="stringliteral">&#39;HAC&#39;</span> =&gt; -18000,
<a name="l12849"></a>12849       <span class="stringliteral">&#39;HADT&#39;</span> =&gt; -32400,
<a name="l12850"></a>12850       <span class="stringliteral">&#39;HAE&#39;</span> =&gt; -14400,
<a name="l12851"></a>12851       <span class="stringliteral">&#39;HAP&#39;</span> =&gt; -25200,
<a name="l12852"></a>12852       <span class="stringliteral">&#39;HAR&#39;</span> =&gt; -21600,
<a name="l12853"></a>12853       <span class="stringliteral">&#39;HAST&#39;</span> =&gt; -36000,
<a name="l12854"></a>12854       <span class="stringliteral">&#39;HAT&#39;</span> =&gt; -9000,
<a name="l12855"></a>12855       <span class="stringliteral">&#39;HAY&#39;</span> =&gt; -28800,
<a name="l12856"></a>12856       <span class="stringliteral">&#39;HKST&#39;</span> =&gt; 28800,
<a name="l12857"></a>12857       <span class="stringliteral">&#39;HMT&#39;</span> =&gt; 18000,
<a name="l12858"></a>12858       <span class="stringliteral">&#39;HNA&#39;</span> =&gt; -14400,
<a name="l12859"></a>12859       <span class="stringliteral">&#39;HNC&#39;</span> =&gt; -21600,
<a name="l12860"></a>12860       <span class="stringliteral">&#39;HNE&#39;</span> =&gt; -18000,
<a name="l12861"></a>12861       <span class="stringliteral">&#39;HNP&#39;</span> =&gt; -28800,
<a name="l12862"></a>12862       <span class="stringliteral">&#39;HNR&#39;</span> =&gt; -25200,
<a name="l12863"></a>12863       <span class="stringliteral">&#39;HNT&#39;</span> =&gt; -12600,
<a name="l12864"></a>12864       <span class="stringliteral">&#39;HNY&#39;</span> =&gt; -32400,
<a name="l12865"></a>12865       <span class="stringliteral">&#39;IRDT&#39;</span> =&gt; 16200,
<a name="l12866"></a>12866       <span class="stringliteral">&#39;IRKST&#39;</span> =&gt; 32400,
<a name="l12867"></a>12867       <span class="stringliteral">&#39;IRKT&#39;</span> =&gt; 28800,
<a name="l12868"></a>12868       <span class="stringliteral">&#39;IRST&#39;</span> =&gt; 12600,
<a name="l12869"></a>12869       <span class="stringliteral">&#39;JFDT&#39;</span> =&gt; -10800,
<a name="l12870"></a>12870       <span class="stringliteral">&#39;JFST&#39;</span> =&gt; -14400,
<a name="l12871"></a>12871       <span class="stringliteral">&#39;JST&#39;</span> =&gt; 32400,
<a name="l12872"></a>12872       <span class="stringliteral">&#39;KGST&#39;</span> =&gt; 21600,
<a name="l12873"></a>12873       <span class="stringliteral">&#39;KGT&#39;</span> =&gt; 18000,
<a name="l12874"></a>12874       <span class="stringliteral">&#39;KOST&#39;</span> =&gt; 39600,
<a name="l12875"></a>12875       <span class="stringliteral">&#39;KOVST&#39;</span> =&gt; 28800,
<a name="l12876"></a>12876       <span class="stringliteral">&#39;KOVT&#39;</span> =&gt; 25200,
<a name="l12877"></a>12877       <span class="stringliteral">&#39;KRAST&#39;</span> =&gt; 28800,
<a name="l12878"></a>12878       <span class="stringliteral">&#39;KRAT&#39;</span> =&gt; 25200,
<a name="l12879"></a>12879       <span class="stringliteral">&#39;KST&#39;</span> =&gt; 32400,
<a name="l12880"></a>12880       <span class="stringliteral">&#39;LHDT&#39;</span> =&gt; 39600,
<a name="l12881"></a>12881       <span class="stringliteral">&#39;LHST&#39;</span> =&gt; 37800,
<a name="l12882"></a>12882       <span class="stringliteral">&#39;LINT&#39;</span> =&gt; 50400,
<a name="l12883"></a>12883       <span class="stringliteral">&#39;LKT&#39;</span> =&gt; 21600,
<a name="l12884"></a>12884       <span class="stringliteral">&#39;MAGST&#39;</span> =&gt; 43200,
<a name="l12885"></a>12885       <span class="stringliteral">&#39;MAGT&#39;</span> =&gt; 39600,
<a name="l12886"></a>12886       <span class="stringliteral">&#39;MAWT&#39;</span> =&gt; 21600,
<a name="l12887"></a>12887       <span class="stringliteral">&#39;MDT&#39;</span> =&gt; -21600,
<a name="l12888"></a>12888       <span class="stringliteral">&#39;MESZ&#39;</span> =&gt; 7200,
<a name="l12889"></a>12889       <span class="stringliteral">&#39;MEZ&#39;</span> =&gt; 3600,
<a name="l12890"></a>12890       <span class="stringliteral">&#39;MHT&#39;</span> =&gt; 43200,
<a name="l12891"></a>12891       <span class="stringliteral">&#39;MIT&#39;</span> =&gt; -34200,
<a name="l12892"></a>12892       <span class="stringliteral">&#39;MNST&#39;</span> =&gt; 32400,
<a name="l12893"></a>12893       <span class="stringliteral">&#39;MSDT&#39;</span> =&gt; 14400,
<a name="l12894"></a>12894       <span class="stringliteral">&#39;MSST&#39;</span> =&gt; 10800,
<a name="l12895"></a>12895       <span class="stringliteral">&#39;MST&#39;</span> =&gt; -25200,
<a name="l12896"></a>12896       <span class="stringliteral">&#39;MUT&#39;</span> =&gt; 14400,
<a name="l12897"></a>12897       <span class="stringliteral">&#39;MVT&#39;</span> =&gt; 18000,
<a name="l12898"></a>12898       <span class="stringliteral">&#39;MYT&#39;</span> =&gt; 28800,
<a name="l12899"></a>12899       <span class="stringliteral">&#39;NCT&#39;</span> =&gt; 39600,
<a name="l12900"></a>12900       <span class="stringliteral">&#39;NDT&#39;</span> =&gt; -9000,
<a name="l12901"></a>12901       <span class="stringliteral">&#39;NFT&#39;</span> =&gt; 41400,
<a name="l12902"></a>12902       <span class="stringliteral">&#39;NMIT&#39;</span> =&gt; 36000,
<a name="l12903"></a>12903       <span class="stringliteral">&#39;NOVST&#39;</span> =&gt; 25200,
<a name="l12904"></a>12904       <span class="stringliteral">&#39;NOVT&#39;</span> =&gt; 21600,
<a name="l12905"></a>12905       <span class="stringliteral">&#39;NPT&#39;</span> =&gt; 20700,
<a name="l12906"></a>12906       <span class="stringliteral">&#39;NRT&#39;</span> =&gt; 43200,
<a name="l12907"></a>12907       <span class="stringliteral">&#39;NST&#39;</span> =&gt; -12600,
<a name="l12908"></a>12908       <span class="stringliteral">&#39;NUT&#39;</span> =&gt; -39600,
<a name="l12909"></a>12909       <span class="stringliteral">&#39;NZDT&#39;</span> =&gt; 46800,
<a name="l12910"></a>12910       <span class="stringliteral">&#39;NZST&#39;</span> =&gt; 43200,
<a name="l12911"></a>12911       <span class="stringliteral">&#39;OMSST&#39;</span> =&gt; 25200,
<a name="l12912"></a>12912       <span class="stringliteral">&#39;OMST&#39;</span> =&gt; 21600,
<a name="l12913"></a>12913       <span class="stringliteral">&#39;PDT&#39;</span> =&gt; -25200,
<a name="l12914"></a>12914       <span class="stringliteral">&#39;PET&#39;</span> =&gt; -18000,
<a name="l12915"></a>12915       <span class="stringliteral">&#39;PETST&#39;</span> =&gt; 46800,
<a name="l12916"></a>12916       <span class="stringliteral">&#39;PETT&#39;</span> =&gt; 43200,
<a name="l12917"></a>12917       <span class="stringliteral">&#39;PGT&#39;</span> =&gt; 36000,
<a name="l12918"></a>12918       <span class="stringliteral">&#39;PHOT&#39;</span> =&gt; 46800,
<a name="l12919"></a>12919       <span class="stringliteral">&#39;PHT&#39;</span> =&gt; 28800,
<a name="l12920"></a>12920       <span class="stringliteral">&#39;PKT&#39;</span> =&gt; 18000,
<a name="l12921"></a>12921       <span class="stringliteral">&#39;PMDT&#39;</span> =&gt; -7200,
<a name="l12922"></a>12922       <span class="stringliteral">&#39;PMST&#39;</span> =&gt; -10800,
<a name="l12923"></a>12923       <span class="stringliteral">&#39;PONT&#39;</span> =&gt; 39600,
<a name="l12924"></a>12924       <span class="stringliteral">&#39;PST&#39;</span> =&gt; -28800,
<a name="l12925"></a>12925       <span class="stringliteral">&#39;PWT&#39;</span> =&gt; 32400,
<a name="l12926"></a>12926       <span class="stringliteral">&#39;PYST&#39;</span> =&gt; -10800,
<a name="l12927"></a>12927       <span class="stringliteral">&#39;PYT&#39;</span> =&gt; -14400,
<a name="l12928"></a>12928       <span class="stringliteral">&#39;RET&#39;</span> =&gt; 14400,
<a name="l12929"></a>12929       <span class="stringliteral">&#39;ROTT&#39;</span> =&gt; -10800,
<a name="l12930"></a>12930       <span class="stringliteral">&#39;SAMST&#39;</span> =&gt; 18000,
<a name="l12931"></a>12931       <span class="stringliteral">&#39;SAMT&#39;</span> =&gt; 14400,
<a name="l12932"></a>12932       <span class="stringliteral">&#39;SAST&#39;</span> =&gt; 7200,
<a name="l12933"></a>12933       <span class="stringliteral">&#39;SBT&#39;</span> =&gt; 39600,
<a name="l12934"></a>12934       <span class="stringliteral">&#39;SCDT&#39;</span> =&gt; 46800,
<a name="l12935"></a>12935       <span class="stringliteral">&#39;SCST&#39;</span> =&gt; 43200,
<a name="l12936"></a>12936       <span class="stringliteral">&#39;SCT&#39;</span> =&gt; 14400,
<a name="l12937"></a>12937       <span class="stringliteral">&#39;SEST&#39;</span> =&gt; 3600,
<a name="l12938"></a>12938       <span class="stringliteral">&#39;SGT&#39;</span> =&gt; 28800,
<a name="l12939"></a>12939       <span class="stringliteral">&#39;SIT&#39;</span> =&gt; 28800,
<a name="l12940"></a>12940       <span class="stringliteral">&#39;SRT&#39;</span> =&gt; -10800,
<a name="l12941"></a>12941       <span class="stringliteral">&#39;SST&#39;</span> =&gt; -39600,
<a name="l12942"></a>12942       <span class="stringliteral">&#39;SYST&#39;</span> =&gt; 10800,
<a name="l12943"></a>12943       <span class="stringliteral">&#39;SYT&#39;</span> =&gt; 7200,
<a name="l12944"></a>12944       <span class="stringliteral">&#39;TFT&#39;</span> =&gt; 18000,
<a name="l12945"></a>12945       <span class="stringliteral">&#39;THAT&#39;</span> =&gt; -36000,
<a name="l12946"></a>12946       <span class="stringliteral">&#39;TJT&#39;</span> =&gt; 18000,
<a name="l12947"></a>12947       <span class="stringliteral">&#39;TKT&#39;</span> =&gt; -36000,
<a name="l12948"></a>12948       <span class="stringliteral">&#39;TMT&#39;</span> =&gt; 18000,
<a name="l12949"></a>12949       <span class="stringliteral">&#39;TOT&#39;</span> =&gt; 46800,
<a name="l12950"></a>12950       <span class="stringliteral">&#39;TPT&#39;</span> =&gt; 32400,
<a name="l12951"></a>12951       <span class="stringliteral">&#39;TRUT&#39;</span> =&gt; 36000,
<a name="l12952"></a>12952       <span class="stringliteral">&#39;TVT&#39;</span> =&gt; 43200,
<a name="l12953"></a>12953       <span class="stringliteral">&#39;TWT&#39;</span> =&gt; 28800,
<a name="l12954"></a>12954       <span class="stringliteral">&#39;UYST&#39;</span> =&gt; -7200,
<a name="l12955"></a>12955       <span class="stringliteral">&#39;UYT&#39;</span> =&gt; -10800,
<a name="l12956"></a>12956       <span class="stringliteral">&#39;UZT&#39;</span> =&gt; 18000,
<a name="l12957"></a>12957       <span class="stringliteral">&#39;VET&#39;</span> =&gt; -14400,
<a name="l12958"></a>12958       <span class="stringliteral">&#39;VLAST&#39;</span> =&gt; 39600,
<a name="l12959"></a>12959       <span class="stringliteral">&#39;VLAT&#39;</span> =&gt; 36000,
<a name="l12960"></a>12960       <span class="stringliteral">&#39;VOST&#39;</span> =&gt; 21600,
<a name="l12961"></a>12961       <span class="stringliteral">&#39;VUT&#39;</span> =&gt; 39600,
<a name="l12962"></a>12962       <span class="stringliteral">&#39;WAST&#39;</span> =&gt; 7200,
<a name="l12963"></a>12963       <span class="stringliteral">&#39;WAT&#39;</span> =&gt; 3600,
<a name="l12964"></a>12964       <span class="stringliteral">&#39;WDT&#39;</span> =&gt; 32400,
<a name="l12965"></a>12965       <span class="stringliteral">&#39;WEST&#39;</span> =&gt; 3600,
<a name="l12966"></a>12966       <span class="stringliteral">&#39;WFT&#39;</span> =&gt; 43200,
<a name="l12967"></a>12967       <span class="stringliteral">&#39;WIB&#39;</span> =&gt; 25200,
<a name="l12968"></a>12968       <span class="stringliteral">&#39;WIT&#39;</span> =&gt; 32400,
<a name="l12969"></a>12969       <span class="stringliteral">&#39;WITA&#39;</span> =&gt; 28800,
<a name="l12970"></a>12970       <span class="stringliteral">&#39;WKST&#39;</span> =&gt; 18000,
<a name="l12971"></a>12971       <span class="stringliteral">&#39;WST&#39;</span> =&gt; 28800,
<a name="l12972"></a>12972       <span class="stringliteral">&#39;YAKST&#39;</span> =&gt; 36000,
<a name="l12973"></a>12973       <span class="stringliteral">&#39;YAKT&#39;</span> =&gt; 32400,
<a name="l12974"></a>12974       <span class="stringliteral">&#39;YAPT&#39;</span> =&gt; 36000,
<a name="l12975"></a>12975       <span class="stringliteral">&#39;YEKST&#39;</span> =&gt; 21600,
<a name="l12976"></a>12976       <span class="stringliteral">&#39;YEKT&#39;</span> =&gt; 18000,
<a name="l12977"></a>12977    );
<a name="l12978"></a>12978 <span class="comment"></span>
<a name="l12979"></a>12979 <span class="comment">   /**</span>
<a name="l12980"></a>12980 <span class="comment">    * Cached PCRE for SimplePie_Parse_Date::$day</span>
<a name="l12981"></a>12981 <span class="comment">    *</span>
<a name="l12982"></a>12982 <span class="comment">    * @access protected</span>
<a name="l12983"></a>12983 <span class="comment">    * @var string</span>
<a name="l12984"></a>12984 <span class="comment">    */</span>
<a name="l12985"></a>12985    var $day_pcre;
<a name="l12986"></a>12986 <span class="comment"></span>
<a name="l12987"></a>12987 <span class="comment">   /**</span>
<a name="l12988"></a>12988 <span class="comment">    * Cached PCRE for SimplePie_Parse_Date::$month</span>
<a name="l12989"></a>12989 <span class="comment">    *</span>
<a name="l12990"></a>12990 <span class="comment">    * @access protected</span>
<a name="l12991"></a>12991 <span class="comment">    * @var string</span>
<a name="l12992"></a>12992 <span class="comment">    */</span>
<a name="l12993"></a>12993    var $month_pcre;
<a name="l12994"></a>12994 <span class="comment"></span>
<a name="l12995"></a>12995 <span class="comment">   /**</span>
<a name="l12996"></a>12996 <span class="comment">    * Array of user-added callback methods</span>
<a name="l12997"></a>12997 <span class="comment">    *</span>
<a name="l12998"></a>12998 <span class="comment">    * @access private</span>
<a name="l12999"></a>12999 <span class="comment">    * @var array</span>
<a name="l13000"></a>13000 <span class="comment">    */</span>
<a name="l13001"></a>13001    var $built_in = array();
<a name="l13002"></a>13002 <span class="comment"></span>
<a name="l13003"></a>13003 <span class="comment">   /**</span>
<a name="l13004"></a>13004 <span class="comment">    * Array of user-added callback methods</span>
<a name="l13005"></a>13005 <span class="comment">    *</span>
<a name="l13006"></a>13006 <span class="comment">    * @access private</span>
<a name="l13007"></a>13007 <span class="comment">    * @var array</span>
<a name="l13008"></a>13008 <span class="comment">    */</span>
<a name="l13009"></a>13009    var $user = array();
<a name="l13010"></a>13010 <span class="comment"></span>
<a name="l13011"></a>13011 <span class="comment">   /**</span>
<a name="l13012"></a>13012 <span class="comment">    * Create new SimplePie_Parse_Date object, and set self::day_pcre,</span>
<a name="l13013"></a>13013 <span class="comment">    * self::month_pcre, and self::built_in</span>
<a name="l13014"></a>13014 <span class="comment">    *</span>
<a name="l13015"></a>13015 <span class="comment">    * @access private</span>
<a name="l13016"></a>13016 <span class="comment">    */</span>
<a name="l13017"></a><a class="code" href="class_simple_pie___parse___date.html#aedc975d7b6e24186c3e80c59643c6ae5">13017</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie___parse___date.html">SimplePie_Parse_Date</a>()
<a name="l13018"></a>13018    {
<a name="l13019"></a>13019       $this-&gt;day_pcre = <span class="charliteral">&#39;(&#39;</span> . implode(array_keys($this-&gt;day), <span class="charliteral">&#39;|&#39;</span>) . <span class="charliteral">&#39;)&#39;</span>;
<a name="l13020"></a>13020       $this-&gt;month_pcre = <span class="charliteral">&#39;(&#39;</span> . implode(array_keys($this-&gt;month), <span class="charliteral">&#39;|&#39;</span>) . <span class="charliteral">&#39;)&#39;</span>;
<a name="l13021"></a>13021 
<a name="l13022"></a>13022       <span class="keyword">static</span> $cache;
<a name="l13023"></a>13023       <span class="keywordflow">if</span> (!isset($cache[get_class($this)]))
<a name="l13024"></a>13024       {
<a name="l13025"></a>13025          $all_methods = get_class_methods($this);
<a name="l13026"></a>13026 
<a name="l13027"></a>13027          <span class="keywordflow">foreach</span> ($all_methods as $method)
<a name="l13028"></a>13028          {
<a name="l13029"></a>13029             <span class="keywordflow">if</span> (strtolower(substr($method, 0, 5)) === <span class="stringliteral">&#39;date_&#39;</span>)
<a name="l13030"></a>13030             {
<a name="l13031"></a>13031                $cache[get_class($this)][] = $method;
<a name="l13032"></a>13032             }
<a name="l13033"></a>13033          }
<a name="l13034"></a>13034       }
<a name="l13035"></a>13035 
<a name="l13036"></a>13036       <span class="keywordflow">foreach</span> ($cache[get_class($this)] as $method)
<a name="l13037"></a>13037       {
<a name="l13038"></a>13038          $this-&gt;built_in[] = $method;
<a name="l13039"></a>13039       }
<a name="l13040"></a>13040    }
<a name="l13041"></a>13041 <span class="comment"></span>
<a name="l13042"></a>13042 <span class="comment">   /**</span>
<a name="l13043"></a>13043 <span class="comment">    * Get the object</span>
<a name="l13044"></a>13044 <span class="comment">    *</span>
<a name="l13045"></a>13045 <span class="comment">    * @access public</span>
<a name="l13046"></a>13046 <span class="comment">    */</span>
<a name="l13047"></a><a class="code" href="class_simple_pie___parse___date.html#ac33ee765f5ad9f134540bac393721cfe">13047</a>    <span class="keyword">function</span> <span class="keyword">get</span>()
<a name="l13048"></a>13048    {
<a name="l13049"></a>13049       <span class="keyword">static</span> $object;
<a name="l13050"></a>13050       <span class="keywordflow">if</span> (!$object)
<a name="l13051"></a>13051       {
<a name="l13052"></a>13052          $object =&amp; <span class="keyword">new</span> <a class="code" href="class_simple_pie___parse___date.html">SimplePie_Parse_Date</a>;
<a name="l13053"></a>13053       }
<a name="l13054"></a>13054       <span class="keywordflow">return</span> $object;
<a name="l13055"></a>13055    }
<a name="l13056"></a>13056 <span class="comment"></span>
<a name="l13057"></a>13057 <span class="comment">   /**</span>
<a name="l13058"></a>13058 <span class="comment">    * Parse a date</span>
<a name="l13059"></a>13059 <span class="comment">    *</span>
<a name="l13060"></a>13060 <span class="comment">    * @final</span>
<a name="l13061"></a>13061 <span class="comment">    * @access public</span>
<a name="l13062"></a>13062 <span class="comment">    * @param string $date Date to parse</span>
<a name="l13063"></a>13063 <span class="comment">    * @return int Timestamp corresponding to date string, or false on failure</span>
<a name="l13064"></a>13064 <span class="comment">    */</span>
<a name="l13065"></a><a class="code" href="class_simple_pie___parse___date.html#a97dc09f3734360d0594d86d9fbc81fa0">13065</a>    <span class="keyword">function</span> parse($date)
<a name="l13066"></a>13066    {
<a name="l13067"></a>13067       <span class="keywordflow">foreach</span> ($this-&gt;user as $method)
<a name="l13068"></a>13068       {
<a name="l13069"></a>13069          <span class="keywordflow">if</span> (($returned = call_user_func($method, $date)) !== <span class="keyword">false</span>)
<a name="l13070"></a>13070          {
<a name="l13071"></a>13071             <span class="keywordflow">return</span> $returned;
<a name="l13072"></a>13072          }
<a name="l13073"></a>13073       }
<a name="l13074"></a>13074 
<a name="l13075"></a>13075       <span class="keywordflow">foreach</span> ($this-&gt;built_in as $method)
<a name="l13076"></a>13076       {
<a name="l13077"></a>13077          <span class="keywordflow">if</span> (($returned = call_user_func(array(&amp;$this, $method), $date)) !== <span class="keyword">false</span>)
<a name="l13078"></a>13078          {
<a name="l13079"></a>13079             <span class="keywordflow">return</span> $returned;
<a name="l13080"></a>13080          }
<a name="l13081"></a>13081       }
<a name="l13082"></a>13082 
<a name="l13083"></a>13083       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l13084"></a>13084    }
<a name="l13085"></a>13085 <span class="comment"></span>
<a name="l13086"></a>13086 <span class="comment">   /**</span>
<a name="l13087"></a>13087 <span class="comment">    * Add a callback method to parse a date</span>
<a name="l13088"></a>13088 <span class="comment">    *</span>
<a name="l13089"></a>13089 <span class="comment">    * @final</span>
<a name="l13090"></a>13090 <span class="comment">    * @access public</span>
<a name="l13091"></a>13091 <span class="comment">    * @param callback $callback</span>
<a name="l13092"></a>13092 <span class="comment">    */</span>
<a name="l13093"></a><a class="code" href="class_simple_pie___parse___date.html#a325ae03b2fc0c01ce20b40ab53d59297">13093</a>    <span class="keyword">function</span> add_callback($callback)
<a name="l13094"></a>13094    {
<a name="l13095"></a>13095       <span class="keywordflow">if</span> (is_callable($callback))
<a name="l13096"></a>13096       {
<a name="l13097"></a>13097          $this-&gt;user[] = $callback;
<a name="l13098"></a>13098       }
<a name="l13099"></a>13099       <span class="keywordflow">else</span>
<a name="l13100"></a>13100       {
<a name="l13101"></a>13101          trigger_error(<span class="stringliteral">&#39;User-supplied function must be a valid callback&#39;</span>, E_USER_WARNING);
<a name="l13102"></a>13102       }
<a name="l13103"></a>13103    }
<a name="l13104"></a>13104 <span class="comment"></span>
<a name="l13105"></a>13105 <span class="comment">   /**</span>
<a name="l13106"></a>13106 <span class="comment">    * Parse a superset of W3C-DTF (allows hyphens and colons to be omitted, as</span>
<a name="l13107"></a>13107 <span class="comment">    * well as allowing any of upper or lower case &quot;T&quot;, horizontal tabs, or</span>
<a name="l13108"></a>13108 <span class="comment">    * spaces to be used as the time seperator (including more than one))</span>
<a name="l13109"></a>13109 <span class="comment">    *</span>
<a name="l13110"></a>13110 <span class="comment">    * @access protected</span>
<a name="l13111"></a>13111 <span class="comment">    * @return int Timestamp</span>
<a name="l13112"></a>13112 <span class="comment">    */</span>
<a name="l13113"></a><a class="code" href="class_simple_pie___parse___date.html#a147cb23bbc1421aed091dcfb36aa1573">13113</a>    <span class="keyword">function</span> date_w3cdtf($date)
<a name="l13114"></a>13114    {
<a name="l13115"></a>13115       <span class="keyword">static</span> $pcre;
<a name="l13116"></a>13116       <span class="keywordflow">if</span> (!$pcre)
<a name="l13117"></a>13117       {
<a name="l13118"></a>13118          $year = <span class="stringliteral">&#39;([0-9]{4})&#39;</span>;
<a name="l13119"></a>13119          $month = $day = $hour = $minute = $second = <span class="stringliteral">&#39;([0-9]{2})&#39;</span>;
<a name="l13120"></a>13120          $decimal = <span class="stringliteral">&#39;([0-9]*)&#39;</span>;
<a name="l13121"></a>13121          $zone = <span class="stringliteral">&#39;(?:(Z)|([+\-])([0-9]{1,2}):?([0-9]{1,2}))&#39;</span>;
<a name="l13122"></a>13122          $pcre = <span class="stringliteral">&#39;/^&#39;</span> . $year . <span class="stringliteral">&#39;(?:-?&#39;</span> . $month . <span class="stringliteral">&#39;(?:-?&#39;</span> . $day . <span class="stringliteral">&#39;(?:[Tt\x09\x20]+&#39;</span> . $hour . <span class="stringliteral">&#39;(?::?&#39;</span> . $minute . <span class="stringliteral">&#39;(?::?&#39;</span> . $second . <span class="stringliteral">&#39;(?:.&#39;</span> . $decimal . <span class="stringliteral">&#39;)?)?)?&#39;</span> . $zone . <span class="stringliteral">&#39;)?)?)?$/&#39;</span>;
<a name="l13123"></a>13123       }
<a name="l13124"></a>13124       <span class="keywordflow">if</span> (preg_match($pcre, $date, $match))
<a name="l13125"></a>13125       {
<a name="l13126"></a>13126          <span class="comment">/*</span>
<a name="l13127"></a>13127 <span class="comment">         Capturing subpatterns:</span>
<a name="l13128"></a>13128 <span class="comment">         1: Year</span>
<a name="l13129"></a>13129 <span class="comment">         2: Month</span>
<a name="l13130"></a>13130 <span class="comment">         3: Day</span>
<a name="l13131"></a>13131 <span class="comment">         4: Hour</span>
<a name="l13132"></a>13132 <span class="comment">         5: Minute</span>
<a name="l13133"></a>13133 <span class="comment">         6: Second</span>
<a name="l13134"></a>13134 <span class="comment">         7: Decimal fraction of a second</span>
<a name="l13135"></a>13135 <span class="comment">         8: Zulu</span>
<a name="l13136"></a>13136 <span class="comment">         9: Timezone </span>
<a name="l13137"></a>13137 <span class="comment">         10: Timezone hours</span>
<a name="l13138"></a>13138 <span class="comment">         11: Timezone minutes</span>
<a name="l13139"></a>13139 <span class="comment">         */</span>
<a name="l13140"></a>13140 
<a name="l13141"></a>13141          <span class="comment">// Fill in empty matches</span>
<a name="l13142"></a>13142          <span class="keywordflow">for</span> ($i = count($match); $i &lt;= 3; $i++)
<a name="l13143"></a>13143          {
<a name="l13144"></a>13144             $match[$i] = <span class="charliteral">&#39;1&#39;</span>;
<a name="l13145"></a>13145          }
<a name="l13146"></a>13146 
<a name="l13147"></a>13147          <span class="keywordflow">for</span> ($i = count($match); $i &lt;= 7; $i++)
<a name="l13148"></a>13148          {
<a name="l13149"></a>13149             $match[$i] = <span class="charliteral">&#39;0&#39;</span>;
<a name="l13150"></a>13150          }
<a name="l13151"></a>13151 
<a name="l13152"></a>13152          <span class="comment">// Numeric timezone</span>
<a name="l13153"></a>13153          <span class="keywordflow">if</span> (isset($match[9]) &amp;&amp; $match[9] !== <span class="stringliteral">&#39;&#39;</span>)
<a name="l13154"></a>13154          {
<a name="l13155"></a>13155             $timezone = $match[10] * 3600;
<a name="l13156"></a>13156             $timezone += $match[11] * 60;
<a name="l13157"></a>13157             <span class="keywordflow">if</span> ($match[9] === <span class="charliteral">&#39;-&#39;</span>)
<a name="l13158"></a>13158             {
<a name="l13159"></a>13159                $timezone = 0 - $timezone;
<a name="l13160"></a>13160             }
<a name="l13161"></a>13161          }
<a name="l13162"></a>13162          <span class="keywordflow">else</span>
<a name="l13163"></a>13163          {
<a name="l13164"></a>13164             $timezone = 0;
<a name="l13165"></a>13165          }
<a name="l13166"></a>13166 
<a name="l13167"></a>13167          <span class="comment">// Convert the number of seconds to an integer, taking decimals into account</span>
<a name="l13168"></a>13168          $second = round($match[6] + $match[7] / pow(10, strlen($match[7])));
<a name="l13169"></a>13169 
<a name="l13170"></a>13170          <span class="keywordflow">return</span> gmmktime($match[4], $match[5], $second, $match[2], $match[3], $match[1]) - $timezone;
<a name="l13171"></a>13171       }
<a name="l13172"></a>13172       <span class="keywordflow">else</span>
<a name="l13173"></a>13173       {
<a name="l13174"></a>13174          <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l13175"></a>13175       }
<a name="l13176"></a>13176    }
<a name="l13177"></a>13177 <span class="comment"></span>
<a name="l13178"></a>13178 <span class="comment">   /**</span>
<a name="l13179"></a>13179 <span class="comment">    * Remove RFC822 comments</span>
<a name="l13180"></a>13180 <span class="comment">    *</span>
<a name="l13181"></a>13181 <span class="comment">    * @access protected</span>
<a name="l13182"></a>13182 <span class="comment">    * @param string $data Data to strip comments from</span>
<a name="l13183"></a>13183 <span class="comment">    * @return string Comment stripped string</span>
<a name="l13184"></a>13184 <span class="comment">    */</span>
<a name="l13185"></a><a class="code" href="class_simple_pie___parse___date.html#ad8f49abe5a9af3037abb5ce721248eb2">13185</a>    <span class="keyword">function</span> remove_rfc2822_comments($string)
<a name="l13186"></a>13186    {
<a name="l13187"></a>13187       $string = (string) $string;
<a name="l13188"></a>13188       $position = 0;
<a name="l13189"></a>13189       $length = strlen($string);
<a name="l13190"></a>13190       $depth = 0;
<a name="l13191"></a>13191 
<a name="l13192"></a>13192       $output = <span class="stringliteral">&#39;&#39;</span>;
<a name="l13193"></a>13193 
<a name="l13194"></a>13194       <span class="keywordflow">while</span> ($position &lt; $length &amp;&amp; ($pos = strpos($string, <span class="charliteral">&#39;(&#39;</span>, $position)) !== <span class="keyword">false</span>)
<a name="l13195"></a>13195       {
<a name="l13196"></a>13196          $output .= substr($string, $position, $pos - $position);
<a name="l13197"></a>13197          $position = $pos + 1;
<a name="l13198"></a>13198          <span class="keywordflow">if</span> ($string[$pos - 1] !== <span class="charliteral">&#39;\\&#39;</span>)
<a name="l13199"></a>13199          {
<a name="l13200"></a>13200             $depth++;
<a name="l13201"></a>13201             <span class="keywordflow">while</span> ($depth &amp;&amp; $position &lt; $length)
<a name="l13202"></a>13202             {
<a name="l13203"></a>13203                $position += strcspn($string, <span class="stringliteral">&#39;()&#39;</span>, $position);
<a name="l13204"></a>13204                <span class="keywordflow">if</span> ($string[$position - 1] === <span class="charliteral">&#39;\\&#39;</span>)
<a name="l13205"></a>13205                {
<a name="l13206"></a>13206                   $position++;
<a name="l13207"></a>13207                   <span class="keywordflow">continue</span>;
<a name="l13208"></a>13208                }
<a name="l13209"></a>13209                elseif (isset($string[$position]))
<a name="l13210"></a>13210                {
<a name="l13211"></a>13211                   <span class="keywordflow">switch</span> ($string[$position])
<a name="l13212"></a>13212                   {
<a name="l13213"></a>13213                      <span class="keywordflow">case</span> <span class="charliteral">&#39;(&#39;</span>:
<a name="l13214"></a>13214                         $depth++;
<a name="l13215"></a>13215                         <span class="keywordflow">break</span>;
<a name="l13216"></a>13216 
<a name="l13217"></a>13217                      <span class="keywordflow">case</span> <span class="charliteral">&#39;)&#39;</span>:
<a name="l13218"></a>13218                         $depth--;
<a name="l13219"></a>13219                         <span class="keywordflow">break</span>;
<a name="l13220"></a>13220                   }
<a name="l13221"></a>13221                   $position++;
<a name="l13222"></a>13222                }
<a name="l13223"></a>13223                <span class="keywordflow">else</span>
<a name="l13224"></a>13224                {
<a name="l13225"></a>13225                   <span class="keywordflow">break</span>;
<a name="l13226"></a>13226                }
<a name="l13227"></a>13227             }
<a name="l13228"></a>13228          }
<a name="l13229"></a>13229          <span class="keywordflow">else</span>
<a name="l13230"></a>13230          {
<a name="l13231"></a>13231             $output .= <span class="charliteral">&#39;(&#39;</span>;
<a name="l13232"></a>13232          }
<a name="l13233"></a>13233       }
<a name="l13234"></a>13234       $output .= substr($string, $position);
<a name="l13235"></a>13235 
<a name="l13236"></a>13236       <span class="keywordflow">return</span> $output;
<a name="l13237"></a>13237    }
<a name="l13238"></a>13238 <span class="comment"></span>
<a name="l13239"></a>13239 <span class="comment">   /**</span>
<a name="l13240"></a>13240 <span class="comment">    * Parse RFC2822&#39;s date format</span>
<a name="l13241"></a>13241 <span class="comment">    *</span>
<a name="l13242"></a>13242 <span class="comment">    * @access protected</span>
<a name="l13243"></a>13243 <span class="comment">    * @return int Timestamp</span>
<a name="l13244"></a>13244 <span class="comment">    */</span>
<a name="l13245"></a><a class="code" href="class_simple_pie___parse___date.html#afd7b3adbec6c29257af5474bef076252">13245</a>    <span class="keyword">function</span> date_rfc2822($date)
<a name="l13246"></a>13246    {
<a name="l13247"></a>13247       <span class="keyword">static</span> $pcre;
<a name="l13248"></a>13248       <span class="keywordflow">if</span> (!$pcre)
<a name="l13249"></a>13249       {
<a name="l13250"></a>13250          $wsp = <span class="stringliteral">&#39;[\x09\x20]&#39;</span>;
<a name="l13251"></a>13251          $fws = <span class="stringliteral">&#39;(?:&#39;</span> . $wsp . <span class="stringliteral">&#39;+|&#39;</span> . $wsp . <span class="stringliteral">&#39;*(?:\x0D\x0A&#39;</span> . $wsp . <span class="stringliteral">&#39;+)+)&#39;</span>;
<a name="l13252"></a>13252          $optional_fws = $fws . <span class="charliteral">&#39;?&#39;</span>;
<a name="l13253"></a>13253          $day_name = $this-&gt;day_pcre;
<a name="l13254"></a>13254          $month = $this-&gt;month_pcre;
<a name="l13255"></a>13255          $day = <span class="stringliteral">&#39;([0-9]{1,2})&#39;</span>;
<a name="l13256"></a>13256          $hour = $minute = $second = <span class="stringliteral">&#39;([0-9]{2})&#39;</span>;
<a name="l13257"></a>13257          $year = <span class="stringliteral">&#39;([0-9]{2,4})&#39;</span>;
<a name="l13258"></a>13258          $num_zone = <span class="stringliteral">&#39;([+\-])([0-9]{2})([0-9]{2})&#39;</span>;
<a name="l13259"></a>13259          $character_zone = <span class="stringliteral">&#39;([A-Z]{1,5})&#39;</span>;
<a name="l13260"></a>13260          $zone = <span class="stringliteral">&#39;(?:&#39;</span> . $num_zone . <span class="charliteral">&#39;|&#39;</span> . $character_zone . <span class="charliteral">&#39;)&#39;</span>;
<a name="l13261"></a>13261          $pcre = <span class="stringliteral">&#39;/(?:&#39;</span> . $optional_fws . $day_name . $optional_fws . <span class="stringliteral">&#39;,)?&#39;</span> . $optional_fws . $day . $fws . $month . $fws . $year . $fws . $hour . $optional_fws . <span class="charliteral">&#39;:&#39;</span> . $optional_fws . $minute . <span class="stringliteral">&#39;(?:&#39;</span> . $optional_fws . <span class="charliteral">&#39;:&#39;</span> . $optional_fws . $second . <span class="stringliteral">&#39;)?&#39;</span> . $fws . $zone . <span class="stringliteral">&#39;/i&#39;</span>;
<a name="l13262"></a>13262       }
<a name="l13263"></a>13263       <span class="keywordflow">if</span> (preg_match($pcre, $this-&gt;remove_rfc2822_comments($date), $match))
<a name="l13264"></a>13264       {
<a name="l13265"></a>13265          <span class="comment">/*</span>
<a name="l13266"></a>13266 <span class="comment">         Capturing subpatterns:</span>
<a name="l13267"></a>13267 <span class="comment">         1: Day name</span>
<a name="l13268"></a>13268 <span class="comment">         2: Day</span>
<a name="l13269"></a>13269 <span class="comment">         3: Month</span>
<a name="l13270"></a>13270 <span class="comment">         4: Year</span>
<a name="l13271"></a>13271 <span class="comment">         5: Hour</span>
<a name="l13272"></a>13272 <span class="comment">         6: Minute</span>
<a name="l13273"></a>13273 <span class="comment">         7: Second</span>
<a name="l13274"></a>13274 <span class="comment">         8: Timezone </span>
<a name="l13275"></a>13275 <span class="comment">         9: Timezone hours</span>
<a name="l13276"></a>13276 <span class="comment">         10: Timezone minutes</span>
<a name="l13277"></a>13277 <span class="comment">         11: Alphabetic timezone</span>
<a name="l13278"></a>13278 <span class="comment">         */</span>
<a name="l13279"></a>13279 
<a name="l13280"></a>13280          <span class="comment">// Find the month number</span>
<a name="l13281"></a>13281          $month = $this-&gt;month[strtolower($match[3])];
<a name="l13282"></a>13282 
<a name="l13283"></a>13283          <span class="comment">// Numeric timezone</span>
<a name="l13284"></a>13284          <span class="keywordflow">if</span> ($match[8] !== <span class="stringliteral">&#39;&#39;</span>)
<a name="l13285"></a>13285          {
<a name="l13286"></a>13286             $timezone = $match[9] * 3600;
<a name="l13287"></a>13287             $timezone += $match[10] * 60;
<a name="l13288"></a>13288             <span class="keywordflow">if</span> ($match[8] === <span class="charliteral">&#39;-&#39;</span>)
<a name="l13289"></a>13289             {
<a name="l13290"></a>13290                $timezone = 0 - $timezone;
<a name="l13291"></a>13291             }
<a name="l13292"></a>13292          }
<a name="l13293"></a>13293          <span class="comment">// Character timezone</span>
<a name="l13294"></a>13294          elseif (isset($this-&gt;timezone[strtoupper($match[11])]))
<a name="l13295"></a>13295          {
<a name="l13296"></a>13296             $timezone = $this-&gt;timezone[strtoupper($match[11])];
<a name="l13297"></a>13297          }
<a name="l13298"></a>13298          <span class="comment">// Assume everything else to be -0000</span>
<a name="l13299"></a>13299          <span class="keywordflow">else</span>
<a name="l13300"></a>13300          {
<a name="l13301"></a>13301             $timezone = 0;
<a name="l13302"></a>13302          }
<a name="l13303"></a>13303 
<a name="l13304"></a>13304          <span class="comment">// Deal with 2/3 digit years</span>
<a name="l13305"></a>13305          <span class="keywordflow">if</span> ($match[4] &lt; 50)
<a name="l13306"></a>13306          {
<a name="l13307"></a>13307             $match[4] += 2000;
<a name="l13308"></a>13308          }
<a name="l13309"></a>13309          elseif ($match[4] &lt; 1000)
<a name="l13310"></a>13310          {
<a name="l13311"></a>13311             $match[4] += 1900;
<a name="l13312"></a>13312          }
<a name="l13313"></a>13313 
<a name="l13314"></a>13314          <span class="comment">// Second is optional, if it is empty set it to zero</span>
<a name="l13315"></a>13315          <span class="keywordflow">if</span> ($match[7] !== <span class="stringliteral">&#39;&#39;</span>)
<a name="l13316"></a>13316          {
<a name="l13317"></a>13317             $second = $match[7];
<a name="l13318"></a>13318          }
<a name="l13319"></a>13319          <span class="keywordflow">else</span>
<a name="l13320"></a>13320          {
<a name="l13321"></a>13321             $second = 0;
<a name="l13322"></a>13322          }
<a name="l13323"></a>13323 
<a name="l13324"></a>13324          <span class="keywordflow">return</span> gmmktime($match[5], $match[6], $second, $month, $match[2], $match[4]) - $timezone;
<a name="l13325"></a>13325       }
<a name="l13326"></a>13326       <span class="keywordflow">else</span>
<a name="l13327"></a>13327       {
<a name="l13328"></a>13328          <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l13329"></a>13329       }
<a name="l13330"></a>13330    }
<a name="l13331"></a>13331 <span class="comment"></span>
<a name="l13332"></a>13332 <span class="comment">   /**</span>
<a name="l13333"></a>13333 <span class="comment">    * Parse RFC850&#39;s date format</span>
<a name="l13334"></a>13334 <span class="comment">    *</span>
<a name="l13335"></a>13335 <span class="comment">    * @access protected</span>
<a name="l13336"></a>13336 <span class="comment">    * @return int Timestamp</span>
<a name="l13337"></a>13337 <span class="comment">    */</span>
<a name="l13338"></a><a class="code" href="class_simple_pie___parse___date.html#a390b061417eb2c8d74a92cdfff643fb2">13338</a>    <span class="keyword">function</span> date_rfc850($date)
<a name="l13339"></a>13339    {
<a name="l13340"></a>13340       <span class="keyword">static</span> $pcre;
<a name="l13341"></a>13341       <span class="keywordflow">if</span> (!$pcre)
<a name="l13342"></a>13342       {
<a name="l13343"></a>13343          $space = <span class="stringliteral">&#39;[\x09\x20]+&#39;</span>;
<a name="l13344"></a>13344          $day_name = $this-&gt;day_pcre;
<a name="l13345"></a>13345          $month = $this-&gt;month_pcre;
<a name="l13346"></a>13346          $day = <span class="stringliteral">&#39;([0-9]{1,2})&#39;</span>;
<a name="l13347"></a>13347          $year = $hour = $minute = $second = <span class="stringliteral">&#39;([0-9]{2})&#39;</span>;
<a name="l13348"></a>13348          $zone = <span class="stringliteral">&#39;([A-Z]{1,5})&#39;</span>;
<a name="l13349"></a>13349          $pcre = <span class="stringliteral">&#39;/^&#39;</span> . $day_name . <span class="charliteral">&#39;,&#39;</span> . $space . $day . <span class="charliteral">&#39;-&#39;</span> . $month . <span class="charliteral">&#39;-&#39;</span> . $year . $space . $hour . <span class="charliteral">&#39;:&#39;</span> . $minute . <span class="charliteral">&#39;:&#39;</span> . $second . $space . $zone . <span class="stringliteral">&#39;$/i&#39;</span>;
<a name="l13350"></a>13350       }
<a name="l13351"></a>13351       <span class="keywordflow">if</span> (preg_match($pcre, $date, $match))
<a name="l13352"></a>13352       {
<a name="l13353"></a>13353          <span class="comment">/*</span>
<a name="l13354"></a>13354 <span class="comment">         Capturing subpatterns:</span>
<a name="l13355"></a>13355 <span class="comment">         1: Day name</span>
<a name="l13356"></a>13356 <span class="comment">         2: Day</span>
<a name="l13357"></a>13357 <span class="comment">         3: Month</span>
<a name="l13358"></a>13358 <span class="comment">         4: Year</span>
<a name="l13359"></a>13359 <span class="comment">         5: Hour</span>
<a name="l13360"></a>13360 <span class="comment">         6: Minute</span>
<a name="l13361"></a>13361 <span class="comment">         7: Second</span>
<a name="l13362"></a>13362 <span class="comment">         8: Timezone</span>
<a name="l13363"></a>13363 <span class="comment">         */</span>
<a name="l13364"></a>13364 
<a name="l13365"></a>13365          <span class="comment">// Month</span>
<a name="l13366"></a>13366          $month = $this-&gt;month[strtolower($match[3])];
<a name="l13367"></a>13367 
<a name="l13368"></a>13368          <span class="comment">// Character timezone</span>
<a name="l13369"></a>13369          <span class="keywordflow">if</span> (isset($this-&gt;timezone[strtoupper($match[8])]))
<a name="l13370"></a>13370          {
<a name="l13371"></a>13371             $timezone = $this-&gt;timezone[strtoupper($match[8])];
<a name="l13372"></a>13372          }
<a name="l13373"></a>13373          <span class="comment">// Assume everything else to be -0000</span>
<a name="l13374"></a>13374          <span class="keywordflow">else</span>
<a name="l13375"></a>13375          {
<a name="l13376"></a>13376             $timezone = 0;
<a name="l13377"></a>13377          }
<a name="l13378"></a>13378 
<a name="l13379"></a>13379          <span class="comment">// Deal with 2 digit year</span>
<a name="l13380"></a>13380          <span class="keywordflow">if</span> ($match[4] &lt; 50)
<a name="l13381"></a>13381          {
<a name="l13382"></a>13382             $match[4] += 2000;
<a name="l13383"></a>13383          }
<a name="l13384"></a>13384          <span class="keywordflow">else</span>
<a name="l13385"></a>13385          {
<a name="l13386"></a>13386             $match[4] += 1900;
<a name="l13387"></a>13387          }
<a name="l13388"></a>13388 
<a name="l13389"></a>13389          <span class="keywordflow">return</span> gmmktime($match[5], $match[6], $match[7], $month, $match[2], $match[4]) - $timezone;
<a name="l13390"></a>13390       }
<a name="l13391"></a>13391       <span class="keywordflow">else</span>
<a name="l13392"></a>13392       {
<a name="l13393"></a>13393          <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l13394"></a>13394       }
<a name="l13395"></a>13395    }
<a name="l13396"></a>13396 <span class="comment"></span>
<a name="l13397"></a>13397 <span class="comment">   /**</span>
<a name="l13398"></a>13398 <span class="comment">    * Parse C99&#39;s asctime()&#39;s date format</span>
<a name="l13399"></a>13399 <span class="comment">    *</span>
<a name="l13400"></a>13400 <span class="comment">    * @access protected</span>
<a name="l13401"></a>13401 <span class="comment">    * @return int Timestamp</span>
<a name="l13402"></a>13402 <span class="comment">    */</span>
<a name="l13403"></a><a class="code" href="class_simple_pie___parse___date.html#ad352eb70010ace838cb98173e7d57655">13403</a>    <span class="keyword">function</span> date_asctime($date)
<a name="l13404"></a>13404    {
<a name="l13405"></a>13405       <span class="keyword">static</span> $pcre;
<a name="l13406"></a>13406       <span class="keywordflow">if</span> (!$pcre)
<a name="l13407"></a>13407       {
<a name="l13408"></a>13408          $space = <span class="stringliteral">&#39;[\x09\x20]+&#39;</span>;
<a name="l13409"></a>13409          $wday_name = $this-&gt;day_pcre;
<a name="l13410"></a>13410          $mon_name = $this-&gt;month_pcre;
<a name="l13411"></a>13411          $day = <span class="stringliteral">&#39;([0-9]{1,2})&#39;</span>;
<a name="l13412"></a>13412          $hour = $sec = $min = <span class="stringliteral">&#39;([0-9]{2})&#39;</span>;
<a name="l13413"></a>13413          $year = <span class="stringliteral">&#39;([0-9]{4})&#39;</span>;
<a name="l13414"></a>13414          $terminator = <span class="stringliteral">&#39;\x0A?\x00?&#39;</span>;
<a name="l13415"></a>13415          $pcre = <span class="stringliteral">&#39;/^&#39;</span> . $wday_name . $space . $mon_name . $space . $day . $space . $hour . <span class="charliteral">&#39;:&#39;</span> . $min . <span class="charliteral">&#39;:&#39;</span> . $sec . $space . $year . $terminator . <span class="stringliteral">&#39;$/i&#39;</span>;
<a name="l13416"></a>13416       }
<a name="l13417"></a>13417       <span class="keywordflow">if</span> (preg_match($pcre, $date, $match))
<a name="l13418"></a>13418       {
<a name="l13419"></a>13419          <span class="comment">/*</span>
<a name="l13420"></a>13420 <span class="comment">         Capturing subpatterns:</span>
<a name="l13421"></a>13421 <span class="comment">         1: Day name</span>
<a name="l13422"></a>13422 <span class="comment">         2: Month</span>
<a name="l13423"></a>13423 <span class="comment">         3: Day</span>
<a name="l13424"></a>13424 <span class="comment">         4: Hour</span>
<a name="l13425"></a>13425 <span class="comment">         5: Minute</span>
<a name="l13426"></a>13426 <span class="comment">         6: Second</span>
<a name="l13427"></a>13427 <span class="comment">         7: Year</span>
<a name="l13428"></a>13428 <span class="comment">         */</span>
<a name="l13429"></a>13429 
<a name="l13430"></a>13430          $month = $this-&gt;month[strtolower($match[2])];
<a name="l13431"></a>13431          <span class="keywordflow">return</span> gmmktime($match[4], $match[5], $match[6], $month, $match[3], $match[7]);
<a name="l13432"></a>13432       }
<a name="l13433"></a>13433       <span class="keywordflow">else</span>
<a name="l13434"></a>13434       {
<a name="l13435"></a>13435          <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l13436"></a>13436       }
<a name="l13437"></a>13437    }
<a name="l13438"></a>13438 <span class="comment"></span>
<a name="l13439"></a>13439 <span class="comment">   /**</span>
<a name="l13440"></a>13440 <span class="comment">    * Parse dates using strtotime()</span>
<a name="l13441"></a>13441 <span class="comment">    *</span>
<a name="l13442"></a>13442 <span class="comment">    * @access protected</span>
<a name="l13443"></a>13443 <span class="comment">    * @return int Timestamp</span>
<a name="l13444"></a>13444 <span class="comment">    */</span>
<a name="l13445"></a><a class="code" href="class_simple_pie___parse___date.html#a813e6709b22e2f3f95cf2452f7ba86ab">13445</a>    <span class="keyword">function</span> date_strtotime($date)
<a name="l13446"></a>13446    {
<a name="l13447"></a>13447       $strtotime = strtotime($date);
<a name="l13448"></a>13448       <span class="keywordflow">if</span> ($strtotime === -1 || $strtotime === <span class="keyword">false</span>)
<a name="l13449"></a>13449       {
<a name="l13450"></a>13450          <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l13451"></a>13451       }
<a name="l13452"></a>13452       <span class="keywordflow">else</span>
<a name="l13453"></a>13453       {
<a name="l13454"></a>13454          <span class="keywordflow">return</span> $strtotime;
<a name="l13455"></a>13455       }
<a name="l13456"></a>13456    }
<a name="l13457"></a>13457 }
<a name="l13458"></a>13458 <span class="comment"></span>
<a name="l13459"></a>13459 <span class="comment">/**</span>
<a name="l13460"></a>13460 <span class="comment"> * Content-type sniffing</span>
<a name="l13461"></a>13461 <span class="comment"> *</span>
<a name="l13462"></a>13462 <span class="comment"> * @package SimplePie</span>
<a name="l13463"></a>13463 <span class="comment"> */</span>
<a name="l13464"></a><a class="code" href="class_simple_pie___content___type___sniffer.html">13464</a> <span class="keyword">class </span><a class="code" href="class_simple_pie___content___type___sniffer.html">SimplePie_Content_Type_Sniffer</a>
<a name="l13465"></a>13465 {<span class="comment"></span>
<a name="l13466"></a>13466 <span class="comment">   /**</span>
<a name="l13467"></a>13467 <span class="comment">    * File object</span>
<a name="l13468"></a>13468 <span class="comment">    *</span>
<a name="l13469"></a>13469 <span class="comment">    * @var SimplePie_File</span>
<a name="l13470"></a>13470 <span class="comment">    * @access private</span>
<a name="l13471"></a>13471 <span class="comment">    */</span>
<a name="l13472"></a>13472    var $file;
<a name="l13473"></a>13473 <span class="comment"></span>
<a name="l13474"></a>13474 <span class="comment">   /**</span>
<a name="l13475"></a>13475 <span class="comment">    * Create an instance of the class with the input file</span>
<a name="l13476"></a>13476 <span class="comment">    *</span>
<a name="l13477"></a>13477 <span class="comment">    * @access public</span>
<a name="l13478"></a>13478 <span class="comment">    * @param SimplePie_Content_Type_Sniffer $file Input file</span>
<a name="l13479"></a>13479 <span class="comment">    */</span>
<a name="l13480"></a><a class="code" href="class_simple_pie___content___type___sniffer.html#a0629c7e5d807c2ebb6be3b5e932bc64f">13480</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie___content___type___sniffer.html">SimplePie_Content_Type_Sniffer</a>($file)
<a name="l13481"></a>13481    {
<a name="l13482"></a>13482       $this-&gt;file = $file;
<a name="l13483"></a>13483    }
<a name="l13484"></a>13484 <span class="comment"></span>
<a name="l13485"></a>13485 <span class="comment">   /**</span>
<a name="l13486"></a>13486 <span class="comment">    * Get the Content-Type of the specified file</span>
<a name="l13487"></a>13487 <span class="comment">    *</span>
<a name="l13488"></a>13488 <span class="comment">    * @access public</span>
<a name="l13489"></a>13489 <span class="comment">    * @return string Actual Content-Type</span>
<a name="l13490"></a>13490 <span class="comment">    */</span>
<a name="l13491"></a><a class="code" href="class_simple_pie___content___type___sniffer.html#ab5be4c3d74f109176ef57e753ebd4918">13491</a>    <span class="keyword">function</span> get_type()
<a name="l13492"></a>13492    {
<a name="l13493"></a>13493       <span class="keywordflow">if</span> (isset($this-&gt;file-&gt;headers[<span class="stringliteral">&#39;content-type&#39;</span>]))
<a name="l13494"></a>13494       {
<a name="l13495"></a>13495          <span class="keywordflow">if</span> (!isset($this-&gt;file-&gt;headers[<span class="stringliteral">&#39;content-encoding&#39;</span>])
<a name="l13496"></a>13496             &amp;&amp; ($this-&gt;file-&gt;headers[<span class="stringliteral">&#39;content-type&#39;</span>] === <span class="stringliteral">&#39;text/plain&#39;</span>
<a name="l13497"></a>13497                || $this-&gt;file-&gt;headers[<span class="stringliteral">&#39;content-type&#39;</span>] === <span class="stringliteral">&#39;text/plain; charset=ISO-8859-1&#39;</span>
<a name="l13498"></a>13498                || $this-&gt;file-&gt;headers[<span class="stringliteral">&#39;content-type&#39;</span>] === <span class="stringliteral">&#39;text/plain; charset=iso-8859-1&#39;</span>))
<a name="l13499"></a>13499          {
<a name="l13500"></a>13500             <span class="keywordflow">return</span> $this-&gt;text_or_binary();
<a name="l13501"></a>13501          }
<a name="l13502"></a>13502 
<a name="l13503"></a>13503          <span class="keywordflow">if</span> (($pos = strpos($this-&gt;file-&gt;headers[<span class="stringliteral">&#39;content-type&#39;</span>], <span class="charliteral">&#39;;&#39;</span>)) !== <span class="keyword">false</span>)
<a name="l13504"></a>13504          {
<a name="l13505"></a>13505             $official = substr($this-&gt;file-&gt;headers[<span class="stringliteral">&#39;content-type&#39;</span>], 0, $pos);
<a name="l13506"></a>13506          }
<a name="l13507"></a>13507          <span class="keywordflow">else</span>
<a name="l13508"></a>13508          {
<a name="l13509"></a>13509             $official = $this-&gt;file-&gt;headers[<span class="stringliteral">&#39;content-type&#39;</span>];
<a name="l13510"></a>13510          }
<a name="l13511"></a>13511          $official = strtolower($official);
<a name="l13512"></a>13512 
<a name="l13513"></a>13513          <span class="keywordflow">if</span> ($official === <span class="stringliteral">&#39;unknown/unknown&#39;</span>
<a name="l13514"></a>13514             || $official === <span class="stringliteral">&#39;application/unknown&#39;</span>)
<a name="l13515"></a>13515          {
<a name="l13516"></a>13516             <span class="keywordflow">return</span> $this-&gt;unknown();
<a name="l13517"></a>13517          }
<a name="l13518"></a>13518          elseif (substr($official, -4) === <span class="stringliteral">&#39;+xml&#39;</span>
<a name="l13519"></a>13519             || $official === <span class="stringliteral">&#39;text/xml&#39;</span>
<a name="l13520"></a>13520             || $official === <span class="stringliteral">&#39;application/xml&#39;</span>)
<a name="l13521"></a>13521          {
<a name="l13522"></a>13522             <span class="keywordflow">return</span> $official;
<a name="l13523"></a>13523          }
<a name="l13524"></a>13524          elseif (substr($official, 0, 6) === <span class="stringliteral">&#39;image/&#39;</span>)
<a name="l13525"></a>13525          {
<a name="l13526"></a>13526             <span class="keywordflow">if</span> ($return = $this-&gt;image())
<a name="l13527"></a>13527             {
<a name="l13528"></a>13528                <span class="keywordflow">return</span> $return;
<a name="l13529"></a>13529             }
<a name="l13530"></a>13530             <span class="keywordflow">else</span>
<a name="l13531"></a>13531             {
<a name="l13532"></a>13532                <span class="keywordflow">return</span> $official;
<a name="l13533"></a>13533             }
<a name="l13534"></a>13534          }
<a name="l13535"></a>13535          elseif ($official === <span class="stringliteral">&#39;text/html&#39;</span>)
<a name="l13536"></a>13536          {
<a name="l13537"></a>13537             <span class="keywordflow">return</span> $this-&gt;feed_or_html();
<a name="l13538"></a>13538          }
<a name="l13539"></a>13539          <span class="keywordflow">else</span>
<a name="l13540"></a>13540          {
<a name="l13541"></a>13541             <span class="keywordflow">return</span> $official;
<a name="l13542"></a>13542          }
<a name="l13543"></a>13543       }
<a name="l13544"></a>13544       <span class="keywordflow">else</span>
<a name="l13545"></a>13545       {
<a name="l13546"></a>13546          <span class="keywordflow">return</span> $this-&gt;unknown();
<a name="l13547"></a>13547       }
<a name="l13548"></a>13548    }
<a name="l13549"></a>13549 <span class="comment"></span>
<a name="l13550"></a>13550 <span class="comment">   /**</span>
<a name="l13551"></a>13551 <span class="comment">    * Sniff text or binary</span>
<a name="l13552"></a>13552 <span class="comment">    *</span>
<a name="l13553"></a>13553 <span class="comment">    * @access private</span>
<a name="l13554"></a>13554 <span class="comment">    * @return string Actual Content-Type</span>
<a name="l13555"></a>13555 <span class="comment">    */</span>
<a name="l13556"></a><a class="code" href="class_simple_pie___content___type___sniffer.html#a35ef4e3840e06610adb246c5d896ac58">13556</a>    <span class="keyword">function</span> text_or_binary()
<a name="l13557"></a>13557    {
<a name="l13558"></a>13558       <span class="keywordflow">if</span> (substr($this-&gt;file-&gt;body, 0, 2) === <span class="stringliteral">&quot;\xFE\xFF&quot;</span>
<a name="l13559"></a>13559          || substr($this-&gt;file-&gt;body, 0, 2) === <span class="stringliteral">&quot;\xFF\xFE&quot;</span>
<a name="l13560"></a>13560          || substr($this-&gt;file-&gt;body, 0, 4) === <span class="stringliteral">&quot;\x00\x00\xFE\xFF&quot;</span>
<a name="l13561"></a>13561          || substr($this-&gt;file-&gt;body, 0, 3) === <span class="stringliteral">&quot;\xEF\xBB\xBF&quot;</span>)
<a name="l13562"></a>13562       {
<a name="l13563"></a>13563          <span class="keywordflow">return</span> <span class="stringliteral">&#39;text/plain&#39;</span>;
<a name="l13564"></a>13564       }
<a name="l13565"></a>13565       elseif (preg_match(<span class="stringliteral">&#39;/[\x00-\x08\x0E-\x1A\x1C-\x1F]/&#39;</span>, $this-&gt;file-&gt;body))
<a name="l13566"></a>13566       {
<a name="l13567"></a>13567          <span class="keywordflow">return</span> <span class="stringliteral">&#39;application/octect-stream&#39;</span>;
<a name="l13568"></a>13568       }
<a name="l13569"></a>13569       <span class="keywordflow">else</span>
<a name="l13570"></a>13570       {
<a name="l13571"></a>13571          <span class="keywordflow">return</span> <span class="stringliteral">&#39;text/plain&#39;</span>;
<a name="l13572"></a>13572       }
<a name="l13573"></a>13573    }
<a name="l13574"></a>13574 <span class="comment"></span>
<a name="l13575"></a>13575 <span class="comment">   /**</span>
<a name="l13576"></a>13576 <span class="comment">    * Sniff unknown</span>
<a name="l13577"></a>13577 <span class="comment">    *</span>
<a name="l13578"></a>13578 <span class="comment">    * @access private</span>
<a name="l13579"></a>13579 <span class="comment">    * @return string Actual Content-Type</span>
<a name="l13580"></a>13580 <span class="comment">    */</span>
<a name="l13581"></a><a class="code" href="class_simple_pie___content___type___sniffer.html#ae8724d1ff593f02e95c09abcf4917e08">13581</a>    <span class="keyword">function</span> unknown()
<a name="l13582"></a>13582    {
<a name="l13583"></a>13583       $ws = strspn($this-&gt;file-&gt;body, <span class="stringliteral">&quot;\x09\x0A\x0B\x0C\x0D\x20&quot;</span>);
<a name="l13584"></a>13584       <span class="keywordflow">if</span> (strtolower(substr($this-&gt;file-&gt;body, $ws, 14)) === <span class="stringliteral">&#39;&lt;!doctype html&#39;</span>
<a name="l13585"></a>13585          || strtolower(substr($this-&gt;file-&gt;body, $ws, 5)) === <span class="stringliteral">&#39;&lt;html&#39;</span>
<a name="l13586"></a>13586          || strtolower(substr($this-&gt;file-&gt;body, $ws, 7)) === <span class="stringliteral">&#39;&lt;script&#39;</span>)
<a name="l13587"></a>13587       {
<a name="l13588"></a>13588          <span class="keywordflow">return</span> <span class="stringliteral">&#39;text/html&#39;</span>;
<a name="l13589"></a>13589       }
<a name="l13590"></a>13590       elseif (substr($this-&gt;file-&gt;body, 0, 5) === <span class="stringliteral">&#39;%PDF-&#39;</span>)
<a name="l13591"></a>13591       {
<a name="l13592"></a>13592          <span class="keywordflow">return</span> <span class="stringliteral">&#39;application/pdf&#39;</span>;
<a name="l13593"></a>13593       }
<a name="l13594"></a>13594       elseif (substr($this-&gt;file-&gt;body, 0, 11) === <span class="stringliteral">&#39;%!PS-Adobe-&#39;</span>)
<a name="l13595"></a>13595       {
<a name="l13596"></a>13596          <span class="keywordflow">return</span> <span class="stringliteral">&#39;application/postscript&#39;</span>;
<a name="l13597"></a>13597       }
<a name="l13598"></a>13598       elseif (substr($this-&gt;file-&gt;body, 0, 6) === <span class="stringliteral">&#39;GIF87a&#39;</span>
<a name="l13599"></a>13599          || substr($this-&gt;file-&gt;body, 0, 6) === <span class="stringliteral">&#39;GIF89a&#39;</span>)
<a name="l13600"></a>13600       {
<a name="l13601"></a>13601          <span class="keywordflow">return</span> <span class="stringliteral">&#39;image/gif&#39;</span>;
<a name="l13602"></a>13602       }
<a name="l13603"></a>13603       elseif (substr($this-&gt;file-&gt;body, 0, 8) === <span class="stringliteral">&quot;\x89\x50\x4E\x47\x0D\x0A\x1A\x0A&quot;</span>)
<a name="l13604"></a>13604       {
<a name="l13605"></a>13605          <span class="keywordflow">return</span> <span class="stringliteral">&#39;image/png&#39;</span>;
<a name="l13606"></a>13606       }
<a name="l13607"></a>13607       elseif (substr($this-&gt;file-&gt;body, 0, 3) === <span class="stringliteral">&quot;\xFF\xD8\xFF&quot;</span>)
<a name="l13608"></a>13608       {
<a name="l13609"></a>13609          <span class="keywordflow">return</span> <span class="stringliteral">&#39;image/jpeg&#39;</span>;
<a name="l13610"></a>13610       }
<a name="l13611"></a>13611       elseif (substr($this-&gt;file-&gt;body, 0, 2) === <span class="stringliteral">&quot;\x42\x4D&quot;</span>)
<a name="l13612"></a>13612       {
<a name="l13613"></a>13613          <span class="keywordflow">return</span> <span class="stringliteral">&#39;image/bmp&#39;</span>;
<a name="l13614"></a>13614       }
<a name="l13615"></a>13615       <span class="keywordflow">else</span>
<a name="l13616"></a>13616       {
<a name="l13617"></a>13617          <span class="keywordflow">return</span> $this-&gt;text_or_binary();
<a name="l13618"></a>13618       }
<a name="l13619"></a>13619    }
<a name="l13620"></a>13620 <span class="comment"></span>
<a name="l13621"></a>13621 <span class="comment">   /**</span>
<a name="l13622"></a>13622 <span class="comment">    * Sniff images</span>
<a name="l13623"></a>13623 <span class="comment">    *</span>
<a name="l13624"></a>13624 <span class="comment">    * @access private</span>
<a name="l13625"></a>13625 <span class="comment">    * @return string Actual Content-Type</span>
<a name="l13626"></a>13626 <span class="comment">    */</span>
<a name="l13627"></a><a class="code" href="class_simple_pie___content___type___sniffer.html#ab4f40c94d3427e415d291c68d3e67cfa">13627</a>    <span class="keyword">function</span> image()
<a name="l13628"></a>13628    {
<a name="l13629"></a>13629       <span class="keywordflow">if</span> (substr($this-&gt;file-&gt;body, 0, 6) === <span class="stringliteral">&#39;GIF87a&#39;</span>
<a name="l13630"></a>13630          || substr($this-&gt;file-&gt;body, 0, 6) === <span class="stringliteral">&#39;GIF89a&#39;</span>)
<a name="l13631"></a>13631       {
<a name="l13632"></a>13632          <span class="keywordflow">return</span> <span class="stringliteral">&#39;image/gif&#39;</span>;
<a name="l13633"></a>13633       }
<a name="l13634"></a>13634       elseif (substr($this-&gt;file-&gt;body, 0, 8) === <span class="stringliteral">&quot;\x89\x50\x4E\x47\x0D\x0A\x1A\x0A&quot;</span>)
<a name="l13635"></a>13635       {
<a name="l13636"></a>13636          <span class="keywordflow">return</span> <span class="stringliteral">&#39;image/png&#39;</span>;
<a name="l13637"></a>13637       }
<a name="l13638"></a>13638       elseif (substr($this-&gt;file-&gt;body, 0, 3) === <span class="stringliteral">&quot;\xFF\xD8\xFF&quot;</span>)
<a name="l13639"></a>13639       {
<a name="l13640"></a>13640          <span class="keywordflow">return</span> <span class="stringliteral">&#39;image/jpeg&#39;</span>;
<a name="l13641"></a>13641       }
<a name="l13642"></a>13642       elseif (substr($this-&gt;file-&gt;body, 0, 2) === <span class="stringliteral">&quot;\x42\x4D&quot;</span>)
<a name="l13643"></a>13643       {
<a name="l13644"></a>13644          <span class="keywordflow">return</span> <span class="stringliteral">&#39;image/bmp&#39;</span>;
<a name="l13645"></a>13645       }
<a name="l13646"></a>13646       <span class="keywordflow">else</span>
<a name="l13647"></a>13647       {
<a name="l13648"></a>13648          <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l13649"></a>13649       }
<a name="l13650"></a>13650    }
<a name="l13651"></a>13651 <span class="comment"></span>
<a name="l13652"></a>13652 <span class="comment">   /**</span>
<a name="l13653"></a>13653 <span class="comment">    * Sniff HTML</span>
<a name="l13654"></a>13654 <span class="comment">    *</span>
<a name="l13655"></a>13655 <span class="comment">    * @access private</span>
<a name="l13656"></a>13656 <span class="comment">    * @return string Actual Content-Type</span>
<a name="l13657"></a>13657 <span class="comment">    */</span>
<a name="l13658"></a><a class="code" href="class_simple_pie___content___type___sniffer.html#a5042475e93a5433f0e2cf8c053bb3567">13658</a>    <span class="keyword">function</span> feed_or_html()
<a name="l13659"></a>13659    {
<a name="l13660"></a>13660       $len = strlen($this-&gt;file-&gt;body);
<a name="l13661"></a>13661       $pos = strspn($this-&gt;file-&gt;body, <span class="stringliteral">&quot;\x09\x0A\x0D\x20&quot;</span>);
<a name="l13662"></a>13662 
<a name="l13663"></a>13663       <span class="keywordflow">while</span> ($pos &lt; $len)
<a name="l13664"></a>13664       {
<a name="l13665"></a>13665          <span class="keywordflow">switch</span> ($this-&gt;file-&gt;body[$pos])
<a name="l13666"></a>13666          {
<a name="l13667"></a>13667             <span class="keywordflow">case</span> <span class="stringliteral">&quot;\x09&quot;</span>:
<a name="l13668"></a>13668             <span class="keywordflow">case</span> <span class="stringliteral">&quot;\x0A&quot;</span>:
<a name="l13669"></a>13669             <span class="keywordflow">case</span> <span class="stringliteral">&quot;\x0D&quot;</span>:
<a name="l13670"></a>13670             <span class="keywordflow">case</span> <span class="stringliteral">&quot;\x20&quot;</span>:
<a name="l13671"></a>13671                $pos += strspn($this-&gt;file-&gt;body, <span class="stringliteral">&quot;\x09\x0A\x0D\x20&quot;</span>, $pos);
<a name="l13672"></a>13672                <span class="keywordflow">continue</span> 2;
<a name="l13673"></a>13673 
<a name="l13674"></a>13674             <span class="keywordflow">case</span> <span class="charliteral">&#39;&lt;&#39;</span>:
<a name="l13675"></a>13675                $pos++;
<a name="l13676"></a>13676                <span class="keywordflow">break</span>;
<a name="l13677"></a>13677 
<a name="l13678"></a>13678             <span class="keywordflow">default</span>:
<a name="l13679"></a>13679                <span class="keywordflow">return</span> <span class="stringliteral">&#39;text/html&#39;</span>;
<a name="l13680"></a>13680          }
<a name="l13681"></a>13681 
<a name="l13682"></a>13682          <span class="keywordflow">if</span> (substr($this-&gt;file-&gt;body, $pos, 3) === <span class="stringliteral">&#39;!--&#39;</span>)
<a name="l13683"></a>13683          {
<a name="l13684"></a>13684             $pos += 3;
<a name="l13685"></a>13685             <span class="keywordflow">if</span> ($pos &lt; $len &amp;&amp; ($pos = strpos($this-&gt;file-&gt;body, <span class="stringliteral">&#39;--&gt;&#39;</span>, $pos)) !== <span class="keyword">false</span>)
<a name="l13686"></a>13686             {
<a name="l13687"></a>13687                $pos += 3;
<a name="l13688"></a>13688             }
<a name="l13689"></a>13689             <span class="keywordflow">else</span>
<a name="l13690"></a>13690             {
<a name="l13691"></a>13691                <span class="keywordflow">return</span> <span class="stringliteral">&#39;text/html&#39;</span>;
<a name="l13692"></a>13692             }
<a name="l13693"></a>13693          }
<a name="l13694"></a>13694          elseif (substr($this-&gt;file-&gt;body, $pos, 1) === <span class="charliteral">&#39;!&#39;</span>)
<a name="l13695"></a>13695          {
<a name="l13696"></a>13696             <span class="keywordflow">if</span> ($pos &lt; $len &amp;&amp; ($pos = strpos($this-&gt;file-&gt;body, <span class="charliteral">&#39;&gt;&#39;</span>, $pos)) !== <span class="keyword">false</span>)
<a name="l13697"></a>13697             {
<a name="l13698"></a>13698                $pos++;
<a name="l13699"></a>13699             }
<a name="l13700"></a>13700             <span class="keywordflow">else</span>
<a name="l13701"></a>13701             {
<a name="l13702"></a>13702                <span class="keywordflow">return</span> <span class="stringliteral">&#39;text/html&#39;</span>;
<a name="l13703"></a>13703             }
<a name="l13704"></a>13704          }
<a name="l13705"></a>13705          elseif (substr($this-&gt;file-&gt;body, $pos, 1) === <span class="charliteral">&#39;?&#39;</span>)
<a name="l13706"></a>13706          {
<a name="l13707"></a>13707             <span class="keywordflow">if</span> ($pos &lt; $len &amp;&amp; ($pos = strpos($this-&gt;file-&gt;body, <span class="stringliteral">&#39;?&gt;&#39;</span>, $pos)) !== <span class="keyword">false</span>)
<a name="l13708"></a>13708             {
<a name="l13709"></a>13709                $pos += 2;
<a name="l13710"></a>13710             }
<a name="l13711"></a>13711             <span class="keywordflow">else</span>
<a name="l13712"></a>13712             {
<a name="l13713"></a>13713                <span class="keywordflow">return</span> <span class="stringliteral">&#39;text/html&#39;</span>;
<a name="l13714"></a>13714             }
<a name="l13715"></a>13715          }
<a name="l13716"></a>13716          elseif (substr($this-&gt;file-&gt;body, $pos, 3) === <span class="stringliteral">&#39;rss&#39;</span>
<a name="l13717"></a>13717             || substr($this-&gt;file-&gt;body, $pos, 7) === <span class="stringliteral">&#39;rdf:RDF&#39;</span>)
<a name="l13718"></a>13718          {
<a name="l13719"></a>13719             <span class="keywordflow">return</span> <span class="stringliteral">&#39;application/rss+xml&#39;</span>;
<a name="l13720"></a>13720          }
<a name="l13721"></a>13721          elseif (substr($this-&gt;file-&gt;body, $pos, 4) === <span class="stringliteral">&#39;feed&#39;</span>)
<a name="l13722"></a>13722          {
<a name="l13723"></a>13723             <span class="keywordflow">return</span> <span class="stringliteral">&#39;application/atom+xml&#39;</span>;
<a name="l13724"></a>13724          }
<a name="l13725"></a>13725          <span class="keywordflow">else</span>
<a name="l13726"></a>13726          {
<a name="l13727"></a>13727             <span class="keywordflow">return</span> <span class="stringliteral">&#39;text/html&#39;</span>;
<a name="l13728"></a>13728          }
<a name="l13729"></a>13729       }
<a name="l13730"></a>13730 
<a name="l13731"></a>13731       <span class="keywordflow">return</span> <span class="stringliteral">&#39;text/html&#39;</span>;
<a name="l13732"></a>13732    }
<a name="l13733"></a>13733 }
<a name="l13734"></a>13734 <span class="comment"></span>
<a name="l13735"></a>13735 <span class="comment">/**</span>
<a name="l13736"></a>13736 <span class="comment"> * Parses the XML Declaration</span>
<a name="l13737"></a>13737 <span class="comment"> *</span>
<a name="l13738"></a>13738 <span class="comment"> * @package SimplePie</span>
<a name="l13739"></a>13739 <span class="comment"> */</span>
<a name="l13740"></a><a class="code" href="class_simple_pie___x_m_l___declaration___parser.html">13740</a> <span class="keyword">class </span><a class="code" href="class_simple_pie___x_m_l___declaration___parser.html">SimplePie_XML_Declaration_Parser</a>
<a name="l13741"></a>13741 {<span class="comment"></span>
<a name="l13742"></a>13742 <span class="comment">   /**</span>
<a name="l13743"></a>13743 <span class="comment">    * XML Version</span>
<a name="l13744"></a>13744 <span class="comment">    *</span>
<a name="l13745"></a>13745 <span class="comment">    * @access public</span>
<a name="l13746"></a>13746 <span class="comment">    * @var string</span>
<a name="l13747"></a>13747 <span class="comment">    */</span>
<a name="l13748"></a>13748    var $version = <span class="stringliteral">&#39;1.0&#39;</span>;
<a name="l13749"></a>13749 <span class="comment"></span>
<a name="l13750"></a>13750 <span class="comment">   /**</span>
<a name="l13751"></a>13751 <span class="comment">    * Encoding</span>
<a name="l13752"></a>13752 <span class="comment">    *</span>
<a name="l13753"></a>13753 <span class="comment">    * @access public</span>
<a name="l13754"></a>13754 <span class="comment">    * @var string</span>
<a name="l13755"></a>13755 <span class="comment">    */</span>
<a name="l13756"></a>13756    var $encoding = <span class="stringliteral">&#39;UTF-8&#39;</span>;
<a name="l13757"></a>13757 <span class="comment"></span>
<a name="l13758"></a>13758 <span class="comment">   /**</span>
<a name="l13759"></a>13759 <span class="comment">    * Standalone</span>
<a name="l13760"></a>13760 <span class="comment">    *</span>
<a name="l13761"></a>13761 <span class="comment">    * @access public</span>
<a name="l13762"></a>13762 <span class="comment">    * @var bool</span>
<a name="l13763"></a>13763 <span class="comment">    */</span>
<a name="l13764"></a>13764    var $standalone = <span class="keyword">false</span>;
<a name="l13765"></a>13765 <span class="comment"></span>
<a name="l13766"></a>13766 <span class="comment">   /**</span>
<a name="l13767"></a>13767 <span class="comment">    * Current state of the state machine</span>
<a name="l13768"></a>13768 <span class="comment">    *</span>
<a name="l13769"></a>13769 <span class="comment">    * @access private</span>
<a name="l13770"></a>13770 <span class="comment">    * @var string</span>
<a name="l13771"></a>13771 <span class="comment">    */</span>
<a name="l13772"></a>13772    var $state = <span class="stringliteral">&#39;before_version_name&#39;</span>;
<a name="l13773"></a>13773 <span class="comment"></span>
<a name="l13774"></a>13774 <span class="comment">   /**</span>
<a name="l13775"></a>13775 <span class="comment">    * Input data</span>
<a name="l13776"></a>13776 <span class="comment">    *</span>
<a name="l13777"></a>13777 <span class="comment">    * @access private</span>
<a name="l13778"></a>13778 <span class="comment">    * @var string</span>
<a name="l13779"></a>13779 <span class="comment">    */</span>
<a name="l13780"></a>13780    var $data = <span class="stringliteral">&#39;&#39;</span>;
<a name="l13781"></a>13781 <span class="comment"></span>
<a name="l13782"></a>13782 <span class="comment">   /**</span>
<a name="l13783"></a>13783 <span class="comment">    * Input data length (to avoid calling strlen() everytime this is needed)</span>
<a name="l13784"></a>13784 <span class="comment">    *</span>
<a name="l13785"></a>13785 <span class="comment">    * @access private</span>
<a name="l13786"></a>13786 <span class="comment">    * @var int</span>
<a name="l13787"></a>13787 <span class="comment">    */</span>
<a name="l13788"></a>13788    var $data_length = 0;
<a name="l13789"></a>13789 <span class="comment"></span>
<a name="l13790"></a>13790 <span class="comment">   /**</span>
<a name="l13791"></a>13791 <span class="comment">    * Current position of the pointer</span>
<a name="l13792"></a>13792 <span class="comment">    *</span>
<a name="l13793"></a>13793 <span class="comment">    * @var int</span>
<a name="l13794"></a>13794 <span class="comment">    * @access private</span>
<a name="l13795"></a>13795 <span class="comment">    */</span>
<a name="l13796"></a>13796    var $position = 0;
<a name="l13797"></a>13797 <span class="comment"></span>
<a name="l13798"></a>13798 <span class="comment">   /**</span>
<a name="l13799"></a>13799 <span class="comment">    * Create an instance of the class with the input data</span>
<a name="l13800"></a>13800 <span class="comment">    *</span>
<a name="l13801"></a>13801 <span class="comment">    * @access public</span>
<a name="l13802"></a>13802 <span class="comment">    * @param string $data Input data</span>
<a name="l13803"></a>13803 <span class="comment">    */</span>
<a name="l13804"></a><a class="code" href="class_simple_pie___x_m_l___declaration___parser.html#a10d7c6ba4741416cc8b7dd1f7478dd91">13804</a>    <span class="keyword">function</span> <a class="code" href="class_simple_pie___x_m_l___declaration___parser.html">SimplePie_XML_Declaration_Parser</a>($data)
<a name="l13805"></a>13805    {
<a name="l13806"></a>13806       $this-&gt;data = $data;
<a name="l13807"></a>13807       $this-&gt;data_length = strlen($this-&gt;data);
<a name="l13808"></a>13808    }
<a name="l13809"></a>13809 <span class="comment"></span>
<a name="l13810"></a>13810 <span class="comment">   /**</span>
<a name="l13811"></a>13811 <span class="comment">    * Parse the input data</span>
<a name="l13812"></a>13812 <span class="comment">    *</span>
<a name="l13813"></a>13813 <span class="comment">    * @access public</span>
<a name="l13814"></a>13814 <span class="comment">    * @return bool true on success, false on failure</span>
<a name="l13815"></a>13815 <span class="comment">    */</span>
<a name="l13816"></a><a class="code" href="class_simple_pie___x_m_l___declaration___parser.html#a38d99acc70a1d8fd8f94455743b2d237">13816</a>    <span class="keyword">function</span> parse()
<a name="l13817"></a>13817    {
<a name="l13818"></a>13818       <span class="keywordflow">while</span> ($this-&gt;state &amp;&amp; $this-&gt;state !== <span class="stringliteral">&#39;emit&#39;</span> &amp;&amp; $this-&gt;has_data())
<a name="l13819"></a>13819       {
<a name="l13820"></a>13820          $state = $this-&gt;state;
<a name="l13821"></a>13821          $this-&gt;$state();
<a name="l13822"></a>13822       }
<a name="l13823"></a>13823       $this-&gt;data = <span class="stringliteral">&#39;&#39;</span>;
<a name="l13824"></a>13824       <span class="keywordflow">if</span> ($this-&gt;state === <span class="stringliteral">&#39;emit&#39;</span>)
<a name="l13825"></a>13825       {
<a name="l13826"></a>13826          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l13827"></a>13827       }
<a name="l13828"></a>13828       <span class="keywordflow">else</span>
<a name="l13829"></a>13829       {
<a name="l13830"></a>13830          $this-&gt;version = <span class="stringliteral">&#39;&#39;</span>;
<a name="l13831"></a>13831          $this-&gt;encoding = <span class="stringliteral">&#39;&#39;</span>;
<a name="l13832"></a>13832          $this-&gt;standalone = <span class="stringliteral">&#39;&#39;</span>;
<a name="l13833"></a>13833          <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l13834"></a>13834       }
<a name="l13835"></a>13835    }
<a name="l13836"></a>13836 <span class="comment"></span>
<a name="l13837"></a>13837 <span class="comment">   /**</span>
<a name="l13838"></a>13838 <span class="comment">    * Check whether there is data beyond the pointer</span>
<a name="l13839"></a>13839 <span class="comment">    *</span>
<a name="l13840"></a>13840 <span class="comment">    * @access private</span>
<a name="l13841"></a>13841 <span class="comment">    * @return bool true if there is further data, false if not</span>
<a name="l13842"></a>13842 <span class="comment">    */</span>
<a name="l13843"></a><a class="code" href="class_simple_pie___x_m_l___declaration___parser.html#a9e97b54266785888abc290f4feb5eeb7">13843</a>    <span class="keyword">function</span> has_data()
<a name="l13844"></a>13844    {
<a name="l13845"></a>13845       <span class="keywordflow">return</span> (<span class="keywordtype">bool</span>) ($this-&gt;position &lt; $this-&gt;data_length);
<a name="l13846"></a>13846    }
<a name="l13847"></a>13847 <span class="comment"></span>
<a name="l13848"></a>13848 <span class="comment">   /**</span>
<a name="l13849"></a>13849 <span class="comment">    * Advance past any whitespace</span>
<a name="l13850"></a>13850 <span class="comment">    *</span>
<a name="l13851"></a>13851 <span class="comment">    * @return int Number of whitespace characters passed</span>
<a name="l13852"></a>13852 <span class="comment">    */</span>
<a name="l13853"></a><a class="code" href="class_simple_pie___x_m_l___declaration___parser.html#a1acd4f8d9b21c40bda3fbbeb780e8b1f">13853</a>    <span class="keyword">function</span> skip_whitespace()
<a name="l13854"></a>13854    {
<a name="l13855"></a>13855       $whitespace = strspn($this-&gt;data, <span class="stringliteral">&quot;\x09\x0A\x0D\x20&quot;</span>, $this-&gt;position);
<a name="l13856"></a>13856       $this-&gt;position += $whitespace;
<a name="l13857"></a>13857       <span class="keywordflow">return</span> $whitespace;
<a name="l13858"></a>13858    }
<a name="l13859"></a>13859 <span class="comment"></span>
<a name="l13860"></a>13860 <span class="comment">   /**</span>
<a name="l13861"></a>13861 <span class="comment">    * Read value</span>
<a name="l13862"></a>13862 <span class="comment">    */</span>
<a name="l13863"></a><a class="code" href="class_simple_pie___x_m_l___declaration___parser.html#a997a43c9857e3bb961b516c581bff4be">13863</a>    <span class="keyword">function</span> get_value()
<a name="l13864"></a>13864    {
<a name="l13865"></a>13865       $quote = substr($this-&gt;data, $this-&gt;position, 1);
<a name="l13866"></a>13866       <span class="keywordflow">if</span> ($quote === <span class="charliteral">&#39;&quot;&#39;</span> || $quote === <span class="stringliteral">&quot;&#39;&quot;</span>)
<a name="l13867"></a>13867       {
<a name="l13868"></a>13868          $this-&gt;position++;
<a name="l13869"></a>13869          $len = strcspn($this-&gt;data, $quote, $this-&gt;position);
<a name="l13870"></a>13870          <span class="keywordflow">if</span> ($this-&gt;has_data())
<a name="l13871"></a>13871          {
<a name="l13872"></a>13872             $value = substr($this-&gt;data, $this-&gt;position, $len);
<a name="l13873"></a>13873             $this-&gt;position += $len + 1;
<a name="l13874"></a>13874             <span class="keywordflow">return</span> $value;
<a name="l13875"></a>13875          }
<a name="l13876"></a>13876       }
<a name="l13877"></a>13877       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l13878"></a>13878    }
<a name="l13879"></a>13879 
<a name="l13880"></a>13880    <span class="keyword">function</span> before_version_name()
<a name="l13881"></a>13881    {
<a name="l13882"></a>13882       <span class="keywordflow">if</span> ($this-&gt;skip_whitespace())
<a name="l13883"></a>13883       {
<a name="l13884"></a>13884          $this-&gt;state = <span class="stringliteral">&#39;version_name&#39;</span>;
<a name="l13885"></a>13885       }
<a name="l13886"></a>13886       <span class="keywordflow">else</span>
<a name="l13887"></a>13887       {
<a name="l13888"></a>13888          $this-&gt;state = <span class="keyword">false</span>;
<a name="l13889"></a>13889       }
<a name="l13890"></a>13890    }
<a name="l13891"></a>13891 
<a name="l13892"></a>13892    <span class="keyword">function</span> version_name()
<a name="l13893"></a>13893    {
<a name="l13894"></a>13894       <span class="keywordflow">if</span> (substr($this-&gt;data, $this-&gt;position, 7) === <span class="stringliteral">&#39;version&#39;</span>)
<a name="l13895"></a>13895       {
<a name="l13896"></a>13896          $this-&gt;position += 7;
<a name="l13897"></a>13897          $this-&gt;skip_whitespace();
<a name="l13898"></a>13898          $this-&gt;state = <span class="stringliteral">&#39;version_equals&#39;</span>;
<a name="l13899"></a>13899       }
<a name="l13900"></a>13900       <span class="keywordflow">else</span>
<a name="l13901"></a>13901       {
<a name="l13902"></a>13902          $this-&gt;state = <span class="keyword">false</span>;
<a name="l13903"></a>13903       }
<a name="l13904"></a>13904    }
<a name="l13905"></a>13905 
<a name="l13906"></a>13906    <span class="keyword">function</span> version_equals()
<a name="l13907"></a>13907    {
<a name="l13908"></a>13908       <span class="keywordflow">if</span> (substr($this-&gt;data, $this-&gt;position, 1) === <span class="charliteral">&#39;=&#39;</span>)
<a name="l13909"></a>13909       {
<a name="l13910"></a>13910          $this-&gt;position++;
<a name="l13911"></a>13911          $this-&gt;skip_whitespace();
<a name="l13912"></a>13912          $this-&gt;state = <span class="stringliteral">&#39;version_value&#39;</span>;
<a name="l13913"></a>13913       }
<a name="l13914"></a>13914       <span class="keywordflow">else</span>
<a name="l13915"></a>13915       {
<a name="l13916"></a>13916          $this-&gt;state = <span class="keyword">false</span>;
<a name="l13917"></a>13917       }
<a name="l13918"></a>13918    }
<a name="l13919"></a>13919 
<a name="l13920"></a>13920    <span class="keyword">function</span> version_value()
<a name="l13921"></a>13921    {
<a name="l13922"></a>13922       <span class="keywordflow">if</span> ($this-&gt;version = $this-&gt;get_value())
<a name="l13923"></a>13923       {
<a name="l13924"></a>13924          $this-&gt;skip_whitespace();
<a name="l13925"></a>13925          <span class="keywordflow">if</span> ($this-&gt;has_data())
<a name="l13926"></a>13926          {
<a name="l13927"></a>13927             $this-&gt;state = <span class="stringliteral">&#39;encoding_name&#39;</span>;
<a name="l13928"></a>13928          }
<a name="l13929"></a>13929          <span class="keywordflow">else</span>
<a name="l13930"></a>13930          {
<a name="l13931"></a>13931             $this-&gt;state = <span class="stringliteral">&#39;emit&#39;</span>;
<a name="l13932"></a>13932          }
<a name="l13933"></a>13933       }
<a name="l13934"></a>13934       <span class="keywordflow">else</span>
<a name="l13935"></a>13935       {
<a name="l13936"></a>13936          $this-&gt;state = <span class="stringliteral">&#39;standalone_name&#39;</span>;
<a name="l13937"></a>13937       }
<a name="l13938"></a>13938    }
<a name="l13939"></a>13939 
<a name="l13940"></a>13940    <span class="keyword">function</span> encoding_name()
<a name="l13941"></a>13941    {
<a name="l13942"></a>13942       <span class="keywordflow">if</span> (substr($this-&gt;data, $this-&gt;position, 8) === <span class="stringliteral">&#39;encoding&#39;</span>)
<a name="l13943"></a>13943       {
<a name="l13944"></a>13944          $this-&gt;position += 8;
<a name="l13945"></a>13945          $this-&gt;skip_whitespace();
<a name="l13946"></a>13946          $this-&gt;state = <span class="stringliteral">&#39;encoding_equals&#39;</span>;
<a name="l13947"></a>13947       }
<a name="l13948"></a>13948       <span class="keywordflow">else</span>
<a name="l13949"></a>13949       {
<a name="l13950"></a>13950          $this-&gt;state = <span class="keyword">false</span>;
<a name="l13951"></a>13951       }
<a name="l13952"></a>13952    }
<a name="l13953"></a>13953 
<a name="l13954"></a>13954    <span class="keyword">function</span> encoding_equals()
<a name="l13955"></a>13955    {
<a name="l13956"></a>13956       <span class="keywordflow">if</span> (substr($this-&gt;data, $this-&gt;position, 1) === <span class="charliteral">&#39;=&#39;</span>)
<a name="l13957"></a>13957       {
<a name="l13958"></a>13958          $this-&gt;position++;
<a name="l13959"></a>13959          $this-&gt;skip_whitespace();
<a name="l13960"></a>13960          $this-&gt;state = <span class="stringliteral">&#39;encoding_value&#39;</span>;
<a name="l13961"></a>13961       }
<a name="l13962"></a>13962       <span class="keywordflow">else</span>
<a name="l13963"></a>13963       {
<a name="l13964"></a>13964          $this-&gt;state = <span class="keyword">false</span>;
<a name="l13965"></a>13965       }
<a name="l13966"></a>13966    }
<a name="l13967"></a>13967 
<a name="l13968"></a>13968    <span class="keyword">function</span> encoding_value()
<a name="l13969"></a>13969    {
<a name="l13970"></a>13970       <span class="keywordflow">if</span> ($this-&gt;encoding = $this-&gt;get_value())
<a name="l13971"></a>13971       {
<a name="l13972"></a>13972          $this-&gt;skip_whitespace();
<a name="l13973"></a>13973          <span class="keywordflow">if</span> ($this-&gt;has_data())
<a name="l13974"></a>13974          {
<a name="l13975"></a>13975             $this-&gt;state = <span class="stringliteral">&#39;standalone_name&#39;</span>;
<a name="l13976"></a>13976          }
<a name="l13977"></a>13977          <span class="keywordflow">else</span>
<a name="l13978"></a>13978          {
<a name="l13979"></a>13979             $this-&gt;state = <span class="stringliteral">&#39;emit&#39;</span>;
<a name="l13980"></a>13980          }
<a name="l13981"></a>13981       }
<a name="l13982"></a>13982       <span class="keywordflow">else</span>
<a name="l13983"></a>13983       {
<a name="l13984"></a>13984          $this-&gt;state = <span class="keyword">false</span>;
<a name="l13985"></a>13985       }
<a name="l13986"></a>13986    }
<a name="l13987"></a>13987 
<a name="l13988"></a>13988    <span class="keyword">function</span> standalone_name()
<a name="l13989"></a>13989    {
<a name="l13990"></a>13990       <span class="keywordflow">if</span> (substr($this-&gt;data, $this-&gt;position, 10) === <span class="stringliteral">&#39;standalone&#39;</span>)
<a name="l13991"></a>13991       {
<a name="l13992"></a>13992          $this-&gt;position += 10;
<a name="l13993"></a>13993          $this-&gt;skip_whitespace();
<a name="l13994"></a>13994          $this-&gt;state = <span class="stringliteral">&#39;standalone_equals&#39;</span>;
<a name="l13995"></a>13995       }
<a name="l13996"></a>13996       <span class="keywordflow">else</span>
<a name="l13997"></a>13997       {
<a name="l13998"></a>13998          $this-&gt;state = <span class="keyword">false</span>;
<a name="l13999"></a>13999       }
<a name="l14000"></a>14000    }
<a name="l14001"></a>14001 
<a name="l14002"></a>14002    <span class="keyword">function</span> standalone_equals()
<a name="l14003"></a>14003    {
<a name="l14004"></a>14004       <span class="keywordflow">if</span> (substr($this-&gt;data, $this-&gt;position, 1) === <span class="charliteral">&#39;=&#39;</span>)
<a name="l14005"></a>14005       {
<a name="l14006"></a>14006          $this-&gt;position++;
<a name="l14007"></a>14007          $this-&gt;skip_whitespace();
<a name="l14008"></a>14008          $this-&gt;state = <span class="stringliteral">&#39;standalone_value&#39;</span>;
<a name="l14009"></a>14009       }
<a name="l14010"></a>14010       <span class="keywordflow">else</span>
<a name="l14011"></a>14011       {
<a name="l14012"></a>14012          $this-&gt;state = <span class="keyword">false</span>;
<a name="l14013"></a>14013       }
<a name="l14014"></a>14014    }
<a name="l14015"></a>14015 
<a name="l14016"></a>14016    <span class="keyword">function</span> standalone_value()
<a name="l14017"></a>14017    {
<a name="l14018"></a>14018       <span class="keywordflow">if</span> ($standalone = $this-&gt;get_value())
<a name="l14019"></a>14019       {
<a name="l14020"></a>14020          <span class="keywordflow">switch</span> ($standalone)
<a name="l14021"></a>14021          {
<a name="l14022"></a>14022             <span class="keywordflow">case</span> <span class="stringliteral">&#39;yes&#39;</span>:
<a name="l14023"></a>14023                $this-&gt;standalone = <span class="keyword">true</span>;
<a name="l14024"></a>14024                <span class="keywordflow">break</span>;
<a name="l14025"></a>14025 
<a name="l14026"></a>14026             <span class="keywordflow">case</span> <span class="stringliteral">&#39;no&#39;</span>:
<a name="l14027"></a>14027                $this-&gt;standalone = <span class="keyword">false</span>;
<a name="l14028"></a>14028                <span class="keywordflow">break</span>;
<a name="l14029"></a>14029 
<a name="l14030"></a>14030             <span class="keywordflow">default</span>:
<a name="l14031"></a>14031                $this-&gt;state = <span class="keyword">false</span>;
<a name="l14032"></a>14032                <span class="keywordflow">return</span>;
<a name="l14033"></a>14033          }
<a name="l14034"></a>14034 
<a name="l14035"></a>14035          $this-&gt;skip_whitespace();
<a name="l14036"></a>14036          <span class="keywordflow">if</span> ($this-&gt;has_data())
<a name="l14037"></a>14037          {
<a name="l14038"></a>14038             $this-&gt;state = <span class="keyword">false</span>;
<a name="l14039"></a>14039          }
<a name="l14040"></a>14040          <span class="keywordflow">else</span>
<a name="l14041"></a>14041          {
<a name="l14042"></a>14042             $this-&gt;state = <span class="stringliteral">&#39;emit&#39;</span>;
<a name="l14043"></a>14043          }
<a name="l14044"></a>14044       }
<a name="l14045"></a>14045       <span class="keywordflow">else</span>
<a name="l14046"></a>14046       {
<a name="l14047"></a>14047          $this-&gt;state = <span class="keyword">false</span>;
<a name="l14048"></a>14048       }
<a name="l14049"></a>14049    }
<a name="l14050"></a>14050 }
<a name="l14051"></a>14051 
<a name="l14052"></a><a class="code" href="class_simple_pie___locator.html">14052</a> <span class="keyword">class </span><a class="code" href="class_simple_pie___locator.html">SimplePie_Locator</a>
<a name="l14053"></a>14053 {
<a name="l14054"></a>14054    var $useragent;
<a name="l14055"></a>14055    var $timeout;
<a name="l14056"></a>14056    var $file;
<a name="l14057"></a>14057    var $local = array();
<a name="l14058"></a>14058    var $elsewhere = array();
<a name="l14059"></a>14059    var $file_class = <span class="stringliteral">&#39;SimplePie_File&#39;</span>;
<a name="l14060"></a>14060    var $cached_entities = array();
<a name="l14061"></a>14061    var $http_base;
<a name="l14062"></a>14062    var $base;
<a name="l14063"></a>14063    var $base_location = 0;
<a name="l14064"></a>14064    var $checked_feeds = 0;
<a name="l14065"></a>14065    var $max_checked_feeds = 10;
<a name="l14066"></a>14066    var $content_type_sniffer_class = <span class="stringliteral">&#39;SimplePie_Content_Type_Sniffer&#39;</span>;
<a name="l14067"></a>14067 
<a name="l14068"></a>14068    <span class="keyword">function</span> <a class="code" href="class_simple_pie___locator.html">SimplePie_Locator</a>(&amp;$file, $timeout = 10, $useragent = null, $file_class = <span class="stringliteral">&#39;SimplePie_File&#39;</span>, $max_checked_feeds = 10, $content_type_sniffer_class = <span class="stringliteral">&#39;SimplePie_Content_Type_Sniffer&#39;</span>)
<a name="l14069"></a>14069    {
<a name="l14070"></a>14070       $this-&gt;file =&amp; $file;
<a name="l14071"></a>14071       $this-&gt;file_class = $file_class;
<a name="l14072"></a>14072       $this-&gt;useragent = $useragent;
<a name="l14073"></a>14073       $this-&gt;timeout = $timeout;
<a name="l14074"></a>14074       $this-&gt;max_checked_feeds = $max_checked_feeds;
<a name="l14075"></a>14075       $this-&gt;content_type_sniffer_class = $content_type_sniffer_class;
<a name="l14076"></a>14076    }
<a name="l14077"></a>14077 
<a name="l14078"></a>14078    <span class="keyword">function</span> find($type = SIMPLEPIE_LOCATOR_ALL, &amp;$working)
<a name="l14079"></a>14079    {
<a name="l14080"></a>14080       <span class="keywordflow">if</span> ($this-&gt;is_feed($this-&gt;file))
<a name="l14081"></a>14081       {
<a name="l14082"></a>14082          <span class="keywordflow">return</span> $this-&gt;file;
<a name="l14083"></a>14083       }
<a name="l14084"></a>14084 
<a name="l14085"></a>14085       <span class="keywordflow">if</span> ($this-&gt;file-&gt;method &amp; SIMPLEPIE_FILE_SOURCE_REMOTE)
<a name="l14086"></a>14086       {
<a name="l14087"></a>14087          $sniffer =&amp; <span class="keyword">new</span> $this-&gt;content_type_sniffer_class($this-&gt;file);
<a name="l14088"></a>14088          <span class="keywordflow">if</span> ($sniffer-&gt;get_type() !== <span class="stringliteral">&#39;text/html&#39;</span>)
<a name="l14089"></a>14089          {
<a name="l14090"></a>14090             <span class="keywordflow">return</span> null;
<a name="l14091"></a>14091          }
<a name="l14092"></a>14092       }
<a name="l14093"></a>14093 
<a name="l14094"></a>14094       <span class="keywordflow">if</span> ($type &amp; ~SIMPLEPIE_LOCATOR_NONE)
<a name="l14095"></a>14095       {
<a name="l14096"></a>14096          $this-&gt;get_base();
<a name="l14097"></a>14097       }
<a name="l14098"></a>14098 
<a name="l14099"></a>14099       <span class="keywordflow">if</span> ($type &amp; SIMPLEPIE_LOCATOR_AUTODISCOVERY &amp;&amp; $working = $this-&gt;autodiscovery())
<a name="l14100"></a>14100       {
<a name="l14101"></a>14101          <span class="keywordflow">return</span> $working[0];
<a name="l14102"></a>14102       }
<a name="l14103"></a>14103 
<a name="l14104"></a>14104       <span class="keywordflow">if</span> ($type &amp; (SIMPLEPIE_LOCATOR_LOCAL_EXTENSION | SIMPLEPIE_LOCATOR_LOCAL_BODY | SIMPLEPIE_LOCATOR_REMOTE_EXTENSION | SIMPLEPIE_LOCATOR_REMOTE_BODY) &amp;&amp; $this-&gt;get_links())
<a name="l14105"></a>14105       {
<a name="l14106"></a>14106          <span class="keywordflow">if</span> ($type &amp; SIMPLEPIE_LOCATOR_LOCAL_EXTENSION &amp;&amp; $working = $this-&gt;extension($this-&gt;local))
<a name="l14107"></a>14107          {
<a name="l14108"></a>14108             <span class="keywordflow">return</span> $working;
<a name="l14109"></a>14109          }
<a name="l14110"></a>14110 
<a name="l14111"></a>14111          <span class="keywordflow">if</span> ($type &amp; SIMPLEPIE_LOCATOR_LOCAL_BODY &amp;&amp; $working = $this-&gt;body($this-&gt;local))
<a name="l14112"></a>14112          {
<a name="l14113"></a>14113             <span class="keywordflow">return</span> $working;
<a name="l14114"></a>14114          }
<a name="l14115"></a>14115 
<a name="l14116"></a>14116          <span class="keywordflow">if</span> ($type &amp; SIMPLEPIE_LOCATOR_REMOTE_EXTENSION &amp;&amp; $working = $this-&gt;extension($this-&gt;elsewhere))
<a name="l14117"></a>14117          {
<a name="l14118"></a>14118             <span class="keywordflow">return</span> $working;
<a name="l14119"></a>14119          }
<a name="l14120"></a>14120 
<a name="l14121"></a>14121          <span class="keywordflow">if</span> ($type &amp; SIMPLEPIE_LOCATOR_REMOTE_BODY &amp;&amp; $working = $this-&gt;body($this-&gt;elsewhere))
<a name="l14122"></a>14122          {
<a name="l14123"></a>14123             <span class="keywordflow">return</span> $working;
<a name="l14124"></a>14124          }
<a name="l14125"></a>14125       }
<a name="l14126"></a>14126       <span class="keywordflow">return</span> null;
<a name="l14127"></a>14127    }
<a name="l14128"></a>14128 
<a name="l14129"></a>14129    <span class="keyword">function</span> is_feed(&amp;$file)
<a name="l14130"></a>14130    {
<a name="l14131"></a>14131       <span class="keywordflow">if</span> ($file-&gt;method &amp; SIMPLEPIE_FILE_SOURCE_REMOTE)
<a name="l14132"></a>14132       {
<a name="l14133"></a>14133          $sniffer =&amp; <span class="keyword">new</span> $this-&gt;content_type_sniffer_class($file);
<a name="l14134"></a>14134          $sniffed = $sniffer-&gt;get_type();
<a name="l14135"></a>14135          <span class="keywordflow">if</span> (in_array($sniffed, array(<span class="stringliteral">&#39;application/rss+xml&#39;</span>, <span class="stringliteral">&#39;application/rdf+xml&#39;</span>, <span class="stringliteral">&#39;text/rdf&#39;</span>, <span class="stringliteral">&#39;application/atom+xml&#39;</span>, <span class="stringliteral">&#39;text/xml&#39;</span>, <span class="stringliteral">&#39;application/xml&#39;</span>)))
<a name="l14136"></a>14136          {
<a name="l14137"></a>14137             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l14138"></a>14138          }
<a name="l14139"></a>14139          <span class="keywordflow">else</span>
<a name="l14140"></a>14140          {
<a name="l14141"></a>14141             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l14142"></a>14142          }
<a name="l14143"></a>14143       }
<a name="l14144"></a>14144       elseif ($file-&gt;method &amp; SIMPLEPIE_FILE_SOURCE_LOCAL)
<a name="l14145"></a>14145       {
<a name="l14146"></a>14146          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l14147"></a>14147       }
<a name="l14148"></a>14148       <span class="keywordflow">else</span>
<a name="l14149"></a>14149       {
<a name="l14150"></a>14150          <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l14151"></a>14151       }
<a name="l14152"></a>14152    }
<a name="l14153"></a>14153 
<a name="l14154"></a>14154    <span class="keyword">function</span> get_base()
<a name="l14155"></a>14155    {
<a name="l14156"></a>14156       $this-&gt;http_base = $this-&gt;file-&gt;url;
<a name="l14157"></a>14157       $this-&gt;base = $this-&gt;http_base;
<a name="l14158"></a>14158       $elements = SimplePie_Misc::get_element(<span class="stringliteral">&#39;base&#39;</span>, $this-&gt;file-&gt;body);
<a name="l14159"></a>14159       <span class="keywordflow">foreach</span> ($elements as $element)
<a name="l14160"></a>14160       {
<a name="l14161"></a>14161          <span class="keywordflow">if</span> ($element[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;href&#39;</span>][<span class="stringliteral">&#39;data&#39;</span>] !== <span class="stringliteral">&#39;&#39;</span>)
<a name="l14162"></a>14162          {
<a name="l14163"></a>14163             $this-&gt;base = SimplePie_Misc::absolutize_url(trim($element[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;href&#39;</span>][<span class="stringliteral">&#39;data&#39;</span>]), $this-&gt;http_base);
<a name="l14164"></a>14164             $this-&gt;base_location = $element[<span class="stringliteral">&#39;offset&#39;</span>];
<a name="l14165"></a>14165             <span class="keywordflow">break</span>;
<a name="l14166"></a>14166          }
<a name="l14167"></a>14167       }
<a name="l14168"></a>14168    }
<a name="l14169"></a>14169 
<a name="l14170"></a>14170    <span class="keyword">function</span> autodiscovery()
<a name="l14171"></a>14171    {
<a name="l14172"></a>14172       $links = array_merge(SimplePie_Misc::get_element(<span class="stringliteral">&#39;link&#39;</span>, $this-&gt;file-&gt;body), SimplePie_Misc::get_element(<span class="charliteral">&#39;a&#39;</span>, $this-&gt;file-&gt;body), SimplePie_Misc::get_element(<span class="stringliteral">&#39;area&#39;</span>, $this-&gt;file-&gt;body));
<a name="l14173"></a>14173       $done = array();
<a name="l14174"></a>14174       $feeds = array();
<a name="l14175"></a>14175       <span class="keywordflow">foreach</span> ($links as $link)
<a name="l14176"></a>14176       {
<a name="l14177"></a>14177          <span class="keywordflow">if</span> ($this-&gt;checked_feeds === $this-&gt;max_checked_feeds)
<a name="l14178"></a>14178          {
<a name="l14179"></a>14179             <span class="keywordflow">break</span>;
<a name="l14180"></a>14180          }
<a name="l14181"></a>14181          <span class="keywordflow">if</span> (isset($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;href&#39;</span>][<span class="stringliteral">&#39;data&#39;</span>]) &amp;&amp; isset($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;rel&#39;</span>][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l14182"></a>14182          {
<a name="l14183"></a>14183             $rel = array_unique(SimplePie_Misc::space_seperated_tokens(strtolower($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;rel&#39;</span>][<span class="stringliteral">&#39;data&#39;</span>])));
<a name="l14184"></a>14184 
<a name="l14185"></a>14185             <span class="keywordflow">if</span> ($this-&gt;base_location &lt; $link[<span class="stringliteral">&#39;offset&#39;</span>])
<a name="l14186"></a>14186             {
<a name="l14187"></a>14187                $href = SimplePie_Misc::absolutize_url(trim($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;href&#39;</span>][<span class="stringliteral">&#39;data&#39;</span>]), $this-&gt;base);
<a name="l14188"></a>14188             }
<a name="l14189"></a>14189             <span class="keywordflow">else</span>
<a name="l14190"></a>14190             {
<a name="l14191"></a>14191                $href = SimplePie_Misc::absolutize_url(trim($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;href&#39;</span>][<span class="stringliteral">&#39;data&#39;</span>]), $this-&gt;http_base);
<a name="l14192"></a>14192             }
<a name="l14193"></a>14193 
<a name="l14194"></a>14194             <span class="keywordflow">if</span> (!in_array($href, $done) &amp;&amp; in_array(<span class="stringliteral">&#39;feed&#39;</span>, $rel) || (in_array(<span class="stringliteral">&#39;alternate&#39;</span>, $rel) &amp;&amp; !empty($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>][<span class="stringliteral">&#39;data&#39;</span>]) &amp;&amp; in_array(strtolower(SimplePie_Misc::parse_mime($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>][<span class="stringliteral">&#39;data&#39;</span>])), array(<span class="stringliteral">&#39;application/rss+xml&#39;</span>, <span class="stringliteral">&#39;application/atom+xml&#39;</span>))) &amp;&amp; !isset($feeds[$href]))
<a name="l14195"></a>14195             {
<a name="l14196"></a>14196                $this-&gt;checked_feeds++;
<a name="l14197"></a>14197                $feed =&amp; <span class="keyword">new</span> $this-&gt;file_class($href, $this-&gt;timeout, 5, null, $this-&gt;useragent);
<a name="l14198"></a>14198                <span class="keywordflow">if</span> ($feed-&gt;success &amp;&amp; ($feed-&gt;method &amp; SIMPLEPIE_FILE_SOURCE_REMOTE === 0 || ($feed-&gt;status_code === 200 || $feed-&gt;status_code &gt; 206 &amp;&amp; $feed-&gt;status_code &lt; 300)) &amp;&amp; $this-&gt;is_feed($feed))
<a name="l14199"></a>14199                {
<a name="l14200"></a>14200                   $feeds[$href] = $feed;
<a name="l14201"></a>14201                }
<a name="l14202"></a>14202             }
<a name="l14203"></a>14203             $done[] = $href;
<a name="l14204"></a>14204          }
<a name="l14205"></a>14205       }
<a name="l14206"></a>14206 
<a name="l14207"></a>14207       <span class="keywordflow">if</span> (!empty($feeds))
<a name="l14208"></a>14208       {
<a name="l14209"></a>14209          <span class="keywordflow">return</span> array_values($feeds);
<a name="l14210"></a>14210       }
<a name="l14211"></a>14211       <span class="keywordflow">else</span> {
<a name="l14212"></a>14212          <span class="keywordflow">return</span> null;
<a name="l14213"></a>14213       }
<a name="l14214"></a>14214    }
<a name="l14215"></a>14215 
<a name="l14216"></a>14216    <span class="keyword">function</span> get_links()
<a name="l14217"></a>14217    {
<a name="l14218"></a>14218       $links = SimplePie_Misc::get_element(<span class="charliteral">&#39;a&#39;</span>, $this-&gt;file-&gt;body);
<a name="l14219"></a>14219       <span class="keywordflow">foreach</span> ($links as $link)
<a name="l14220"></a>14220       {
<a name="l14221"></a>14221          <span class="keywordflow">if</span> (isset($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;href&#39;</span>][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l14222"></a>14222          {
<a name="l14223"></a>14223             $href = trim($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;href&#39;</span>][<span class="stringliteral">&#39;data&#39;</span>]);
<a name="l14224"></a>14224             $parsed = SimplePie_Misc::parse_url($href);
<a name="l14225"></a>14225             <span class="keywordflow">if</span> ($parsed[<span class="stringliteral">&#39;scheme&#39;</span>] === <span class="stringliteral">&#39;&#39;</span> || preg_match(<span class="stringliteral">&#39;/^(http(s)|feed)?$/i&#39;</span>, $parsed[<span class="stringliteral">&#39;scheme&#39;</span>]))
<a name="l14226"></a>14226             {
<a name="l14227"></a>14227                <span class="keywordflow">if</span> ($this-&gt;base_location &lt; $link[<span class="stringliteral">&#39;offset&#39;</span>])
<a name="l14228"></a>14228                {
<a name="l14229"></a>14229                   $href = SimplePie_Misc::absolutize_url(trim($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;href&#39;</span>][<span class="stringliteral">&#39;data&#39;</span>]), $this-&gt;base);
<a name="l14230"></a>14230                }
<a name="l14231"></a>14231                <span class="keywordflow">else</span>
<a name="l14232"></a>14232                {
<a name="l14233"></a>14233                   $href = SimplePie_Misc::absolutize_url(trim($link[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;href&#39;</span>][<span class="stringliteral">&#39;data&#39;</span>]), $this-&gt;http_base);
<a name="l14234"></a>14234                }
<a name="l14235"></a>14235 
<a name="l14236"></a>14236                $current = SimplePie_Misc::parse_url($this-&gt;file-&gt;url);
<a name="l14237"></a>14237 
<a name="l14238"></a>14238                <span class="keywordflow">if</span> ($parsed[<span class="stringliteral">&#39;authority&#39;</span>] === <span class="stringliteral">&#39;&#39;</span> || $parsed[<span class="stringliteral">&#39;authority&#39;</span>] === $current[<span class="stringliteral">&#39;authority&#39;</span>])
<a name="l14239"></a>14239                {
<a name="l14240"></a>14240                   $this-&gt;local[] = $href;
<a name="l14241"></a>14241                }
<a name="l14242"></a>14242                <span class="keywordflow">else</span>
<a name="l14243"></a>14243                {
<a name="l14244"></a>14244                   $this-&gt;elsewhere[] = $href;
<a name="l14245"></a>14245                }
<a name="l14246"></a>14246             }
<a name="l14247"></a>14247          }
<a name="l14248"></a>14248       }
<a name="l14249"></a>14249       $this-&gt;local = array_unique($this-&gt;local);
<a name="l14250"></a>14250       $this-&gt;elsewhere = array_unique($this-&gt;elsewhere);
<a name="l14251"></a>14251       <span class="keywordflow">if</span> (!empty($this-&gt;local) || !empty($this-&gt;elsewhere))
<a name="l14252"></a>14252       {
<a name="l14253"></a>14253          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l14254"></a>14254       }
<a name="l14255"></a>14255       <span class="keywordflow">return</span> null;
<a name="l14256"></a>14256    }
<a name="l14257"></a>14257 
<a name="l14258"></a>14258    <span class="keyword">function</span> extension(&amp;$array)
<a name="l14259"></a>14259    {
<a name="l14260"></a>14260       <span class="keywordflow">foreach</span> ($array as $key =&gt; $value)
<a name="l14261"></a>14261       {
<a name="l14262"></a>14262          <span class="keywordflow">if</span> ($this-&gt;checked_feeds === $this-&gt;max_checked_feeds)
<a name="l14263"></a>14263          {
<a name="l14264"></a>14264             <span class="keywordflow">break</span>;
<a name="l14265"></a>14265          }
<a name="l14266"></a>14266          <span class="keywordflow">if</span> (in_array(strtolower(strrchr($value, <span class="charliteral">&#39;.&#39;</span>)), array(<span class="stringliteral">&#39;.rss&#39;</span>, <span class="stringliteral">&#39;.rdf&#39;</span>, <span class="stringliteral">&#39;.atom&#39;</span>, <span class="stringliteral">&#39;.xml&#39;</span>)))
<a name="l14267"></a>14267          {
<a name="l14268"></a>14268             $this-&gt;checked_feeds++;
<a name="l14269"></a>14269             $feed =&amp; <span class="keyword">new</span> $this-&gt;file_class($value, $this-&gt;timeout, 5, null, $this-&gt;useragent);
<a name="l14270"></a>14270             <span class="keywordflow">if</span> ($feed-&gt;success &amp;&amp; ($feed-&gt;method &amp; SIMPLEPIE_FILE_SOURCE_REMOTE === 0 || ($feed-&gt;status_code === 200 || $feed-&gt;status_code &gt; 206 &amp;&amp; $feed-&gt;status_code &lt; 300)) &amp;&amp; $this-&gt;is_feed($feed))
<a name="l14271"></a>14271             {
<a name="l14272"></a>14272                <span class="keywordflow">return</span> $feed;
<a name="l14273"></a>14273             }
<a name="l14274"></a>14274             <span class="keywordflow">else</span>
<a name="l14275"></a>14275             {
<a name="l14276"></a>14276                unset($array[$key]);
<a name="l14277"></a>14277             }
<a name="l14278"></a>14278          }
<a name="l14279"></a>14279       }
<a name="l14280"></a>14280       <span class="keywordflow">return</span> null;
<a name="l14281"></a>14281    }
<a name="l14282"></a>14282 
<a name="l14283"></a>14283    <span class="keyword">function</span> body(&amp;$array)
<a name="l14284"></a>14284    {
<a name="l14285"></a>14285       <span class="keywordflow">foreach</span> ($array as $key =&gt; $value)
<a name="l14286"></a>14286       {
<a name="l14287"></a>14287          <span class="keywordflow">if</span> ($this-&gt;checked_feeds === $this-&gt;max_checked_feeds)
<a name="l14288"></a>14288          {
<a name="l14289"></a>14289             <span class="keywordflow">break</span>;
<a name="l14290"></a>14290          }
<a name="l14291"></a>14291          <span class="keywordflow">if</span> (preg_match(<span class="stringliteral">&#39;/(rss|rdf|atom|xml)/i&#39;</span>, $value))
<a name="l14292"></a>14292          {
<a name="l14293"></a>14293             $this-&gt;checked_feeds++;
<a name="l14294"></a>14294             $feed =&amp; <span class="keyword">new</span> $this-&gt;file_class($value, $this-&gt;timeout, 5, null, $this-&gt;useragent);
<a name="l14295"></a>14295             <span class="keywordflow">if</span> ($feed-&gt;success &amp;&amp; ($feed-&gt;method &amp; SIMPLEPIE_FILE_SOURCE_REMOTE === 0 || ($feed-&gt;status_code === 200 || $feed-&gt;status_code &gt; 206 &amp;&amp; $feed-&gt;status_code &lt; 300)) &amp;&amp; $this-&gt;is_feed($feed))
<a name="l14296"></a>14296             {
<a name="l14297"></a>14297                <span class="keywordflow">return</span> $feed;
<a name="l14298"></a>14298             }
<a name="l14299"></a>14299             <span class="keywordflow">else</span>
<a name="l14300"></a>14300             {
<a name="l14301"></a>14301                unset($array[$key]);
<a name="l14302"></a>14302             }
<a name="l14303"></a>14303          }
<a name="l14304"></a>14304       }
<a name="l14305"></a>14305       <span class="keywordflow">return</span> null;
<a name="l14306"></a>14306    }
<a name="l14307"></a>14307 }
<a name="l14308"></a>14308 
<a name="l14309"></a><a class="code" href="class_simple_pie___parser.html">14309</a> <span class="keyword">class </span><a class="code" href="class_simple_pie___parser.html">SimplePie_Parser</a>
<a name="l14310"></a>14310 {
<a name="l14311"></a>14311    var $error_code;
<a name="l14312"></a>14312    var $error_string;
<a name="l14313"></a>14313    var $current_line;
<a name="l14314"></a>14314    var $current_column;
<a name="l14315"></a>14315    var $current_byte;
<a name="l14316"></a>14316    var $separator = <span class="charliteral">&#39; &#39;</span>;
<a name="l14317"></a>14317    var $namespace = array(<span class="stringliteral">&#39;&#39;</span>);
<a name="l14318"></a>14318    var $element = array(<span class="stringliteral">&#39;&#39;</span>);
<a name="l14319"></a>14319    var $xml_base = array(<span class="stringliteral">&#39;&#39;</span>);
<a name="l14320"></a>14320    var $xml_base_explicit = array(<span class="keyword">false</span>);
<a name="l14321"></a>14321    var $xml_lang = array(<span class="stringliteral">&#39;&#39;</span>);
<a name="l14322"></a>14322    var $data = array();
<a name="l14323"></a>14323    var $datas = array(array());
<a name="l14324"></a>14324    var $current_xhtml_construct = -1;
<a name="l14325"></a>14325    var $encoding;
<a name="l14326"></a>14326 
<a name="l14327"></a>14327    <span class="keyword">function</span> parse(&amp;$data, $encoding)
<a name="l14328"></a>14328    {
<a name="l14329"></a>14329       <span class="comment">// Use UTF-8 if we get passed US-ASCII, as every US-ASCII character is a UTF-8 character</span>
<a name="l14330"></a>14330       <span class="keywordflow">if</span> (strtoupper($encoding) === <span class="stringliteral">&#39;US-ASCII&#39;</span>)
<a name="l14331"></a>14331       {
<a name="l14332"></a>14332          $this-&gt;encoding = <span class="stringliteral">&#39;UTF-8&#39;</span>;
<a name="l14333"></a>14333       }
<a name="l14334"></a>14334       <span class="keywordflow">else</span>
<a name="l14335"></a>14335       {
<a name="l14336"></a>14336          $this-&gt;encoding = $encoding;
<a name="l14337"></a>14337       }
<a name="l14338"></a>14338 
<a name="l14339"></a>14339       <span class="comment">// Strip BOM:</span>
<a name="l14340"></a>14340       <span class="comment">// UTF-32 Big Endian BOM</span>
<a name="l14341"></a>14341       <span class="keywordflow">if</span> (substr($data, 0, 4) === <span class="stringliteral">&quot;\x00\x00\xFE\xFF&quot;</span>)
<a name="l14342"></a>14342       {
<a name="l14343"></a>14343          $data = substr($data, 4);
<a name="l14344"></a>14344       }
<a name="l14345"></a>14345       <span class="comment">// UTF-32 Little Endian BOM</span>
<a name="l14346"></a>14346       elseif (substr($data, 0, 4) === <span class="stringliteral">&quot;\xFF\xFE\x00\x00&quot;</span>)
<a name="l14347"></a>14347       {
<a name="l14348"></a>14348          $data = substr($data, 4);
<a name="l14349"></a>14349       }
<a name="l14350"></a>14350       <span class="comment">// UTF-16 Big Endian BOM</span>
<a name="l14351"></a>14351       elseif (substr($data, 0, 2) === <span class="stringliteral">&quot;\xFE\xFF&quot;</span>)
<a name="l14352"></a>14352       {
<a name="l14353"></a>14353          $data = substr($data, 2);
<a name="l14354"></a>14354       }
<a name="l14355"></a>14355       <span class="comment">// UTF-16 Little Endian BOM</span>
<a name="l14356"></a>14356       elseif (substr($data, 0, 2) === <span class="stringliteral">&quot;\xFF\xFE&quot;</span>)
<a name="l14357"></a>14357       {
<a name="l14358"></a>14358          $data = substr($data, 2);
<a name="l14359"></a>14359       }
<a name="l14360"></a>14360       <span class="comment">// UTF-8 BOM</span>
<a name="l14361"></a>14361       elseif (substr($data, 0, 3) === <span class="stringliteral">&quot;\xEF\xBB\xBF&quot;</span>)
<a name="l14362"></a>14362       {
<a name="l14363"></a>14363          $data = substr($data, 3);
<a name="l14364"></a>14364       }
<a name="l14365"></a>14365 
<a name="l14366"></a>14366       <span class="keywordflow">if</span> (substr($data, 0, 5) === <span class="stringliteral">&#39;&lt;?xml&#39;</span> &amp;&amp; strspn(substr($data, 5, 1), <span class="stringliteral">&quot;\x09\x0A\x0D\x20&quot;</span>) &amp;&amp; ($pos = strpos($data, <span class="stringliteral">&#39;?&gt;&#39;</span>)) !== <span class="keyword">false</span>)
<a name="l14367"></a>14367       {
<a name="l14368"></a>14368          $declaration =&amp; <span class="keyword">new</span> <a class="code" href="class_simple_pie___x_m_l___declaration___parser.html">SimplePie_XML_Declaration_Parser</a>(substr($data, 5, $pos - 5));
<a name="l14369"></a>14369          <span class="keywordflow">if</span> ($declaration-&gt;parse())
<a name="l14370"></a>14370          {
<a name="l14371"></a>14371             $data = substr($data, $pos + 2);
<a name="l14372"></a>14372             $data = <span class="stringliteral">&#39;&lt;?xml version=&quot;&#39;</span> . $declaration-&gt;version . <span class="stringliteral">&#39;&quot; encoding=&quot;&#39;</span> . $encoding . <span class="stringliteral">&#39;&quot; standalone=&quot;&#39;</span> . (($declaration-&gt;standalone) ? <span class="stringliteral">&#39;yes&#39;</span> : <span class="stringliteral">&#39;no&#39;</span>) . <span class="stringliteral">&#39;&quot;?&gt;&#39;</span> . $data;
<a name="l14373"></a>14373          }
<a name="l14374"></a>14374          <span class="keywordflow">else</span>
<a name="l14375"></a>14375          {
<a name="l14376"></a>14376             $this-&gt;error_string = <span class="stringliteral">&#39;SimplePie bug! Please report this!&#39;</span>;
<a name="l14377"></a>14377             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l14378"></a>14378          }
<a name="l14379"></a>14379       }
<a name="l14380"></a>14380 
<a name="l14381"></a>14381       $return = <span class="keyword">true</span>;
<a name="l14382"></a>14382 
<a name="l14383"></a>14383       <span class="keyword">static</span> $xml_is_sane = null;
<a name="l14384"></a>14384       <span class="keywordflow">if</span> ($xml_is_sane === null)
<a name="l14385"></a>14385       {
<a name="l14386"></a>14386          $parser_check = xml_parser_create();
<a name="l14387"></a>14387          xml_parse_into_struct($parser_check, <span class="stringliteral">&#39;&lt;foo&gt;&amp;amp;&lt;/foo&gt;&#39;</span>, $values);
<a name="l14388"></a>14388          xml_parser_free($parser_check);
<a name="l14389"></a>14389          $xml_is_sane = isset($values[0][<span class="stringliteral">&#39;value&#39;</span>]);
<a name="l14390"></a>14390       }
<a name="l14391"></a>14391 
<a name="l14392"></a>14392       <span class="comment">// Create the parser</span>
<a name="l14393"></a>14393       <span class="keywordflow">if</span> ($xml_is_sane)
<a name="l14394"></a>14394       {
<a name="l14395"></a>14395          $xml = xml_parser_create_ns($this-&gt;encoding, $this-&gt;separator);
<a name="l14396"></a>14396          xml_parser_set_option($xml, XML_OPTION_SKIP_WHITE, 1);
<a name="l14397"></a>14397          xml_parser_set_option($xml, XML_OPTION_CASE_FOLDING, 0);
<a name="l14398"></a>14398          xml_set_object($xml, $this);
<a name="l14399"></a>14399          xml_set_character_data_handler($xml, <span class="stringliteral">&#39;cdata&#39;</span>);
<a name="l14400"></a>14400          xml_set_element_handler($xml, <span class="stringliteral">&#39;tag_open&#39;</span>, <span class="stringliteral">&#39;tag_close&#39;</span>);
<a name="l14401"></a>14401 
<a name="l14402"></a>14402          <span class="comment">// Parse!</span>
<a name="l14403"></a>14403          <span class="keywordflow">if</span> (!xml_parse($xml, $data, <span class="keyword">true</span>))
<a name="l14404"></a>14404          {
<a name="l14405"></a>14405             $this-&gt;error_code = xml_get_error_code($xml);
<a name="l14406"></a>14406             $this-&gt;error_string = xml_error_string($this-&gt;error_code);
<a name="l14407"></a>14407             $return = <span class="keyword">false</span>;
<a name="l14408"></a>14408          }
<a name="l14409"></a>14409          $this-&gt;current_line = xml_get_current_line_number($xml);
<a name="l14410"></a>14410          $this-&gt;current_column = xml_get_current_column_number($xml);
<a name="l14411"></a>14411          $this-&gt;current_byte = xml_get_current_byte_index($xml);
<a name="l14412"></a>14412          xml_parser_free($xml);
<a name="l14413"></a>14413          <span class="keywordflow">return</span> $return;
<a name="l14414"></a>14414       }
<a name="l14415"></a>14415       <span class="keywordflow">else</span>
<a name="l14416"></a>14416       {
<a name="l14417"></a>14417          libxml_clear_errors();
<a name="l14418"></a>14418          $xml =&amp; <span class="keyword">new</span> XMLReader();
<a name="l14419"></a>14419          $xml-&gt;xml($data);
<a name="l14420"></a>14420          <span class="keywordflow">while</span> (@$xml-&gt;read())
<a name="l14421"></a>14421          {
<a name="l14422"></a>14422             <span class="keywordflow">switch</span> ($xml-&gt;nodeType)
<a name="l14423"></a>14423             {
<a name="l14424"></a>14424 
<a name="l14425"></a>14425                <span class="keywordflow">case</span> constant(<span class="stringliteral">&#39;XMLReader::END_ELEMENT&#39;</span>):
<a name="l14426"></a>14426                   <span class="keywordflow">if</span> ($xml-&gt;namespaceURI !== <span class="stringliteral">&#39;&#39;</span>)
<a name="l14427"></a>14427                   {
<a name="l14428"></a>14428                      $tagName = <span class="stringliteral">&quot;{$xml-&gt;namespaceURI}{$this-&gt;separator}{$xml-&gt;localName}&quot;</span>;
<a name="l14429"></a>14429                   }
<a name="l14430"></a>14430                   <span class="keywordflow">else</span>
<a name="l14431"></a>14431                   {
<a name="l14432"></a>14432                      $tagName = $xml-&gt;localName;
<a name="l14433"></a>14433                   }
<a name="l14434"></a>14434                   $this-&gt;tag_close(null, $tagName);
<a name="l14435"></a>14435                   <span class="keywordflow">break</span>;
<a name="l14436"></a>14436                <span class="keywordflow">case</span> constant(<span class="stringliteral">&#39;XMLReader::ELEMENT&#39;</span>):
<a name="l14437"></a>14437                   $empty = $xml-&gt;isEmptyElement;
<a name="l14438"></a>14438                   <span class="keywordflow">if</span> ($xml-&gt;namespaceURI !== <span class="stringliteral">&#39;&#39;</span>)
<a name="l14439"></a>14439                   {
<a name="l14440"></a>14440                      $tagName = <span class="stringliteral">&quot;{$xml-&gt;namespaceURI}{$this-&gt;separator}{$xml-&gt;localName}&quot;</span>;
<a name="l14441"></a>14441                   }
<a name="l14442"></a>14442                   <span class="keywordflow">else</span>
<a name="l14443"></a>14443                   {
<a name="l14444"></a>14444                      $tagName = $xml-&gt;localName;
<a name="l14445"></a>14445                   }
<a name="l14446"></a>14446                   $attributes = array();
<a name="l14447"></a>14447                   <span class="keywordflow">while</span> ($xml-&gt;moveToNextAttribute())
<a name="l14448"></a>14448                   {
<a name="l14449"></a>14449                      <span class="keywordflow">if</span> ($xml-&gt;namespaceURI !== <span class="stringliteral">&#39;&#39;</span>)
<a name="l14450"></a>14450                      {
<a name="l14451"></a>14451                         $attrName = <span class="stringliteral">&quot;{$xml-&gt;namespaceURI}{$this-&gt;separator}{$xml-&gt;localName}&quot;</span>;
<a name="l14452"></a>14452                      }
<a name="l14453"></a>14453                      <span class="keywordflow">else</span>
<a name="l14454"></a>14454                      {
<a name="l14455"></a>14455                         $attrName = $xml-&gt;localName;
<a name="l14456"></a>14456                      }
<a name="l14457"></a>14457                      $attributes[$attrName] = $xml-&gt;value;
<a name="l14458"></a>14458                   }
<a name="l14459"></a>14459                   $this-&gt;tag_open(null, $tagName, $attributes);
<a name="l14460"></a>14460                   <span class="keywordflow">if</span> ($empty)
<a name="l14461"></a>14461                   {
<a name="l14462"></a>14462                      $this-&gt;tag_close(null, $tagName);
<a name="l14463"></a>14463                   }
<a name="l14464"></a>14464                   <span class="keywordflow">break</span>;
<a name="l14465"></a>14465                <span class="keywordflow">case</span> constant(<span class="stringliteral">&#39;XMLReader::TEXT&#39;</span>):
<a name="l14466"></a>14466 
<a name="l14467"></a>14467                <span class="keywordflow">case</span> constant(<span class="stringliteral">&#39;XMLReader::CDATA&#39;</span>):
<a name="l14468"></a>14468                   $this-&gt;cdata(null, $xml-&gt;value);
<a name="l14469"></a>14469                   <span class="keywordflow">break</span>;
<a name="l14470"></a>14470             }
<a name="l14471"></a>14471          }
<a name="l14472"></a>14472          <span class="keywordflow">if</span> ($error = libxml_get_last_error())
<a name="l14473"></a>14473          {
<a name="l14474"></a>14474             $this-&gt;error_code = $error-&gt;code;
<a name="l14475"></a>14475             $this-&gt;error_string = $error-&gt;message;
<a name="l14476"></a>14476             $this-&gt;current_line = $error-&gt;line;
<a name="l14477"></a>14477             $this-&gt;current_column = $error-&gt;column;
<a name="l14478"></a>14478             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l14479"></a>14479          }
<a name="l14480"></a>14480          <span class="keywordflow">else</span>
<a name="l14481"></a>14481          {
<a name="l14482"></a>14482             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l14483"></a>14483          }
<a name="l14484"></a>14484       }
<a name="l14485"></a>14485    }
<a name="l14486"></a>14486 
<a name="l14487"></a>14487    <span class="keyword">function</span> get_error_code()
<a name="l14488"></a>14488    {
<a name="l14489"></a>14489       <span class="keywordflow">return</span> $this-&gt;error_code;
<a name="l14490"></a>14490    }
<a name="l14491"></a>14491 
<a name="l14492"></a>14492    <span class="keyword">function</span> get_error_string()
<a name="l14493"></a>14493    {
<a name="l14494"></a>14494       <span class="keywordflow">return</span> $this-&gt;error_string;
<a name="l14495"></a>14495    }
<a name="l14496"></a>14496 
<a name="l14497"></a>14497    <span class="keyword">function</span> get_current_line()
<a name="l14498"></a>14498    {
<a name="l14499"></a>14499       <span class="keywordflow">return</span> $this-&gt;current_line;
<a name="l14500"></a>14500    }
<a name="l14501"></a>14501 
<a name="l14502"></a>14502    <span class="keyword">function</span> get_current_column()
<a name="l14503"></a>14503    {
<a name="l14504"></a>14504       <span class="keywordflow">return</span> $this-&gt;current_column;
<a name="l14505"></a>14505    }
<a name="l14506"></a>14506 
<a name="l14507"></a>14507    <span class="keyword">function</span> get_current_byte()
<a name="l14508"></a>14508    {
<a name="l14509"></a>14509       <span class="keywordflow">return</span> $this-&gt;current_byte;
<a name="l14510"></a>14510    }
<a name="l14511"></a>14511 
<a name="l14512"></a>14512    <span class="keyword">function</span> get_data()
<a name="l14513"></a>14513    {
<a name="l14514"></a>14514       <span class="keywordflow">return</span> $this-&gt;data;
<a name="l14515"></a>14515    }
<a name="l14516"></a>14516 
<a name="l14517"></a>14517    <span class="keyword">function</span> tag_open($parser, $tag, $attributes)
<a name="l14518"></a>14518    {
<a name="l14519"></a>14519       list($this-&gt;<span class="keyword">namespace</span>[], $this-&gt;element[]) = $this-&gt;split_ns($tag);
<a name="l14520"></a>14520 
<a name="l14521"></a>14521       $attribs = array();
<a name="l14522"></a>14522       <span class="keywordflow">foreach</span> ($attributes as $name =&gt; $value)
<a name="l14523"></a>14523       {
<a name="l14524"></a>14524          list($attrib_namespace, $attribute) = $this-&gt;split_ns($name);
<a name="l14525"></a>14525          $attribs[$attrib_namespace][$attribute] = $value;
<a name="l14526"></a>14526       }
<a name="l14527"></a>14527 
<a name="l14528"></a>14528       <span class="keywordflow">if</span> (isset($attribs[SIMPLEPIE_NAMESPACE_XML][<span class="stringliteral">&#39;base&#39;</span>]))
<a name="l14529"></a>14529       {
<a name="l14530"></a>14530          $this-&gt;xml_base[] = SimplePie_Misc::absolutize_url($attribs[SIMPLEPIE_NAMESPACE_XML][<span class="stringliteral">&#39;base&#39;</span>], end($this-&gt;xml_base));
<a name="l14531"></a>14531          $this-&gt;xml_base_explicit[] = <span class="keyword">true</span>;
<a name="l14532"></a>14532       }
<a name="l14533"></a>14533       <span class="keywordflow">else</span>
<a name="l14534"></a>14534       {
<a name="l14535"></a>14535          $this-&gt;xml_base[] = end($this-&gt;xml_base);
<a name="l14536"></a>14536          $this-&gt;xml_base_explicit[] = end($this-&gt;xml_base_explicit);
<a name="l14537"></a>14537       }
<a name="l14538"></a>14538 
<a name="l14539"></a>14539       <span class="keywordflow">if</span> (isset($attribs[SIMPLEPIE_NAMESPACE_XML][<span class="stringliteral">&#39;lang&#39;</span>]))
<a name="l14540"></a>14540       {
<a name="l14541"></a>14541          $this-&gt;xml_lang[] = $attribs[SIMPLEPIE_NAMESPACE_XML][<span class="stringliteral">&#39;lang&#39;</span>];
<a name="l14542"></a>14542       }
<a name="l14543"></a>14543       <span class="keywordflow">else</span>
<a name="l14544"></a>14544       {
<a name="l14545"></a>14545          $this-&gt;xml_lang[] = end($this-&gt;xml_lang);
<a name="l14546"></a>14546       }
<a name="l14547"></a>14547 
<a name="l14548"></a>14548       <span class="keywordflow">if</span> ($this-&gt;current_xhtml_construct &gt;= 0)
<a name="l14549"></a>14549       {
<a name="l14550"></a>14550          $this-&gt;current_xhtml_construct++;
<a name="l14551"></a>14551          <span class="keywordflow">if</span> (end($this-&gt;<span class="keyword">namespace</span>) === SIMPLEPIE_NAMESPACE_XHTML)
<a name="l14552"></a>14552          {
<a name="l14553"></a>14553             $this-&gt;data[<span class="stringliteral">&#39;data&#39;</span>] .= <span class="charliteral">&#39;&lt;&#39;</span> . end($this-&gt;element);
<a name="l14554"></a>14554             <span class="keywordflow">if</span> (isset($attribs[<span class="stringliteral">&#39;&#39;</span>]))
<a name="l14555"></a>14555             {
<a name="l14556"></a>14556                <span class="keywordflow">foreach</span> ($attribs[<span class="stringliteral">&#39;&#39;</span>] as $name =&gt; $value)
<a name="l14557"></a>14557                {
<a name="l14558"></a>14558                   $this-&gt;data[<span class="stringliteral">&#39;data&#39;</span>] .= <span class="charliteral">&#39; &#39;</span> . $name . <span class="stringliteral">&#39;=&quot;&#39;</span> . htmlspecialchars($value, ENT_COMPAT, $this-&gt;encoding) . <span class="charliteral">&#39;&quot;&#39;</span>;
<a name="l14559"></a>14559                }
<a name="l14560"></a>14560             }
<a name="l14561"></a>14561             $this-&gt;data[<span class="stringliteral">&#39;data&#39;</span>] .= <span class="charliteral">&#39;&gt;&#39;</span>;
<a name="l14562"></a>14562          }
<a name="l14563"></a>14563       }
<a name="l14564"></a>14564       <span class="keywordflow">else</span>
<a name="l14565"></a>14565       {
<a name="l14566"></a>14566          $this-&gt;datas[] =&amp; $this-&gt;data;
<a name="l14567"></a>14567          $this-&gt;data =&amp; $this-&gt;data[<span class="stringliteral">&#39;child&#39;</span>][end($this-&gt;<span class="keyword">namespace</span>)][end($this-&gt;element)][];
<a name="l14568"></a>14568          $this-&gt;data = array(<span class="stringliteral">&#39;data&#39;</span> =&gt; <span class="stringliteral">&#39;&#39;</span>, <span class="stringliteral">&#39;attribs&#39;</span> =&gt; $attribs, <span class="stringliteral">&#39;xml_base&#39;</span> =&gt; end($this-&gt;xml_base), <span class="stringliteral">&#39;xml_base_explicit&#39;</span> =&gt; end($this-&gt;xml_base_explicit), <span class="stringliteral">&#39;xml_lang&#39;</span> =&gt; end($this-&gt;xml_lang));
<a name="l14569"></a>14569          <span class="keywordflow">if</span> ((end($this-&gt;<span class="keyword">namespace</span>) === SIMPLEPIE_NAMESPACE_ATOM_03 &amp;&amp; in_array(end($this-&gt;element), array(<span class="stringliteral">&#39;title&#39;</span>, <span class="stringliteral">&#39;tagline&#39;</span>, <span class="stringliteral">&#39;copyright&#39;</span>, <span class="stringliteral">&#39;info&#39;</span>, <span class="stringliteral">&#39;summary&#39;</span>, <span class="stringliteral">&#39;content&#39;</span>)) &amp;&amp; isset($attribs[<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;mode&#39;</span>]) &amp;&amp; $attribs[<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;mode&#39;</span>] === <span class="stringliteral">&#39;xml&#39;</span>)
<a name="l14570"></a>14570          || (end($this-&gt;<span class="keyword">namespace</span>) === SIMPLEPIE_NAMESPACE_ATOM_10 &amp;&amp; in_array(end($this-&gt;element), array(<span class="stringliteral">&#39;rights&#39;</span>, <span class="stringliteral">&#39;subtitle&#39;</span>, <span class="stringliteral">&#39;summary&#39;</span>, <span class="stringliteral">&#39;info&#39;</span>, <span class="stringliteral">&#39;title&#39;</span>, <span class="stringliteral">&#39;content&#39;</span>)) &amp;&amp; isset($attribs[<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>]) &amp;&amp; $attribs[<span class="stringliteral">&#39;&#39;</span>][<span class="stringliteral">&#39;type&#39;</span>] === <span class="stringliteral">&#39;xhtml&#39;</span>))
<a name="l14571"></a>14571          {
<a name="l14572"></a>14572             $this-&gt;current_xhtml_construct = 0;
<a name="l14573"></a>14573          }
<a name="l14574"></a>14574       }
<a name="l14575"></a>14575    }
<a name="l14576"></a>14576 
<a name="l14577"></a>14577    <span class="keyword">function</span> cdata($parser, $cdata)
<a name="l14578"></a>14578    {
<a name="l14579"></a>14579       <span class="keywordflow">if</span> ($this-&gt;current_xhtml_construct &gt;= 0)
<a name="l14580"></a>14580       {
<a name="l14581"></a>14581          $this-&gt;data[<span class="stringliteral">&#39;data&#39;</span>] .= htmlspecialchars($cdata, ENT_QUOTES, $this-&gt;encoding);
<a name="l14582"></a>14582       }
<a name="l14583"></a>14583       <span class="keywordflow">else</span>
<a name="l14584"></a>14584       {
<a name="l14585"></a>14585          $this-&gt;data[<span class="stringliteral">&#39;data&#39;</span>] .= $cdata;
<a name="l14586"></a>14586       }
<a name="l14587"></a>14587    }
<a name="l14588"></a>14588 
<a name="l14589"></a>14589    <span class="keyword">function</span> tag_close($parser, $tag)
<a name="l14590"></a>14590    {
<a name="l14591"></a>14591       <span class="keywordflow">if</span> ($this-&gt;current_xhtml_construct &gt;= 0)
<a name="l14592"></a>14592       {
<a name="l14593"></a>14593          $this-&gt;current_xhtml_construct--;
<a name="l14594"></a>14594          <span class="keywordflow">if</span> (end($this-&gt;<span class="keyword">namespace</span>) === SIMPLEPIE_NAMESPACE_XHTML &amp;&amp; !in_array(end($this-&gt;element), array(<span class="stringliteral">&#39;area&#39;</span>, <span class="stringliteral">&#39;base&#39;</span>, <span class="stringliteral">&#39;basefont&#39;</span>, <span class="stringliteral">&#39;br&#39;</span>, <span class="stringliteral">&#39;col&#39;</span>, <span class="stringliteral">&#39;frame&#39;</span>, <span class="stringliteral">&#39;hr&#39;</span>, <span class="stringliteral">&#39;img&#39;</span>, <span class="stringliteral">&#39;input&#39;</span>, <span class="stringliteral">&#39;isindex&#39;</span>, <span class="stringliteral">&#39;link&#39;</span>, <span class="stringliteral">&#39;meta&#39;</span>, <span class="stringliteral">&#39;param&#39;</span>)))
<a name="l14595"></a>14595          {
<a name="l14596"></a>14596             $this-&gt;data[<span class="stringliteral">&#39;data&#39;</span>] .= <span class="stringliteral">&#39;&lt;/&#39;</span> . end($this-&gt;element) . <span class="charliteral">&#39;&gt;&#39;</span>;
<a name="l14597"></a>14597          }
<a name="l14598"></a>14598       }
<a name="l14599"></a>14599       <span class="keywordflow">if</span> ($this-&gt;current_xhtml_construct === -1)
<a name="l14600"></a>14600       {
<a name="l14601"></a>14601          $this-&gt;data =&amp; $this-&gt;datas[count($this-&gt;datas) - 1];
<a name="l14602"></a>14602          array_pop($this-&gt;datas);
<a name="l14603"></a>14603       }
<a name="l14604"></a>14604 
<a name="l14605"></a>14605       array_pop($this-&gt;element);
<a name="l14606"></a>14606       array_pop($this-&gt;<span class="keyword">namespace</span>);
<a name="l14607"></a>14607       array_pop($this-&gt;xml_base);
<a name="l14608"></a>14608       array_pop($this-&gt;xml_base_explicit);
<a name="l14609"></a>14609       array_pop($this-&gt;xml_lang);
<a name="l14610"></a>14610    }
<a name="l14611"></a>14611 
<a name="l14612"></a>14612    <span class="keyword">function</span> split_ns($string)
<a name="l14613"></a>14613    {
<a name="l14614"></a>14614       <span class="keyword">static</span> $cache = array();
<a name="l14615"></a>14615       <span class="keywordflow">if</span> (!isset($cache[$string]))
<a name="l14616"></a>14616       {
<a name="l14617"></a>14617          <span class="keywordflow">if</span> ($pos = strpos($string, $this-&gt;separator))
<a name="l14618"></a>14618          {
<a name="l14619"></a>14619             <span class="keyword">static</span> $separator_length;
<a name="l14620"></a>14620             <span class="keywordflow">if</span> (!$separator_length)
<a name="l14621"></a>14621             {
<a name="l14622"></a>14622                $separator_length = strlen($this-&gt;separator);
<a name="l14623"></a>14623             }
<a name="l14624"></a>14624             $namespace = substr($string, 0, $pos);
<a name="l14625"></a>14625             $local_name = substr($string, $pos + $separator_length);
<a name="l14626"></a>14626             <span class="keywordflow">if</span> (strtolower($namespace) === SIMPLEPIE_NAMESPACE_ITUNES)
<a name="l14627"></a>14627             {
<a name="l14628"></a>14628                $namespace = SIMPLEPIE_NAMESPACE_ITUNES;
<a name="l14629"></a>14629             }
<a name="l14630"></a>14630 
<a name="l14631"></a>14631             <span class="comment">// Normalize the Media RSS namespaces</span>
<a name="l14632"></a>14632             <span class="keywordflow">if</span> ($namespace === SIMPLEPIE_NAMESPACE_MEDIARSS_WRONG)
<a name="l14633"></a>14633             {
<a name="l14634"></a>14634                $namespace = SIMPLEPIE_NAMESPACE_MEDIARSS;
<a name="l14635"></a>14635             }
<a name="l14636"></a>14636             $cache[$string] = array($namespace, $local_name);
<a name="l14637"></a>14637          }
<a name="l14638"></a>14638          <span class="keywordflow">else</span>
<a name="l14639"></a>14639          {
<a name="l14640"></a>14640             $cache[$string] = array(<span class="stringliteral">&#39;&#39;</span>, $string);
<a name="l14641"></a>14641          }
<a name="l14642"></a>14642       }
<a name="l14643"></a>14643       <span class="keywordflow">return</span> $cache[$string];
<a name="l14644"></a>14644    }
<a name="l14645"></a>14645 }
<a name="l14646"></a>14646 <span class="comment"></span>
<a name="l14647"></a>14647 <span class="comment">/**</span>
<a name="l14648"></a>14648 <span class="comment"> * @todo Move to using an actual HTML parser (this will allow tags to be properly stripped, and to switch between HTML and XHTML), this will also make it easier to shorten a string while preserving HTML tags</span>
<a name="l14649"></a>14649 <span class="comment"> */</span>
<a name="l14650"></a><a class="code" href="class_simple_pie___sanitize.html">14650</a> <span class="keyword">class </span><a class="code" href="class_simple_pie___sanitize.html">SimplePie_Sanitize</a>
<a name="l14651"></a>14651 {
<a name="l14652"></a>14652    <span class="comment">// Private vars</span>
<a name="l14653"></a>14653    var $base;
<a name="l14654"></a>14654 
<a name="l14655"></a>14655    <span class="comment">// Options</span>
<a name="l14656"></a>14656    var $remove_div = <span class="keyword">true</span>;
<a name="l14657"></a>14657    var $image_handler = <span class="stringliteral">&#39;&#39;</span>;
<a name="l14658"></a>14658    var $strip_htmltags = array(<span class="stringliteral">&#39;base&#39;</span>, <span class="stringliteral">&#39;blink&#39;</span>, <span class="stringliteral">&#39;body&#39;</span>, <span class="stringliteral">&#39;doctype&#39;</span>, <span class="stringliteral">&#39;embed&#39;</span>, <span class="stringliteral">&#39;font&#39;</span>, <span class="stringliteral">&#39;form&#39;</span>, <span class="stringliteral">&#39;frame&#39;</span>, <span class="stringliteral">&#39;frameset&#39;</span>, <span class="stringliteral">&#39;html&#39;</span>, <span class="stringliteral">&#39;iframe&#39;</span>, <span class="stringliteral">&#39;input&#39;</span>, <span class="stringliteral">&#39;marquee&#39;</span>, <span class="stringliteral">&#39;meta&#39;</span>, <span class="stringliteral">&#39;noscript&#39;</span>, <span class="stringliteral">&#39;object&#39;</span>, <span class="stringliteral">&#39;param&#39;</span>, <span class="stringliteral">&#39;script&#39;</span>, <span class="stringliteral">&#39;style&#39;</span>);
<a name="l14659"></a>14659    var $encode_instead_of_strip = <span class="keyword">false</span>;
<a name="l14660"></a>14660    var $strip_attributes = array(<span class="stringliteral">&#39;bgsound&#39;</span>, <span class="stringliteral">&#39;class&#39;</span>, <span class="stringliteral">&#39;expr&#39;</span>, <span class="stringliteral">&#39;id&#39;</span>, <span class="stringliteral">&#39;style&#39;</span>, <span class="stringliteral">&#39;onclick&#39;</span>, <span class="stringliteral">&#39;onerror&#39;</span>, <span class="stringliteral">&#39;onfinish&#39;</span>, <span class="stringliteral">&#39;onmouseover&#39;</span>, <span class="stringliteral">&#39;onmouseout&#39;</span>, <span class="stringliteral">&#39;onfocus&#39;</span>, <span class="stringliteral">&#39;onblur&#39;</span>, <span class="stringliteral">&#39;lowsrc&#39;</span>, <span class="stringliteral">&#39;dynsrc&#39;</span>);
<a name="l14661"></a>14661    var $strip_comments = <span class="keyword">false</span>;
<a name="l14662"></a>14662    var $output_encoding = <span class="stringliteral">&#39;UTF-8&#39;</span>;
<a name="l14663"></a>14663    var $enable_cache = <span class="keyword">true</span>;
<a name="l14664"></a>14664    var $cache_location = <span class="stringliteral">&#39;./cache&#39;</span>;
<a name="l14665"></a>14665    var $cache_name_function = <span class="stringliteral">&#39;md5&#39;</span>;
<a name="l14666"></a>14666    var $cache_class = <span class="stringliteral">&#39;SimplePie_Cache&#39;</span>;
<a name="l14667"></a>14667    var $file_class = <span class="stringliteral">&#39;SimplePie_File&#39;</span>;
<a name="l14668"></a>14668    var $timeout = 10;
<a name="l14669"></a>14669    var $useragent = <span class="stringliteral">&#39;&#39;</span>;
<a name="l14670"></a>14670    var $force_fsockopen = <span class="keyword">false</span>;
<a name="l14671"></a>14671 
<a name="l14672"></a>14672    var $replace_url_attributes = array(
<a name="l14673"></a>14673       <span class="charliteral">&#39;a&#39;</span> =&gt; <span class="stringliteral">&#39;href&#39;</span>,
<a name="l14674"></a>14674       <span class="stringliteral">&#39;area&#39;</span> =&gt; <span class="stringliteral">&#39;href&#39;</span>,
<a name="l14675"></a>14675       <span class="stringliteral">&#39;blockquote&#39;</span> =&gt; <span class="stringliteral">&#39;cite&#39;</span>,
<a name="l14676"></a>14676       <span class="stringliteral">&#39;del&#39;</span> =&gt; <span class="stringliteral">&#39;cite&#39;</span>,
<a name="l14677"></a>14677       <span class="stringliteral">&#39;form&#39;</span> =&gt; <span class="stringliteral">&#39;action&#39;</span>,
<a name="l14678"></a>14678       <span class="stringliteral">&#39;img&#39;</span> =&gt; array(<span class="stringliteral">&#39;longdesc&#39;</span>, <span class="stringliteral">&#39;src&#39;</span>),
<a name="l14679"></a>14679       <span class="stringliteral">&#39;input&#39;</span> =&gt; <span class="stringliteral">&#39;src&#39;</span>,
<a name="l14680"></a>14680       <span class="stringliteral">&#39;ins&#39;</span> =&gt; <span class="stringliteral">&#39;cite&#39;</span>,
<a name="l14681"></a>14681       <span class="charliteral">&#39;q&#39;</span> =&gt; <span class="stringliteral">&#39;cite&#39;</span>
<a name="l14682"></a>14682    );
<a name="l14683"></a>14683 
<a name="l14684"></a>14684    <span class="keyword">function</span> remove_div($enable = <span class="keyword">true</span>)
<a name="l14685"></a>14685    {
<a name="l14686"></a>14686       $this-&gt;remove_div = (bool) $enable;
<a name="l14687"></a>14687    }
<a name="l14688"></a>14688 
<a name="l14689"></a>14689    <span class="keyword">function</span> set_image_handler($page = <span class="keyword">false</span>)
<a name="l14690"></a>14690    {
<a name="l14691"></a>14691       <span class="keywordflow">if</span> ($page)
<a name="l14692"></a>14692       {
<a name="l14693"></a>14693          $this-&gt;image_handler = (string) $page;
<a name="l14694"></a>14694       }
<a name="l14695"></a>14695       <span class="keywordflow">else</span>
<a name="l14696"></a>14696       {
<a name="l14697"></a>14697          $this-&gt;image_handler = <span class="keyword">false</span>;
<a name="l14698"></a>14698       }
<a name="l14699"></a>14699    }
<a name="l14700"></a>14700 
<a name="l14701"></a>14701    <span class="keyword">function</span> pass_cache_data($enable_cache = <span class="keyword">true</span>, $cache_location = <span class="stringliteral">&#39;./cache&#39;</span>, $cache_name_function = <span class="stringliteral">&#39;md5&#39;</span>, $cache_class = <span class="stringliteral">&#39;SimplePie_Cache&#39;</span>)
<a name="l14702"></a>14702    {
<a name="l14703"></a>14703       <span class="keywordflow">if</span> (isset($enable_cache))
<a name="l14704"></a>14704       {
<a name="l14705"></a>14705          $this-&gt;enable_cache = (bool) $enable_cache;
<a name="l14706"></a>14706       }
<a name="l14707"></a>14707 
<a name="l14708"></a>14708       <span class="keywordflow">if</span> ($cache_location)
<a name="l14709"></a>14709       {
<a name="l14710"></a>14710          $this-&gt;cache_location = (string) $cache_location;
<a name="l14711"></a>14711       }
<a name="l14712"></a>14712 
<a name="l14713"></a>14713       <span class="keywordflow">if</span> ($cache_name_function)
<a name="l14714"></a>14714       {
<a name="l14715"></a>14715          $this-&gt;cache_name_function = (string) $cache_name_function;
<a name="l14716"></a>14716       }
<a name="l14717"></a>14717 
<a name="l14718"></a>14718       <span class="keywordflow">if</span> ($cache_class)
<a name="l14719"></a>14719       {
<a name="l14720"></a>14720          $this-&gt;cache_class = (string) $cache_class;
<a name="l14721"></a>14721       }
<a name="l14722"></a>14722    }
<a name="l14723"></a>14723 
<a name="l14724"></a>14724    <span class="keyword">function</span> pass_file_data($file_class = <span class="stringliteral">&#39;SimplePie_File&#39;</span>, $timeout = 10, $useragent = <span class="stringliteral">&#39;&#39;</span>, $force_fsockopen = <span class="keyword">false</span>)
<a name="l14725"></a>14725    {
<a name="l14726"></a>14726       <span class="keywordflow">if</span> ($file_class)
<a name="l14727"></a>14727       {
<a name="l14728"></a>14728          $this-&gt;file_class = (string) $file_class;
<a name="l14729"></a>14729       }
<a name="l14730"></a>14730 
<a name="l14731"></a>14731       <span class="keywordflow">if</span> ($timeout)
<a name="l14732"></a>14732       {
<a name="l14733"></a>14733          $this-&gt;timeout = (string) $timeout;
<a name="l14734"></a>14734       }
<a name="l14735"></a>14735 
<a name="l14736"></a>14736       <span class="keywordflow">if</span> ($useragent)
<a name="l14737"></a>14737       {
<a name="l14738"></a>14738          $this-&gt;useragent = (string) $useragent;
<a name="l14739"></a>14739       }
<a name="l14740"></a>14740 
<a name="l14741"></a>14741       <span class="keywordflow">if</span> ($force_fsockopen)
<a name="l14742"></a>14742       {
<a name="l14743"></a>14743          $this-&gt;force_fsockopen = (string) $force_fsockopen;
<a name="l14744"></a>14744       }
<a name="l14745"></a>14745    }
<a name="l14746"></a>14746 
<a name="l14747"></a>14747    <span class="keyword">function</span> strip_htmltags($tags = array(<span class="stringliteral">&#39;base&#39;</span>, <span class="stringliteral">&#39;blink&#39;</span>, <span class="stringliteral">&#39;body&#39;</span>, <span class="stringliteral">&#39;doctype&#39;</span>, <span class="stringliteral">&#39;embed&#39;</span>, <span class="stringliteral">&#39;font&#39;</span>, <span class="stringliteral">&#39;form&#39;</span>, <span class="stringliteral">&#39;frame&#39;</span>, <span class="stringliteral">&#39;frameset&#39;</span>, <span class="stringliteral">&#39;html&#39;</span>, <span class="stringliteral">&#39;iframe&#39;</span>, <span class="stringliteral">&#39;input&#39;</span>, <span class="stringliteral">&#39;marquee&#39;</span>, <span class="stringliteral">&#39;meta&#39;</span>, <span class="stringliteral">&#39;noscript&#39;</span>, <span class="stringliteral">&#39;object&#39;</span>, <span class="stringliteral">&#39;param&#39;</span>, <span class="stringliteral">&#39;script&#39;</span>, <span class="stringliteral">&#39;style&#39;</span>))
<a name="l14748"></a>14748    {
<a name="l14749"></a>14749       <span class="keywordflow">if</span> ($tags)
<a name="l14750"></a>14750       {
<a name="l14751"></a>14751          <span class="keywordflow">if</span> (is_array($tags))
<a name="l14752"></a>14752          {
<a name="l14753"></a>14753             $this-&gt;strip_htmltags = $tags;
<a name="l14754"></a>14754          }
<a name="l14755"></a>14755          <span class="keywordflow">else</span>
<a name="l14756"></a>14756          {
<a name="l14757"></a>14757             $this-&gt;strip_htmltags = explode(<span class="charliteral">&#39;,&#39;</span>, $tags);
<a name="l14758"></a>14758          }
<a name="l14759"></a>14759       }
<a name="l14760"></a>14760       <span class="keywordflow">else</span>
<a name="l14761"></a>14761       {
<a name="l14762"></a>14762          $this-&gt;strip_htmltags = <span class="keyword">false</span>;
<a name="l14763"></a>14763       }
<a name="l14764"></a>14764    }
<a name="l14765"></a>14765 
<a name="l14766"></a>14766    <span class="keyword">function</span> encode_instead_of_strip($encode = <span class="keyword">false</span>)
<a name="l14767"></a>14767    {
<a name="l14768"></a>14768       $this-&gt;encode_instead_of_strip = (bool) $encode;
<a name="l14769"></a>14769    }
<a name="l14770"></a>14770 
<a name="l14771"></a>14771    <span class="keyword">function</span> strip_attributes($attribs = array(<span class="stringliteral">&#39;bgsound&#39;</span>, <span class="stringliteral">&#39;class&#39;</span>, <span class="stringliteral">&#39;expr&#39;</span>, <span class="stringliteral">&#39;id&#39;</span>, <span class="stringliteral">&#39;style&#39;</span>, <span class="stringliteral">&#39;onclick&#39;</span>, <span class="stringliteral">&#39;onerror&#39;</span>, <span class="stringliteral">&#39;onfinish&#39;</span>, <span class="stringliteral">&#39;onmouseover&#39;</span>, <span class="stringliteral">&#39;onmouseout&#39;</span>, <span class="stringliteral">&#39;onfocus&#39;</span>, <span class="stringliteral">&#39;onblur&#39;</span>, <span class="stringliteral">&#39;lowsrc&#39;</span>, <span class="stringliteral">&#39;dynsrc&#39;</span>))
<a name="l14772"></a>14772    {
<a name="l14773"></a>14773       <span class="keywordflow">if</span> ($attribs)
<a name="l14774"></a>14774       {
<a name="l14775"></a>14775          <span class="keywordflow">if</span> (is_array($attribs))
<a name="l14776"></a>14776          {
<a name="l14777"></a>14777             $this-&gt;strip_attributes = $attribs;
<a name="l14778"></a>14778          }
<a name="l14779"></a>14779          <span class="keywordflow">else</span>
<a name="l14780"></a>14780          {
<a name="l14781"></a>14781             $this-&gt;strip_attributes = explode(<span class="charliteral">&#39;,&#39;</span>, $attribs);
<a name="l14782"></a>14782          }
<a name="l14783"></a>14783       }
<a name="l14784"></a>14784       <span class="keywordflow">else</span>
<a name="l14785"></a>14785       {
<a name="l14786"></a>14786          $this-&gt;strip_attributes = <span class="keyword">false</span>;
<a name="l14787"></a>14787       }
<a name="l14788"></a>14788    }
<a name="l14789"></a>14789 
<a name="l14790"></a>14790    <span class="keyword">function</span> strip_comments($strip = <span class="keyword">false</span>)
<a name="l14791"></a>14791    {
<a name="l14792"></a>14792       $this-&gt;strip_comments = (bool) $strip;
<a name="l14793"></a>14793    }
<a name="l14794"></a>14794 
<a name="l14795"></a>14795    <span class="keyword">function</span> set_output_encoding($encoding = <span class="stringliteral">&#39;UTF-8&#39;</span>)
<a name="l14796"></a>14796    {
<a name="l14797"></a>14797       $this-&gt;output_encoding = (string) $encoding;
<a name="l14798"></a>14798    }
<a name="l14799"></a>14799 <span class="comment"></span>
<a name="l14800"></a>14800 <span class="comment">   /**</span>
<a name="l14801"></a>14801 <span class="comment">    * Set element/attribute key/value pairs of HTML attributes</span>
<a name="l14802"></a>14802 <span class="comment">    * containing URLs that need to be resolved relative to the feed</span>
<a name="l14803"></a>14803 <span class="comment">    *</span>
<a name="l14804"></a>14804 <span class="comment">    * @access public</span>
<a name="l14805"></a>14805 <span class="comment">    * @since 1.0</span>
<a name="l14806"></a>14806 <span class="comment">    * @param array $element_attribute Element/attribute key/value pairs</span>
<a name="l14807"></a>14807 <span class="comment">    */</span>
<a name="l14808"></a><a class="code" href="class_simple_pie___sanitize.html#a158b4566bc5d3251c9edb082a032f45b">14808</a>    <span class="keyword">function</span> set_url_replacements($element_attribute = array(<span class="charliteral">&#39;a&#39;</span> =&gt; <span class="stringliteral">&#39;href&#39;</span>, <span class="stringliteral">&#39;area&#39;</span> =&gt; <span class="stringliteral">&#39;href&#39;</span>, <span class="stringliteral">&#39;blockquote&#39;</span> =&gt; <span class="stringliteral">&#39;cite&#39;</span>, <span class="stringliteral">&#39;del&#39;</span> =&gt; <span class="stringliteral">&#39;cite&#39;</span>, <span class="stringliteral">&#39;form&#39;</span> =&gt; <span class="stringliteral">&#39;action&#39;</span>, <span class="stringliteral">&#39;img&#39;</span> =&gt; array(<span class="stringliteral">&#39;longdesc&#39;</span>, <span class="stringliteral">&#39;src&#39;</span>), <span class="stringliteral">&#39;input&#39;</span> =&gt; <span class="stringliteral">&#39;src&#39;</span>, <span class="stringliteral">&#39;ins&#39;</span> =&gt; <span class="stringliteral">&#39;cite&#39;</span>, <span class="charliteral">&#39;q&#39;</span> =&gt; <span class="stringliteral">&#39;cite&#39;</span>))
<a name="l14809"></a>14809    {
<a name="l14810"></a>14810       $this-&gt;replace_url_attributes = (array) $element_attribute;
<a name="l14811"></a>14811    }
<a name="l14812"></a>14812 
<a name="l14813"></a>14813    <span class="keyword">function</span> sanitize($data, $type, $base = <span class="stringliteral">&#39;&#39;</span>)
<a name="l14814"></a>14814    {
<a name="l14815"></a>14815       $data = trim($data);
<a name="l14816"></a>14816       <span class="keywordflow">if</span> ($data !== <span class="stringliteral">&#39;&#39;</span> || $type &amp; SIMPLEPIE_CONSTRUCT_IRI)
<a name="l14817"></a>14817       {
<a name="l14818"></a>14818          <span class="keywordflow">if</span> ($type &amp; SIMPLEPIE_CONSTRUCT_MAYBE_HTML)
<a name="l14819"></a>14819          {
<a name="l14820"></a>14820             <span class="keywordflow">if</span> (preg_match(<span class="stringliteral">&#39;/(&amp;(#(x[0-9a-fA-F]+|[0-9]+)|[a-zA-Z0-9]+)|&lt;\/[A-Za-z][^\x09\x0A\x0B\x0C\x0D\x20\x2F\x3E]*&#39;</span> . SIMPLEPIE_PCRE_HTML_ATTRIBUTE . <span class="stringliteral">&#39;&gt;)/&#39;</span>, $data))
<a name="l14821"></a>14821             {
<a name="l14822"></a>14822                $type |= SIMPLEPIE_CONSTRUCT_HTML;
<a name="l14823"></a>14823             }
<a name="l14824"></a>14824             <span class="keywordflow">else</span>
<a name="l14825"></a>14825             {
<a name="l14826"></a>14826                $type |= SIMPLEPIE_CONSTRUCT_TEXT;
<a name="l14827"></a>14827             }
<a name="l14828"></a>14828          }
<a name="l14829"></a>14829 
<a name="l14830"></a>14830          <span class="keywordflow">if</span> ($type &amp; SIMPLEPIE_CONSTRUCT_BASE64)
<a name="l14831"></a>14831          {
<a name="l14832"></a>14832             $data = base64_decode($data);
<a name="l14833"></a>14833          }
<a name="l14834"></a>14834 
<a name="l14835"></a>14835          <span class="keywordflow">if</span> ($type &amp; SIMPLEPIE_CONSTRUCT_XHTML)
<a name="l14836"></a>14836          {
<a name="l14837"></a>14837             <span class="keywordflow">if</span> ($this-&gt;remove_div)
<a name="l14838"></a>14838             {
<a name="l14839"></a>14839                $data = preg_replace(<span class="stringliteral">&#39;/^&lt;div&#39;</span> . SIMPLEPIE_PCRE_XML_ATTRIBUTE . <span class="stringliteral">&#39;&gt;/&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, $data);
<a name="l14840"></a>14840                $data = preg_replace(<span class="stringliteral">&#39;/&lt;\/div&gt;$/&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, $data);
<a name="l14841"></a>14841             }
<a name="l14842"></a>14842             <span class="keywordflow">else</span>
<a name="l14843"></a>14843             {
<a name="l14844"></a>14844                $data = preg_replace(<span class="stringliteral">&#39;/^&lt;div&#39;</span> . SIMPLEPIE_PCRE_XML_ATTRIBUTE . <span class="stringliteral">&#39;&gt;/&#39;</span>, <span class="stringliteral">&#39;&lt;div&gt;&#39;</span>, $data);
<a name="l14845"></a>14845             }
<a name="l14846"></a>14846          }
<a name="l14847"></a>14847 
<a name="l14848"></a>14848          <span class="keywordflow">if</span> ($type &amp; (SIMPLEPIE_CONSTRUCT_HTML | SIMPLEPIE_CONSTRUCT_XHTML))
<a name="l14849"></a>14849          {
<a name="l14850"></a>14850             <span class="comment">// Strip comments</span>
<a name="l14851"></a>14851             <span class="keywordflow">if</span> ($this-&gt;strip_comments)
<a name="l14852"></a>14852             {
<a name="l14853"></a>14853                $data = <a class="code" href="class_simple_pie___misc.html#a2436650ba85a28e64af9d386c1d600e0">SimplePie_Misc::strip_comments</a>($data);
<a name="l14854"></a>14854             }
<a name="l14855"></a>14855 
<a name="l14856"></a>14856             <span class="comment">// Strip out HTML tags and attributes that might cause various security problems.</span>
<a name="l14857"></a>14857             <span class="comment">// Based on recommendations by Mark Pilgrim at:</span>
<a name="l14858"></a>14858             <span class="comment">// http://diveintomark.org/archives/2003/06/12/how_to_consume_rss_safely</span>
<a name="l14859"></a>14859             <span class="keywordflow">if</span> ($this-&gt;strip_htmltags)
<a name="l14860"></a>14860             {
<a name="l14861"></a>14861                <span class="keywordflow">foreach</span> ($this-&gt;strip_htmltags as $tag)
<a name="l14862"></a>14862                {
<a name="l14863"></a>14863                   $pcre = <span class="stringliteral">&quot;/&lt;($tag)&quot;</span> . SIMPLEPIE_PCRE_HTML_ATTRIBUTE . <span class="stringliteral">&quot;(&gt;(.*)&lt;\/$tag&quot;</span> . SIMPLEPIE_PCRE_HTML_ATTRIBUTE . <span class="stringliteral">&#39;&gt;|(\/)?&gt;)/siU&#39;</span>;
<a name="l14864"></a>14864                   <span class="keywordflow">while</span> (preg_match($pcre, $data))
<a name="l14865"></a>14865                   {
<a name="l14866"></a>14866                      $data = preg_replace_callback($pcre, array(&amp;$this, <span class="stringliteral">&#39;do_strip_htmltags&#39;</span>), $data);
<a name="l14867"></a>14867                   }
<a name="l14868"></a>14868                }
<a name="l14869"></a>14869             }
<a name="l14870"></a>14870 
<a name="l14871"></a>14871             <span class="keywordflow">if</span> ($this-&gt;strip_attributes)
<a name="l14872"></a>14872             {
<a name="l14873"></a>14873                <span class="keywordflow">foreach</span> ($this-&gt;strip_attributes as $attrib)
<a name="l14874"></a>14874                {
<a name="l14875"></a>14875                   $data = preg_replace(<span class="stringliteral">&#39;/(&lt;[A-Za-z][^\x09\x0A\x0B\x0C\x0D\x20\x2F\x3E]*)&#39;</span> . SIMPLEPIE_PCRE_HTML_ATTRIBUTE . trim($attrib) . <span class="stringliteral">&#39;(?:\s*=\s*(?:&quot;(?:[^&quot;]*)&quot;|\&#39;(?:[^\&#39;]*)\&#39;|(?:[^\x09\x0A\x0B\x0C\x0D\x20\x22\x27\x3E][^\x09\x0A\x0B\x0C\x0D\x20\x3E]*)?))?&#39;</span> . SIMPLEPIE_PCRE_HTML_ATTRIBUTE . <span class="stringliteral">&#39;&gt;/&#39;</span>, <span class="stringliteral">&#39;\1\2\3&gt;&#39;</span>, $data);
<a name="l14876"></a>14876                }
<a name="l14877"></a>14877             }
<a name="l14878"></a>14878 
<a name="l14879"></a>14879             <span class="comment">// Replace relative URLs</span>
<a name="l14880"></a>14880             $this-&gt;base = $base;
<a name="l14881"></a>14881             <span class="keywordflow">foreach</span> ($this-&gt;replace_url_attributes as $element =&gt; $attributes)
<a name="l14882"></a>14882             {
<a name="l14883"></a>14883                $data = $this-&gt;replace_urls($data, $element, $attributes);
<a name="l14884"></a>14884             }
<a name="l14885"></a>14885 
<a name="l14886"></a>14886             <span class="comment">// If image handling (caching, etc.) is enabled, cache and rewrite all the image tags.</span>
<a name="l14887"></a>14887             <span class="keywordflow">if</span> (isset($this-&gt;image_handler) &amp;&amp; ((<span class="keywordtype">string</span>) $this-&gt;image_handler) !== <span class="stringliteral">&#39;&#39;</span> &amp;&amp; $this-&gt;enable_cache)
<a name="l14888"></a>14888             {
<a name="l14889"></a>14889                $images = SimplePie_Misc::get_element(<span class="stringliteral">&#39;img&#39;</span>, $data);
<a name="l14890"></a>14890                <span class="keywordflow">foreach</span> ($images as $img)
<a name="l14891"></a>14891                {
<a name="l14892"></a>14892                   <span class="keywordflow">if</span> (isset($img[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;src&#39;</span>][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l14893"></a>14893                   {
<a name="l14894"></a>14894                      $image_url = call_user_func($this-&gt;cache_name_function, $img[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;src&#39;</span>][<span class="stringliteral">&#39;data&#39;</span>]);
<a name="l14895"></a>14895                      $cache = call_user_func(array($this-&gt;cache_class, <span class="stringliteral">&#39;create&#39;</span>), $this-&gt;cache_location, $image_url, <span class="stringliteral">&#39;spi&#39;</span>);
<a name="l14896"></a>14896 
<a name="l14897"></a>14897                      <span class="keywordflow">if</span> ($cache-&gt;load())
<a name="l14898"></a>14898                      {
<a name="l14899"></a>14899                         $img[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;src&#39;</span>][<span class="stringliteral">&#39;data&#39;</span>] = $this-&gt;image_handler . $image_url;
<a name="l14900"></a>14900                         $data = str_replace($img[<span class="stringliteral">&#39;full&#39;</span>], SimplePie_Misc::element_implode($img), $data);
<a name="l14901"></a>14901                      }
<a name="l14902"></a>14902                      <span class="keywordflow">else</span>
<a name="l14903"></a>14903                      {
<a name="l14904"></a>14904                         $file =&amp; <span class="keyword">new</span> $this-&gt;file_class($img[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;src&#39;</span>][<span class="stringliteral">&#39;data&#39;</span>], $this-&gt;timeout, 5, array(<span class="stringliteral">&#39;X-FORWARDED-FOR&#39;</span> =&gt; $_SERVER[<span class="stringliteral">&#39;REMOTE_ADDR&#39;</span>]), $this-&gt;useragent, $this-&gt;force_fsockopen);
<a name="l14905"></a>14905                         $headers = $file-&gt;headers;
<a name="l14906"></a>14906 
<a name="l14907"></a>14907                         <span class="keywordflow">if</span> ($file-&gt;success &amp;&amp; ($file-&gt;method &amp; SIMPLEPIE_FILE_SOURCE_REMOTE === 0 || ($file-&gt;status_code === 200 || $file-&gt;status_code &gt; 206 &amp;&amp; $file-&gt;status_code &lt; 300)))
<a name="l14908"></a>14908                         {
<a name="l14909"></a>14909                            <span class="keywordflow">if</span> ($cache-&gt;save(array(<span class="stringliteral">&#39;headers&#39;</span> =&gt; $file-&gt;headers, <span class="stringliteral">&#39;body&#39;</span> =&gt; $file-&gt;body)))
<a name="l14910"></a>14910                            {
<a name="l14911"></a>14911                               $img[<span class="stringliteral">&#39;attribs&#39;</span>][<span class="stringliteral">&#39;src&#39;</span>][<span class="stringliteral">&#39;data&#39;</span>] = $this-&gt;image_handler . $image_url;
<a name="l14912"></a>14912                               $data = str_replace($img[<span class="stringliteral">&#39;full&#39;</span>], SimplePie_Misc::element_implode($img), $data);
<a name="l14913"></a>14913                            }
<a name="l14914"></a>14914                            <span class="keywordflow">else</span>
<a name="l14915"></a>14915                            {
<a name="l14916"></a>14916                               trigger_error(<span class="stringliteral">&quot;$this-&gt;cache_location is not writeable&quot;</span>, E_USER_WARNING);
<a name="l14917"></a>14917                            }
<a name="l14918"></a>14918                         }
<a name="l14919"></a>14919                      }
<a name="l14920"></a>14920                   }
<a name="l14921"></a>14921                }
<a name="l14922"></a>14922             }
<a name="l14923"></a>14923 
<a name="l14924"></a>14924             <span class="comment">// Having (possibly) taken stuff out, there may now be whitespace at the beginning/end of the data</span>
<a name="l14925"></a>14925             $data = trim($data);
<a name="l14926"></a>14926          }
<a name="l14927"></a>14927 
<a name="l14928"></a>14928          <span class="keywordflow">if</span> ($type &amp; SIMPLEPIE_CONSTRUCT_IRI)
<a name="l14929"></a>14929          {
<a name="l14930"></a>14930             $data = SimplePie_Misc::absolutize_url($data, $base);
<a name="l14931"></a>14931          }
<a name="l14932"></a>14932 
<a name="l14933"></a>14933          <span class="keywordflow">if</span> ($type &amp; (SIMPLEPIE_CONSTRUCT_TEXT | SIMPLEPIE_CONSTRUCT_IRI))
<a name="l14934"></a>14934          {
<a name="l14935"></a>14935             $data = htmlspecialchars($data, ENT_COMPAT, <span class="stringliteral">&#39;UTF-8&#39;</span>);
<a name="l14936"></a>14936          }
<a name="l14937"></a>14937 
<a name="l14938"></a>14938          <span class="keywordflow">if</span> ($this-&gt;output_encoding !== <span class="stringliteral">&#39;UTF-8&#39;</span>)
<a name="l14939"></a>14939          {
<a name="l14940"></a>14940             $data = SimplePie_Misc::change_encoding($data, <span class="stringliteral">&#39;UTF-8&#39;</span>, $this-&gt;output_encoding);
<a name="l14941"></a>14941          }
<a name="l14942"></a>14942       }
<a name="l14943"></a>14943       <span class="keywordflow">return</span> $data;
<a name="l14944"></a>14944    }
<a name="l14945"></a>14945 
<a name="l14946"></a>14946    <span class="keyword">function</span> replace_urls($data, $tag, $attributes)
<a name="l14947"></a>14947    {
<a name="l14948"></a>14948       <span class="keywordflow">if</span> (!is_array($this-&gt;strip_htmltags) || !in_array($tag, $this-&gt;strip_htmltags))
<a name="l14949"></a>14949       {
<a name="l14950"></a>14950          $elements = SimplePie_Misc::get_element($tag, $data);
<a name="l14951"></a>14951          <span class="keywordflow">foreach</span> ($elements as $element)
<a name="l14952"></a>14952          {
<a name="l14953"></a>14953             <span class="keywordflow">if</span> (is_array($attributes))
<a name="l14954"></a>14954             {
<a name="l14955"></a>14955                <span class="keywordflow">foreach</span> ($attributes as $attribute)
<a name="l14956"></a>14956                {
<a name="l14957"></a>14957                   <span class="keywordflow">if</span> (isset($element[<span class="stringliteral">&#39;attribs&#39;</span>][$attribute][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l14958"></a>14958                   {
<a name="l14959"></a>14959                      $element[<span class="stringliteral">&#39;attribs&#39;</span>][$attribute][<span class="stringliteral">&#39;data&#39;</span>] = SimplePie_Misc::absolutize_url($element[<span class="stringliteral">&#39;attribs&#39;</span>][$attribute][<span class="stringliteral">&#39;data&#39;</span>], $this-&gt;base);
<a name="l14960"></a>14960                      $new_element = SimplePie_Misc::element_implode($element);
<a name="l14961"></a>14961                      $data = str_replace($element[<span class="stringliteral">&#39;full&#39;</span>], $new_element, $data);
<a name="l14962"></a>14962                      $element[<span class="stringliteral">&#39;full&#39;</span>] = $new_element;
<a name="l14963"></a>14963                   }
<a name="l14964"></a>14964                }
<a name="l14965"></a>14965             }
<a name="l14966"></a>14966             elseif (isset($element[<span class="stringliteral">&#39;attribs&#39;</span>][$attributes][<span class="stringliteral">&#39;data&#39;</span>]))
<a name="l14967"></a>14967             {
<a name="l14968"></a>14968                $element[<span class="stringliteral">&#39;attribs&#39;</span>][$attributes][<span class="stringliteral">&#39;data&#39;</span>] = SimplePie_Misc::absolutize_url($element[<span class="stringliteral">&#39;attribs&#39;</span>][$attributes][<span class="stringliteral">&#39;data&#39;</span>], $this-&gt;base);
<a name="l14969"></a>14969                $data = str_replace($element[<span class="stringliteral">&#39;full&#39;</span>], SimplePie_Misc::element_implode($element), $data);
<a name="l14970"></a>14970             }
<a name="l14971"></a>14971          }
<a name="l14972"></a>14972       }
<a name="l14973"></a>14973       <span class="keywordflow">return</span> $data;
<a name="l14974"></a>14974    }
<a name="l14975"></a>14975 
<a name="l14976"></a>14976    <span class="keyword">function</span> do_strip_htmltags($match)
<a name="l14977"></a>14977    {
<a name="l14978"></a>14978       <span class="keywordflow">if</span> ($this-&gt;encode_instead_of_strip)
<a name="l14979"></a>14979       {
<a name="l14980"></a>14980          <span class="keywordflow">if</span> (isset($match[4]) &amp;&amp; !in_array(strtolower($match[1]), array(<span class="stringliteral">&#39;script&#39;</span>, <span class="stringliteral">&#39;style&#39;</span>)))
<a name="l14981"></a>14981          {
<a name="l14982"></a>14982             $match[1] = htmlspecialchars($match[1], ENT_COMPAT, <span class="stringliteral">&#39;UTF-8&#39;</span>);
<a name="l14983"></a>14983             $match[2] = htmlspecialchars($match[2], ENT_COMPAT, <span class="stringliteral">&#39;UTF-8&#39;</span>);
<a name="l14984"></a>14984             <span class="keywordflow">return</span> <span class="stringliteral">&quot;&amp;lt;$match[1]$match[2]&amp;gt;$match[3]&amp;lt;/$match[1]&amp;gt;&quot;</span>;
<a name="l14985"></a>14985          }
<a name="l14986"></a>14986          <span class="keywordflow">else</span>
<a name="l14987"></a>14987          {
<a name="l14988"></a>14988             <span class="keywordflow">return</span> htmlspecialchars($match[0], ENT_COMPAT, <span class="stringliteral">&#39;UTF-8&#39;</span>);
<a name="l14989"></a>14989          }
<a name="l14990"></a>14990       }
<a name="l14991"></a>14991       elseif (isset($match[4]) &amp;&amp; !in_array(strtolower($match[1]), array(<span class="stringliteral">&#39;script&#39;</span>, <span class="stringliteral">&#39;style&#39;</span>)))
<a name="l14992"></a>14992       {
<a name="l14993"></a>14993          <span class="keywordflow">return</span> $match[4];
<a name="l14994"></a>14994       }
<a name="l14995"></a>14995       <span class="keywordflow">else</span>
<a name="l14996"></a>14996       {
<a name="l14997"></a>14997          <span class="keywordflow">return</span> <span class="stringliteral">&#39;&#39;</span>;
<a name="l14998"></a>14998       }
<a name="l14999"></a>14999    }
<a name="l15000"></a>15000 }
<a name="l15001"></a>15001 
<a name="l15002"></a>15002 ?&gt;
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Mon Mar 12 2012 16:01:56 for CBP Platform by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
